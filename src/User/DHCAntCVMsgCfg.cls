Class User.DHCAntCVMsgCfg Extends %Persistent [ SqlTableName = DHC_AntCVMsgCfg ]
{

/// 就诊类型
Property CVMCAdmType As %String(COLLATION = "Exact") [ SqlColumnNumber = 2, SqlFieldName = CVMC_AdmType ];

/// 就诊科室
Property CVMCAdmLoc As %String(COLLATION = "Exact") [ SqlColumnNumber = 3, SqlFieldName = CVMC_AdmLoc ];

/// 第几次发送次数
Property CVMCSendTimes As %Integer [ SqlColumnNumber = 4, SqlFieldName = CVMC_SendTimes ];

/// 距首次发送时间时间（分钟）
Property CVMCSendInterval As %Integer [ SqlColumnNumber = 5, SqlFieldName = CVMC_SendInterval ];

/// 危急值类型
Property CVMCCVTypes As %String [ SqlColumnNumber = 6, SqlFieldName = CVMC_CVTypes ];

/// 开始时间
Property CVMCStartTime As %Time [ SqlColumnNumber = 7, SqlFieldName = CVMC_StartTime ];

/// 结束时间
Property CVMCEndTime As %Time [ SqlColumnNumber = 8, SqlFieldName = CVMC_EndTime ];

/// 接收对象代码
Property CVMCReceiveCode As %String [ SqlColumnNumber = 9, SqlFieldName = CVMC_ReceiveCode ];

/// 危急值子类型 华西 标版未用
Property CVMCCVChildTypes As %String(MAXLEN = 500) [ SqlColumnNumber = 10, SqlFieldName = CVMC_CVChildTypes ];

Property CVMCAdmHospital As %String(COLLATION = "Exact") [ SqlColumnNumber = 11, SqlFieldName = CVMC_AdmHospital ];

/// 周几 
Property CVMCDaysOfWeek As %String [ SqlColumnNumber = 12, SqlFieldName = CVMC_DaysOfWeek ];

/// 发送方式
Property CVMCSendMode As %String [ SqlColumnNumber = 13, SqlFieldName = CVMC_SendMode ];

/// 此接收对象的目标角色
Property CVMCTargetRole As %String [ SqlColumnNumber = 14, SqlFieldName = CVMC_TargetRole ];

/// 结果需包含
Property CVMCResultContains As %String [ SqlColumnNumber = 15, SqlFieldName = CVMC_ResultContains ];

Index AdmTypeLocTimes On (CVMCAdmType, CVMCAdmLoc, CVMCSendTimes);

/// 医院 就诊类型 科室 发送次数
Index HTLT On (CVMCAdmHospital, CVMCAdmType, CVMCAdmLoc, CVMCSendTimes);

/// d ##class(%ResultSet).RunQuery("User.DHCAntCVMsgCfg","Find")
Query Find() As websys.Query(CONTAINID = 1, ROWSPEC = "TId:%String,TAdmLoc:%String,TAdmType:%String,TCVTypes:%String,TEndTime:%String,TReceiveCode:%String,TSendInterval:%String,TSendTimes:%String,TStartTime:%String")
{
}

/// Generated by a.util.U5 at 2018-06-20 10:00:35
ClassMethod FindExecute(ByRef QHandle As %Library.Binary) As %Library.Status
{
	s repid=$I(^CacheTemp)
	s ind=1
	s QHandle=$lb(0,repid,0)
	set TId=""
	for {
		Set TId=$o(^User.DHCAntCVMsgCfgD(TId))
		Quit:TId=""
		set g=^User.DHCAntCVMsgCfgD(TId)
		set TAdmLoc=$lg(g,3)
		set TAdmType=$lg(g,2)
		set TCVTypes=$lg(g,6)
		set TEndTime=$lg(g,8)
		set TReceiveCode=$lg(g,9)
		set TSendInterval=$lg(g,5)
		set TSendTimes=$lg(g,4)
		set TStartTime=$lg(g,7)
		Set ^CacheTemp(repid,ind)=$lb(TId,TAdmLoc,TAdmType,TCVTypes,TEndTime,TReceiveCode,TSendInterval,TSendTimes,TStartTime)
		set ind=ind+1
	}
	Set QHandle=$lb(0,repid,0) 
	Quit $$$OK
}

Storage Default
{
<Data name="DHCAntCVMsgCfgDefaultData">
<Value name="1">
<Value>%%CLASSNAME</Value>
</Value>
<Value name="2">
<Value>CVMCAdmType</Value>
</Value>
<Value name="3">
<Value>CVMCAdmLoc</Value>
</Value>
<Value name="4">
<Value>CVMCSendTimes</Value>
</Value>
<Value name="5">
<Value>CVMCSendInterval</Value>
</Value>
<Value name="6">
<Value>CVMCCVTypes</Value>
</Value>
<Value name="7">
<Value>CVMCStartTime</Value>
</Value>
<Value name="8">
<Value>CVMCEndTime</Value>
</Value>
<Value name="9">
<Value>CVMCReceiveCode</Value>
</Value>
<Value name="10">
<Value>CVMCCVChildTypes</Value>
</Value>
<Value name="11">
<Value>CVMCAdmHospital</Value>
</Value>
<Value name="12">
<Value>CVMCDaysOfWeek</Value>
</Value>
<Value name="13">
<Value>CVMCSendMode</Value>
</Value>
<Value name="14">
<Value>CVMCTargetRole</Value>
</Value>
<Value name="15">
<Value>CVMCResultContains</Value>
</Value>
</Data>
<DataLocation>^User.DHCAntCVMsgCfgD</DataLocation>
<DefaultData>DHCAntCVMsgCfgDefaultData</DefaultData>
<IdLocation>^User.DHCAntCVMsgCfgD</IdLocation>
<IndexLocation>^User.DHCAntCVMsgCfgI</IndexLocation>
<StreamLocation>^User.DHCAntCVMsgCfgS</StreamLocation>
<Type>%Storage.Persistent</Type>
}

}
