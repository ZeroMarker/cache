(function(){	Ext.ns("dhcwl.mkpi.KpiModuleManager");})();dhcwl.mkpi.KpiModuleManager=function(){	var moduleCfgPanel=null,rptCfgPanel=null,datasetCfgPanel=null;	var moduleCfgObj=null,rptCfgObj=null,datasetCfgObj=null;	var searchPanel=null,searchObj=null;	var searchResultPanel=null,SearchResultObj=null;	//模块配置页面	moduleCfgObj=new dhcwl.mkpi.KpiModuleCfg();	moduleCfgPanel=moduleCfgObj.getModuleCfgPanel();		//报表配置页面		rptCfgObj=new dhcwl.mkpi.KpiRptCfg();	rptCfgPanel=rptCfgObj.getRptCfgPanel();		//指标配置页面	datasetCfgObj=new dhcwl.mkpi.KpiDatasetCfg();	datasetCfgPanel=datasetCfgObj.getDatasetCfgPanel();		//searchObj=new dhcwl.mkpi.KpiSearchConditions();	//searchPanel=searchObj.getSearchPanel();	//数据搜索界面	SearchResultObj=new dhcwl.mkpi.KpiSearchResult();	searchResultPanel=SearchResultObj.getSearchResultPanel();			//if (mmSEDateCfgObj==null) {	var	mmSEDateCfgObj=new dhcwl.mkpi.KpiMMgrSEDateCfg();	var mmSEDateKpiCfgObj=new dhcwl.mkpi.KpiMMgrSEDateKpiCfg();	//}	moduleCfgObj.setSEDateCfgObj(mmSEDateCfgObj);	rptCfgObj.setSEDateCfgObj(mmSEDateCfgObj);	datasetCfgObj.setSEDateCfgObj(mmSEDateKpiCfgObj);		moduleCfgObj.setRptObj(rptCfgObj);	rptCfgObj.setDSObj(datasetCfgObj);	rptCfgObj.setModuleTree(moduleCfgObj.getModuleTree());	var loadFn = function(btn){        btn = Ext.getCmp(btn);        //statusBar = Ext.getCmp(statusBar);        btn.disable();        //statusBar.showBusy();		(function(){			var sObj=Ext.get('ComboObjID').getValue();			var sAttrib=Ext.get('ComboAttribID').getValue();			var sValue=Ext.get('searchValue').getValue();			moduleCfgObj.setSearchObj(sObj,sAttrib,sValue);			rptCfgObj.setSearchObj(sObj,sAttrib,sValue);			datasetCfgObj.setSearchObj(sObj,sAttrib,sValue);						Ext.ComponentMgr.get('cfgTreePanel').expandAll();						//statusBar.clearStatus({useDefaults:true});            btn.enable();		}).defer(3000)    };					comboObj = [        ['mode','模块'],        ['table','报表'],        ['dataset','数据集'],        ['kpi','指标']    ];comboAttrib = [		['code','编码'],		['desc','描述']	];		var KpiModuleManagerPanel=new Ext.Panel({	 		id:"modeManagerPanel",			title:'模块与报表',			layout:'border',			autoScroll:true,		defaults: {		    //collapsible: true,		    split: true,		    bodyStyle: 'padding:5px'		},		tbar: [ 			' ','对象：',       		new Ext.form.ComboBox({       			id:'ComboObjID',		        store: comboObj,		        typeAhead: true,		        forceSelection: true,		        triggerAction: 'all',		        editable:true,		        width: 100,        		        selectOnFocus:true   		    }),' ',' ',' ',' ','属性：',      		new Ext.form.ComboBox({       			id:'ComboAttribID',		        store: comboAttrib,		        typeAhead: true,		        forceSelection: true,		        triggerAction: 'all',		        editable:true,		        width: 100,		        selectOnFocus:true   		    }),' ',' ',' ',' ',' ',' ',' ',' ','值：',     				new Ext.form.TextField({				id:'searchValue',				width: 100				//emptyText:'Find a Class' 			}), '    ', '-','-',			{           //text:'查询',           	text: '<span style="line-Height:1">查询</span>',           	icon: '../images/uiimages/search.png',           	id:'search-btn',            handler: onSearch,           	//handler: loadFn.createCallback('search-btn', 'imp-statusbar'),            scope: this       	        	},"-",{           	//text:'清空',           	text: '<span style="line-Height:1">清空</span>',           	icon: '../images/uiimages/clearscreen.png',            handler: onClear,            scope: this       	        	}        	/*,'-',        	        	{        	text:'查找',        	handler: onLookFor        	},'-',{        	text:'树结构',        	handler:onShowTree        	}        	*/],  												items: [{			id:"modeCfgPanel",		    //title: '模块管理',		    region:'west',		    margins: '5 0 0 0',		    cmargins: '5 5 0 0',		    width: 330,		    minSize: 100,		    maxSize: 500,		    layout:'fit',		    //items:[moduleCfgPanel,searchPanel]		    items:[moduleCfgPanel]		},{		    //title: '报表及指标',		    //collapsible: false,		    region:'center',		    layout:'fit',		    margins: '5 0 0 0',		    cmargins: '5 5 0 0',		    items:[{		    	region:'center',			    layout:'fit',			    items:[{			    	layout:'border',				    items:[{				    		id:"reportCfgPanel",				    		region:'center',				    		//height: 300,				    		items:rptCfgPanel,				    		layout:'fit'					    },{					    	 id:"KPICfgPanel",					    	 region:'south',					    	 height: 240,			//这个必须得有					    	 items:datasetCfgPanel,					    	 layout:'fit'				    }]			    }]		    	/*id:"reportCfgPanel",		    	//collapsible: true,			    title: '报表管理',			    minSize: 100,			    height: 300,			    layout:'fit',			    maxSize: 550,			    items:rptCfgPanel			    },{			    id:"KPICfgPanel",			    //collapsible: true,			    title: '数据集管理',			    height: 300,			    layout:'fit',			    minSize: 100,			    maxSize: 500,			    items:datasetCfgPanel*/		    }/*,searchResultPanel*/]		}]		    });    this.getModuleManagerPanel=function(){    	return KpiModuleManagerPanel;    }    function onSearch(){		var sObj=Ext.get('ComboObjID').getValue();		var sAttrib=Ext.get('ComboAttribID').getValue();		var sValue=Ext.get('searchValue').getValue();				//Ext.getBody().mask("数据处理中，请稍等");   				moduleCfgObj.setSearchObj(sObj,sAttrib,sValue);		rptCfgObj.setSearchObj(sObj,sAttrib,sValue);		datasetCfgObj.setSearchObj(sObj,sAttrib,sValue);				//Ext.ComponentMgr.get('cfgTreePanel').expandAll();		moduleCfgObj.expandAllNode();		  		//alert(sObj);    }	function onClear(){				var sObj=Ext.getCmp('ComboObjID').setValue("");		var sAttrib=Ext.getCmp('ComboAttribID').setValue("");		var sValue=Ext.getCmp('searchValue').setValue("");    			}	function onLookFor(){			//moduleCfgPanel.hide();			if (searchObj==null){				searchObj=new dhcwl.mkpi.KpiSearchConditions();				searchPanel=searchObj.getSearchPanel();			}			/*			 			moduleCfgPanel.removeAll();			moduleCfgPanel.add(searchPanel);			moduleCfgPanel.doLayout();			*/			moduleCfgPanel.hide();			Ext.getCmp('reportCfgPanel').hide();			Ext.getCmp('KPICfgPanel').hide();						searchPanel.show();			searchResultPanel.show();		//}			}		function onShowTree(){		if(!moduleCfgPanel.isVisible()) {			searchPanel.hide();			searchResultPanel.hide();			moduleCfgPanel.show();			Ext.getCmp('reportCfgPanel').show();			Ext.getCmp('KPICfgPanel').show();			}	}		}