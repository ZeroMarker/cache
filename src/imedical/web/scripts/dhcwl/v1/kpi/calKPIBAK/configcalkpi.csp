<!--
	Creator  : wk
	CreatDate: 2018-05-02
	Desc     : 计算指标配置界面
-->﻿

<csp:method name=OnPreHTTP arguments="" returntype=%Boolean>
 i ##Class(websys.SessionEvents).SessionExpired() q 1
 quit 1
</csp:method>
<!--websys.iconprofile.csp //-->
<!DOCTYPE html>
<html lang="en">
<head>
	<TITLE><EXTHEALTH:TRANSLATE id=title>##(%session.Get("TITLE"))##</EXTHEALTH:TRANSLATE></TITLE>
	<EXTHEALTH:HEAD></EXTHEALTH:HEAD>
	<HISUI/>
	<!--引入本组css-->
	<link rel="stylesheet" href="../scripts/dhcwl/v1/common.css" type="text/css" />
	<!--自定义css样式-->
	<style>
		#calKPISymbol>tbody>tr>td>a{
			width:44px;
			height:35px;
		}
		#calKPISymbol{
			position:absolute;
			top:50%;
			left:50%;
			margin-top:-75px;
			margin-left:-47px;
		}
		#kpiCondition ul li{
			padding-top:4px;
		}
		#kpiCondition ul li label{
			padding-left:4px;
			width:60px;
			display:inline-block;
		}
		.my-interface>div.panel>div.panel-body>div.panel>div.panel-header{
			border-color:#ddd;
		}
	</style>
</head>
<body class="hisui-layout my-interface">
	<div data-options="region:'west',headerCls:'panel-header-gray'" style="padding:5px;width:500px">
		<table id="kpiForSelectTable" data-options="fit:true,singleSelect:true">
			<thead>
				<tr>
					<th data-options="field:'ID',width:'70'">ID</th>   
					<th data-options="field:'kpiCode',width:'150'">编码</th>   
					<th data-options="field:'kpiName',width:'150'">指标名称</th>
					<th data-options="field:'dimType',width:'150'">维度</th>
					<th data-options="field:'measure',width:'150'">度量</th>
					<th data-options="field:'kpiExcode',width:'200'">执行代码</th>
					<th data-options="field:'dataNode',width:'100'">数据节点</th>
					<th data-options="field:'MKPIGlobalFlag',width:'80'">global取值</th>
					<th data-options="field:'createUser',width:'80'">创建者</th>
					<th data-options="field:'updateDate',width:'100'">更新日期</th>
					<th data-options="field:'kpiDesc',width:'100'">指标描述</th>
					<th data-options="field:'category',width:'100'">类型</th>
					<th data-options="field:'section',width:'100'">区间</th>
					<th data-options="field:'getValueType',width:'100'">取值方式</th>
					<th data-options="field:'nodeMark',width:'200'">备注</th>
				</tr>
			</thead>
		</table>
	</div>
	
	<div data-options="region:'center',headerCls:'panel-header-gray'" style="padding:5px;fit:true">
		<table id="calKPISymbol">
		 	<tbody>
		 		<tr>
		 			<td><a href="#" class="hisui-linkbutton hover-dark">(</a></td>
		 			<td><a href="#" class="hisui-linkbutton hover-dark">)</a></td>
		 		</tr>
		 		<tr>
		 			<td><a href="#" class="hisui-linkbutton hover-dark">+</a></td>
		 			<td><a href="#" class="hisui-linkbutton hover-dark">-</a></td>
		 		</tr>
		 		<tr>
		 			<td><a href="#" class="hisui-linkbutton hover-dark">*</a></td>
		 			<td><a href="#" class="hisui-linkbutton hover-dark">/</a></td>
		 		</tr>
		 		<tr>
		 			<td><a href="#" class="hisui-linkbutton hover-dark">←</a></td>
		 			<td><a href="#" class="hisui-linkbutton hover-dark">C</a></td>
		 		</tr>
		 	</tbody>
		</table>
	</div>
	
	<div data-options="region:'east',headerCls:'panel-header-gray'" style="padding:5px;width:500px">
		<div class="hisui-panel" title="计算指标运算规则" data-options="iconCls:'icon-add-note',headerCls:'panel-header-gray',fit:true">
			<div id="kpiCondition">
				<ul>
					<li>
						<label for="kpiRuleConfig">运算规则</label>
						<input class='hisui-validatebox' type='text' id='calRule' data-options='required:false' style="width:400px"></input>
						
					</li>
					<li>
						<label for="kpiFilterConfig">汇总维度</label>
						<input class="hisui-validatebox" type="text" id="sumDim" data-options="required:false" style="width:365px"></input>
						<a href="javascript:void(0)" id="kpiFilterButton" class="hisui-linkbutton" data-options="iconCls:'icon-reset',plain:true"></a>
						
					</li>
					<li>	
						<label>提示:</label>
						<font>参与运算的指标的汇总维度必须与计算指标的维度一一对应！</font>
					</li>
				</ul>
			</div>
		</div>
	</div>
	
	<script charset="utf-8" type="text/javascript" src="../scripts/dhcwl/v1/kpi/configcalkpi.js"></script>
	<script charset="utf-8" type="text/javascript" src="../scripts/dhcwl/v1/kpi/util.js"></script>	
	<!--当前csp文件路径CSPURL-->
  	<span style="display:none;">#(%request.URL)#</span>
</body>
</html>
