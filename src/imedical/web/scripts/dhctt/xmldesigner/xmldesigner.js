"undefined"==typeof XML&&(XML=function(){}),XML.ObjTree=function(){return this},XML.ObjTree.VERSION="0.23",XML.ObjTree.prototype.xmlDecl='<?xml version="1.0" encoding="gb2312" ?>\n',XML.ObjTree.prototype.attr_prefix="-",XML.ObjTree.prototype.parseXML=function(t){var e;if(window.DOMParser){var a=new DOMParser,n=a.parseFromString(t,"application/xml");if(!n)return;e=n.documentElement}else window.ActiveXObject&&((a=new ActiveXObject("Microsoft.XMLDOM")).async=!1,a.loadXML(t),e=a.documentElement);if(e)return this.parseDOM(e)},XML.ObjTree.prototype.parseHTTP=function(t,e,a){var n,d={};for(var l in e)d[l]=e[l];if(d.method||("undefined"==typeof d.postBody&&"undefined"==typeof d.postbody&&"undefined"==typeof d.parameters?d.method="get":d.method="post"),a){d.asynchronous=!0;var i=this,r=a,o=d.onComplete;d.onComplete=function(t){var e;t&&t.responseXML&&t.responseXML.documentElement&&(e=i.parseDOM(t.responseXML.documentElement)),r(e,t),o&&o(t)}}else d.asynchronous=!1;if("undefined"!=typeof HTTP&&HTTP.Request)d.uri=t,(s=new HTTP.Request(d))&&(n=s.transport);else if("undefined"!=typeof Ajax&&Ajax.Request){var s;(s=new Ajax.Request(t,d))&&(n=s.transport)}return a?n:n&&n.responseXML&&n.responseXML.documentElement?this.parseDOM(n.responseXML.documentElement):void 0},XML.ObjTree.prototype.parseDOM=function(t){if(t){if(this.__force_array={},this.force_array)for(var e=0;e<this.force_array.length;e++)this.__force_array[this.force_array[e]]=1;var a=this.parseElement(t);if(this.__force_array[t.nodeName]&&(a=[a]),11!=t.nodeType){var n={};n[t.nodeName]=a,a=n}return a}},XML.ObjTree.prototype.parseElement=function(t){if(7!=t.nodeType){if(3==t.nodeType||4==t.nodeType){if(null==t.nodeValue.match(/[^\x00-\x20]/))return;return t.nodeValue}var e,a={};if(t.attributes&&t.attributes.length){e={};for(var n=0;n<t.attributes.length;n++){if("string"==typeof(i=t.attributes[n].nodeName))(r=t.attributes[n].nodeValue)&&("undefined"==typeof a[i=this.attr_prefix+i]&&(a[i]=0),a[i]++,this.addNode(e,i,a[i],r))}}if(t.childNodes&&t.childNodes.length){var d=!0;e&&(d=!1);for(n=0;n<t.childNodes.length&&d;n++){var l=t.childNodes[n].nodeType;3!=l&&4!=l&&(d=!1)}if(d){e=e||"";for(n=0;n<t.childNodes.length;n++)e+=t.childNodes[n].nodeValue}else{e=e||{};for(n=0;n<t.childNodes.length;n++){var i,r;if("string"==typeof(i=t.childNodes[n].nodeName))(r=this.parseElement(t.childNodes[n]))&&("undefined"==typeof a[i]&&(a[i]=0),a[i]++,this.addNode(e,i,a[i],r))}}}return e}},XML.ObjTree.prototype.addNode=function(t,e,a,n){this.__force_array[e]?(1==a&&(t[e]=[]),t[e][t[e].length]=n):1==a?t[e]=n:2==a?t[e]=[t[e],n]:t[e][t[e].length]=n},XML.ObjTree.prototype.writeXML=function(t){var e=this.hash_to_xml(null,t);return this.xmlDecl+e},XML.ObjTree.prototype.hash_to_xml=function(t,e){var a=[],n=[];for(var d in e)if(e.hasOwnProperty(d)){var l=e[d];d.charAt(0)!=this.attr_prefix?void 0===l||null==l?a[a.length]="<"+d+" />":"object"==typeof l&&l.constructor==Array?a[a.length]=this.array_to_xml(d,l):a[a.length]="object"==typeof l?this.hash_to_xml(d,l):this.scalar_to_xml(d,l):n[n.length]=" "+d.substring(1)+'="'+this.xml_escape(l)+'"'}var i=n.join(""),r=a.join("");return void 0===t||null==t||(r=0<a.length?r.match(/\n/)?"<"+t+i+">\n"+r+"</"+t+">\n":"<"+t+i+">"+r+"</"+t+">\n":"<"+t+i+" />\n"),r},XML.ObjTree.prototype.array_to_xml=function(t,e){for(var a=[],n=0;n<e.length;n++){var d=e[n];void 0===d||null==d?a[a.length]="<"+t+" />":"object"==typeof d&&d.constructor==Array?a[a.length]=this.array_to_xml(t,d):a[a.length]="object"==typeof d?this.hash_to_xml(t,d):this.scalar_to_xml(t,d)}return a.join("")},XML.ObjTree.prototype.scalar_to_xml=function(t,e){return"#text"==t?this.xml_escape(e):"<"+t+">"+this.xml_escape(e)+"</"+t+">\n"},XML.ObjTree.prototype.xml_escape=function(t){return(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},"undefined"==typeof xmldesigner&&(xmldesigner={}),xmldesigner.label={},function(o){var s=xmldesigner.label;s.data=[];var t="x-label",e="labelTpl";function a(t){var e=xmldesigner.label.type;t==s.data.length&&(s.data[t]={id:e+t,name:e+t,ind:t,type:e,x:10,y:10,defaultvalue:e+t,fontsize:10,fontname:"宋体",text:e+t,fontbold:"false",height:"",width:"",angle:0});var a=s.data[t],n="";a["-name"]?(a.name=a["-name"],a.defaultvalue=a["-defaultvalue"],a.x=ptToPx(a["-xcol"]),a.y=ptToPx(a["-yrow"]),a.fontname=a["-fontname"]||"宋体",a.fontsize=a["-fontsize"],a.height=isNaN(ptToPx(a["-height"]))?"":ptToPx(a["-height"]),a.width=isNaN(ptToPx(a["-width"]))?"":ptToPx(a["-width"]),"C39P36DmTt"==a.fontname&&(a.fontsize=pxToPt(a.fontsize)),a.angle=a["-angle"]||0,n=a["-fontbold"],deleteProps(a,["-width","-height","-name","-defaultvalue","-xcol","-yrow","-fontsize","-fontname","-fontbold","-angle"])):n=a.fontbold,"false"!=n?(a.fontweight="bold",a.fontbold="true"):(a.fontweight="normal",a.fontbold="false"),a.id=e+t,a.type=e,a.ind=t,a.text=a.defaultvalue||"["+a.name+"]";var d=o("#"+a.id);0<d.length?(d.attr("name",a.name).css("left",a.x).css("top",a.y),d.css("font-size",a.fontsize+"pt").css("font-family",a.fontname).css("font-weight",a.fontweight),d.css("width",a.width).css("height",a.height).css("transform","rotate(-"+a.angle+"deg)"),d.text(a.text)):o.tmpl(xmldesigner.label.tplName,a).appendTo("#dbLayout")}o.template(e,"<div id='${id}' name='${name}' data-ind='${ind}' data-type='${type}' style='{{if width}}width:${width}px;{{/if}}{{if height}}height:${height}px;{{/if}}z-index:108;left:${x}px;top:${y}px;font-size:${fontsize}pt;font-weight:${fontweight};font-family:${fontname};transform-origin:0 0;transform:rotate(-${angle}deg);' class='ctrldrag x-label ${selectedCls}'>${text}</div>"),xmldesigner.label.cls=t,xmldesigner.label.tplName=e,xmldesigner.label.type="label",xmldesigner.label.method={init:function n(){s.data=[]},drawNew:function d(){a(s.data.length)},drawByInd:a,showAttrsByInd:function l(t){var e=s.data[t];for(var a in e)o("#tr-"+a).show(),o("#t-"+a).val(e[a])},dragMove:function i(t,e){var a=t.clientX,n=t.clientY,d=a-e.currentX,l=n-e.currentY;e.target.style.left=parseFloat(e.left)+d+"px",e.target.style.top=parseFloat(e.top)+l+"px"},dragEnd:function r(t,e,a){s.data[e].x=parseFloat(t.style.left),s.data[e].y=parseFloat(t.style.top),s.method.showAttrsByInd(e)},drawByAttrTable:function p(t){s.data[t].x=parseFloat(o("#t-x").val()),s.data[t].y=parseFloat(o("#t-y").val()),s.data[t].name=o("#t-name").val();var e=parseFloat(o("#t-width").val()),a=parseFloat(o("#t-height").val());s.data[t].width=isNaN(e)?"":e,s.data[t].height=isNaN(a)?"":a,s.data[t].fontsize=o("#t-fontsize").val(),s.data[t].fontbold=o("#t-fontbold").val(),s.data[t].fontname=o("#t-fontname").val(),s.data[t].defaultvalue=o("#t-defaultvalue").val(),s.data[t].angle=o("#t-angle").val(),s.method.drawByInd(t)},genXmlJson:function m(){for(var t,e,a=[],n=0;n<s.data.length;n++)if(e=(t=s.data[n]).fontsize,"C39P36DmTt"==t.fontname&&(e=ptToPx(t.fontsize)),"undefined"!=typeof t.delFlag&&1==t.delFlag);else{var d={"-name":t.name,"-xcol":pxToPt(t.x),"-yrow":pxToPt(t.y),"-defaultvalue":t.defaultvalue||"","-printvalue":t.printvalue||"","-fontbold":t.fontbold,"-fontname":t.fontname,"-fontsize":e},l=isNaN(pxToPt(t.width))?"":pxToPt(t.width),i=isNaN(pxToPt(t.height))?"":pxToPt(t.height);0<l&&(d["-width"]=l),0<i&&(d["-height"]=i),0<t.angle&&(d["-angle"]=t.angle),a.push(d)}return a},delItem:function h(t){s.data[t].delFlag=!0,o("#"+xmldesigner.label.type+t).remove()},getItemOffset:function y(t){var e=t.attr("data-ind");return{x:s.data[e].x,y:s.data[e].y,w:t.width(),h:t.height()}},alignItem:function x(t,e,a,n){var d=s.data[t],l=s.type,i=o("#"+l+t).height(),r=o("#"+l+t).width();switch(e){case"x":d.x=a;break;case"y":d.y=a;break;case"b":d.y=a-i;break;case"r":d.x=a-r;break;case"ha":d.y=a-i/2;break;case"va":d.x=a-r/2}s.method.drawByInd(t)},move:function f(t,e,a){var n=s.data[e];n&&("left"==t?n.x=n.x-a:"right"==t?n.x=n.x+a:"top"==t?n.y=n.y-a:"bottom"==t&&(n.y=n.y+a)),s.method.drawByInd(e)}}}(jQuery),"undefined"==typeof xmldesigner&&(xmldesigner={}),xmldesigner.line={},function(o){var p=xmldesigner.line;p.data=[];var t="x-line",e="lineTpl";o.template(e,"<div id='st${id}' data-ind='${ind}' data-type='${type}' style='left:${stx}px;top:${sty}px;z-index:107;' class='ctrldrag x-line st-point'></div><div id='mid${id}' data-ind='${ind}' data-type='${type}' style='left:${midx}px;top:${midy}px;z-index:107;' class='ctrldrag x-line mid-point'></div><div id='end${id}' data-ind='${ind}' data-type='${type}' style='left:${endx}px;top:${endy}px;z-index:107;' class='ctrldrag x-line end-point'></div>"),xmldesigner.line.cls=t,xmldesigner.line.type="line",xmldesigner.line.tplName=e,xmldesigner.line.method={init:function a(){p.data=[]},drawNew:function n(){var t=xmldesigner.line.type,e=p.data.length;p.data[e]={id:t+e,ind:e,name:t+e,type:t,stx:10,sty:10,endx:100,endy:10},p.method.draw()},drawByInd:function(){},draw:function i(){for(var t,e=xmldesigner.line.type,a={},n=[],d=0;d<selectCompSet.length;d++)selectCompSet[d].attr("data-type")==e&&n.push(selectCompSet[d].attr("data-ind"));mycontext&&mycontext.clearRect(0,0,mycanvas.width,mycanvas.height);for(var l=0;l<p.data.length;l++)a=p.data[l],mycontext&&mycontext.beginPath(),"boolean"==typeof a.delFlag&&1==a.delFlag||((t=a).midx=(parseFloat(t.stx)+parseFloat(t.endx))/2,t.midy=(parseFloat(t.sty)+parseFloat(t.endy))/2,document.getElementById("end"+e+l)?(document.getElementById("st"+e+l).style.top=a.sty+"px",document.getElementById("st"+e+l).style.left=a.stx+"px",document.getElementById("end"+e+l).style.top=a.endy+"px",document.getElementById("end"+e+l).style.left=a.endx+"px",document.getElementById("mid"+e+l).style.top=a.midy+"px",document.getElementById("mid"+e+l).style.left=a.midx+"px"):o.tmpl(xmldesigner.line.tplName,a).appendTo("#dbLayout"),-1<n.indexOf(""+l)?(mycontext&&(mycontext.strokeStyle="green"),document.getElementById("st"+e+l).style.visibility="visible",document.getElementById("midline"+l).style.visibility="visible",document.getElementById("end"+e+l).style.visibility="visible"):(mycontext&&(mycontext.strokeStyle="black"),document.getElementById("end"+e+l)&&(document.getElementById("st"+e+l).style.visibility="hidden",document.getElementById("midline"+l).style.visibility="hidden",document.getElementById("end"+e+l).style.visibility="hidden")),mycontext&&(mycontext.moveTo(a.stx,a.sty),mycontext.lineTo(a.endx,a.endy),mycontext.stroke()))},showAttrsByInd:function d(t){var e=p.data[t];for(var a in e)"y"!=a&&(o("#tr-"+a).show(),o("#t-"+a).val(e[a]))},dragMove:function r(t,e){var a=t.clientX,n=t.clientY,d=a-e.currentX,l=n-e.currentY;e.target.style.left=parseFloat(e.left)+d+"px",e.target.style.top=parseFloat(e.top)+l+"px"},dragEnd:function s(t,e,a){var n=a.clientX,d=a.clientY,l=n-dragParams.currentX,i=d-dragParams.currentY,r=o(t);r.hasClass("mid-point")?(p.data[e].stx+=l,p.data[e].sty+=i,p.data[e].endx+=l,p.data[e].endy+=i):r.hasClass("st-point")?(p.data[e].stx+=l,p.data[e].sty+=i):r.hasClass("end-point")&&(p.data[e].endx+=l,p.data[e].endy+=i),p.method.draw(),xmldesigner.line.method.showAttrsByInd(e)},drawByAttrTable:function l(t){p.data[t].stx=parseFloat(o("#t-stx").val()),p.data[t].sty=parseFloat(o("#t-sty").val()),p.data[t].endx=parseFloat(o("#t-endx").val()),p.data[t].endy=parseFloat(o("#t-endy").val()),p.method.draw()},genXmlJson:function m(){for(var t,e=[],a=0;a<p.data.length;a++)"boolean"==typeof(t=p.data[a]).delFlag&&1==t.delFlag||e.push({"-BeginX":pxToPt(t.stx),"-BeginY":pxToPt(t.sty),"-EndX":pxToPt(t.endx),"-EndY":pxToPt(t.endy)});return e},item2Json:function y(t,e){var a=xmldesigner.line.type;return{id:a+e,ind:e,name:a+e,type:a,stx:ptToPx(t[e]["-BeginX"]),sty:ptToPx(t[e]["-BeginY"]),endx:ptToPx(t[e]["-EndX"]),endy:ptToPx(t[e]["-EndY"])}},delItem:function x(t){var e=xmldesigner.line.type;p.data[t].delFlag=!0,o("#st"+e+t).remove(),o("#end"+e+t).remove(),o("#mid"+e+t).remove()},getItemOffset:function f(t){var e=t.attr("data-ind"),a=p.data[e];return{x:a.stx,y:a.sty,w:a.endx-a.stx,h:a.endy-a.sty}},alignItem:function g(t,e,a,n){var d=p.data[t];switch(h=d.endy-d.sty,w=d.endx-d.stx,e){case"x":d.endx-=d.stx-a,d.stx=a;break;case"y":d.endy-=d.sty-a,d.sty=a;break;case"b":d.sty=a-h,d.endy=a;break;case"r":d.stx=a-w,d.endx=a;break;case"ha":d.sty=a-h/2,d.endy=a+h/2;break;case"va":d.stx=a-w/2,d.endx=a+w/2;break;case"h":d.endy=a+d.sty;break;case"w":d.endx=a+d.stx;break;case"s":d.endy=a+d.sty,d.endx=n+d.stx}},getLineByPoint:function c(t,e){for(var a=0;a<p.data.length;a++){var n=p.data[a];if(d=t,l=e,i=n.stx,r=n.sty,o=n.endx,s=n.endy,Math.sqrt(Math.pow(d-i,2)+Math.pow(l-r,2))+Math.sqrt(Math.pow(o-d,2)+Math.pow(s-l,2))-Math.sqrt(Math.pow(o-i,2)+Math.pow(s-r,2))<.3)return a}var d,l,i,r,o,s;return-1},move:function u(t,e,a){var n=p.data[e];n&&("left"==t?(n.stx=n.stx-a,n.endx=n.endx-a):"right"==t?(n.stx=n.stx+a,n.endx=n.endx+a):"top"==t?(n.sty=n.sty-a,n.endy=n.endy-a):"bottom"==t&&(n.sty=n.sty+a,n.endy=n.endy+a))}}}(jQuery),"undefined"==typeof xmldesigner&&(xmldesigner={}),xmldesigner.img={},function(o){var s=xmldesigner.img;s.data=[];var i=location.href.split("/web/")[0]+"/web/",r="scripts/dhctt/xmldesigner/img/defaultimg.jpg";function t(t){var e=xmldesigner.img.type,a=!1;if(t==s.data.length){var n=i+r;s.data[t]={id:e+t,name:e+t,ind:t,type:e,x:10,y:10,height:130,width:130,src:n,defaultvalue:i+r},a=!0}var d=s.data[t];a||(d.src=d.defaultvalue),d.id=e+t,d.type=e,d.ind=t;var l=o("#"+d.id);0<l.length?l.attr("name",d.name).css("left",d.x).css("top",d.y).attr("src",d.src).css("height",d.height).css("width",d.width):o.tmpl(xmldesigner.img.tplName,d).appendTo("#dbLayout")}o.template("imgTpl","<img id='${id}' name='${name}' data-ind='${ind}' data-type='${type}' style='z-index:103;left:${x}px;top:${y}px;width:${width}px;height:${height}px;' src='${src}' class='ctrldrag x-img ${selectedCls}'/>"),xmldesigner.img.cls="x-img",xmldesigner.img.tplName="imgTpl",xmldesigner.img.type="img",xmldesigner.img.method={init:function e(){s.data=[]},item2Json:function l(t,e){var a=xmldesigner.img.type,n=t[e];if(n["-defaultvalue"]||(n["-defaultvalue"]=""),n["-printvalue"]||(n["-printvalue"]=""),n["-xcol"]||(n["-xcol"]=1),n["-yrow"]||(n["-yrow"]=1),n["-name"]||(n["-name"]="undefinedNameImg"),n["-src"])src=n["-src"];else{var d=n["-defaultvalue"];1==d.split("web\\").length?src=i+r:src=i+d.split("web\\")[1].split("\\").join("/")}return{id:a+e,ind:e,name:a+e,type:a,src:src,name:n["-name"],height:n["-height"]?ptToPx(n["-height"]):130,width:n["-width"]?ptToPx(n["-width"]):130,x:ptToPx(n["-xcol"]),y:ptToPx(n["-yrow"]),defaultvalue:n["-defaultvalue"]}},drawNew:function a(){t(s.data.length)},drawByInd:t,showAttrsByInd:function n(t){var e=s.data[t];for(var a in e)o("#tr-"+a).show(),o("#t-"+a).val(e[a])},dragMove:function p(t,e){var a=t.clientX,n=t.clientY,d=a-e.currentX,l=n-e.currentY;e.target.style.left=parseFloat(e.left)+d+"px",e.target.style.top=parseFloat(e.top)+l+"px"},dragEnd:function d(t,e,a){s.data[e].x=parseFloat(t.style.left),s.data[e].y=parseFloat(t.style.top),xmldesigner.img.method.showAttrsByInd(e)},drawByAttrTable:function m(t){s.data[t].x=parseFloat(o("#t-x").val()),s.data[t].y=parseFloat(o("#t-y").val()),s.data[t].height=o("#t-height").val(),s.data[t].width=o("#t-width").val(),s.data[t].name=o("#t-name").val(),s.data[t].defaultvalue=o("#t-defaultvalue").val(),s.data[t].src=o("#t-src").val(),s.method.drawByInd(t)},genXmlJson:function h(){for(var t,e=[],a=0;a<s.data.length;a++)"boolean"==typeof(t=s.data[a]).delFlag&&1==t.delFlag||e.push({"-name":t.name,"-xcol":pxToPt(t.x),"-yrow":pxToPt(t.y),"-height":pxToPt(t.height),"-width":pxToPt(t.width),"-defaultvalue":t.defaultvalue||"","-printvalue":t.printvalue||""});return e},delItem:function y(t){s.data[t].delFlag=!0,o("#"+xmldesigner.img.type+t).remove()},getItemOffset:function x(t){var e=t.attr("data-ind");return{x:s.data[e].x,y:s.data[e].y,w:t.width(),h:t.height()}},alignItem:function f(t,e,a,n){var d=s.data[t],l=s.type,i=o("#"+l+t).height(),r=o("#"+l+t).width();switch(e){case"x":d.x=a;break;case"y":d.y=a;break;case"b":d.y=a-i;break;case"r":d.x=a-r;break;case"ha":d.y=a-i/2;break;case"va":d.x=a-r/2}s.method.drawByInd(t)},move:function g(t,e,a){var n=s.data[e];n&&("left"==t?n.x=n.x-a:"right"==t?n.x=n.x+a:"top"==t?n.y=n.y-a:"bottom"==t&&(n.y=n.y+a)),s.method.drawByInd(e)}}}(jQuery),"undefined"==typeof xmldesigner&&(xmldesigner={}),xmldesigner.list={},function(r){var o=xmldesigner.list;o.data=[];var t="listTpl";function e(t){var e=xmldesigner.list.type;t==o.data.length&&(o.data[t]={id:e+t,name:e+t,ind:t,type:e,width:ptToPx(10*invoiceData.width),height:15,YStep:15,XStep:0,x:0,y:0,CurrentRow:1,PageRows:100,RePrtHeadFlag:"N"});e=xmldesigner.list.type;var a=o.data[t],n=r("#"+e+t);if(0<n.length){if(n.width(o.data[t].width).height(a.height).css("top",a.y),r("."+xmldesigner.listItem.cls).css("top",a.y),xmldesigner.listItem.data)for(var d=0;d<xmldesigner.listItem.data.length;d++)xmldesigner.listItem.data[d].y=a.y}else r.tmpl(xmldesigner.list.tplName,a).appendTo("#dbLayout")}r.template(t,"<div id='${id}' name='${name}' data-ind='${ind}' data-type='${type}' style='z-index:105;left:${x}px;top:${y}px;width:${width}px;height:${height}px;' class='ctrldrag x-list ${selectedCls}'></div>"),xmldesigner.list.cls="x-list",xmldesigner.list.type="list",xmldesigner.list.tplName=t,xmldesigner.list.method={init:function a(){o.data=[]},item2Json:function n(t,e){var a=xmldesigner.list.type;return"undefined"!=t["-YStep"]&&"undefined"!=typeof t["-YStep"]||(t["-YStep"]=10),"undefined"!=t["-CurrentRow"]&&"undefined"!=typeof t["-CurrentRow"]||(t["-CurrentRow"]=1),"undefined"!=t["-PageRows"]&&"undefined"!=typeof t["-PageRows"]||(t["-PageRows"]=20),"undefined"!=t["-RePrtHeadFlag"]&&"undefined"!=typeof t["-RePrtHeadFlag"]||(t["-RePrtHeadFlag"]="N"),"undefined"!=t["-BackSlashWidth"]&&"undefined"!=typeof t["-BackSlashWidth"]||(t["-BackSlashWidth"]=0),{id:a+e,name:a+e,ind:e,type:a,width:ptToPx(10*invoiceData.width),x:"0",y:"0",height:ptToPx(t["-YStep"]),YStep:ptToPx(t["-YStep"]),XStep:0,CurrentRow:t["-CurrentRow"],PageRows:t["-PageRows"],RePrtHeadFlag:t["-RePrtHeadFlag"],BackSlashWidth:t["-BackSlashWidth"]}},drawNew:function d(){0<r("#"+xmldesigner.list.type+"0").length?r.messager.alert("提示","已有列表, 请增加列项."):e(o.data.length)},drawByInd:e,showAttrsByInd:function l(t){var e=o.data[t];for(var a in e)"height"!=a&&"width"!=a&&"name"!=a&&"x"!=a&&(r("#tr-"+a).show(),r("#t-"+a).val(e[a]))},dragMove:function i(t,e){var a=t.clientY-e.currentY;r("."+xmldesigner.listItem.cls).css("top",parseFloat(e.top)+a+"px"),e.target.style.top=parseFloat(e.top)+a+"px"},dragEnd:function s(t,e,a){o.data[e].x=parseFloat(t.style.left),o.data[e].y=parseFloat(t.style.top),xmldesigner.list.method.showAttrsByInd(e);var n=xmldesigner.listItem.data;if(xmldesigner.listItem.data)for(var d=0;d<n.length;d++)n[d].y=o.data[e].y},drawByAttrTable:function p(t){o.data[t].y=parseFloat(r("#t-y").val()),o.data[t].PageRows=r("#t-PageRows").val(),o.data[t].CurrentRow=r("#t-CurrentRow").val(),o.data[t].YStep=r("#t-YStep").val(),o.data[t].height=r("#t-YStep").val(),r("#t-height").val(o.data[t].height),o.data[t].RePrtHeadFlag=r("#t-RePrtHeadFlag").val();var e=r("#t-BackSlashWidth").val();o.data[t].BackSlashWidth=""==e?0:e,o.method.drawByInd(t)},genXmlJson:function m(){for(var t,e=[],a=0;a<o.data.length;a++)"undefined"!=typeof(t=o.data[a]).delFlag&&1==t.delFlag||e.push({"-PrintType":"List","-YStep":pxToPt(t.height)||10,"-XStep":0,"-CurrentRow":t.CurrentRow||1,"-PageRows":t.PageRows||10,"-RePrtHeadFlag":t.RePrtHeadFlag||"N","-BackSlashWidth":t.BackSlashWidth||0,Listdatapara:[]});return e},delItem:function h(t){o.data[t].delFlag=!0,r("#"+xmldesigner.list.type+t).remove(),r("."+xmldesigner.listItem.cls).remove()},getItemOffset:function y(t){var e=t.attr("data-ind");return{x:o.data[e].x,y:o.data[e].y,w:t.width(),h:t.height()}},alignItem:function x(t,e,a,n){var d=o.data[t],l=o.type,i=r("#"+l+t).height();switch(r("#"+l+t).width(),e){case"x":break;case"y":d.y=a;break;case"b":d.y=a-i;break;case"r":break;case"ha":d.y=a-i/2}o.method.drawByInd(t)},move:function f(t,e,a){var n=o.data[e];n&&("top"==t?n.y=n.y-a:"bottom"==t&&(n.y=n.y+a)),o.method.drawByInd(e)}}}(jQuery),"undefined"==typeof xmldesigner&&(xmldesigner={}),xmldesigner.listItem={},function(r){var o=xmldesigner.listItem;o.data=[];var t="x-listItem",e="listItemTpl";function a(t){var e=xmldesigner.listItem.type;if(!xmldesigner.list.data[0])return alert("请先画出列表, 再画列表项."),!1;if(t==o.data.length){var a=150;0<o.data.length&&(a+=o.data[t-1].x),o.data[t]={id:e+t,name:e+t,ind:t,type:e,x:a,y:xmldesigner.list.data[xmldesigner.list.data.length-1].y,fontsize:10,fontname:"宋体",text:e+t,fontbold:"false"}}var n=o.data[t],d="";n["-name"]?(n.name=n["-name"],n.defaultvalue=n["-defaultvalue"],n.x=ptToPx(n["-xcol"]),n.y=ptToPx(n["-yrow"]),n.fontsize=n["-fontsize"],n.fontname=n["-fontname"]||"宋体",d=n["-fontbold"],deleteProps(n,["-name","-defaultvalue","-xcol","-yrow","-fontsize","-fontname","-fontbold"])):d=n.fontbold,"false"!=d?(n.fontweight="bold",n.fontbold="true"):(n.fontweight="normal",n.fontbold="false"),n.id=e+t,n.type=e,n.ind=t,n.text=n.defaultvalue||"|"+n.name;var l=r("#"+n.id);0<l.length?(l.attr("name",n.name),l.css("left",n.x).css("top",n.y).css("font-size",n.fontsize+"pt").css("font-family",n.fontname).css("font-weight",n.fontweight),l.text(n.text)):r.tmpl(xmldesigner.listItem.tplName,n).appendTo("#dbLayout")}r.template(e,"<div id='${id}' name='${name}' data-ind='${ind}' data-type='${type}' style='z-index:106;left:${x}px;top:${y}px;font-size:${fontsize}pt;font-weight:${fontweight};font-family:${fontname}' class='ctrldrag x-listItem ${selectedCls}'>${text}</div>"),xmldesigner.listItem.cls=t,xmldesigner.listItem.type="listItem",xmldesigner.listItem.tplName=e,xmldesigner.listItem.method={init:function n(){o.data=[]},drawNew:function d(){a(o.data.length)},drawByInd:a,showAttrsByInd:function l(t){var e=o.data[t];for(var a in e)r("#tr-"+a).show(),r("#t-"+a).val(e[a])},dragMove:function i(t,e){var a=t.clientX,n=t.clientY,d=a-e.currentX,l=n-e.currentY;e.target.style.left=parseFloat(e.left)+d+"px",e.target.style.top=parseFloat(e.top)+l+"px"},dragEnd:function s(t,e,a){o.data[e].x=parseFloat(t.style.left),o.data[e].y=parseFloat(t.style.top),o.method.showAttrsByInd(e)},drawByAttrTable:function p(t){o.data[t].x=parseFloat(r("#t-x").val()),o.data[t].y=parseFloat(r("#t-y").val()),o.data[t].name=r("#t-name").val(),o.data[t].fontsize=r("#t-fontsize").val(),o.data[t].fontbold=r("#t-fontbold").val(),o.data[t].fontname=r("#t-fontname").val(),o.data[t].defaultvalue=r("#t-defaultvalue").val(),o.method.drawByInd(t)},genXmlJson:function m(){for(var t,e=[],a=0;a<o.data.length;a++)"undefined"!=typeof(t=o.data[a]).delFlag&&1==t.delFlag||e.push({"-name":t.name,"-xcol":pxToPt(t.x),"-yrow":pxToPt(t.y),"-defaultvalue":t.defaultvalue||"","-printvalue":t.printvalue||"","-fontbold":t.fontbold,"-fontname":t.fontname,"-fontsize":t.fontsize});return e},delItem:function h(t){o.data[t].delFlag=!0,r("#"+xmldesigner.listItem.type+t).remove()},getItemOffset:function y(t){var e=t.attr("data-ind");return{x:o.data[e].x,y:o.data[e].y,w:t.width(),h:t.height()}},alignItem:function x(t,e,a,n){var d=o.data[t],l=o.type,i=(r("#"+l+t).height(),r("#"+l+t).width());switch(e){case"x":d.x=a;break;case"y":case"b":break;case"r":d.x=a-i;break;case"ha":break;case"va":d.x=a-i/2}o.method.drawByInd(t)},move:function f(t,e,a){var n=o.data[e];n&&("left"==t?n.x=n.x-a:"right"==t?n.x=n.x+a:"top"==t?n.y=n.y-a:"bottom"==t&&(n.y=n.y+a)),o.method.drawByInd(e)}}}(jQuery),"undefined"==typeof xmldesigner&&(xmldesigner={}),xmldesigner.qrcode={},function(o){var s=xmldesigner.qrcode;s.data=[];var t="x-qrcode",e="qrcodeTpl";function a(t){var e=xmldesigner.qrcode.type;t==s.data.length&&(s.data[t]={name:e+t,width:100,height:100,x:10,y:10,defaultvalue:e+t,id:e+t,ind:t,type:e});var a=s.data[t];a["-name"]&&(a.name=a["-name"],a.defaultvalue=a["-defaultvalue"],a.x=ptToPx(a["-xcol"]),a.y=ptToPx(a["-yrow"]),a.width=ptToPx(a["-width"]),a.height=ptToPx(a["-height"]),deleteProps(a,["-name","-defaultvalue","-xcol","-yrow","-fontsize","-fontname","-fontbold","-width","-height"])),a.id=e+t,a.type=e,a.ind=t;var n=o("#"+a.id);0<n.length?(n.attr("name",a.name).css("left",a.x).css("top",a.y),n.css("width",a.width).css("height",a.height)):o.tmpl(xmldesigner.qrcode.tplName,a).appendTo("#dbLayout")}o.template(e,"<img id='${id}' name='${name}' data-ind='${ind}' data-type='${type}' style='z-index:104;left:${x}px;top:${y}px;width:${width}px;height:${height}px;' src='../scripts/dhctt/xmldesigner/img/qr.png' class='ctrldrag x-qrcode ${selectedCls}'/>"),xmldesigner.qrcode.cls=t,xmldesigner.qrcode.tplName=e,xmldesigner.qrcode.type="qrcode",xmldesigner.qrcode.method={init:function n(){s.data=[]},drawNew:function d(){a(s.data.length)},drawByInd:a,showAttrsByInd:function l(t){var e=s.data[t];for(var a in e)o("#tr-"+a).show(),o("#t-"+a).val(e[a])},dragMove:function i(t,e){var a=t.clientX,n=t.clientY,d=a-e.currentX,l=n-e.currentY;e.target.style.left=parseFloat(e.left)+d+"px",e.target.style.top=parseFloat(e.top)+l+"px"},dragEnd:function r(t,e,a){s.data[e].x=parseFloat(t.style.left),s.data[e].y=parseFloat(t.style.top),xmldesigner.qrcode.method.showAttrsByInd(e)},drawByAttrTable:function p(t){s.data[t].x=parseFloat(o("#t-x").val()),s.data[t].y=parseFloat(o("#t-y").val()),s.data[t].name=o("#t-name").val(),s.data[t].defaultvalue=o("#t-defaultvalue").val(),s.data[t].width=o("#t-width").val(),s.data[t].height=o("#t-height").val(),s.method.drawByInd(t)},genXmlJson:function m(){for(var t,e=[],a=0;a<s.data.length;a++)"undefined"!=typeof(t=s.data[a]).delFlag&&1==t.delFlag||e.push({"-name":t.name,"-xcol":pxToPt(t.x),"-yrow":pxToPt(t.y),"-width":pxToPt(t.width),"-height":pxToPt(t.height),"-defaultvalue":t.defaultvalue||"","-printvalue":t.printvalue||"","-fontname":"宋体","-fontsize":"9","-fontbold":"false","-isqrcode":"true"});return e},delItem:function h(t){s.data[t].delFlag=!0,o("#"+xmldesigner.qrcode.type+t).remove()},getItemOffset:function y(t){var e=t.attr("data-ind");return{x:s.data[e].x,y:s.data[e].y,w:t.width(),h:t.height()}},alignItem:function x(t,e,a,n){var d=s.data[t],l=s.type,i=o("#"+l+t).height(),r=o("#"+l+t).width();switch(e){case"x":d.x=a;break;case"y":d.y=a;break;case"b":d.y=a-i;break;case"r":d.x=a-r;break;case"ha":d.y=a-i/2;break;case"va":d.x=a-r/2}s.method.drawByInd(t)},move:function f(t,e,a){var n=s.data[e];n&&("left"==t?n.x=n.x-a:"right"==t?n.x=n.x+a:"top"==t?n.y=n.y-a:"bottom"==t&&(n.y=n.y+a)),s.method.drawByInd(e)}}}(jQuery),"undefined"==typeof xmldesigner&&(xmldesigner={}),xmldesigner.barcode={},function(o){var s=xmldesigner.barcode;s.data=[];var t="x-barcode",e="barcodeTpl";function a(t){var e=xmldesigner.barcode.type;t==s.data.length&&(s.data[t]={name:e+t,width:100,height:50,x:10,y:10,defaultvalue:e+t,id:e+t,ind:t,type:e,barcodetype:"128A",angle:0,isshowtext:""});var a=s.data[t];a["-name"]&&(a.name=a["-name"],a.defaultvalue=a["-defaultvalue"],a.x=ptToPx(a["-xcol"]),a.y=ptToPx(a["-yrow"]),a.width=ptToPx(a["-width"]),a.height=ptToPx(a["-height"]),a.barcodetype=a["-barcodetype"],a.angle=a["-angle"]||0,a.isshowtext=a["-isshowtext"]||"",deleteProps(a,["-name","-defaultvalue","-xcol","-yrow","-fontsize","-fontname","-fontbold","-width","-height","-barcodetype","-angle","-isshowtext"])),a.id=e+t,a.type=e,a.ind=t;var n=o("#"+a.id);0<n.length?(n.attr("name",a.name).css("left",a.x).css("top",a.y),n.css("width",a.width).css("height",a.height).css("transform","rotate(-"+a.angle+"deg)"),n.attr("src",src="../scripts/dhctt/xmldesigner/img/barcode"+a.isshowtext+".png")):o.tmpl(xmldesigner.barcode.tplName,a).appendTo("#dbLayout")}o.template(e,"<img id='${id}' name='${name}' data-ind='${ind}' data-type='${type}' data-isshowtext='${isshowtext}' data-barcodetype='${barcodetype}' style='z-index:104;left:${x}px;top:${y}px;width:${width}px;height:${height}px;transform-origin:0 0;transform:rotate(-${angle}deg);' src='../scripts/dhctt/xmldesigner/img/barcode${isshowtext}.png' class='ctrldrag x-barcode ${selectedCls}'/>"),xmldesigner.barcode.cls=t,xmldesigner.barcode.tplName=e,xmldesigner.barcode.type="barcode",xmldesigner.barcode.method={init:function n(){s.data=[]},drawNew:function d(){a(s.data.length)},drawByInd:a,showAttrsByInd:function l(t){var e=s.data[t];for(var a in e)o("#tr-"+a).show(),o("#t-"+a).val(e[a])},dragMove:function i(t,e){var a=t.clientX,n=t.clientY,d=a-e.currentX,l=n-e.currentY;e.target.style.left=parseFloat(e.left)+d+"px",e.target.style.top=parseFloat(e.top)+l+"px"},dragEnd:function r(t,e,a){s.data[e].x=parseFloat(t.style.left),s.data[e].y=parseFloat(t.style.top),xmldesigner.barcode.method.showAttrsByInd(e)},drawByAttrTable:function p(t){s.data[t].x=parseFloat(o("#t-x").val()),s.data[t].y=parseFloat(o("#t-y").val()),s.data[t].name=o("#t-name").val(),s.data[t].defaultvalue=o("#t-defaultvalue").val(),s.data[t].width=o("#t-width").val(),s.data[t].height=o("#t-height").val(),s.data[t].barcodetype=o("#t-barcodetype").val(),s.data[t].angle=o("#t-angle").val(),s.data[t].isshowtext=o("#t-isshowtext").val(),s.method.drawByInd(t)},genXmlJson:function m(){for(var t,e=[],a=0;a<s.data.length;a++)if("undefined"!=typeof(t=s.data[a]).delFlag&&1==t.delFlag);else{var n={"-name":t.name,"-xcol":pxToPt(t.x),"-yrow":pxToPt(t.y),"-width":pxToPt(t.width),"-height":pxToPt(t.height),"-defaultvalue":t.defaultvalue||"","-printvalue":t.printvalue||"","-fontname":"","-fontsize":"9","-fontbold":"false","-barcodetype":t.barcodetype};0<t.angle&&(n["-angle"]=t.angle),"N"==t.isshowtext&&(n["-isshowtext"]=t.isshowtext),e.push(n)}return e},delItem:function h(t){s.data[t].delFlag=!0,o("#"+xmldesigner.barcode.type+t).remove()},getItemOffset:function y(t){var e=t.attr("data-ind");return{x:s.data[e].x,y:s.data[e].y,w:t.width(),h:t.height()}},alignItem:function x(t,e,a,n){var d=s.data[t],l=s.type,i=o("#"+l+t).height(),r=o("#"+l+t).width();switch(e){case"x":d.x=a;break;case"y":d.y=a;break;case"b":d.y=a-i;break;case"r":d.x=a-r;break;case"ha":d.y=a-i/2;break;case"va":d.x=a-r/2}s.method.drawByInd(t)},move:function f(t,e,a){var n=s.data[e];n&&("left"==t?n.x=n.x-a:"right"==t?n.x=n.x+a:"top"==t?n.y=n.y-a:"bottom"==t&&(n.y=n.y+a)),s.method.drawByInd(e)}}}(jQuery);