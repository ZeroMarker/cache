(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-72dcbadd","chunk-69c6409e"],{"01e0":function(e,t,i){"use strict";var n=i("4207"),a=i.n(n);a.a},"2ab7":function(e,t,i){"use strict";var n=i("c995"),a=i.n(n);a.a},"2bc8":function(e,t,i){"use strict";var n=i("bc1f"),a=i.n(n);a.a},3127:function(e,t,i){},"394c":function(e,t,i){},"403a":function(e,t,i){"use strict";var n=i("e3d3"),a=i.n(n);a.a},4207:function(e,t,i){},"48c09":function(e,t,i){},"554c":function(e,t,i){"use strict";var n=i("8c98"),a=i.n(n);a.a},"73b1":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:["orderExcuteArea",{"orderExcuteArea-lite":"lite"===e.HISUIStyleCode}]},[i("div",{staticClass:"accPanel"},[i("header",{staticClass:"title"},[i("span",{style:{background:"lite"===e.HISUIStyleCode?"":"url("+e.publicPath+"exe_order.png) no-repeat 4px center"}},[e._v(e._s(e.$t("医嘱执行")))])]),i("div",{staticClass:"orderExcute"},[i("form-control",{attrs:{searchInfo:e.searchInfo,sheetCodeSelected:e.sheetCodeSelected,helpInfo:e.helpInfo,execConfig:e.execConfig,docOrderFlag:e.docOrderFlag,noExecuteFlag:e.noExecuteFlag,HISUIStyleCode:e.HISUIStyleCode},on:{pickStartDate:e.pickStartDate,pickStartTime:e.pickStartTime,pickStartTimePanel:e.pickStartTimePanel,pickEndTimePanel:e.pickEndTimePanel,pickEndDate:e.pickEndDate,pickEndTime:e.pickEndTime,checkboxClick:e.checkboxClick,switchType:e.switchType,searchOrder:e.searchOrder,dateQuickSwitch:e.dateQuickSwitch}}),i("state-tag",{attrs:{stateTagList:e.stateTagList}}),i("tab",{ref:"childTab",class:["orderExcute_tabs",{"is-lite":"lite"===e.HISUIStyleCode}],attrs:{data:e.tabPane,tabIndexSelected:e.tabIndexSelected,lastTabName:e.lastTabName,HISUIStyleCode:e.HISUIStyleCode},on:{selectTab:e.selectTab}},[e.orderList.columns[0]?i("div",{staticClass:"orderExcute_tabContent",attrs:{slot:"contentSlot"},slot:"contentSlot"},[i("btn-group",{ref:"btnGroupChild",staticClass:"orderExcute_btnGroup",attrs:{btnList:e.orderExcutebtnGroup,fuzzyFlag:e.fuzzyFlag,filerColumns:e.filerColumns,orderShowMode:e.orderShowMode,sheetCodeSelected:e.sheetCodeSelected,filterInputText:e.filterInputText,selectedFilter:e.selectedFilter,emergencyBtn:e.emergencyBtn,emergencyOrderNum:e.emergencyOrderNum,combineFilterBtnVisible:e.combineFilterBtnVisible,HISUIStyleCode:e.HISUIStyleCode},on:{clickEmergencyBtn:e.clickEmergencyBtn,showCombineFilter:e.showCombineFilter,hiddenCombineFilter:e.hiddenCombineFilter,switchOrderShowType:e.switchOrderShowType,onBtnClick:e.onBtnClick,selecteFilterColumns:e.selecteFilterColumns,checkFuzzy:e.checkFuzzy,filterOrderText:e.filterOrderText,tempBarCodeText:e.tempBarCodeText,filterInputEnter:e.filterInputEnter,clickUnPrintNum:e.clickUnPrintNum,setTempBarCode:e.setTempBarCode,tempBarCodeInputEnter:e.tempBarCodeInputEnter}}),i("order-list",{staticClass:"orderExcute_orderList",attrs:{stateTagList:e.stateTagList,columns:e.orderList.columns,data:e.orderList.data,ordersExec:e.ordersExec,orderShowMode:e.orderShowMode,orderAttachVisible:e.orderAttachVisible,defaultAttachTypeRadio:e.defaultAttachTypeRadio,orderAttachOrderID:e.orderAttachOrderID,sheetCodeSelected:e.sheetCodeSelected,excuteFlag:e.searchInfo.checkExcuteFlag,total:e.totalPageSize,execConfig:e.execConfig,HISUIStyleCode:e.HISUIStyleCode},on:{changePage:e.onChangeNum,closeLoopBtnClick:e.closeLoopBtnClick,openPrescWindow:e.openPrescWindow,openInsOrd:e.openInsOrd,openOrdSkinHistory:e.openOrdSkinHistory,onContainerInfoHover:e.onContainerInfoHover,onOrderArcimDescHover:e.onOrderArcimDescHover,attachOrderClick:e.attachOrderClick,closeOrderAttach:function(t){e.orderAttachVisible=!1},saveAttachOrder:e.saveAttachOrder,onOrderListCheckAll:e.onOrderListCheckAll,onOrderItemCheckAll:e.onOrderItemCheckAll,onOrderTimeChartChecked:e.onOrderTimeChartChecked,onPlacerNoKeyDown:e.onPlacerNoKeyDown,onOrderItemClickCell:e.onOrderItemClickCell,onOrderExecHover:e.onOrderExecHover}})],1):i("div",{staticClass:"orderExcute_tabContentNoData",attrs:{slot:"contentSlot"},slot:"contentSlot"},[i("p",[e._v(e._s(e.$t("暂无数据")))])]),i("pagination",{attrs:{slot:"contentSlot",id:"components-pagination-demo-mini",total:e.totalPageSize,defaultCurrent:e.defaultCurrent,HISUIStyleCode:e.HISUIStyleCode},on:{changePage:e.onChangeNum},slot:"contentSlot"})],1),i("transition",{attrs:{name:"combineFilter-animation"}},[e.combineFilterVisible?i("combine-filter",{attrs:{id:"combineFilter",sheetComineFilter:e.sheetComineFilter,hoverCondition:e.hoverCondition,hoverConditionIndex:e.hoverConditionIndex,HISUIStyleCode:e.HISUIStyleCode},on:{getHoverCondition:e.getHoverCondition,clickCondition:e.clickCondition,showCombineFilterArea:e.showCombineFilterArea,hiddenCombineFilterArea:e.hiddenCombineFilterArea,clickSubItem:e.clickSubItem}}):e._e()],1),i("Loading",{attrs:{spinning:e.spinning}}),i("messager",{attrs:{msgType:e.msgType,msgContent:e.msgContent,msgFlag:e.msgFlag}})],1)])])},a=[],r=(i("7514"),i("4917"),i("a481"),i("6762"),i("2fdb"),i("55dd"),i("456d"),i("28a5"),i("386d"),i("20d6"),i("ac6a"),i("96cf"),i("3b8d")),s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"formControl",class:[{lite:"lite"===e.HISUIStyleCode}]},[i("a-popover",{attrs:{placement:"bottomRight"}},[i("template",{slot:"content"},e._l(e.helpInfo,(function(t,n){return i("p",{key:n,staticStyle:{color:"#000"}},[e._v("\n        "+e._s(n+"："+t)+"\n      ")])})),0),i("a",{staticStyle:{float:"right",color:"#40a2de","font-size":"16px"},style:{color:"#339eff"}},[i("a-icon",{staticStyle:{"margin-right":"5px"},attrs:{type:"question-circle"}}),e._v(e._s(e.$t("帮助")))],1)],2),i("a-form",[i("div",{staticClass:"formRow"},[i("a-form-item",{staticClass:"datePicker"},[i("label",{staticClass:"spacing labelName"},[e._v(e._s(e.$t("开始时间")))]),i("date-picker",{class:["spacing",{lite:"lite"===e.HISUIStyleCode}],staticStyle:{width:"110px"},attrs:{value:e.searchInfo.startDate,disabled:"BGYZD"===e.sheetCodeSelected,HISUIStyleCode:e.HISUIStyleCode},on:{change:function(t){return e.$listeners.pickStartDate(t)}}}),i("a-time-picker",{ref:"scroll",class:["timePicker",{lite:"lite"===e.HISUIStyleCode}],staticStyle:{width:"110px"},attrs:{format:"HH:mm",value:e.searchInfo.startTime,allowClear:!1,disabled:"BGYZD"===e.sheetCodeSelected},on:{change:function(t){return e.$listeners.pickStartTime(t)},blur:function(t){return e.$listeners.pickStartTime(t.target.value)},openChange:function(t){return e.$listeners.pickStartTimePanel(t)}}})],1),i("a-form-item",{staticClass:"checkboxSpaing"},[i("a-radio",{attrs:{checked:!e.excuteTimeDefault,value:!1},on:{change:e.excuteTimeChange}},[e._v(e._s(e.$t("要求执行时间"))+"\n        ")])],1),i("a-form-item",{staticClass:"checkboxSpaing"},[i("a-checkbox",{attrs:{checked:!!e.docOrderFlag},on:{change:function(t){return e.$listeners.switchType("excuteType","docOrderFlag")}}},[e._v(e._s(e.$t("医生医嘱")))])],1),i("a-form-item",{staticClass:"checkboxSpaing"},[i("a-checkbox",{on:{change:function(t){return e.$listeners.checkboxClick("checkLongFlag")}}},[e._v(e._s(e.$t("长期")))])],1),i("a-form-item",{staticClass:"checkboxSpaing"},[i("a-checkbox",{on:{change:function(t){return e.$listeners.switchType("excute","executeFlag")}}},[e._v(e._s("DefaultSee"===e.sheetCodeSelected||"BGYZD"===e.sheetCodeSelected?e.$t("已处理"):e.$t("已执行"))+"\n        ")])],1),e.execConfig.notPrintFilterFlag&&e.execConfig.printFilterFlag?i("a-form-item",{staticClass:"checkboxSpaing"},[i("a-checkbox",{on:{change:function(t){return e.$listeners.checkboxClick("checkNotPrintFlag")}}},[e._v(e._s(e.$t("未打印")))])],1):e._e(),e.execConfig.ordChangeFilterFlag?i("a-form-item",{staticClass:"checkboxSpaing"},[i("a-checkbox",{on:{change:function(t){return e.$listeners.checkboxClick("checkNewCreateFlag")}}},[e._v(e._s(e.$t("今日新开")))])],1):e._e(),e.execConfig.ordConfirmFilterFlag?i("a-form-item",{staticClass:"checkboxSpaing"},[i("a-checkbox",{on:{change:function(t){return e.$listeners.checkboxClick("checkUnconfirmFlag")}}},[e._v(e._s(e.$t("未确认")))])],1):e._e(),e.execConfig.dateSwitchFilterFlag?i("a-form-item",{staticClass:"searchSpacing",staticStyle:{"margin-right":"10px"}},[i("a",{staticClass:"hisui-linkbutton",class:[{lite:"lite"===e.HISUIStyleCode}],on:{click:function(t){return t.stopPropagation(),e.$listeners.dateQuickSwitch(-1)}}},["lite"===e.HISUIStyleCode?i("span",{staticStyle:{padding:"0 20px"}},[e._v("\n            "+e._s(e.$t("前一天"))+"\n          ")]):i("span",[i("span",{style:{background:"url("+e.publicPath+"arrow_up.png) no-repeat center center"}},[e._v(" \n            ")]),i("span",[e._v(e._s(e.$t("前一天")))])])])]):e._e(),i("a-form-item",{staticClass:"searchSpacing"},[i("a",{staticClass:"hisui-linkbutton",class:[{lite:"lite"===e.HISUIStyleCode}],on:{click:function(t){return t.stopPropagation(),e.$listeners.searchOrder.apply(null,arguments)}}},["lite"===e.HISUIStyleCode?i("span",{staticStyle:{padding:"0 20px"}},[e._v("\n            "+e._s(e.$t("查询"))+"\n          ")]):i("span",[i("span",{style:{background:"url("+e.publicPath+"find.png) no-repeat center center"}},[e._v(" \n            ")]),i("span",[e._v(e._s(e.$t("查询")))])])])])],1),i("div",{staticClass:"formRow"},[i("a-form-item",{staticClass:"datePicker"},[i("label",{staticClass:"spacing labelName"},[e._v(e._s(e.$t("结束时间")))]),i("date-picker",{class:["spacing",{lite:"lite"===e.HISUIStyleCode}],staticStyle:{width:"110px"},attrs:{value:e.searchInfo.endDate,disabled:"BGYZD"===e.sheetCodeSelected,HISUIStyleCode:e.HISUIStyleCode},on:{change:function(t){return e.$listeners.pickEndDate(t)}}}),i("a-time-picker",{class:["timePicker",{lite:"lite"===e.HISUIStyleCode}],staticStyle:{width:"110px"},attrs:{format:"HH:mm",value:e.searchInfo.endTime,allowClear:!1,disabled:"BGYZD"===e.sheetCodeSelected},on:{change:function(t){return e.$listeners.pickEndTime(t)},blur:function(t){return e.$listeners.pickEndTime(t.target.value)},openChange:function(t){return e.$listeners.pickEndTimePanel(t)}}})],1),i("a-form-item",{staticClass:"checkboxSpaing",staticStyle:{width:"105px"}},[i("a-radio",{attrs:{value:!0,checked:!!e.excuteTimeDefault},on:{change:e.excuteTimeChange}},[e._v(e._s(e.$t("开医嘱时间"))+"\n        ")])],1),i("a-form-item",{staticClass:"checkboxSpaing"},[i("a-checkbox",{on:{change:function(t){return e.$listeners.switchType("excuteType","nurseOrderFlag")}}},[e._v(e._s(e.$t("护士医嘱")))])],1),i("a-form-item",{staticClass:"checkboxSpaing"},[i("a-checkbox",{on:{change:function(t){return e.$listeners.checkboxClick("checkTempFlag")}}},[e._v(e._s(e.$t("临时")))])],1),e.execConfig.notExecutedFilterFlag?i("a-form-item",{staticClass:"checkboxSpaing"},[i("a-checkbox",{attrs:{checked:!!e.noExecuteFlag},on:{change:function(t){return e.$listeners.switchType("excute","noExecuteFlag")}}},[e._v(e._s("DefaultSee"===e.sheetCodeSelected||"BGYZD"===e.sheetCodeSelected?e.$t("未处理"):e.$t("未执行"))+"\n        ")])],1):e.execConfig.printFilterFlag&&!e.execConfig.notPrintFilterFlag?i("a-form-item",{staticClass:"checkboxSpaing"},[i("a-checkbox",{on:{change:function(t){return e.$listeners.checkboxClick("checkPrintFlag")}}},[e._v(e._s(e.$t("已打印")))])],1):!e.execConfig.printFilterFlag&&e.execConfig.notPrintFilterFlag?i("a-form-item",{staticClass:"checkboxSpaing"},[i("a-checkbox",{on:{change:function(t){return e.$listeners.checkboxClick("checkNotPrintFlag")}}},[e._v(e._s(e.$t("未打印")))])],1):i("a-form-item",{staticClass:"checkboxSpaing",staticStyle:{width:"61px"}}),e.execConfig.printFilterFlag&&e.execConfig.notPrintFilterFlag?i("a-form-item",{staticClass:"checkboxSpaing"},[i("a-checkbox",{on:{change:function(t){return e.$listeners.checkboxClick("checkPrintFlag")}}},[e._v(e._s(e.$t("已打印")))])],1):e._e(),e.execConfig.ordChangeFilterFlag?i("a-form-item",{staticClass:"checkboxSpaing"},[i("a-checkbox",{on:{change:function(t){return e.$listeners.checkboxClick("checkNewDisconFlag")}}},[e._v(e._s(e.$t("今日新停")))])],1):e._e(),e.execConfig.ordConfirmFilterFlag?i("a-form-item",{staticClass:"checkboxSpaing"},[i("a-checkbox",{on:{change:function(t){return e.$listeners.checkboxClick("checkConfirmFlag")}}},[e._v(e._s(e.$t("已确认")))])],1):e._e(),e.execConfig.dateSwitchFilterFlag?i("a-form-item",{staticClass:"searchSpacing",staticStyle:{"margin-right":"10px"}},[i("a",{staticClass:"hisui-linkbutton",class:[{lite:"lite"===e.HISUIStyleCode}],on:{click:function(t){return t.stopPropagation(),e.$listeners.dateQuickSwitch(1)}}},["lite"===e.HISUIStyleCode?i("span",{staticStyle:{padding:"0 20px"}},[e._v("\n            "+e._s(e.$t("后一天"))+"\n          ")]):i("span",[i("span",{style:{background:"url("+e.publicPath+"arrow_down.png) no-repeat center center"}},[e._v(" \n            ")]),i("span",[e._v(e._s(e.$t("后一天")))])])])]):e._e()],1)])],1)},o=[],c=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.defaultDateFormat?i("a-date-picker",e._g(e._b({style:e.styles,attrs:{allowClear:e.allowClear||!1,format:e.defaultDateFormat,dropdownClassName:"bodyCalc",showToday:!0,disabled:e.disabled},on:{openChange:e.OnopenChange},scopedSlots:e._u([{key:"dateRender",fn:function(t,n){return[i("div",{staticClass:"ant-calendar-date",style:e.getCurrentStyle(t,n)},[e._v("\n      "+e._s(t.date())+"\n    ")])]}}],null,!1,299206222),model:{value:e.defaultDateValue,callback:function(t){e.defaultDateValue=t},expression:"defaultDateValue"}},"a-date-picker",e.$attrs,!1),e.$listeners),[e.disabled?i("template",{slot:"suffixIcon"},[i("i",{style:{"background-image":"url("+e.publicPath+"uiimages/datebox_arrow_disable.png)","background-size":"17px 17px",width:"16px",height:"16px"}})]):i("template",{slot:"suffixIcon"},[i("i",{class:["fa fa-calendar",{datePickerLite:"lite"===e.HISUIStyleCode}],attrs:{"aria-hidden":"true"}})])],2):e._e()},l=[],h=i("7618"),d=i("c1df"),u=i.n(d),f=(i("5c3a"),i("365c")),m=i("8593"),p=[],g=[];f["a"].ajax(m["a"].SystemSetting).then((function(e){var t=e.dateformat;window.config.dateformat=t,g.push(t),f["a"].ajax(m["a"].SystemDateTime).then((function(e){var t=e.date;p.push(t)}))})),u.a.locale("zh-cn"),u.a.suppressDeprecationWarnings=!0;var C={name:"dataPicker",inheritAttrs:!1,props:["styles","value","allowClear","disabled","HISUIStyleCode"],data:function(){return{endOpen:!1,dateArray:p,typeArray:g,defaultDateFormat:null,defaultDateValue:null,tempValue:"",publicPath:"".concat("../","images/")}},watch:{dateArray:function(e){if(this.tempValue=e[0],console.log(e[0]),""==this.value||void 0==this.value)return"object"==Object(h["a"])(this.value)?void(this.defaultDateValue=null):(console.log(this.defaultDateFormat),void(this.defaultDateValue=this.moment(e[0],this.defaultDateFormat)));"object"==Object(h["a"])(this.value)?this.defaultDateValue=this.value:"string"==typeof this.value&&(this.defaultDateValue=u()(this.value,this.defaultDateFormat))},typeArray:function(e){console.log(e),this.defaultDateFormat=e[0]},value:function(e){if(""==e||void 0==e)return"object"==Object(h["a"])(e)?void(this.defaultDateValue=null):void(this.defaultDateValue=this.moment(this.dateArray[0]));"object"==Object(h["a"])(e)?this.defaultDateValue=e:"string"==typeof e&&(this.defaultDateValue=u()(e,g[0]))}},methods:{moment:u.a,OnopenChange:function(e){this.endOpen=e},today:function(){var e=this.moment();this.defaultDateValue=e,this.endOpen=!1},close:function(){this.endOpen=!1},getCurrentStyle:function(e){var t={color:"#000000"};return e.format("YYYY-MM-DD")===this.moment().format("YYYY-MM-DD")?(t.color="blue",t.fontWeight="normal"):6==e.day()?t.color="#00ee00":0==e.day()&&(t.color="#cc2222"),t}},created:function(){this.defaultDateFormat=g[0],""!=this.value&&void 0!=this.value?"object"==Object(h["a"])(this.value)?this.defaultDateValue=this.value:"string"==typeof this.value&&(this.defaultDateValue=u()(this.value,g[0])):this.defaultDateValue=null},updated:function(){}},b=C,x=(i("7c51"),i("2877")),S=Object(x["a"])(b,c,l,!1,null,null,null),I=S.exports,k={name:"formControl",props:["searchInfo","sheetCodeSelected","helpInfo","execConfig","docOrderFlag","noExecuteFlag","HISUIStyleCode"],components:{datePicker:I},inheritAttrs:!1,data:function(){return{publicPath:"".concat("../","images/uiimages/"),excuteTimeDefault:!1}},methods:{excuteTimeChange:function(e){this.excuteTimeDefault=e.target.value,this.$emit("switchType","excuteTime",this.excuteTimeDefault)},moment:u.a}},v=k,y=(i("7a22"),i("e132"),Object(x["a"])(v,s,o,!1,null,"74166bda",null)),F=y.exports,w=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"body",staticClass:"stateTag"},[e._l(e.stateTagList,(function(t,n){return i("div",{key:n,staticStyle:{"margin-right":"10px","white-space":"nowrap"},attrs:{title:t.desc}},[i("span",{staticClass:"stateTagItem",style:"background-color:"+t.color}),e._v("\n    "+e._s(t.desc)+"\n  ")])})),i("div",{ref:"stateTagWrapper",staticClass:"stateTagWrapper"},[e.ifShowScroll?i("a-dropdown",{class:["stateTagMore"],style:{width:e.lastTabWidth+"px"},attrs:{placement:"bottomCenter"}},[i("a-button",{staticClass:"tab_menuButton"},[i("i",{staticClass:"fa fa-ellipsis-h",attrs:{"aria-hidden":"true"}})]),i("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},e._l(e.tagItems,(function(t,n){return i("a-menu-item",{key:n},[i("span",{staticClass:"stateTagItem",style:"background-color:"+t.color}),e._v("\n          "+e._s(t.desc)+"\n        ")])})),1)],1):e._e()],1)],2)},$=[],T={name:"stateTag",props:["stateTagList"],inheritAttrs:!1,data:function(){return{tagItems:[],ifShowScroll:!1,lastTabWidth:""}},mounted:function(){var e=this;window.addEventListener("resize",(function(){e.resizeTabItem()}))},watch:{stateTagList:function(){this.resizeTabItem()}},methods:{resizeTabItem:function(){var e=this;this.$nextTick((function(){if(e.$refs.body){var t=0;for(var i in e.stateTagList){var n=e.$refs.body.children[t];n.style.display="",t++}var a=e.$refs.body.clientWidth;e.$refs.body.scrollWidth;for(i in e.tagItems=[],t=0,e.stateTagList)n=e.$refs.body.children[t],n.offsetLeft+n.clientWidth+10>a-20&&(""===e.lastTabWidth&&t>=0&&(e.lastTabWidth=2+a-e.$refs.body.children[t-1].offsetLeft-e.$refs.body.children[t-1].offsetWidth),e.tagItems.push(e.stateTagList[i]),n.style.display="none"),t++;e.ifShowScroll=e.tagItems.length>0}}))}}},O=T,_=(i("79c6"),Object(x["a"])(O,w,$,!1,null,"0fc5c6ae",null)),D=_.exports,E=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:["tab",{"tab-lite":"lite"===e.HISUIStyleCode}]},[i("div",{ref:"wrapper",staticClass:"tab_wrapper"},[e.ifShowScroll?i("a-dropdown",{class:["tab_menu",{dropdown_badge:e.dropDownBadge}],style:{width:e.lastTabWidth+"px"},attrs:{placement:"bottomCenter"}},[i("a-button",{staticClass:"tab_menuButton",style:{"border-bottom":e.lastTabName===e.$t("更多")?"1px solid #ccc":"none"}},[e._v("\n        "+e._s(e.lastTabName)+" "),i("a-icon",{attrs:{type:"caret-down"}})],1),i("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},e._l(e.menuItems,(function(t){return i("a-menu-item",{key:t.index,nativeOn:{click:function(i){return e.$listeners.selectTab(t.code,t.index,t.PCExecFlag,t.emergencyFlag,t.desc)}}},[e._v("\n          "+e._s(t.desc)),t.badge?i("sup",{staticClass:"menuItem_badge"}):e._e()])})),1)],1):e._e(),i("ul",{ref:"body",class:["tab_body",{"is-lite":"lite"===e.HISUIStyleCode}],style:{width:""+e.ulWidth}},e._l(e.data,(function(t){return i("tab-item",e._b({key:t.index,ref:"tabItem",refInFor:!0,attrs:{data:t,tabIndex:t.index,HISUIStyleCode:e.HISUIStyleCode},nativeOn:{click:function(i){i.stopPropagation(),e.$listeners.selectTab(t.code,t.index,t.PCExecFlag,t.emergencyFlag,e.$t("更多"))}}},"tab-item",e.$attrs,!1))})),1)],1),e._t("contentSlot")],2)},P=[],L=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("li",{class:["tabItem",{"is-lite":"lite"===e.HISUIStyleCode},{"is-selected":e.tabIndex===e.tabIndexSelected}]},[e.data.badge?i("sup",{staticClass:"tabItem_badge"}):e._e(),i("a",{staticClass:"tabItem_link"},[e._v("\n    "+e._s(e.data.desc)+"\n  ")])])},N=[],B={name:"tabItem",props:["data","tabIndexSelected","tabIndex","HISUIStyleCode"],components:{},inheritAttrs:!1,data:function(){return{}},methods:{preventEvent:function(e){return console.log(e),!1}}},H=B,A=(i("e6e7"),Object(x["a"])(H,L,N,!1,null,"1dc5d404",null)),j=A.exports,V={name:"tab",props:["data","lastTabName","HISUIStyleCode"],components:{tabItem:j},inheritAttrs:!1,data:function(){return{menuItems:[],ifShowScroll:!1,lastTabWidth:"",ulWidth:"auto",dropDownBadge:!1}},mounted:function(){var e=this;window.onresize=function(){e.resizeTabItem()}},watch:{data:function(){this.resizeTabItem()}},methods:{resizeTabItem:function(){var e=this;this.$nextTick((function(){e.ulWidth="auto",e.dropDownBadge=!1,e.$refs.body.style.width="auto";var t=e.$refs.wrapper.clientWidth,i=e.$refs.body.clientWidth;e.menuItems=[],e.$refs.tabItem.forEach((function(i,n){i.$el.offsetLeft+i.$el.clientWidth>t-68&&(""===e.lastTabWidth&&n>0&&(e.lastTabWidth=2+t-e.$refs.tabItem[n-1].$el.offsetLeft-e.$refs.tabItem[n-1].$el.offsetWidth),e.menuItems.push(i.data),i.data.badge&&(e.dropDownBadge=!0))})),e.ifShowScroll=t<i,e.ifShowScroll?e.ulWidth="auto":e.ulWidth="100%",i<t&&e.$refs.body.style.width}))}}},U=V,M=(i("2ab7"),Object(x["a"])(U,E,P,!1,null,"716a827e",null)),W=M.exports,z=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("a-form",[i("div",{staticClass:"formRow",class:[{lite:"lite"===e.HISUIStyleCode}]},[i("a-form-item",{staticClass:"formItem"},[i("a-select",{staticClass:"orderExcute_select",staticStyle:{width:"120px"},attrs:{defaultValue:"arcimDesc",placeholder:e.$t("医嘱名称"),showSearch:"",allowClear:!0,optionFilterProp:"children",filterOption:e.filterOption,value:e.selectedFilter},on:{change:function(t){e.$listeners.selecteFilterColumns(t)}}},[i("a-icon",{attrs:{slot:"suffixIcon",type:"caret-down"},slot:"suffixIcon"}),e._l(e.filerColumns,(function(t){return i("a-select-option",{key:t.key,attrs:{value:t.key}},[e._v("\n          "+e._s(t.title)+"\n        ")])}))],2)],1),i("a-form-item",{staticClass:"formItem"},[i("a-checkbox",{attrs:{checked:e.fuzzyFlag},on:{change:e.$listeners.checkFuzzy}},[e._v("\n        "+e._s(e.$t("模糊搜索"))+"\n      ")])],1),i("a-form-item",{staticClass:"formItem"},[i("a-input",{staticStyle:{width:"120px"},attrs:{placeholder:e.$t("请输入检索信息")},on:{change:function(t){return e.$listeners.filterOrderText(e.inputText)}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.$listeners.filterInputEnter()}},model:{value:e.inputText,callback:function(t){e.inputText=t},expression:"inputText"}})],1),e.combineFilterBtnVisible?i("a-form-item",{staticClass:"formItem"},[i("a",{staticClass:"filterButton"},[i("span",{on:{mouseenter:function(t){return t.preventDefault(),e.$listeners.showCombineFilter.apply(null,arguments)},mouseleave:function(t){return t.preventDefault(),e.$listeners.hiddenCombineFilter.apply(null,arguments)}}},[e._v("\n          "+e._s(e.$t("组合查询"))+"\n        ")])])]):e._e(),e.emergencyBtn?i("a-divider",{staticClass:"vertDivider",attrs:{type:"vertical"}}):e._e(),e.emergencyBtn?i("a-form-item",{staticClass:"formItem"},[i("a",{staticClass:"hisui-linkbutton"},[i("span",[i("span",{on:{click:function(t){return t.stopPropagation(),e.$listeners.clickEmergencyBtn.apply(null,arguments)}}},[e._v("\n            "+e._s(e.$t("加急"))+"\n          ")]),i("span",[e._v("\n            "+e._s(e.emergencyOrderNum)+"\n          ")])])])]):e._e(),"DefaultSee"!==e.sheetCodeSelected&&"BGYZD"!==e.sheetCodeSelected?i("a-divider",{staticClass:"vertDivider",attrs:{type:"vertical"}}):e._e(),"DefaultSee"!==e.sheetCodeSelected&&"BGYZD"!==e.sheetCodeSelected?i("a-form-item",{staticClass:"formItem"},[i("label",{class:["switchLabelLeft",{active:!e.orderShowMode}]},[e._v(e._s(e.$t("医嘱显示")))]),i("a-switch",{attrs:{checked:e.orderShowMode},on:{change:e.$listeners.switchOrderShowType}}),i("label",{class:["switchLabelRight",{active:e.orderShowMode}]},[e._v(e._s(e.$t("执行记录")))])],1):e._e(),"JYD"===e.sheetCodeSelected?[i("a-divider",{staticClass:"vertDivider",attrs:{type:"vertical"}}),i("a-form-item",{staticClass:"formItem"},[i("a-input",{ref:"inputTempBarCodeDom",staticStyle:{"margin-left":"10px",width:"140px"},attrs:{placeholder:e.$t("输入条码执行医嘱")},on:{change:function(t){return e.$listeners.setTempBarCode(e.inputTempBarCode)}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.$listeners.tempBarCodeInputEnter(!0)}},model:{value:e.inputTempBarCode,callback:function(t){e.inputTempBarCode=t},expression:"inputTempBarCode"}})],1)]:e._e()],2),i("div",{staticClass:"formRow",class:[{lite:"lite"===e.HISUIStyleCode}]},[i("a-form-item",{staticClass:"formItem"},[e._l(e.btnList,(function(t,n){return[i("a",{key:n,staticClass:"hisui-linkbutton"},[i("span",[i("span",{on:{click:function(i){return e.$listeners.onBtnClick(t)}}},[e._v(e._s(t.name))]),i("span",{directives:[{name:"show",rawName:"v-show",value:t.printFlag&&t.unPrintOrderNum,expression:"button.printFlag && button.unPrintOrderNum"}],on:{click:function(i){return i.stopPropagation(),e.$listeners.clickUnPrintNum(t)}}},[e._v("\n              "+e._s(t.unPrintOrderNum)+"\n            ")])])])]}))],2)],1)])},Y=[],R={name:"btnGroup",props:["btnList","fuzzyFlag","filerColumns","orderShowMode","sheetCodeSelected","filterInputText","tempBarCodeText","emergencyBtn","emergencyOrderNum","combineFilterBtnVisible","selectedFilter","HISUIStyleCode"],components:{},inheritAttrs:!1,data:function(){return{inputText:this.filterInputText,inputTempBarCode:this.tempBarCodeText}},watch:{filterInputText:function(){this.inputText=this.filterInputText,this.inputTempBarCode=this.tempBarCodeText}},methods:{filterOption:function(e,t){return t.componentOptions.children[0].text.indexOf(e)>-1}}},G=R,Z=(i("01e0"),i("554c"),Object(x["a"])(G,z,Y,!1,null,"55921d99",null)),q=Z.exports,J=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{on:{mouseenter:function(t){return t.preventDefault(),e.$listeners.showCombineFilterArea.apply(null,arguments)},mouseleave:function(t){return t.preventDefault(),e.$listeners.hiddenCombineFilterArea.apply(null,arguments)}}},[Object.keys(e.sheetComineFilter).length>0?i("div",{staticClass:"combineFilter",class:[{lite:"lite"===e.HISUIStyleCode}],style:"height:"+(28*Object.keys(e.sheetComineFilter).length+2)+"px;"},e._l(e.sheetComineFilter,(function(t,n,a){return i("p",{key:a,staticClass:"condition",style:t.check||e.hoverConditionIndex===a?"lite"===e.HISUIStyleCode?"background-color:#e5e5e5;":"background-color:#dcebf9;":"",on:{mouseenter:function(t){return t.preventDefault(),e.$listeners.getHoverCondition(n,a)},click:function(t){return t.preventDefault(),e.$listeners.clickCondition(n)}}},[e._v("\n      "+e._s(n)+"("+e._s(t.num)+")\n    ")])})),0):e._e(),i("transition",{attrs:{name:"combineItemFilterAnimation"}},[e.sheetComineFilter[e.hoverCondition]&&e.sheetComineFilter[e.hoverCondition].value.length>0?i("div",{staticClass:"combineFilterItem",class:[{lite:"lite"===e.HISUIStyleCode}]},e._l(e.sheetComineFilter[e.hoverCondition].value,(function(t,n){return i("div",{key:n},[i("p",{staticStyle:{"font-size":"14px",margin:"5px 5px 5px 0","padding-left":"10px","font-weight":"bolder"}},[i("span",[e._v(e._s(t.name)+" ")]),e._v(" - "),i("span",{staticClass:"itemOperType"},[e._v(e._s(t.operTypeDesc))])]),i("p",e._l(e.sheetComineFilter[e.hoverCondition].value[n].subValue,(function(t,n){return i("span",{key:n,staticClass:"filterName",style:t.check?"lite"===e.HISUIStyleCode?"background-color:#339eff;color:#fff;":"background-color:#40A2DE;color:#fff;":"background: #efefef;color:#666;",on:{click:function(i){return i.stopPropagation(),e.$listeners.clickSubItem(t,e.hoverCondition)}}},[e._v(e._s(t.subName))])})),0)])})),0):e._e()])],1)},Q=[],K={name:"combineFilter",data:function(){return{}},props:["combineFilterVisible","sheetComineFilter","hoverCondition","hoverConditionIndex","HISUIStyleCode"],created:function(){},methods:{},computed:{},watch:{},mounted:function(){},beforeDestroy:function(){}},X=K,ee=(i("dff3"),Object(x["a"])(X,J,Q,!1,null,"571803e7",null)),te=ee.exports,ie=i("c298"),ne=i("8a77"),ae=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.spinning?i("div",{staticClass:"example"},[i("a-spin",{staticClass:"icon_loading",attrs:{tip:"加载中..."}})],1):e._e()},re=[],se={name:"loading",props:["spinning"],components:{},data:function(){return{}},methods:{}},oe=se,ce=(i("f5ae"),Object(x["a"])(oe,ae,re,!1,null,"46a75b3f",null)),le=ce.exports,he=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:["pagination",{"is-lite":"lite"===e.HISUIStyleCode}]},[i("table",{attrs:{cellspacing:"0",cellpadding:"0",border:"0"}},[i("tbody",[i("tr",[i("td",[i("select",{directives:[{name:"model",rawName:"v-model",value:e.pageSize,expression:"pageSize"}],staticClass:"pagination-page-list",on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.pageSize=t.target.multiple?i:i[0]}}},e._l(e.pageSizeOptions,(function(t){return i("option",{key:t,domProps:{value:t}},[e._v(e._s(t))])})),0)]),e._m(0),i("td",[i("a",{staticClass:"page-btn page-btn-small page-btn-plain",class:1==e.current?"page-btn-disabled page-btn-plain-disabled":"",attrs:{href:"javascript:;",group:"",id:""},on:{click:function(t){e.current=1}}},[i("span",{staticClass:"page-btn-left page-btn-icon-left"},[i("span",{staticClass:"page-btn-text page-btn-empty"},[e._v(" ")]),i("span",{staticClass:"page-btn-icon pagination-first",style:{background:"url("+e.publicPath+"pagination_icons.png) no-repeat 0 center"}},[e._v(" ")])])])]),i("td",[i("a",{staticClass:"page-btn page-btn-small page-btn-plain",class:1==e.current?"page-btn-disabled page-btn-plain-disabled":"",attrs:{href:"javascript:;",group:"",id:""},on:{click:function(t){e.current--}}},[i("span",{staticClass:"page-btn-left page-btn-icon-left"},[i("span",{staticClass:"page-btn-text page-btn-empty"},[e._v(" ")]),i("span",{staticClass:"page-btn-icon pagination-prev",style:{background:"url("+e.publicPath+"pagination_icons.png) no-repeat -16px center"}},[e._v(" ")])])])]),e._m(1),i("td",[i("span",{staticStyle:{"padding-left":"6px"}},[e._v(e._s(e.$t("第")))])]),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.pageVal,expression:"pageVal"}],staticClass:"pagination-num",attrs:{type:"text",value:"1",size:"2"},domProps:{value:e.pageVal},on:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.updatePage.apply(null,arguments)},input:function(t){t.target.composing||(e.pageVal=t.target.value)}}})]),i("td",{staticStyle:{"padding-right":"6px"}},[e._v("\n          "+e._s(e.$t("共"))),i("span",[e._v(e._s(0===e.lastPage?1:e.lastPage))]),e._v(e._s(e.$t("页"))+"\n        ")]),e._m(2),i("td",[i("a",{staticClass:"page-btn page-btn-small page-btn-plain",class:e.lastPage<=e.current?"page-btn-disabled page-btn-plain-disabled":"",attrs:{href:"javascript:;",group:"",id:""},on:{click:function(t){e.current++}}},[i("span",{staticClass:"page-btn-left page-btn-icon-left"},[i("span",{staticClass:"page-btn-text page-btn-empty"},[e._v(" ")]),i("span",{staticClass:"page-btn-icon pagination-next",style:{background:"url("+e.publicPath+"pagination_icons.png) no-repeat -32px center"}},[e._v(" ")])])])]),i("td",[i("a",{staticClass:"page-btn page-btn-small page-btn-plain",class:e.lastPage<=e.current?"page-btn-disabled page-btn-plain-disabled":"",attrs:{href:"javascript:;",group:"",id:""},on:{click:function(t){e.current=e.lastPage}}},[i("span",{staticClass:"page-btn-left page-btn-icon-left"},[i("span",{staticClass:"page-btn-text page-btn-empty"},[e._v(" ")]),i("span",{staticClass:"page-btn-icon pagination-last",style:{background:"url("+e.publicPath+"pagination_icons.png) no-repeat -48px center"}},[e._v(" ")])])])])])])]),i("div",{staticClass:"pagination-info"},[e._v("\n    "+e._s(e.$t("显示"))),i("span",[e._v(e._s(Math.min((e.current-1)*e.pageSize+1,e.total)))]),e._v(e._s(e.$t("到"))),i("span",[e._v(e._s(Math.min(e.current*e.pageSize,e.total)))]),e._v(","+e._s(e.$t("共"))),i("span",[e._v(e._s(e.total))]),e._v(e._s(e.$t("记录"))+"\n  ")]),i("div",{staticStyle:{clear:"both"}})])},de=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("td",[i("div",{staticClass:"pagination-btn-separator"})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("td",[i("div",{staticClass:"pagination-btn-separator"})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("td",[i("div",{staticClass:"pagination-btn-separator"})])}],ue={name:"pagination",props:["total","defaultCurrent","HISUIStyleCode"],data:function(){return{current:1,pageVal:1,pageSize:"50",pageSizeOptions:["50","100","150","200"],publicPath:"".concat("../","images/uiimages/")}},watch:{defaultCurrent:function(e){1===e&&(this.current=1)},total:function(e){this.current=1},current:function(e){this.pageVal=e,this.$emit("changePage",{page:this.current,pageSize:this.pageSize})},pageSize:function(){1==this.current?this.$emit("changePage",{page:this.current,pageSize:this.pageSize}):this.current=1}},methods:{updatePage:function(){this.pageVal=parseInt(this.pageVal),this.pageVal?this.pageVal>this.lastPage?this.pageVal=Math.max(1,this.lastPage):this.pageVal=Math.max(1,this.pageVal):this.pageVal=1,this.current!=this.pageVal&&(this.current=this.pageVal)}},computed:{lastPage:function(){return Math.ceil(this.total/this.pageSize)}}},fe=ue,me=(i("a805"),i("2bc8"),Object(x["a"])(fe,he,de,!1,null,"9586c2e0",null)),pe=me.exports,ge=i("ed08"),Ce=i("bc3a"),be=i.n(Ce),xe=i("7903"),Se=i("4dcb"),Ie={name:"orderExcute",props:["groupID","locID","wardID","userID","episodeID","userName","userCode","isLoad","HISUIStyleCode"],components:{formControl:F,stateTag:D,tab:W,btnGroup:q,orderList:ie["default"],Loading:le,pagination:pe,combineFilter:te,messager:Se["a"]},data:function(){return{hospitalID:+session["LOGON.HOSPID"],spinning:!1,stateTagList:{},tabPane:[],lastTabName:this.$t("更多"),tabIndexSelected:0,sheetCodeSelected:"DefaultSee",sheetCodePCExecFlag:!1,patEpisodeIdSelected:String(parent.EpisodeIDStr),orderExcutebtnGroup:[],triggerButton:{},retObjFun:null,fuzzyFlag:!0,filterInputText:"",tempBarCodeText:"",tempBarCodeEnterFlag:!1,filerColumns:[],selectedFilterColumn:"arcimDesc",searchInfo:{searchNum:1e3,orderType:"A",startDate:null,startTime:null,endDate:null,endTime:null,switchExcuteTypeFlag:"true",switchExcuteTimeFlag:!1,checkLongFlag:!1,checkTempFlag:!1,checkExcuteFlag:!1,checkPrintFlag:!1,checkNewCreateFlag:!1,checkNewDisconFlag:!1,checkUnconfirmFlag:!1,checkConfirmFlag:!1,checkNotPrintFlag:!1,reloadPatAdditionalInfo:!1},orderList:{columns:[],data:{}},ordersExec:[],utils:ge["a"],orderAttachVisible:!1,defaultAttachTypeRadio:"10",orderAttachOrderID:"",totalPageSize:0,defaultCurrent:1,defaultPageSize:50,orderShowMode:!1,publicPath:"".concat("../","images/uiimages/"),dateformat:"",tranData:"",helpInfo:{},execConfig:{},doubleSign:!1,combineFilterBtnVisible:!1,combineFilterVisible:!1,sheetComineFilter:{},hoverCondition:null,hoverConditionIndex:null,selectedCombineFilter:{},conditionSelected:null,emergencyBtn:!1,emergencyOrderNum:0,emergencyBtnCheck:!1,msgContent:"",msgFlag:!1,msgType:"alert",timeSeparator:":",docOrderFlag:!0,nurseOrderFlag:!1,executeFlag:!1,noExecuteFlag:!0,selectedFilter:"arcimDesc",prtConfig:{}}},created:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,i,n,a,r,s,o,c,l,h,d,u=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return f["a"].ajax(m["a"].getPageLangValue,"orderExcute/biz/excute").then((function(e){u.tranData=e,u.$i18n.setLocaleMessage(window.langcode,e),u.$i18n.locale=window.langcode,u.lastTabName=u.$t("更多")})),f["a"].ajax(m["a"].SystemSetting).then((function(e){u.dateformat=e.dateformat})),e.prev=2,e.next=5,f["a"].ajax(xe["a"].getSheetsOfSSGroup,this.groupID,this.locID);case 5:this.tabPane=e.sent,this.tabPane.forEach((function(e,t){e.index=t,1===e.default&&(u.sheetCodeSelected=e.code,u.emergencyBtn=e.emergencyFlag,u.tabIndexSelected=t,u.sheetCodePCExecFlag=e.PCExecFlag)})),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](2),console.log(e.t0);case 12:return this.emergencyBtn||(this.emergencyBtn=this.tabPane[this.tabIndexSelected].emergencyFlag),e.next=15,f["a"].ajax(xe["a"].getExecConfig,this.hospitalID,this.sheetCodeSelected);case 15:if(this.execConfig=e.sent,t=this.execConfig,i=t.startDate,n=t.startTime,a=t.endDate,r=t.endTime,s=t.maxPatNum,o=t.execTimes,c=t.dspStat,this.$set(this.searchInfo,"searchNum",s),this.$set(this.searchInfo,"execTimes",o),this.$set(this.searchInfo,"dspStat",c),l=!1,h=!1,parent&&(l=parent.TWflag,h=parent.HOSflag),l||h)this.$set(this.searchInfo,"startDate",this.moment(parent.TWstartDate,this.dateformat)),this.$set(this.searchInfo,"startTime",this.moment(parent.TWstartTime,"HH:mm")),this.$set(this.searchInfo,"endDate",this.moment(parent.TWendDate,this.dateformat)),this.$set(this.searchInfo,"endTime",this.moment(parent.TWendTime,"HH:mm")),this.sheetCodeSelected=parent.TWsheetCode,this.tabIndexSelected=this.tabPane.findIndex((function(e){return e.code===parent.TWsheetCode})),this.emergencyBtn=this.tabPane[this.tabIndexSelected].emergencyFlag,this.sheetCodePCExecFlag=this.tabPane[this.tabIndexSelected].PCExecFlag;else try{this.$set(this.searchInfo,"startDate",this.moment(i,this.dateformat)),this.$set(this.searchInfo,"startTime",this.moment(n,"HH:mm")),this.$set(this.searchInfo,"endDate",this.moment(a,this.dateformat)),this.$set(this.searchInfo,"endTime",this.moment(r,"HH:mm"))}catch(p){console.log(p)}return"Y"===this.execConfig.patChangeAutoSearchOrd&&(window.parent.searchOrder=this.searchOrder),d=this.getUrlVariable(),console.log(d),""!==d.specifySheetCode&&this.tabPane.some((function(e){return e.code===d.specifySheetCode}))&&(this.sheetCodeSelected=d.specifySheetCode,this.tabIndexSelected=this.tabPane.findIndex((function(e){return e.code===d.specifySheetCode}))),e.next=30,f["a"].ajax(xe["a"].getDisposeStateInfo,this.hospitalID);case 30:this.stateTagList=e.sent,this.reloadPatAdditionalInfo=!1,h?setTimeout((function(){u.fetch(),u.getColumn()}),2e3):(this.fetch(),this.getColumn()),f["a"].ajax(xe["a"].getPrintFlagDesc,this.hospitalID).then((function(e){u.helpInfo=e})),f["a"].ajax(xe["a"].getPrtConfig,this.hospitalID).then((function(e){u.prtConfig=e})),initEditWindow();case 36:case"end":return e.stop()}}),e,this,[[2,9]])})));function t(){return e.apply(this,arguments)}return t}(),watch:{},computed:{isIframe:function(){return window.self!==top}},methods:{moment:u.a,getUrlVariable:function(){console.log("url",window.location.search.substring(1));var e=window.location.search.substring(1).split("&"),t=new Object;return e.forEach((function(e){t[e.split("=")[0]]=e.split("=")[1]})),t},fetch:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,i,n,a,r,s,o,c,l,h,d,u,m,p,g,C,b,x,S,I,k,v,y=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.patEpisodeIdSelected=String(parent.EpisodeIDStr),this.spinning=!0,e.next=4,f["a"].ajax(xe["a"].getExecConfig,this.hospitalID,this.sheetCodeSelected);case 4:return this.execConfig=e.sent,this.tempBarCodeEnterFlag&&(this.tempBarCodeEnterFlag=!1,this.$refs.btnGroupChild.$refs.inputTempBarCodeDom.focus()),"Y"!==this.execConfig.chgSheetKeepSearchContent&&(this.filterInputText=""),this.execConfig.notExecutedFilterFlag||this.$set(this.searchInfo,"checkExcuteFlag",this.executeFlag),this.$set(this.searchInfo,"execTimes",this.execConfig.execTimes),this.$set(this.searchInfo,"dspStat",this.execConfig.dspStat),this.execConfig.ordChangeFilterFlag||(this.$set(this.searchInfo,"checkNewCreateFlag",!1),this.$set(this.searchInfo,"checkNewDisconFlag",!1)),this.execConfig.ordConfirmFilterFlag||(this.$set(this.searchInfo,"checkConfirmFlag",!1),this.$set(this.searchInfo,"checkUnconfirmFlag",!1)),this.execConfig.printFilterFlag||this.$set(this.searchInfo,"checkPrintFlag",!1),this.execConfig.notPrintFilterFlag||this.$set(this.searchInfo,"checkNotPrintFlag",!1),this.orderShowMode="Ord"!==this.execConfig.displayDefaultMode&&("OrdExec"===this.execConfig.displayDefaultMode||this.orderShowMode),t=this.searchInfo,i=t.orderType,n=t.switchExcuteTypeFlag,a=t.switchExcuteTimeFlag,r=t.checkLongFlag,s=t.checkTempFlag,o=t.checkExcuteFlag,c=t.checkPrintFlag,l=t.checkNewCreateFlag,h=t.checkNewDisconFlag,d=t.checkUnconfirmFlag,u=t.checkConfirmFlag,m=t.checkNotPrintFlag,p=this.searchInfo.startDate.format("YYYY-MM-DD"),g=this.searchInfo.endDate.format("YYYY-MM-DD"),C=this.moment(this.searchInfo.startTime).format("HH:mm"),b=this.moment(this.searchInfo.endTime).format("HH:mm"),x=d===u?"":u,S=c===m?"":c,e.next=24,f["a"].ajax(xe["a"].getOrders,this.patEpisodeIdSelected,this.sheetCodeSelected,this.groupID,p,C,g,b,this.hospitalID,this.wardID,this.locID,n,a,i,o,S,r,s,l,h,x);case 24:I=e.sent,I.alertMsg&&(this.msgContent=this.$t(I.alertMsg),this.msgFlag=!0,this.msgType="error"),this.spinning=!1,k=!1,v=[],I.orders.forEach((function(e){Array.isArray(e.execInfos)&&(k=!0,e.execInfos.forEach((function(e){v.push(e)})))})),this.ordersExec=[],k&&v.forEach((function(e){var t=e.ID.split("||")[0]+"||"+e.ID.split("||")[1],i=I.orders.findIndex((function(e){return e.ID===t})),n=I.orders[i],a={};for(var r in n)"execInfos"!==r&&y.$set(a,r,n[r]);for(var s in e)"childs"!==s&&y.$set(a,s,e[s]);Object.keys(a.examInfo).length>0&&(y.$set(a,"arcimDesc",a.examInfo.arcimDesc+" 【"+a.examInfo.partDesc+"】"),y.$set(a,"notes",a.examInfo.partRemark)),y.$set(a,"pagination",!1),y.$set(a,"show",!0),y.$set(a,"check",!1),y.ordersExec.push(a)})),I.orders.forEach((function(e){if(y.$set(e,"pagination",!1),y.$set(e,"check",!1),y.$set(e,"focus",!1),y.$set(e,"indeterminate",!1),y.$set(e,"show",!0),e.execInfos){var t=[],i=[],n={},a=0;e.execInfos.forEach((function(e){y.$set(e,"show",!0),y.$set(e,"check",!1),n[e.sttDate]||(t.push(e.sttDate),n[e.sttDate]=!0),n[e.sttTime]?n[e.sttTime]&&n["".concat(e.sttDate,"-").concat(e.sttTime)]&&(a+=1,e.sttTime="".concat(e.sttTime,"-").concat(a),i.push(e.sttTime)):(i.push(e.sttTime),n[e.sttTime]=!0,n["".concat(e.sttDate,"-").concat(e.sttTime)]=!0)})),i.sort((function(e,t){return parseInt(e.split(":")[0],10)-parseInt(t.split(":")[0],10)})),y.$set(e,"sttDates",t),y.$set(e,"sttTimes",i)}})),this.$set(this.orderList.data,"check",!1),this.$set(this.orderList.data,"indeterminate",!1),this.$set(this.orderList.data,"orders",I.orders),this.updataPagination(),this.tabPane.forEach((function(e){y.$set(e,"badge",!!I[e.code])})),this.$refs.childTab&&this.$refs.childTab.resizeTabItem(),this.emergencyOrderNum=0,this.emergencyBtnCheck=!1,this.orderShowMode?this.ordersExec.forEach((function(e){y.emergencyOrderNum="Y"===e.emergency?y.emergencyOrderNum+1:y.emergencyOrderNum})):this.orderList.data.orders.forEach((function(e){y.emergencyOrderNum="Y"===e.emergency?y.emergencyOrderNum+1:y.emergencyOrderNum})),f["a"].ajax(xe["a"].getSheetButtons,this.hospitalID,this.sheetCodeSelected,o).then((function(e){y.orderExcutebtnGroup=e,y.setBtnUnPrintOrderNum(),y.$nextTick((function(){""!==y.filterInputText&&y.filterInputEnter(!0)}))})),f["a"].ajax(xe["a"].getSheetComineFilter,this.sheetCodeSelected,this.wardID,this.groupID,this.hospitalID).then((function(e){for(var t in y.sheetComineFilter=e,"{}"==JSON.stringify(y.sheetComineFilter)?y.combineFilterBtnVisible=!1:y.combineFilterBtnVisible=!0,y.sheetComineFilter)y.changeCombineFilterCheckState(t,!1);var i=y.getAllCondition(),n=function(e){var t=0;y.orderList.data.orders.forEach((function(n){t+=y.getCombineFilterNum(n,i[e])})),y.$set(y.sheetComineFilter[e],"num",t)};for(var a in i)n(a)})),setTimeout((function(){y.reloadPatAdditionalInfo&&parent&&"function"===typeof parent.getPatAdditionalInfo&&parent.getPatAdditionalInfo()}),2e3);case 45:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),setBtnUnPrintOrderNum:function(){var e=this;this.orderExcutebtnGroup.forEach((function(t){var i=t.printFlag,n=0;e.orderList.data.orders&&i&&e.orderList.data.orders.forEach((function(e){e.execInfos&&e.show?e.execInfos.forEach((function(e){e.show&&(n=String(e.printFlag).split("-").includes(i)?n:n+1)})):e.show&&(n=String(e.printFlag).split("-").includes(i)?n:n+1)})),t.unPrintOrderNum=n,e.$set(t,"unPrintOrderNumCheck",!1)}))},getColumn:function(){var e=this;f["a"].ajax(xe["a"].getSheetColumns,this.sheetCodeSelected,this.hospitalID).then((function(t){if(e.$set(e.orderList,"columns",t),e.filerColumns=t.filter((function(e){return e.filter})),"Y"!==e.execConfig.chgSheetKeepSearchCondition)e.selectedFilterColumn="arcimDesc",e.selectedFilter="arcimDesc";else{var i=t.filter((function(t){return t.key===e.selectedFilterColumn}));0===i.length&&(e.selectedFilterColumn="arcimDesc",e.selectedFilter="arcimDesc")}}))},pickStartDate:function(e){e&&this.$set(this.searchInfo,"startDate",e)},pickStartTime:function(e){if(e){var t=e;"function"===typeof e&&(t=this.moment(e._d).format("HH:mm")),this.$set(this.searchInfo,"startTime",this.moment(t,"HH:mm"))}},pickStartTimePanel:function(e){e||this.pickStartTime(this.getPickInputTime())},pickEndTimePanel:function(e){e||this.pickEndTime(this.getPickInputTime())},getPickInputTime:function(){var e=document.getElementsByClassName("ant-time-picker-panel-input")[0].value;if(!e)return"";var t=[];if(e.indexOf(this.timeSeparator)>-1){t=e.split(this.timeSeparator);for(var i=0;i<t.length;i++)if(isNaN(t[i]))return""}else if(e){e=e.replace(/\s/g,"");var n=/^([0-2][0-9]|[1-9])([0-6][0-9]|[1-9])([0-9]*)$/,a=/^([0-2][0-9]|[1-9])$/;a.test(e)?(t=e.match(a),t.splice(0,1)):n.test(e)&&(t=e.match(n),t.splice(0,1))}while(t.length<3)t.push(0);var r=new Date(1900,0,0,t[0],t[1],t[2]),s=[this.formateTime(r.getHours()),this.formateTime(r.getMinutes())];return s.join(this.timeSeparator)},formateTime:function(e){return(e<10?"0":"")+e},pickEndDate:function(e){e&&this.$set(this.searchInfo,"endDate",e)},pickEndTime:function(e){if(e){var t=e;"function"===typeof e&&(t=this.moment(e._d).format("HH:mm")),this.$set(this.searchInfo,"endTime",this.moment(t,"HH:mm"))}},switchType:function(e,t){"excuteType"===e?(this.$set(this,t,!this[t]),this.docOrderFlag===this.nurseOrderFlag?this.$set(this.searchInfo,"switchExcuteTypeFlag",""):this.docOrderFlag&&!this.nurseOrderFlag?this.$set(this.searchInfo,"switchExcuteTypeFlag",!0):!this.docOrderFlag&&this.nurseOrderFlag&&this.$set(this.searchInfo,"switchExcuteTypeFlag",!1)):"excuteTime"===e?this.$set(this.searchInfo,"switchExcuteTimeFlag",t):"excute"===e&&(this.$set(this,t,!this[t]),this.execConfig.notExecutedFilterFlag?this.executeFlag===this.noExecuteFlag?this.$set(this.searchInfo,"checkExcuteFlag",""):this.executeFlag&&!this.noExecuteFlag?this.$set(this.searchInfo,"checkExcuteFlag",!0):!this.executeFlag&&this.noExecuteFlag&&this.$set(this.searchInfo,"checkExcuteFlag",!1):this.$set(this.searchInfo,"checkExcuteFlag",!this.searchInfo[t]))},checkboxClick:function(e){this.$set(this.searchInfo,e,!this.searchInfo[e])},selectTab:function(e,t,i,n,a){this.changeCombineFilterVisible(!1),this.defaultCurrent=1,this.sheetCodeSelected=e,this.emergencyBtn=n,this.sheetCodePCExecFlag=i,this.tabIndexSelected=t,a&&(this.lastTabName=a),"DefaultSee"===e&&(this.orderShowMode=!1),this.reloadPatAdditionalInfo=!1,this.fetch(),this.getColumn()},dateQuickSwitch:function(e){this.$set(this.searchInfo,"startDate",this.moment(this.moment(this.searchInfo.startDate,this.dateformat).add(e,"days").format(this.dateformat))),this.$set(this.searchInfo,"endDate",this.moment(this.moment(this.searchInfo.endDate,this.dateformat).add(e,"days").format(this.dateformat))),this.searchOrder()},searchOrder:function(){this.changeCombineFilterVisible(!1);var e=this.searchInfo,t=e.startDate,i=e.startTime,n=e.endDate,a=e.endTime,r=e.searchNum,s=e.checkExcuteFlag,o=e.checkPrintFlag;if(!t||!i||!n||!a)return this.msgContent=this.$t("查询条件错误"),this.msgFlag=!0,void(this.msgType="error");this.patEpisodeIdSelected=String(parent.EpisodeIDStr);var c=this.patEpisodeIdSelected.split("^").length;if(c>r&&""!==r&&(s||o))return this.msgContent=this.$t("已执行/已打印的查询人数上限为")+r+"!",this.msgFlag=!0,void(this.msgType="error");this.reloadPatAdditionalInfo=!1,this.fetch()},checkFuzzy:function(){this.fuzzyFlag=!this.fuzzyFlag},filterOrderText:function(e){this.filterInputText=e},setTempBarCode:function(e){this.tempBarCodeText=e},selecteFilterColumns:function(e){e?(this.selectedFilterColumn=e,this.selectedFilter=e):(this.selectedFilterColumn="arcimDesc",this.selectedFilter="arcimDesc")},changeCombineFilterVisible:function(e){this.combineFilterVisible=e},showCombineFilter:function(){this.hoverConditionIndex=null,this.hoverCondition=null,this.combineFilterVisible=!0},hiddenCombineFilter:function(){var e=this;setTimeout((function(){e.combineFilterVisible&&!e.hoverCondition&&(e.combineFilterVisible=!1)}),800)},getHoverCondition:function(e,t){var i=this;this.hoverConditionIndex&&this.hoverCondition?(this.hoverCondition=null,setTimeout((function(){i.hoverConditionIndex=t,i.hoverCondition=e}),200)):(this.hoverConditionIndex=t,this.hoverCondition=e)},showCombineFilterArea:function(){this.changeCombineFilterVisible(!0)},hiddenCombineFilterArea:function(){this.changeCombineFilterVisible(!1)},changeCombineFilterCheckState:function(e,t){var i=this;this.sheetComineFilter[e].value&&this.sheetComineFilter[e].value.length>0&&(this.$set(this.sheetComineFilter[e],"check",t),this.sheetComineFilter[e].value.forEach((function(e){e.subValue&&e.subValue.length>0&&e.subValue.forEach((function(e){i.$set(e,"check",t)}))})))},clickCondition:function(e){if(this.conditionSelected===e)for(var t in this.conditionSelected=null,this.sheetComineFilter)this.changeCombineFilterCheckState(t,!1);else for(var i in this.conditionSelected=e,this.sheetComineFilter)e!==i?this.changeCombineFilterCheckState(i,!1):this.changeCombineFilterCheckState(i,!0);this.resetOrderShowState(),this.resetCheckBoxStatue(),this.getCombineFilterCondition(e),this.combineFilterOrder(!0),this.setBtnUnPrintOrderNum()},clickSubItem:function(e,t){this.conditionSelected=t,this.$set(this.sheetComineFilter[t],"check",!0);var i=e.check;if(!i)for(var n in this.sheetComineFilter)t!==n&&this.changeCombineFilterCheckState(n,!1);this.$set(e,"check",!i),this.resetOrderShowState(),this.resetCheckBoxStatue(),this.getCombineFilterCondition(t),this.combineFilterOrder(!0),this.setBtnUnPrintOrderNum()},getAllCondition:function(){var e=this,t={},i=function(i){t[i]={},e.sheetComineFilter[i].value&&e.sheetComineFilter[i].value.length>0&&e.sheetComineFilter[i].value.forEach((function(e){var n=e.operType;e.subValue&&e.subValue.length>0&&e.subValue.forEach((function(a){var r={filterValue:a.subCode,filterType:n};t[i][e.code]||(t[i][e.code]=[]),t[i][e.code].push(r)}))}))};for(var n in this.sheetComineFilter)i(n);return t},getCombineFilterCondition:function(e){var t=this;this.selectedCombineFilter={},this.sheetComineFilter[e].value&&this.sheetComineFilter[e].value.length>0&&this.sheetComineFilter[e].value.forEach((function(e){if(e.subValue&&e.subValue.length>0){var i=e.subValue.some((function(e){return!0===e.check}));i&&e.subValue.forEach((function(i){if(i.check){var n={filterValue:i.subCode,filterType:e.operType};t.selectedCombineFilter[e.code]||t.$set(t.selectedCombineFilter,e.code,[]),t.selectedCombineFilter[e.code].push(n)}}))}}))},getOrderShowState:function(e,t,i){var n=!0;if(t[i].length>0)if(e[i])if("printFlag"===i){var a=e["printFlag"].split("-");n=a.findIndex((function(e){return t[i].findIndex((function(t){return"F"===t.filterType?t.filterValue===e:t.filterValue!=e}))>-1}))>-1}else n=t[i].findIndex((function(t){return"F"===t.filterType?t.filterValue===e[i]:t.filterValue!=e[i]}))>-1;else n=!1;return n},getCombineFilterNum:function(e,t){var i=this,n=!0,a=0,r=[],s=function(a){var s=null,o=[];n&&(n=i.getOrderShowState(e,t,a),n||0===e.childs.length||e.childs.forEach((function(e){n=n||i.getOrderShowState(e,t,a)})),!n&&e.sameLabNoOrders&&e.sameLabNoOrders.length>0&&e.sameLabNoOrders.forEach((function(e){n=n||i.getOrderShowState(e,t,a)})),e.execInfos&&(n&&e.execInfos.length>0&&e.execInfos.forEach((function(e){o.push(e.ID)})),!n&&e.execInfos.length>0&&e.execInfos.forEach((function(e){var r=i.getOrderShowState(e,t,a);n=n||r,r&&o.push(e.ID)})),s?(r=i.getArrEqual(r,o),0===r.length&&(n=!1),o=[]):(r=o,o=[]),s=a))};for(var o in t)s(o);return a=n?e.execInfos?r.length:1:0,a},getArrEqual:function(e,t){var i=e.filter((function(e){return-1!=t.indexOf(e)}));return i},combineFilterOrderData:function(e){var t=this,i=this.selectedCombineFilter,n=function(n){e.forEach((function(e){e.show&&(e.show=t.getOrderShowState(e,i,n),0===e.childs.length||e.show||e.childs.forEach((function(a){e.show=!0===e.show||t.getOrderShowState(a,i,n)})),e.execInfos&&!e.show&&e.execInfos.length>0&&e.execInfos.forEach((function(a){a.show&&(e.show=!0===e.show||t.getOrderShowState(a,i,n),a.show=t.getOrderShowState(a,i,n))})),e.sameLabNoOrders&&!e.show&&e.sameLabNoOrders.length>0&&e.sameLabNoOrders.forEach((function(a){e.show=!0===e.show||t.getOrderShowState(a,i,n)})))}))};for(var a in i)n(a)},combineFilterOrder:function(e){Object.keys(this.selectedCombineFilter).length>0?this.orderShowMode?(this.combineFilterOrderData(this.ordersExec),this.combineFilterOrderData(this.orderList.data.orders)):this.combineFilterOrderData(this.orderList.data.orders):this.resetOrderShowState(),e&&""!==this.filterInputText&&this.filterOrder(),this.updataPagination()},filterOrderData:function(e,t,i,n,a){e.forEach((function(e){e.show&&(e.show=!!n.find((function(n){if(e[n]){var r=String(e[n]);if(a){if(r.indexOf(t)>-1||r.indexOf(i)>-1||r.toUpperCase().indexOf(i)>-1||ne["a"].getFirstLetter(r).indexOf(i)>-1)return!0}else if(r===t)return!0}return!1})),0===e.childs.length||e.show||e.childs.forEach((function(r){e.show=!0===e.show||!!n.find((function(e){if(r[e]){var n=String(r[e]);if(a){if(n.indexOf(t)>-1||n.indexOf(i)>-1||n.toUpperCase().indexOf(i)>-1||ne["a"].getFirstLetter(n).indexOf(i)>-1)return!0}else if(n===t)return!0}return!1}))})),e.sameLabNoOrders&&!e.show&&e.sameLabNoOrders.length>0&&e.sameLabNoOrders.forEach((function(r){e.show=!0===e.show||!!n.find((function(e){if(r[e]){var n=String(r[e]);if(a){if(n.indexOf(t)>-1||n.indexOf(i)>-1||n.toUpperCase().indexOf(i)>-1||ne["a"].getFirstLetter(n).indexOf(i)>-1)return!0}else if(n===t)return!0}return!1}))})))}))},filterOrder:function(){var e=this.filterInputText,t=this.selectedFilterColumn,i=this.fuzzyFlag;if(this.orderList.data.orders){var n=e.toUpperCase(),a=[];a.push(t),this.orderShowMode?(this.filterOrderData(this.ordersExec,e,n,a,i),this.filterOrderData(this.orderList.data.orders,e,n,a,i)):this.filterOrderData(this.orderList.data.orders,e,n,a,i)}},tempBarCodeInputEnter:function(){var e=this;this.orderShowMode&&this.ordersExec.forEach((function(t){t.labNo===e.tempBarCodeText?(e.$set(t,"check",!0),e.$set(t,"show",!0)):e.$set(t,"check",!1)})),this.orderList.data.orders&&this.orderList.data.orders.forEach((function(t){t.labNo==e.tempBarCodeText?(e.$set(t,"check",!0),e.$set(t,"show",!0),t.execInfos&&t.execInfos.forEach((function(t){e.$set(t,"check",!0),e.$set(t,"show",!0)}))):(e.$set(t,"check",!1),t.execInfos&&t.execInfos.forEach((function(t){e.$set(t,"check",!1)})))})),this.updateCheckBox(),this.orderExcutebtnGroup.forEach((function(t){"excuteOrder"===t.code&&(e.tempBarCodeEnterFlag=!0,e.onBtnClick(t))}))},filterInputEnter:function(e){this.resetCheckBoxStatue(),this.resetOrderShowState(),""!==this.filterInputText?this.filterOrder():this.resetOrderShowState(),e&&Object.keys(this.selectedCombineFilter).length>0&&(this.orderShowMode?(this.combineFilterOrderData(this.ordersExec),this.combineFilterOrderData(this.orderList.data.orders)):this.combineFilterOrderData(this.orderList.data.orders)),this.updataPagination()},clickEmergencyBtn:function(){var e=this;if(0!==this.emergencyOrderNum){this.resetCheckBoxStatue();var t=this.emergencyBtnCheck;t?this.resetOrderShowState():(this.orderShowMode&&this.ordersExec.forEach((function(t){"Y"===t.emergency?(e.$set(t,"check",!0),e.$set(t,"show",!0)):(e.$set(t,"check",!1),e.$set(t,"show",!1))})),this.orderList.data.orders&&(this.orderList.data.orders.forEach((function(t){"Y"===t.emergency?(e.$set(t,"check",!0),e.$set(t,"show",!0),t.execInfos&&t.execInfos.forEach((function(t){e.$set(t,"check",!0),e.$set(t,"show",!0)}))):(e.$set(t,"check",!1),e.$set(t,"show",!1),t.execInfos&&t.execInfos.forEach((function(t){e.$set(t,"check",!1),e.$set(t,"show",!1)})))})),this.updateCheckBox())),this.updataPagination(),this.emergencyBtnCheck=!t,this.setBtnUnPrintOrderNum()}},clickUnPrintNum:function(e){var t=this;this.resetCheckBoxStatue();var i=e.printFlag,n=!!e.unPrintOrderNumCheck;this.orderExcutebtnGroup.forEach((function(e){e.printFlag&&(e.printFlag!==i?t.$set(e,"unPrintOrderNumCheck",!1):t.$set(e,"unPrintOrderNumCheck",n))})),n?(this.resetOrderShowState(),this.combineFilterOrder(!0),this.setBtnUnPrintOrderNum()):(this.orderShowMode&&this.ordersExec.forEach((function(e){String(e.printFlag).indexOf(i)<0&&e.show?(t.$set(e,"check",!0),t.$set(e,"show",!0)):(t.$set(e,"check",!1),t.$set(e,"show",!1))})),this.orderList.data.orders&&(this.orderList.data.orders.forEach((function(e){if(e.show){var n=0;if(t.$set(e,"check",!1),t.$set(e,"show",!1),e.execInfos){e.execInfos.forEach((function(e){String(e.printFlag).split("-").includes(i)?(t.$set(e,"check",!1),t.$set(e,"show",!1)):(t.$set(e,"check",!0),t.$set(e,"show",!0),n++)}));var a=e.execInfos.length-n;0===a?(t.$set(e,"check",!0),t.$set(e,"indeterminate",!1),t.$set(e,"show",!0),e.show=!0):0===n?(t.$set(e,"check",!1),t.$set(e,"indeterminate",!1),t.$set(e,"show",!1)):(t.$set(e,"check",!1),t.$set(e,"indeterminate",!0),t.$set(e,"show",!0))}else String(e.printFlag).split("-").includes(i)?(t.$set(e,"check",!1),t.$set(e,"show",!1)):(t.$set(e,"check",!0),t.$set(e,"show",!0))}})),this.updateCheckBox()),this.updataPagination()),e.unPrintOrderNumCheck=!n},onOrderListCheckAll:function(){var e=this,t=this.orderList.data.check;this.orderShowMode&&this.ordersExec.forEach((function(i){i.show&&e.$set(i,"check",!t)})),this.$set(this.orderList.data,"check",!t),this.$set(this.orderList.data,"indeterminate",!1),this.orderList.data.orders.forEach((function(i){i.show&&(e.$set(i,"indeterminate",!1),e.$set(i,"check",!t),i.execInfos&&i.execInfos.forEach((function(i){i.show&&e.$set(i,"check",!t)})))}))},onOrderItemClickCell:function(e,t,i){if("Y"!==this.execConfig.clickAutoCheckRow)return!1;var n=!0;if(!this.orderShowMode){var a=this.orderList.data.orders[e].check;"undefined"!==typeof i&&this.orderList.data.orders[e].execInfos&&this.orderList.data.orders[e].execInfos.forEach((function(e){e.check!==a&&(n=!1)}))}n&&this.onOrderItemCheckAll(e,t)},onOrderItemCheckAll:function(e,t){var i=this;if(this.orderShowMode){var n=this.ordersExec[e].check;this.$set(this.ordersExec[e],"check",!n),this.orderList.data.orders.forEach((function(e){if(Array.isArray(e.execInfos)){var a=e.execInfos.findIndex((function(e){return e.ID===t}));a>-1&&i.$set(e.execInfos[a],"check",!n)}})),this.orderList.data.orders.forEach((function(e){if(Array.isArray(e.execInfos)){var t=e.execInfos.some((function(e){return!0===e.check})),n=e.execInfos.every((function(e){return!0===e.check}));t&&!n?(i.$set(e,"indeterminate",!0),i.$set(e,"check",!1)):t?n&&(i.$set(e,"indeterminate",!1),i.$set(e,"check",!0)):(i.$set(e,"indeterminate",!1),i.$set(e,"check",!1))}}))}else{var a=this.orderList.data.orders[e].check;this.$set(this.orderList.data.orders[e],"check",!a),this.$set(this.orderList.data.orders[e],"indeterminate",!1),this.orderList.data.orders[e].execInfos&&this.orderList.data.orders[e].execInfos.forEach((function(e){i.$set(e,"check",!a)}))}this.updateCheckBox()},updateCheckBox:function(){var e=this.orderList.data.orders.some((function(e){return!0===e.indeterminate})),t=this.orderList.data.orders.some((function(e){return!0===e.check})),i=this.orderList.data.orders.every((function(e){return!0===e.check}));i&&(this.$set(this.orderList.data,"check",!0),this.$set(this.orderList.data,"indeterminate",!1)),t&&!i&&(this.$set(this.orderList.data,"check",!1),this.$set(this.orderList.data,"indeterminate",!0)),t||(this.$set(this.orderList.data,"check",!1),this.$set(this.orderList.data,"indeterminate",!1)),e&&(this.$set(this.orderList.data,"check",!1),this.$set(this.orderList.data,"indeterminate",!0))},resetCheckBoxStatue:function(){var e=this;this.$set(this.orderList.data,"indeterminate",!1),this.$set(this.orderList.data,"check",!1),this.orderShowMode?this.ordersExec.forEach((function(t){e.$set(t,"check",!1)})):this.orderList.data.orders.forEach((function(t){e.$set(t,"indeterminate",!1),e.$set(t,"check",!1),t.execInfos&&t.execInfos.forEach((function(t){e.$set(t,"check",!1)}))}))},updateExecCheckStatus:function(e){var t=e.index,i=e.execIndex,n=this.orderList.data.orders[t].execInfos[i].check;this.orderList.data.orders[t].execInfos[i].check=!n},onOrderTimeChartChecked:function(e,t){this.updateExecCheckStatus({index:e,execIndex:t});var i=this.orderList.data.orders[e].execInfos.some((function(e){return!0===e.check})),n=this.orderList.data.orders[e].execInfos.every((function(e){return!0===e.check}));n&&(this.$set(this.orderList.data.orders[e],"check",!0),this.$set(this.orderList.data.orders[e],"indeterminate",!1)),i&&!n&&(this.$set(this.orderList.data.orders[e],"check",!1),this.$set(this.orderList.data.orders[e],"indeterminate",!0)),i||(this.$set(this.orderList.data.orders[e],"check",!1),this.$set(this.orderList.data.orders[e],"indeterminate",!1)),this.updateCheckBox()},resetOrderShowState:function(){var e=this;this.orderShowMode?this.ordersExec.forEach((function(t){e.$set(t,"show",!0)})):this.orderList.data.orders.forEach((function(t){e.$set(t,"show",!0),t.execInfos&&t.execInfos.length>0&&t.execInfos.forEach((function(t){e.$set(t,"show",!0)}))}))},checkOrderLink:function(){var e="";this.orderList.data.orders.forEach((function(t){t.show&&t.check&&"DOCTOR"===t.CtcpType&&(e=""===e?t.ID:e+"^"+t.ID,t.childs&&t.childs.length>0&&t.childs.forEach((function(t){""===t.bindSource&&"DOCTOR"===t.CtcpType&&(e=e+"@"+t.ID)})),t.sameLabNoOrders&&t.sameLabNoOrders.length>0&&t.sameLabNoOrders.forEach((function(t){e=e+"@"+t.ID})))}));var t=Math.floor(.96*window.screen.availWidth),i=Math.floor(.96*window.screen.availHeight),n=(window.screen.availHeight-i)/2,a=(window.screen.availWidth-t)/2,r=(new Date).getTime();console.log(e),f["a"].ajax(xe["a"].saveOrdCheckOrd,this.userID,r,e).then((function(e){var s="ipdoc.nursesupplementord.hui.csp?OrderListPage=nur.hisui.costbinding.csp&timeStamp=".concat(r,"&groupOeoriIdStr=");"undefined"!==typeof websys_getMWToken&&(s+="&MWToken="+websys_getMWToken()),window.open(s,"医嘱校对","top=".concat(n,",left=").concat(a,",width=").concat(t,",height=").concat(i))}))},onBtnClick:function(e){var t=this;if(this.reloadPatAdditionalInfo=!0,this.changeCombineFilterVisible(!1),this.doubleSign=!1,this.triggerButton=e,"checkOrder"===e.jsFunction)return this.checkOrderLink(),!1;try{var i=function(i){var n;if(!i.handle)return t.msgContent=t.$t("OrderExute.js缺少handle函数"),t.msgFlag=!0,void(t.msgType="error");if(n=i.handle(e,t),"string"===typeof n)return t.msgContent=n,t.msgFlag=!0,void(t.msgType="error");if("lisBarPrintMerge"===e.jsFunction)f["a"].ajax(xe["a"].getSameLabNoMessage,t.orderIds.join("^")).then((function(e){if(e.length>0){var i=[],a="";e.forEach((function(e){a+=e.patName+e.arcimDesc+"存在需要合管的"+e.sameLabNoArcimDesc+"，",i.push(e.oeoriId)}));var r=t,s=t.$createElement;t.$confirm({title:t.$t("合管提醒"),content:s("div",{},[s("p","".concat(a).concat(t.$t("需处理后打印")))]),okText:t.$t("处理并打印"),cancelText:t.$t("暂不处理"),maskStyle:{backgroundColor:"rgba(0, 0, 0, 0.3)"},onOk:function(){if(n&&"function"===typeof n){var e={userID1:r.userID,locID:r.locID,userName:r.userName,queryTypeCode:r.sheetCodeSelected,searchInfo:r.searchInfo,oeoriIdStr:i.join("^")},t={ajax:f["a"].ajax,axios:be.a,orderExcuteApi:xe["a"]};n(r.fetch,t,e,"Y")}},onCancel:function(){r.msgContent=r.$t("需先处理医嘱后再打印条码"),r.msgFlag=!0,r.msgType="error"}})}else if(n&&"function"===typeof n){var o={userID1:t.userID,locID:t.locID,userName:t.userName,queryTypeCode:t.sheetCodeSelected,searchInfo:t.searchInfo},c={ajax:f["a"].ajax,axios:be.a,orderExcuteApi:xe["a"]};n(t.fetch,c,o,"")}}));else if("seeOrder"===e.jsFunction||"cancelSeeOrder"===e.jsFunction||"excuteOrder"===e.jsFunction||"cancelOrder"===e.jsFunction||"clearPlacerNo"===e.jsFunction||"setSkinTest"===e.jsFunction||"stopExcuteOrder"===e.jsFunction){var a=e.showWindow?e.itemSign&&t.doubleSign?"D":e.itemSign?"S":"W":"N";handleOrderCom(e.jsFunction,e.desc,a,t.sheetCodePCExecFlag,n,t.fetch,"NUR")}else if("confirmFee"===e.jsFunction)handleOrderCom(e.jsFunction,e.desc,"N",t.sheetCodePCExecFlag,n,t.fetch,"NUR");else if(n&&"function"===typeof n){var r={userID1:t.userID,locID:t.locID,userName:t.userName,queryTypeCode:t.sheetCodeSelected,searchInfo:t.searchInfo},s={ajax:f["a"].ajax,axios:be.a,orderExcuteApi:xe["a"]};n(t.fetch,s,r)}};ge["a"].createJS("OrderExcute",i)}catch(n){this.msgContent=n.message,this.msgFlag=!0,this.msgType="error"}},openOrdSkinHistory:function(e){var t="nur.hisui.skintestrecord.csp?OrderId=".concat(e.ID);websys_showModal({iconCls:"icon-w-eye",url:t,title:this.$t("皮试记录"),width:700,height:500})},openInsOrd:function(e,t){var i=Math.floor(.96*window.screen.availWidth),n=Math.floor(.96*window.screen.availHeight),a=(window.screen.availHeight-n)/2,r=(window.screen.availWidth-i)/2,s="websys.chartbook.hisui.csp?ChartBookName=InpatientOderEntry&PatientID=".concat(t.patientID,"&EpisodeID=").concat(t.episodeID,"&mradm=").concat(t.mradm,"&SwitchSysPat=N");"undefined"!==typeof websys_getMWToken&&(s+="&MWToken="+websys_getMWToken()),"attOrdBtn"===e?(s+="&OeordID=".concat(t.ID),window.open(s,"绑费用","top=".concat(a,",left=").concat(r,",width=").concat(i,",height=").concat(n))):window.open(s,"补费用","top=".concat(a,",left=").concat(r,",width=").concat(i,",height=").concat(n))},openPrescWindow:function(e){var t="dhcpha/dhcpha.common.prescpreview.csp?paramsstr=DHCINPHA^".concat(e,"^Y+&PrtType=DISPPREVIEW");websys_createWindow(t,"处方预览","")},onContainerInfoHover:function(e){var t=this,i=e.ID;f["a"].ajax(xe["a"].getCollectAttention,i,this.userID,this.locID,this.groupID).then((function(i){t.$set(e,"collectAttention",i)}))},onOrderExecHover:function(e,t){var i=this,n=[];n.push(t.ID),e.sameLabNoOrders&&e.sameLabNoOrders.forEach((function(e){e.execInfos&&e.execInfos.forEach((function(e){n.push(e.ID)}))})),t.childs&&t.childs.forEach((function(e){n.push(e.ID)})),f["a"].ajax(xe["a"].getExecAttArcim,n.join("^"),"").then((function(e){i.$set(t,"attOrder",e)}))},onOrderArcimDescHover:function(e){var t=this,i=e.ID;f["a"].ajax(xe["a"].getLibPhaRule,i,this.userID,this.locID,this.groupID).then((function(i){if(i&&i.length>0){var n="";i.forEach((function(e){e.retMsg&&e.retMsg.forEach((function(e){e.chlidren.forEach((function(e,t){n+="(".concat(t+1,")").concat(e.labelDesc,":").concat(e.alertMsg,";<br/>")}))}))})),t.$set(e,"libPhaRuleDesc",n)}}))},closeLoopBtnClick:function(e){var t=this;this.orderShowMode&&f["a"].ajax(xe["a"].getCloseLoopInfo,e.ID).then((function(i){i&&i.ordLoopList&&i.ordLoopList.length>0&&t.$set(e,"closeLoopInfo",i.ordLoopList)}))},onPlacerNoKeyDown:function(e,t){var i=this;this.reloadPatAdditionalInfo=!1;var n=function(n){if(n.setPlacerNo){var a={ajax:f["a"].ajax,orderExcuteApi:xe["a"]};n.setPlacerNo(i.fetch,i,a,t,e)}else i.msgContent=i.$t("OrderExute.js缺少setPlacerNo函数"),i.msgFlag=!0,i.msgType="error"};ge["a"].createJS("OrderExcute",n)},attachOrderClick:function(e){var t=this;this.orderAttachOrderID=e.ID;var i=e.execInfos.find((function(e){return e.check}));if(i&&i.check&&"ExecDiscon"!==i.disposeStatCode){var n=e.ID;this.defaultAttachTypeRadio="10",f["a"].ajax(xe["a"].getAttachOrder,n,this.defaultAttachTypeRadio).then((function(e){e.length>0?t.orderAttachVisible=!0:(t.defaultAttachTypeRadio="11",f["a"].ajax(xe["a"].getAttachOrder,n,t.defaultAttachTypeRadio).then((function(e){e.length>0?t.orderAttachVisible=!0:(t.msgContent=t.$t("未关联可以进行手动绑定的医嘱项"),t.msgFlag=!0,t.msgType="info")})))}))}else{var a=this.$t("请选择医嘱");i&&"ExecDiscon"===i.disposeStatCode&&(a=this.$t("执行记录为停止执行状态,无法绑定医嘱")),this.msgContent=a,this.msgFlag=!0,this.msgType="info"}},saveAttachOrder:function(e){var t=this,i=e.order,n=e.attachOrders,a=e.checkedAttachOrders;this.reloadPatAdditionalInfo=!0;var r=this.userID,s=this.locID,o=[];i.execInfos.forEach((function(e){e.check&&o.push(e.ID)}));var c=[],l=[],h=[],d=[],u=[],m=[],p=[],g=[],C=[],b=[];a.forEach((function(e){var t=n.find((function(t){return t.ArcimId===e}));c.push(t.ArcimId),l.push(t.ArcimDesc),h.push(t.Qty),d.push(t.ByHand),u.push(t.ExecType),m.push(t.NotLinkPriorStr),p.push(t.SingleNotFee),g.push(t.StartNum),C.push(t.EndNum),b.push(t.AppendOrdType)})),f["a"].ajax(xe["a"].execAttachAricm,r,s,o.join("$"),c.join("$"),h.join("$"),d.join("$"),u.join("$"),m.join("$"),p.join("$"),g.join("$"),C.join("$"),b.join("$")).then((function(e){"0"===String(e)?(t.msgContent=t.$t("绑定用法医嘱成功"),t.msgFlag=!0,t.msgType="success",t.fetch()):(t.msgContent="".concat(e),t.msgFlag=!0,t.msgType="error")})),this.orderAttachVisible=!1},switchOrderShowType:function(){var e=this;for(var t in this.orderShowMode=!this.orderShowMode,this.resetCheckBoxStatue(),this.orderExcutebtnGroup.forEach((function(t){e.$set(t,"unPrintOrderNumCheck",!1)})),this.emergencyBtnCheck=!1,this.emergencyOrderNum=0,this.orderShowMode?this.ordersExec.forEach((function(t){e.emergencyOrderNum="Y"===t.emergency?e.emergencyOrderNum+1:e.emergencyOrderNum})):this.orderList.data.orders.forEach((function(t){e.emergencyOrderNum="Y"===t.emergency?e.emergencyOrderNum+1:e.emergencyOrderNum})),this.filterInputText="",this.sheetComineFilter)this.changeCombineFilterCheckState(t,!1);this.resetOrderShowState(),this.updataPagination()},updataPagination:function(){var e,t=this;this.totalPageSize=0,e=this.orderShowMode?this.ordersExec:this.orderList.data.orders,e.forEach((function(e){e.show&&(t.totalPageSize+=1)})),this.defaultCurrent=1,this.handleOrdersVisible(this.defaultCurrent,this.defaultPageSize)},onChangeNum:function(e){this.defaultCurrent=e.page,this.defaultPageSize=e.pageSize,document.querySelector(".orderList_body").scrollTop=0,this.handleOrdersVisible(this.defaultCurrent,this.defaultPageSize)},handleOrdersVisible:function(e,t){var i,n=this,a=(e-1)*t,r=e*t-1;i=this.orderShowMode?this.ordersExec:this.orderList.data.orders,i.filter((function(e){return!0===e.show})).forEach((function(e,t){t>=a&&t<=r?n.$set(e,"pagination",!0):n.$set(e,"pagination",!1)}))}}},ke=Ie,ve=(i("d380"),i("bfe3"),i("403a"),Object(x["a"])(ke,n,a,!1,null,"49c7ef9e",null));t["default"]=ve.exports},"79c6":function(e,t,i){"use strict";var n=i("a5ca"),a=i.n(n);a.a},"7a22":function(e,t,i){"use strict";var n=i("d0af"),a=i.n(n);a.a},"7c51":function(e,t,i){"use strict";var n=i("ef12"),a=i.n(n);a.a},"7c52":function(e,t,i){},"7ebe":function(e,t,i){"use strict";var n=i("48c09"),a=i.n(n);a.a},"8b15":function(e,t,i){},"8c98":function(e,t,i){},9552:function(e,t,i){"use strict";var n=i("394c"),a=i.n(n);a.a},"977c":function(e,t,i){},a5ca:function(e,t,i){},a805:function(e,t,i){"use strict";var n=i("7c52"),a=i.n(n);a.a},bc1f:function(e,t,i){},bfe3:function(e,t,i){"use strict";var n=i("ed4e"),a=i.n(n);a.a},c298:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:["orderList",{"orderList-lite":"lite"===e.HISUIStyleCode}]},[i("div",{ref:"headWrapper",staticClass:"orderList_head"},[i("table",{staticClass:"orderList_tableHead",style:e.getTableStyle},[i("colgroup",[i("col",{attrs:{width:e.checkBoxWidth}}),e._l(e.filterColumns,(function(t,n){return["arcimDesc"===t.key?[i("col",{key:"disposeState"+n,attrs:{width:e.disposeStateWidth}}),i("col",{key:"groupChart"+n,attrs:{width:e.groupChartWidth}}),i("col",{key:"column"+n,attrs:{width:t.width}})]:[i("col",{key:"column"+n,attrs:{width:t.width}})]]}))],2),i("tr",[i("th",{staticClass:"orderList_checkboxTh"},[i("a-checkbox",{class:["orderList_checkbox",{"orderList_checkbox-lite":"lite"===e.HISUIStyleCode}],attrs:{indeterminate:e.data.indeterminate,checked:e.data.check},on:{change:e.$listeners.onOrderListCheckAll}})],1),e._l(e.filterColumns,(function(t){return["arcimDesc"===t.key?[i("th",{key:"disposeState"+t.ID,staticClass:"orderList_headTh"},[e._v("\n              "+e._s(e.$t("处置状态"))+"\n            ")]),i("th",{key:"groupChart"+t.ID,staticClass:"orderList_headTh"}),i("th",{key:t.ID,staticClass:"orderList_headTh"},[e._v("\n              "+e._s(t.title)+"\n            ")])]:[i("th",{key:t.ID,staticClass:"orderList_headTh"},[e._v("\n              "+e._s(t.title)+"\n            ")])]]}))],2)])]),i("div",{ref:"bodyWrapper",staticClass:"orderList_body",on:{scroll:e.onBodyScroll}},[i("table",{staticClass:"ordList_tableBody",style:e.getTableStyle},[i("colgroup",[i("col",{attrs:{width:e.checkBoxWidth}}),e._l(e.filterColumns,(function(t,n){return["arcimDesc"===t.key?[i("col",{key:"disposeState"+n,attrs:{width:e.disposeStateWidth,align:"center"}}),i("col",{key:"groupChart"+n,attrs:{width:e.groupChartWidth}}),i("col",{key:"column"+n,attrs:{width:t.width,align:"center"}})]:[i("col",{key:"column"+n,attrs:{width:t.width,align:"center"}})]]}))],2),i("tbody",e._l(e.dataOrders,(function(t,n){return i("order-item",e._g(e._b({key:t.ID,staticClass:"orderItem",attrs:{sheetCodeSelected:e.sheetCodeSelected,orderShowMode:e.orderShowMode,orderItemIndex:n,columns:e.filterColumns,order:t,HISUIStyleCode:e.HISUIStyleCode}},"order-item",e.$attrs,!1),e.$listeners))})),1)])])])},a=[],r=(i("ac6a"),i("7902")),s={name:"orderList",props:["columns","data","orderShowMode","ordersExec","sheetCodeSelected","HISUIStyleCode"],components:{orderItem:r["default"]},inheritAttrs:!1,data:function(){return{disposeStateWidth:"140",checkBoxWidth:"40",groupChartWidth:"20"}},watch:{},methods:{onBodyScroll:function(){var e=this.$refs.bodyWrapper.scrollLeft;this.$refs.headWrapper.scrollLeft=e}},computed:{dataOrders:function(){return this.orderShowMode?this.ordersExec:this.data.orders},filterColumns:function(){var e=this,t=this.columns.filter((function(t){return!!e.orderShowMode||!t.execFlag}));return t},getTableStyle:function(){var e=this,t=0;return this.columns.forEach((function(i){e.orderShowMode?t+=parseFloat(i.width,10):i.execFlag||(t+=parseFloat(i.width,10)),"arcimDesc"===i.key&&(t+=parseFloat(e.disposeStateWidth,10))})),t+=parseFloat(this.groupChartWidth,10),t+=parseFloat(this.checkBoxWidth,10),{width:"".concat(t,"px")}}}},o=s,c=(i("9552"),i("7ebe"),i("2877")),l=Object(c["a"])(o,n,a,!1,null,"931b59d2",null);t["default"]=l.exports},c995:function(e,t,i){},d0af:function(e,t,i){},d380:function(e,t,i){"use strict";var n=i("dc5c"),a=i.n(n);a.a},dc5c:function(e,t,i){},dd6e:function(e,t,i){},dff3:function(e,t,i){"use strict";var n=i("dd6e"),a=i.n(n);a.a},e132:function(e,t,i){"use strict";var n=i("3127"),a=i.n(n);a.a},e3d3:function(e,t,i){},e6e7:function(e,t,i){"use strict";var n=i("8b15"),a=i.n(n);a.a},ed4e:function(e,t,i){},ef12:function(e,t,i){},f5ae:function(e,t,i){"use strict";var n=i("977c"),a=i.n(n);a.a}}]);
//# sourceMappingURL=chunk-72dcbadd.34105888.js.map