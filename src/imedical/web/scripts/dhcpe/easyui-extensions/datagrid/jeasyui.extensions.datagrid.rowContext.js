(function(n){function e(e){if(!e)return-1;e=n.util.isJqueryObject(e)?e:n(e);var a=e.attr("datagrid-row-index");return null==a||null==a||""==a?-1:window.parseInt(a,10)}function a(e,a){var t=n(e),i=t.datagrid("getRows");return i?i[a]:void 0}function t(e,a,t,i,r){var o=[],g=[],d=[e[0],i,r];return a.refreshMenu&&n.array.merge(g,p.refreshMenus),null==a.pagingMenu||null==a.pagingMenu||1!=a.pagingMenu&&a.pagingMenu.disabled||n.array.merge(g,g.length?"-":[],a.pagingMenu.submenu?p.pagingRootMenus:p.pagingMenus),n.array.likeArrayNotString(a.rowContextMenu)&&n.array.merge(o,o.length?"-":[],a.rowContextMenu),g.length&&n.array.merge(o,o.length?"-":[],g),n.easyui.parseMenuItems(o,d)}function i(i,r){i.datagrid("getPanel").panel("body").delegate("tr.datagrid-row","contextmenu.datagrid-extensions",function(o){var g=e(this);if(-1!=g&&(r.selectOnRowContextMenu&&i.datagrid("selectRow",g),r.enableRowContextMenu)){o.preventDefault(),"object"==n.type(r.pagingMenu)&&(r.pagingMenu=n.union(r.pagingMenu,{disabled:!1,submenu:!0}));var d=a(i[0],g),s=t(i,r,o,g,d);n.easyui.showMenu({items:s,left:o.pageX,top:o.pageY,event:o})}})}function r(e){var a=n(e),t=n.data(e,"datagrid"),r=t.options;i(a,r)}function o(e){var a=n(e),t=n.data(e,"datagrid"),i=t.options,r=a.datagrid("getPager");if(!i.pagination||!r||!r.length)return!0;var o=r.pagination("options");return o.pageNumber<=1}function g(e){var a=n(e),t=n.data(e,"datagrid"),i=t.options,r=a.datagrid("getPager");if(!i.pagination||!r||!r.length)return!0;var o=r.pagination("options"),g=Math.ceil(parseFloat(o.total)/parseFloat(o.pageSize));return o.pageNumber>=g}function d(e){var a=o(e);a||n(e).datagrid("getPager").pagination("select",1)}function s(e){var a=o(e);if(!a){var t=n(e).datagrid("getPager"),i=t.pagination("options");t.pagination("select",i.pageNumber-1)}}function u(e){var a=g(e);if(!a){var t=n(e).datagrid("getPager"),i=t.pagination("options");t.pagination("select",i.pageNumber+1)}}function l(e){var a=g(e);if(!a){var t=n(e).datagrid("getPager"),i=t.pagination("options"),r=Math.ceil(parseFloat(i.total)/parseFloat(i.pageSize));t.pagination("select",r)}}n.util.namespace("$.fn.datagrid.extensions");var p={};p.refreshMenus=[{text:"刷新当前页",iconCls:"pagination-load",disabled:function(e,a,t,i,r,o){n(i);var g=n.data(i,"datagrid"),d=g.options;return!d.refreshMenu},handler:function(e,a,t,i,r,o){n(i).datagrid("reload")}}],p.pagingMenus=[{text:"首页",iconCls:"pagination-first",disabled:function(n,e,a,t,i,r){return o(t)},handler:function(n,e,a,t,i,r){d(t)}},{text:"上一页",iconCls:"pagination-prev",disabled:function(n,e,a,t,i,r){return o(t)},handler:function(n,e,a,t,i,r){s(t)}},{text:"下一页",iconCls:"pagination-next",disabled:function(n,e,a,t,i,r){return g(t)},handler:function(n,e,a,t,i,r){u(t)}},{text:"末页",iconCls:"pagination-last",disabled:function(n,e,a,t,i,r){return g(t)},handler:function(n,e,a,t,i,r){l(t)}}],p.pagingRootMenus=[{text:"翻页",iconCls:"",disabled:function(e,a,t,i,r,o){var g=n.data(i,"datagrid"),d=g.options;return!(1==d.pagingMenu||!d.pagingMenu.disabled)},children:p.pagingMenus}];var f=n.fn.datagrid;n.fn.datagrid=function(e,a){return"string"==typeof e?f.apply(this,arguments):(e=e||{},this.each(function(){var t=n(this),i=!!n.data(this,"datagrid"),o=i?e:n.extend({},n.fn.datagrid.parseOptions(this),n.parser.parseOptions(this,[{selectOnRowContextMenu:"boolean",enableRowContextMenu:"boolean",refreshMenu:"boolean"}]),e);f.call(t,o,a),i||r(this)}))},n.union(n.fn.datagrid,f);var c={selectOnRowContextMenu:!1,enableRowContextMenu:!0,rowContextMenu:null,pagingMenu:{submenu:!1},refreshMenu:!0},M={};n.fn.datagrid.extensions.defaults?n.extend(n.fn.datagrid.extensions.defaults,c):n.fn.datagrid.extensions.defaults=c,n.fn.datagrid.extensions.methods?n.extend(n.fn.datagrid.extensions.methods,M):n.fn.datagrid.extensions.methods=M,n.extend(n.fn.datagrid.defaults,c),n.extend(n.fn.datagrid.methods,M)})(jQuery);