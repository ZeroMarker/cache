(function($){function init(e){function n(e){var i=[];return e.addClass("menu"),i.push(e),e.hasClass("menu-content")||e.children("div").each(function(){var e=$(this).children("div");if(e.length){e.appendTo("body"),this.submenu=e;var t=n(e);i=i.concat(t)}}),i}function i(n){var i=$.parser.parseOptions(n[0],["width","height"]);n[0].originalHeight=i.height||0,n.hasClass("menu-content")?n[0].originalWidth=i.width||n._outerWidth():(n[0].originalWidth=i.width||0,n.children("div").each(function(){var n=$(this),i=$.extend({},$.parser.parseOptions(this,["name","iconCls","href",{separator:"boolean"}]),{disabled:!!n.attr("disabled")||void 0});i=$.extend({hideOnClick:!0},$.parser.parseOptions(this,["name","iconCls","href",{hideOnClick:"boolean",separator:"boolean"}]),{disabled:!!n.attr("disabled")||void 0});if(i.separator&&n.addClass("menu-sep-pe"),!n.hasClass("menu-sep-pe")){n[0].itemName=i.name||"",n[0].itemHref=i.href||"",n[0].hideOnClick=null==i.hideOnClick||null==i.hideOnClick||!!i.hideOnClick;var t=n.addClass("menu-item").html();n.empty().append($('<div class="menu-text"></div>').html(t)),i.iconCls&&$('<div class="menu-icon"></div>').addClass(i.iconCls).appendTo(n),i.disabled&&setDisabled(e,n[0],!0),n[0].submenu&&$('<div class="menu-rightarrow"></div>').appendTo(n),bindMenuItemEvent(e,n)}}),$('<div class="menu-line"></div>').prependTo(n)),setMenuSize(e,n),n.hasClass("menu-inline")||n.hide(),bindMenuEvent(e,n)}var t=$.data(e,"menu").options;$(e).addClass("menu-top"),t.inline?$(e).addClass("menu-inline"):$(e).appendTo("body"),$(e).bind("_resize",function(n,i){return($(this).hasClass("easyui-fluid")||i)&&$(e).menu("resize",e),!1});for(var a=n($(e)),s=0;s<a.length;s++)i(a[s])}function setMenuSize(e,n){var i=$.data(e,"menu").options,t=n.attr("style")||"";n.css({display:"block",left:-1e4,height:"auto",overflow:"hidden"}),n.find(".menu-item").each(function(){$(this)._outerHeight(i.itemHeight),$(this).find(".menu-text").css({height:i.itemHeight-2+"px",lineHeight:i.itemHeight-2+"px"})}),n.removeClass("menu-noline").addClass(i.noline?"menu-noline":"");var a=n[0].originalWidth||"auto";isNaN(parseInt(a))&&(a=0,n.find("div.menu-text").each(function(){a<$(this)._outerWidth()&&(a=$(this)._outerWidth())}),a+=40);var s=n.outerHeight(),o=n[0].originalHeight||"auto";if(isNaN(parseInt(o)))if(o=s,n.hasClass("menu-top")&&i.alignTo){var u=$(i.alignTo),d=u.offset().top-$(document).scrollTop(),l=$(window)._outerHeight()+$(document).scrollTop()-u.offset().top-u._outerHeight();o=Math.min(o,Math.max(d,l))}else o>$(window)._outerHeight()&&(o=$(window).height());n.attr("style",t),n._size({fit:n[0]==e&&i.fit,width:a,minWidth:i.minWidth,height:o}),n.css("overflow",n.outerHeight()<s?"auto":"hidden"),n.children("div.menu-line")._outerHeight(s-2)}function bindMenuEvent(e,n){if(!n.hasClass("menu-inline")){var i=$.data(e,"menu");n.unbind(".menu").bind("mouseenter.menu",function(){i.timer&&(clearTimeout(i.timer),i.timer=null)}).bind("mouseleave.menu",function(){i.options.hideOnUnhover&&(i.timer=setTimeout(function(){hideAll(e,$(e).hasClass("menu-inline"))},i.options.duration))})}}function bindMenuItemEvent(e,n){n.hasClass("menu-item")&&(n.unbind(".menu"),n.bind("click.menu",function(){if(!$(this).hasClass("menu-item-disabled")){if(!this.submenu){this.hideOnClick&&hideAll(e,$(e).hasClass("menu-inline"));var n=this.itemHref;n&&(location.href=n)}$(this).trigger("mouseenter");var i=$(e).menu("getItem",this);$.data(e,"menu").options.onClick.call(e,i)}}).bind("mouseenter.menu",function(i){if(n.siblings().each(function(){this.submenu&&hideMenu(this.submenu),$(this).removeClass("menu-active")}),n.addClass("menu-active"),$(this).hasClass("menu-item-disabled"))n.addClass("menu-active-disabled");else{var t=n[0].submenu;t&&$(e).menu("show",{menu:t,parent:n})}}).bind("mouseleave.menu",function(e){n.removeClass("menu-active menu-active-disabled");var i=n[0].submenu;i?e.pageX>=parseInt(i.css("left"))?n.addClass("menu-active"):hideMenu(i):n.removeClass("menu-active")}))}function hideAll(e,n){var i=$.data(e,"menu");return i&&$(e).is(":visible")&&(hideMenu($(e)),n?$(e).show():i.options.onHide.call(e)),!1}function showMenu(e,n){function i(e,n){return e+s.outerHeight()>$(window)._outerHeight()+$(document).scrollTop()&&(e=n?$(n).offset().top-s._outerHeight():$(window)._outerHeight()+$(document).scrollTop()-s.outerHeight()),e<0&&(e=0),e}var t,a;n=n||{};var s=$(n.menu||e);if($(e).menu("resize",s[0]),s.hasClass("menu-top")){var o=$.data(e,"menu").options;if($.extend(o,n),t=o.left,a=o.top,o.alignTo){var u=$(o.alignTo);t=u.offset().left,a=u.offset().top+u._outerHeight(),"right"==o.align&&(t+=u.outerWidth()-s.outerWidth())}t+s.outerWidth()>$(window)._outerWidth()+$(document)._scrollLeft()&&(t=$(window)._outerWidth()+$(document).scrollLeft()-s.outerWidth()-5),t<0&&(t=0),a=i(a,o.alignTo)}else{var d=n.parent;t=d.offset().left+d.outerWidth()-2,t+s.outerWidth()+5>$(window)._outerWidth()+$(document).scrollLeft()&&(t=d.offset().left-s.outerWidth()+2),a=i(d.offset().top-3)}s.css({left:t,top:a}),s.show(0,function(){s[0].shadow||(s[0].shadow=$('<div class="menu-shadow"></div>').insertAfter(s)),s[0].shadow.css({display:s.hasClass("menu-inline")?"none":"block",zIndex:$.fn.menu.defaults.zIndex++,left:s.css("left"),top:s.css("top"),width:s.outerWidth(),height:s.outerHeight()}),s.css("z-index",$.fn.menu.defaults.zIndex++),s.hasClass("menu-top")&&$.data(s[0],"menu").options.onShow.call(s[0])})}function hideMenu(e){function n(e){e.stop(!0,!0),e[0].shadow&&e[0].shadow.hide(),e.hide()}e&&e.length&&(n(e),e.find("div.menu-item").each(function(){this.submenu&&hideMenu(this.submenu),$(this).removeClass("menu-active")}))}function findItem(e,n){function i(s){s.children("div.menu-item").each(function(){var s=$(e).menu("getItem",this),o=a.empty().html(s.text).text();n==$.trim(o)?t=s:this.submenu&&!t&&i(this.submenu)})}var t=null,a=$("<div></div>");return i($(e)),a.remove(),t}function setDisabled(e,n,i){var t=$(n);t.hasClass("menu-item")&&(i?(t.addClass("menu-item-disabled"),n.onclick&&(n.onclick1=n.onclick,n.onclick=null)):(t.removeClass("menu-item-disabled"),n.onclick1&&(n.onclick=n.onclick1,n.onclick1=null)))}function appendItem(target,param){var opts=$.data(target,"menu").options,menu=$(target);if(param.parent){if(!param.parent.submenu){var submenu=$('<div class="menu"><div class="menu-line"></div></div>').appendTo("body");submenu.hide(),param.parent.submenu=submenu,$('<div class="menu-rightarrow"></div>').appendTo(param.parent)}menu=param.parent.submenu}if(param.separator)var item=$('<div class="menu-sep-pe"></div>').appendTo(menu);else{var item=$('<div class="menu-item"></div>').appendTo(menu);$('<div class="menu-text"></div>').html(param.text).appendTo(item)}param.iconCls&&$('<div class="menu-icon"></div>').addClass(param.iconCls).appendTo(item),param.id&&item.attr("id",param.id),param.name&&(item[0].itemName=param.name),param.href&&(item[0].itemHref=param.href),param.onclick&&("string"==typeof param.onclick?item.attr("onclick",param.onclick):item[0].onclick=eval(param.onclick)),param.handler&&(item[0].onclick=eval(param.handler)),param.disabled&&setDisabled(target,item[0],!0),bindMenuItemEvent(target,item),bindMenuEvent(target,menu),setMenuSize(target,menu)}function removeItem(e,n){function i(e){if(e.submenu){e.submenu.children("div.menu-item").each(function(){i(this)});var n=e.submenu[0].shadow;n&&n.remove(),e.submenu.remove()}$(e).remove()}var t=$(n).parent();i(n),setMenuSize(e,t)}function setVisible(e,n,i){var t=$(n).parent();i?$(n).show():$(n).hide(),setMenuSize(e,t)}function destroyMenu(e){$(e).children("div.menu-item").each(function(){removeItem(e,this)}),e.shadow&&e.shadow.remove(),$(e).remove()}function hideAllMenu(e){$.util.pageNestingExecute(function(n){function i(e){function n(e){e.stop(!0,!0),e[0].shadow&&e[0].shadow.hide(),e.hide()}e&&e.length&&(n(e),e.find("div.menu-item").each(function(){this.submenu&&i(this.submenu),t(this).removeClass("menu-active")}))}if(n&&n.document&&n.jQuery){var t=n.jQuery;if(e){var a=t(e).closest("div.menu,div.combo-p");if(a.length)return}t("body>div.menu-top:visible").not(".menu-inline").menu("hide"),i(t("body>div.menu:visible").not(".menu-inline"))}})}function createMenu(e){var n=$.extend({},$.fn.menu.defaults,{event:window.event||void 0,left:window.event?window.event.clientX:0,top:window.event?window.event.clientY:0,slideOut:!1,autoDestroy:!0,hideOnUnhover:!1,hideDisabledItem:!1,items:null,minWidth:140}),i=$("<div></div>").appendTo("body"),t=$.util.likeArrayNotString(e)?$.extend({},n,{items:e}):$.extend({},n,e||{});return t.items=$.util.likeArrayNotString(t.items)?t.items:[],t.id&&i.attr("id",t.id),t.name&&i.attr("name",t.name),t.items.length||t.items.push({text:"当前无菜单项",disabled:!0}),$.each(t.items,function(e,n){appendItemToMenu(t.event,i,n,i[0],t.hideDisabledItem)}),{menu:i,options:t}}function appendItemToMenu(e,n,i,t,a){if($.util.isString(i)&&$.array.contains(["-","—","|"],$.trim(i)))$("<div class='menu-sep-pe'></div>").appendTo(n);else{i=$.extend({id:null,text:null,iconCls:null,href:null,disabled:!1,onclick:null,handler:null,bold:!1,style:null,children:null,hideDisabledItem:a,hideOnClick:!0},i||{});var s=i.onclick,o=i.handler,u=$("<div></div>").appendTo(n),d=[e,i,t];if(i.onclick=void 0,i.handler=void 0,i=$.util.parseMapFunction(i,d,u[0]),i.onclick=s,i.handler=o,!i.disabled||!i.hideDisabledItem){if(u.attr({iconCls:i.iconCls,href:i.href,disabled:i.disabled,hideOnClick:i.hideOnClick}),i.id&&u.attr("id",i.id),i.style&&u.css(i.style),$.isFunction(i.handler)){o=i.handler;i.onclick=function(e,n,i){o.call(this,e,n,i)}}$.isFunction(i.onclick)&&u.click(function(e){i.disabled||u.hasClass("menu-item-disabled")||i.onclick.call(this,e,i,t)});var l=$("<span></span>").appendTo(u).text(null===i.text||null==i.text?"":i.text);if(i.bold&&l.css("font-weight","bold"),i.children&&i.children.length){var r=$("<div></div>").appendTo(u);$.each(i.children,function(n,a){appendItemToMenu(e,r,a,t,i.hideDisabledItem)})}}}}function createAndShowMenu(e){var n=createMenu(e),i=n.menu,t=i.menu(n.options).menu("options");if(t.autoDestroy){var a=t.onHide;t.onHide=function(){$.isFunction(a)&&a.apply(this,arguments);var e=$(this);$.util.delay(function(){e.menu("destroy")})}}return i.menu("show",{left:t.left,top:t.top}),t.slideOut&&(i.hide().slideDown(200),i[0]&&i[0].shadow&&i[0].shadow.hide().slideDown(200)),i}function parseMenuItems(e,n){return null!=e&&null!=e&&$.util.likeArrayNotString(e)?(n=null==n||null==n?[]:$.util.likeArrayNotString(n)?n:[n],$.array.map(e,function(e,i){if(!e||"string"==typeof e)return e;var t=$.extend({},e);$.each(t,function(e,i){$.isFunction(i)&&(t[e]=function(){var e=$.array.merge(arguments,n);return i.apply(this,e)})});var a=t.children;return $.util.likeArrayNotString(a)&&(t.children=parseMenuItems(a,n)),t})):[]}$.fn.menu=function(e,n){return"string"==typeof e?$.fn.menu.methods[e](this,n):(e=e||{},this.each(function(){var n=$.data(this,"menu");n?$.extend(n.options,e):(n=$.data(this,"menu",{options:$.extend({},$.fn.menu.defaults,$.fn.menu.parseOptions(this),e)}),init(this)),$(this).css({left:n.options.left,top:n.options.top})}))},$.fn.menu.methods={options:function(e){return $.data(e[0],"menu").options},show:function(e,n){return e.each(function(){showMenu(this,n)})},hide:function(e){return e.each(function(){hideAll(this)})},destroy:function(e){return e.each(function(){destroyMenu(this)})},setText:function(e,n){return e.each(function(){$(n.target).children("div.menu-text").html(n.text)})},setIcon:function(e,n){return e.each(function(){$(n.target).children("div.menu-icon").remove(),n.iconCls&&$('<div class="menu-icon"></div>').addClass(n.iconCls).appendTo(n.target)})},getItem:function(e,n){var i=$(n),t={target:n,id:i.attr("id"),text:$.trim(i.children("div.menu-text").html()),disabled:i.hasClass("menu-item-disabled"),name:n.itemName,href:n.itemHref,hideOnClick:n.hideOnClick,onclick:n.onclick},a=i.children("div.menu-icon");if(a.length){for(var s=[],o=a.attr("class").split(" "),u=0;u<o.length;u++)"menu-icon"!=o[u]&&s.push(o[u]);t.iconCls=s.join(" ")}return t},findItem:function(e,n){return findItem(e[0],n)},appendItem:function(e,n){return e.each(function(){appendItem(this,n)})},removeItem:function(e,n){return e.each(function(){removeItem(this,n)})},enableItem:function(e,n){return e.each(function(){setDisabled(this,n,!1)})},disableItem:function(e,n){return e.each(function(){setDisabled(this,n,!0)})},showItem:function(e,n){return e.each(function(){setVisible(this,n,!0)})},hideItem:function(e,n){return e.each(function(){setVisible(this,n,!1)})},resize:function(e,n){return e.each(function(){setMenuSize(this,$(n))})}},$.fn.menu.parseOptions=function(e){return $.extend({},$.parser.parseOptions(e,[{minWidth:"number",itemHeight:"number",duration:"number",hideOnUnhover:"boolean"},{fit:"boolean",inline:"boolean",noline:"boolean"}]))},$.fn.menu.defaults={zIndex:11e4,left:0,top:0,alignTo:null,align:"left",minWidth:120,itemHeight:32,duration:100,hideOnUnhover:!0,inline:!1,fit:!1,noline:!1,onShow:function(){},onHide:function(){},onClick:function(e){}},$.util.bindDocumentNestingEvent("mousedown.menu-nesting",function(e,n){hideAllMenu(n.target)}),$.util.namespace("$.easyui"),$.extend($.easyui,{createMenu:function(e){return createMenu(e)},showMenu:function(e){return createAndShowMenu(e)},parseMenuItems:function(e,n){return parseMenuItems(e,n)},hideAllMenu:function(){return hideAllMenu()}})})(jQuery);