/**
* Description: 框架级处理方法，禁止存放业务处理类
*                 所有函数作为$PE的属性，防止污染业务js
* FileName: dhcpe.min.js
* Creator: wangguoying
* Date: 2022-07-01
*/
$PE={pageLoadingTask:null,_EXPLOGONWIN:null,datagridSettingCls:"web.DHCPE.DataGrid.Setting",datagridSettingSaveMethod:"SaveSetting",datagridSettinQueryMethod:"GetSettingArray",datagridExportSettingSaveMethod:"SaveExportSetting",datagridExportSettinQueryMethod:"GetExportSettingArray",cache:{datagridSetting:[]},initLoad:function(o){$('<div class="pe-loading-mask" style="display:none;background-color: rgba(0, 0, 0, 0.8); z-index: 2000;"><div class="pe-loading-spinner"><i class="pe-icon-loading"><div></div><div></div></i><p class="pe-loading-text">正在加载,请稍候...</p></div></div>').appendTo(o)},loadMask:function(o){o?$(".pe-loading-mask").css("display","block"):$(".pe-loading-mask").css("display","none")},ajax:function(o,e,n){if(o.invokeType&&"hisui"==o.invokeType)return $cm(o,e,n);var t,s="json";for(var r in o.dataType&&(s=o.dataType),o)if($.isArray(o[r])){for(var a=o[r].length,i=0;i<a;i++)o[r+"_"+i]=o[r][i];o[r+"_T"]="ARRAY",o[r+"_C"]=a,delete o[r]}var l=$.ajax({url:"web.DHCPE.Utils.Broker.cls",data:o,type:"post",async:!1!==e,dataType:s,success:function(o){"string"==typeof o&&o.indexOf('window.open("dhc.logon.csp?RELOGON=1')>-1?"object"==typeof $PE._EXPLOGONWIN&&"string"==typeof $PE._EXPLOGONWIN.page||($PE._EXPLOGONWIN=top.window.open("dhc.logon.csp?RELOGON=1","RELOGON","toolbar=no,location=no,directories=no,status=yes,menubar=no,scrollbars=no,resizable=yes")):"string"==typeof o&&o.indexOf("<title>Login CACHE</title>")>-1?"object"==typeof $PE._EXPLOGONWIN&&"string"==typeof $PE._EXPLOGONWIN.page||($PE._EXPLOGONWIN=top.window.open("dhc.logon.csp?RELOGON=1","RELOGON","toolbar=no,location=no,directories=no,status=yes,menubar=no,scrollbars=no,resizable=yes")):(e&&e.call&&(o.success&&(o.success=parseInt(o.success)),e.call(this,o)),!1===e&&(t=o))},error:function(o,e){if("error"==e&&0==o.status)return"";if(void 0===window.eval)return"";var t=o.responseText;"string"==typeof t&&t.indexOf('window.open("dhc.logon.csp?RELOGON=1","RELOGON","toolbar=no,location=no,directories=no,status=yes,menubar=no,scrollbars=no,resizable=no"')>-1?top.window.open("dhc.logon.csp?RELOGON=1","RELOGON","toolbar=no,location=no,directories=no,status=yes,menubar=no,scrollbars=no,resizable=no"):"string"==typeof t&&t.indexOf("<title>Login CACHE</title>")>-1?top.window.open("dhc.logon.csp?RELOGON=1","RELOGON","toolbar=no,location=no,directories=no,status=yes,menubar=no,scrollbars=no,resizable=no"):"function"==typeof n?n.apply(this,arguments):alert('Request Data Error.\nErrorType: "'+e+'"\nReturnValue: '+o.responseText)}});return!1===e?t:l},upload:function(o,e,n,t,s){var r;n&&$.messager.progress(n);var a=$.ajax({url:"web.DHCPE.Utils.Upload.cls",data:o,type:"post",async:!1!==t,dataType:e,processData:!1,contentType:!1,success:function(o){n&&$.messager.progress("close"),"string"==typeof o&&o.indexOf('window.open("dhc.logon.csp?RELOGON=1')>-1?"object"==typeof $PE._EXPLOGONWIN&&"string"==typeof $PE._EXPLOGONWIN.page||($PE._EXPLOGONWIN=top.window.open("dhc.logon.csp?RELOGON=1","RELOGON","toolbar=no,location=no,directories=no,status=yes,menubar=no,scrollbars=no,resizable=yes")):"string"==typeof o&&o.indexOf("<title>Login CACHE</title>")>-1?"object"==typeof $PE._EXPLOGONWIN&&"string"==typeof $PE._EXPLOGONWIN.page||($PE._EXPLOGONWIN=top.window.open("dhc.logon.csp?RELOGON=1","RELOGON","toolbar=no,location=no,directories=no,status=yes,menubar=no,scrollbars=no,resizable=yes")):(t&&t.call&&(o.success&&(o.success=parseInt(o.success)),t.call(this,o)),!1===t&&(r=o))},error:function(o,e){if(n&&$.messager.progress("close"),"error"==e&&0==o.status)return"";if(void 0===window.eval)return"";var t=o.responseText;"string"==typeof t&&t.indexOf('window.open("dhc.logon.csp?RELOGON=1","RELOGON","toolbar=no,location=no,directories=no,status=yes,menubar=no,scrollbars=no,resizable=no"')>-1?top.window.open("dhc.logon.csp?RELOGON=1","RELOGON","toolbar=no,location=no,directories=no,status=yes,menubar=no,scrollbars=no,resizable=no"):"string"==typeof t&&t.indexOf("<title>Login CACHE</title>")>-1?top.window.open("dhc.logon.csp?RELOGON=1","RELOGON","toolbar=no,location=no,directories=no,status=yes,menubar=no,scrollbars=no,resizable=no"):"function"==typeof s?s.apply(this,arguments):alert('Request Data Error.\nErrorType: "'+e+'"\nReturnValue: '+o.responseText)}});return!1===t?r:a}},$.parser.onComplete=function(){$PE.pageLoadingTask&&clearTimeout($PE.pageLoadingTask),$PE.pageLoadingTask=setTimeout(function(){$PE.loadMask(!1)},200)};