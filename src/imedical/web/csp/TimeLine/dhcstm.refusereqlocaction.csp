<SERVER>
s Action=$Get(%request.Data("actiontype",1))
s Start=$Get(%request.Data("start",1))
s Limit=$Get(%request.Data("limit",1))
s Sort=$Get(%request.Data("sort",1))
s Dir=$Get(%request.Data("dir",1))

;
i Action = "Save" d
	.S ListDetail=$Get(%request.Data("ListDetail",1))
	.s result=##class(web.DHCSTM.RefuseReqLoc).Save(ListDetail)
	.i result ="" d
	..w "{success:'true',info:''}"
	.e  d
	..w "{success:'false',info:'"_result_"'}"

i Action = "Query" d
	.S ReqLoc=$Get(%request.Data("ReqLoc",1))
	.s result=##class(web.DHCSTM.RefuseReqLoc).Query(Start,Limit,ReqLoc)
	.i result="" d
	..w "{results:0,rows:[]}"
	.e  d
	..w result
i Action = "Delete" d
	.S Parref=$Get(%request.Data("rowid",1))
	.s ret=##class(web.DHCSTM.RefuseReqLoc).Delete(Parref)
	.i +ret'=0  d
	..w "{success:'false',info:'"_ret_"'}"
	.e  d
	..w "{success:'true',info:'"_ret_"'}"
	.

</SERVER>
