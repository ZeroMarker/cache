webpackJsonp([286],{M4bn:function(e,t){},pvfJ:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("Dd8w"),i=a.n(o),n=a("NYxO"),s=a("XlQt"),r=a("W5Fe"),l={name:"NightFeeAndFactor",components:{hgbutton:s.default,hgpagination:r.default},computed:i()({},Object(n.b)(["Height","styleCode"])),data:function(){return{tabledata:[],pagesize:20,currentPage:1,totalCount:0,elrowstyle:{height:"20px"},toolForm:{Post:"",Ward:""},postStore:[],warddata:[],dialogVisible:!1,editForm:{Post:"",Ward:"",Factor:"0.00",Price:"0.00",Type:"",RowID:""},editRule:{Post:[{required:!0,message:"班次不能为空",trigger:"change"}],Factor:[{required:!0,message:"请输入系数",trigger:"blur"},{validator:function(e,t,a){/^\d+(\.\d+)?$/.test(t)?a():a("输入不合法")}}],Price:[{required:!0,message:"单价不能为空",trigger:"blur"},{validator:function(e,t,a){/^\d+(\.\d+)?$/.test(t)?a():a("输入不合法")}}],Type:[{required:!0,message:"类型不能为空",trigger:"change"}]},typestore:[{label:"正式",id:"N"},{label:"进修",id:"S"},{label:"实习",id:"P"},{label:"护理员",id:"W"},{label:"工人",id:"G"},{label:"助理护士",id:"A"},{label:"护理学员",id:"T"}],selRow:"",winFlag:0}},created:function(){this.LoadWardData(),this.LoadTableData()},methods:{SaveData:function(){var e=this,t="";for(var a in e.editForm)t=e.editForm[a]instanceof Date?t?t+"^"+a+"|"+e.editForm[a].Format("YYYY-MM-dd"):a+"|"+e.editForm[a].Format("YYYY-MM-dd"):t?t+"^"+a+"|"+e.editForm[a]:a+"|"+e.editForm[a];e.$refs.editForm.validate(function(a){a&&e.$ajax.request(e.axiosConfig("web.INMSetComm","SaveNightFeeData","Method","parr$"+t)).then(function(t){1==t.data?(e.$message({type:"success",message:"保存成功",showClose:!0,customClass:"success_class"}),e.dialogVisible=!1,e.LoadTableData()):t.data?e.$message({type:"warning",message:t.data,showClose:!0,customClass:"warning_class"}):e.$message({type:"warning",message:"保存失败",showClose:!0,customClass:"warning_class"})})})},LoadTableData:function(){var e=this,t=e.toolForm.Post+"^"+e.toolForm.Ward;e.$ajax.request(e.axiosConfig("web.INMSetComm","FindNightFactor","RecQuery","start$"+(e.currentPage-1)*e.pagesize,"limit$"+e.pagesize,"parr$"+t,"role$"+sessionStorage.getItem("loginRoleCodes"),"nurseid$"+sessionStorage.getItem("loginID"))).then(function(t){e.tabledata=t.data.rows,e.totalCount=parseInt(t.data.results),e.selRow=""}).catch(function(e){})},RowClick:function(e,t,a){this.selRow=e.RowID},RowDblClick:function(e,t){var a=this;a.winFlag=1,a.dialogVisible=!0,a.$nextTick(function(){a.$ajax.request(a.axiosConfig("web.INMSetComm","GetNightFee","RecMethod","id$"+e.RowID)).then(function(e){a.setForm(a.$refs.editForm,a.editForm,e.data),a.getPostStore()})})},AddClick:function(){var e=this;e.winFlag=0,e.dialogVisible=!0,e.$nextTick(function(){e.$refs.editForm.resetFields(),e.editForm.Ward="",e.editForm.RowID=""})},DelData:function(){var e=this,t=this;t.selRow?t.$confirm("确认删除此记录，是否继续？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$ajax.request(t.axiosConfig("web.INMSetComm","DelNightFee","Method","id$"+t.selRow)).then(function(e){1==e.data?(t.$message({type:"success",message:"操作成功",showClose:!0,customClass:"success_class"}),t.LoadTableData()):t.$message({type:"error",message:"操作失败",showClose:!0,customClass:"error_class"})})}).catch(function(){e.$message({type:"info",message:"已取消删除",showClose:!0,customClass:"info_class"})}):t.$message({type:"warning",message:"请选择要删除的行记录",showClose:!0,customClass:"warning_class"})},FilterWardMethod:function(e){this.filterAcronym(e,"warddata","wardbak","WardDesc","WardSpell")},LoadWardData:function(){var e=this,t=e.axiosConfig("web.INMDataLimit","FindRoleWardList","RecQuery","nurseid$"+sessionStorage.getItem("loginID"));e.$ajax.request(t).then(function(t){e.warddata=t.data.rows,e.wardbak=t.data.rows})},wardCheckEvent:function(e){this.getPostStore()},getPostStore:function(){var e=this,t=e.editForm.Ward,a=e.axiosConfig("web.INMDBComm","FindArgNightPostList","RecQuery","parr$N^"+t);e.$ajax.request(a).then(function(t){e.postStore=t.data.rows}).catch(function(e){})},HandleSizeChange:function(e){this.pagesize=e},HandleCurrentChange:function(e){this.currentPage=e.currentPage,this.LoadTableData()}}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"night-fee-panel"},[a("div",{staticClass:"top-tool-inputDiv"},[a("el-form",{attrs:{model:e.toolForm,inline:!0}},[e._e(),e._v(" "),a("el-form-item",{attrs:{label:e.$t("menu.NightFeeAndFactor.5nrnc6ct6ps0")}},[a("el-select",{staticStyle:{width:"140px"},attrs:{filterable:"",clearable:"",size:"mini","filter-method":e.FilterWardMethod},model:{value:e.toolForm.Ward,callback:function(t){e.$set(e.toolForm,"Ward",t)},expression:"toolForm.Ward"}},e._l(e.warddata,function(e){return a("el-option",{key:e.rw,attrs:{label:e.WardDesc,value:e.rw}})}),1)],1),e._v(" "),a("el-form-item",[a("hgbutton",{attrs:{type:"default",styleCode:e.styleCode,icon:"nm-icon-w-find"},on:{click:e.LoadTableData}},[e._v(e._s(e.$t("menu.NightFeeAndFactor.5nrnc6ct87w0")))])],1)],1)],1),e._v(" "),a("div",{staticClass:"top-tool-button"},[a("hgbutton",{attrs:{type:"text",issvg:e.styleCode,icon:e.styleCode?"#nm-icon-add":"nm-icon-lite-add"},on:{click:e.AddClick}},[e._v(e._s(e.$t("menu.NightFeeAndFactor.5nrnc6ct8vc0")))]),e._v(" "),a("hgbutton",{attrs:{type:"text",issvg:e.styleCode,icon:e.styleCode?"#nm-icon-cancel":"nm-icon-lite-cancel"},on:{click:e.DelData}},[e._v(e._s(e.$t("menu.NightFeeAndFactor.5nrnc6ct97g0")))])],1),e._v(" "),a("div",{staticClass:"top-tool-table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tabledata,"header-cell-style":e.headerCellFontWeight,"row-style":e.elrowstyle,"highlight-current-row":!0,border:e.styleCode,height:e.styleCode?e.Height-130:e.Height-124},on:{"row-click":e.RowClick,"row-dblclick":e.RowDblClick}},[a("el-table-column",{attrs:{label:e.$t("menu.NightFeeAndFactor.5nrnc6ct6ps0"),prop:"Ward",width:""}}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("menu.NightFeeAndFactor.5nrnc6csau80"),prop:"Post",width:""}}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("menu.NightFeeAndFactor.5nrnc6cvs8s0"),prop:"Type",width:""}}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("menu.NightFeeAndFactor.5ncy6tksnv00"),prop:"Factor",width:""}}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("menu.NightFeeAndFactor.5ncy6tksplc0"),prop:"Price",align:"right",width:""}}),e._v(" "),e._e()],1),e._v(" "),a("hgpagination",{attrs:{styleCode:e.styleCode,sizes:[20,40,50,100],totalCount:e.totalCount,pageNumber:e.currentPage,pageSize:e.pagesize},on:{changePage:e.HandleCurrentChange,getPageSize:e.HandleSizeChange}})],1),e._v(" "),a("div",[a("el-dialog",{attrs:{visible:e.dialogVisible,title:0==e.winFlag?e.$t("menu.NightFeeAndFactor.5nrnc6ct8vc0"):e.$t("menu.NightFeeAndFactor.5nrnc6ct8vc1"),"close-on-click-modal":!1,width:"392px","show-close":!0,align:"center"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticClass:"dialog-header-title",attrs:{slot:"title"},slot:"title"},[e.styleCode?a("i",{class:[0==e.winFlag?"nm-icon-w-plus":"nm-icon-w-edit"]}):e._e(),e._v(" "),0==e.winFlag?a("span",[e._v(e._s(e.$t("menu.NightFeeAndFactor.5nrnc6ct8vc0")))]):1==e.winFlag?a("span",[e._v(e._s(e.$t("menu.NightFeeAndFactor.5nrnc6ct8vc1")))]):e._e()]),e._v(" "),a("el-form",{ref:"editForm",attrs:{model:e.editForm,rules:e.editRule,inline:!0,"label-width":"110px",align:"left"}},[a("el-form-item",{attrs:{label:e.$t("menu.NightFeeAndFactor.5nrnc6ct6ps0"),prop:"Ward"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{filterable:"",clearable:"",size:"mini"},on:{change:e.wardCheckEvent},model:{value:e.editForm.Ward,callback:function(t){e.$set(e.editForm,"Ward",t)},expression:"editForm.Ward"}},e._l(e.warddata,function(e){return a("el-option",{key:e.rw,attrs:{label:e.WardDesc,value:e.rw}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("menu.NightFeeAndFactor.5nrnc6csau80"),prop:"Post"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{filterable:"",clearable:"",size:"mini","no-data-text":""==e.editForm.Ward?e.$t("menu.NightFeeAndFactor.5ncy6tkv06c0"):e.$t("menu.NightFeeAndFactor.5nrnc6d0g340")},model:{value:e.editForm.Post,callback:function(t){e.$set(e.editForm,"Post",t)},expression:"editForm.Post"}},e._l(e.postStore,function(e){return a("el-option",{key:e.rw,attrs:{label:e.PostDesc,value:e.rw}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("menu.NightFeeAndFactor.5nrnc6cvs8s0"),prop:"Type"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{filterable:"",clearable:"",size:"mini"},model:{value:e.editForm.Type,callback:function(t){e.$set(e.editForm,"Type",t)},expression:"editForm.Type"}},e._l(e.typestore,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("menu.NightFeeAndFactor.5ncy6tksnv00"),prop:"Factor"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{size:"mini"},model:{value:e.editForm.Factor,callback:function(t){e.$set(e.editForm,"Factor",t)},expression:"editForm.Factor"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("menu.NightFeeAndFactor.5ncy6tksplc0"),prop:"Price"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{size:"mini"},model:{value:e.editForm.Price,callback:function(t){e.$set(e.editForm,"Price",t)},expression:"editForm.Price"}})],1)],1),e._v(" "),a("div",{staticClass:"bottom-button"},[a("hgbutton",{directives:[{name:"intervalclick",rawName:"v-intervalclick",value:{func:e.SaveData,time:500},expression:"{func:SaveData,time:500,}"}],attrs:{type:e.styleCode?"default":"success",styleCode:e.styleCode}},[e._v(e._s(e.$t("menu.NightFeeAndFactor.5nrnc6d2fw80")))]),e._v(" "),a("hgbutton",{attrs:{type:"default",styleCode:e.styleCode},on:{click:function(t){e.dialogVisible=!1}}},[e._v(e._s(e.$t("menu.NightFeeAndFactor.5nrnc6d2ghs0")))])],1)],1)],1)])},staticRenderFns:[]};var d=a("VU/8")(l,c,!1,function(e){a("M4bn")},null,null);t.default=d.exports}});