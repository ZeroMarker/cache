webpackJsonp([178],{Gxrz:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Dd8w"),l=a.n(n),o=a("XlQt"),s=a("W5Fe"),i=a("NYxO"),c={computed:l()({},Object(i.b)(["styleCode"])),props:["QuoteType"],components:{hgbutton:o.default,hgpagination:s.default},data:function(){return{finds:{input:""},tableData:[],currentPage:1,pageSize:50,totalCount:0,selRows:[]}},methods:{CloseClick:function(){this.$emit("CloseClick")},SaveClick:function(){var e=this,t=e.QuoteType,a="";e.selRows.forEach(function(e){e&&e.locid&&(a=""==a?e.locid:a+"^"+e.locid)});var n=e.axiosConfig("web.INMDBComm","SaveWardLocCTLoc","Method","parr$"+a,"type$"+t);e.$ajax.request(n).then(function(t){1==t.data?(e.$message({message:"操作成功！",type:"success",showClose:!0,customClass:"success_class"}),e.CloseClick()):t.data.length<100?e.$message({type:"warning",message:t.data,showClose:!0,customClass:"warning_class"}):e.$message({type:"warning",message:"后台方法错了^_^",showClose:!0,customClass:"warning_class"})}).catch(function(t){e.$message({type:"warning",message:"操作失败！",showClose:!0,customClass:"warning_class"})})},HandleCurrentChange:function(e){this.currentPage=e.currentPage,this.LoadTableData()},HandleSizeChange:function(e){this.pageSize=e,this.LoadTableData()},handleSelectionChange:function(e,t){this.selRows=e},GetRowKey:function(e){return e.locid},RowClick:function(e){e.locflag||this.$refs.tableData.toggleRowSelection(e)},GetSelectAble:function(e,t){return!e.locflag},LoadTableData:function(){var e=this,t=e.finds.input;t=t||"";var a=(e.currentPage-1)*e.pageSize,n=e.pageSize,l=e.axiosConfig("web.INMHISComm","FindCTLocList","RecQuery","typ$","input$"+t,"start$"+a,"limit$"+n);e.$ajax.request(l).then(function(t){var a=t.data.rows;for(var n in a)"true"==a[n].locflag?a[n].locflag=!0:a[n].locflag=!1;e.tableData=a,e.totalCount=parseInt(t.data.results),e.selRows=new Array}).catch(function(e){})}},created:function(){this.HandleCurrentChange(1)}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ctloc-panel"},[a("div",{staticClass:"top-tool-table-dialog-top dialog-div-top-radius"},[a("el-form",{attrs:{model:e.finds,inline:!0,"label-position":"left"},nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-form-item",[a("el-input",{staticStyle:{width:"140px"},attrs:{placeholder:e.$t("menu.CTLoc.5nrnawdom4c0"),size:"mini"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.LoadTableData(t)}},model:{value:e.finds.input,callback:function(t){e.$set(e.finds,"input",t)},expression:"finds.input"}})],1),e._v(" "),a("el-form-item",[a("hgbutton",{directives:[{name:"intervalclick",rawName:"v-intervalclick",value:{func:e.SaveClick,time:500},expression:"{func:SaveClick,time:500}"}],attrs:{type:e.styleCode?"default":"success"}},[e._v(e._s(e.$t("menu.CTLoc.5nrnawdonc40")))])],1)],1)],1),e._v(" "),a("div",{staticClass:"top-tool-dialog-table dialog-table-bottom-radius"},[a("el-table",{ref:"tableData",attrs:{data:e.tableData,height:"400",border:e.styleCode,"header-cell-style":e.headerCellFontWeight,"highlight-current-row":"",align:"left","row-key":e.GetRowKey},on:{"row-click":e.RowClick,"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"50",selectable:e.GetSelectAble,align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("menu.CTLoc.5nrnawdr6gk0"),"show-overflow-tooltip":"",prop:"loccode",align:"left"}}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("menu.CTLoc.5nrnawdsjss0"),prop:"locdesc","show-overflow-tooltip":"",align:"left"}}),e._v(" "),e._e()],1),e._v(" "),a("hgpagination",{attrs:{styleCode:e.styleCode,sizes:[20,40,50,100],totalCount:e.totalCount,pageNumber:e.currentPage,pageSize:e.pageSize},on:{changePage:e.HandleCurrentChange,getPageSize:e.HandleSizeChange}})],1)])},staticRenderFns:[]};var u=a("VU/8")(c,r,!1,function(e){a("UziC")},null,null);t.default=u.exports},UziC:function(e,t){}});