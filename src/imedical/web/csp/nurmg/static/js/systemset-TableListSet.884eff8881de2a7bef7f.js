webpackJsonp([186],{RNwj:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=i("Dd8w"),o=i.n(l),a=i("NYxO"),n=i("XlQt"),s=i("W5Fe"),d=i("doZQ"),r={name:"TableListSet",components:{hgbutton:n.default,hgpagination:s.default,hgswitch:d.default},computed:o()({},Object(a.b)(["Height","styleCode"])),data:function(){return{condition:{mould:"",menus:""},mouldstore:[],menustore:[],fieldslist:[],fieldmsgflag:!1,fielddata:[],radioflag:!1,menurowid:"",fieldrowid:"",typestores:[{desc:"文本框",code:"input"},{desc:"下拉框",code:"select"},{desc:"日期选择器",code:"date"},{desc:"是否",code:"yesno"}],fieldform:{FieldDesc:"",FieldCode:"",FieldSort:"",FieldDisplay:!0,FieldSelect:!1,FieldLock:!1,FieldLockPos:"-1",RowID:"",FieldWidth:"",FieldType:""},fieldrules:{FieldDesc:[{required:!0,message:"请输入描述",trigger:"blur"}],FieldCode:[{required:!0,message:"请输入代码",trigger:"blur"}],FieldSort:[{required:!0,message:"请输入序号"}],FieldType:[{required:!0,message:"请选择类型",trigger:"change"}]},currentPage:1,currentPageSize:20,totalCount:0,winFlag:0}},watch:{currentPage:function(e,t){this.LoadFieldsDataList(this.menurowid)}},methods:{HandleCurrentChange:function(e){this.currentPage=e.currentPage,this.LoadFieldsDataList(this.menurowid)},HandleSizeChange:function(e){this.currentPageSize=e,this.LoadFieldsDataList(this.menurowid)},MoveUpMethod:function(){var e=this;""!=e.fieldrowid?e.$ajax.request(e.axiosConfig("web.INMSetComm","GetFieldSetSort","Method","par$"+e.menurowid,"id$"+e.fieldrowid,"para$up")).then(function(t){e.LoadFieldsDataList(e.menurowid)}):e.$message({type:"warning",message:"请选择一条记录",showClose:!0,customClass:"warning_class"})},MoveDownMethod:function(){var e=this;""!=e.fieldrowid?e.$ajax.request(e.axiosConfig("web.INMSetComm","GetFieldSetSort","Method","par$"+e.menurowid,"id$"+e.fieldrowid,"para$down")).then(function(t){0!=t.data?1!=t.data?e.LoadFieldsDataList(e.menurowid):e.$message({type:"warning",message:"已经置底了！",showClose:!0,customClass:"warning_class"}):e.$message({type:"warning",message:"已经置顶了！",showClose:!0,customClass:"warning_class"})}):e.$message({type:"warning",message:"请选择一条记录",showClose:!0,customClass:"warning_class"})},LoadMouldData:function(){var e=this;e.$ajax.request(e.axiosConfig("web.INMSetComm","FindModuleList","RecQuery")).then(function(t){e.mouldstore=t.data.rows})},LoadMenusData:function(e){var t=this;t.condition.menus="",e?t.$ajax.request(t.axiosConfig("web.INMSetComm","FindMenuList","RecQuery","parr$^^"+e)).then(function(e){t.menustore=e.data.rows}):t.menustore=new Array},MouldSelectChange:function(e){this.menustore=new Array,this.LoadMenusData(e)},MenuSelectChange:function(e){this.condition.mould;this.menurowid=this.condition.menus,this.LoadFieldsDataList(e)},LoadFieldsDataList:function(e){var t=this,i=(t.currentPage-1)*t.currentPageSize,l=t.currentPageSize;t.$ajax.request(t.axiosConfig("web.INMSetComm","FindFieldSetList","RecQuery","parr$"+e,"start$"+i,"limit$"+l)).then(function(e){t.fieldslist=e.data.rows,t.totalCount=parseInt(e.data.results),t.radioflag=!1,t.fieldrowid=""})},MouldClearMethod:function(){this.menustore=new Array},AddFieldsData:function(){var e=this;e.winFlag=0,""!=e.condition.menus?(e.menurowid=e.condition.menus,e.fieldmsgflag=!0,e.$nextTick(function(){e.$refs.fieldform.resetFields(),e.fieldform.RowID="",e.$ajax.request(e.axiosConfig("web.INMSetComm","GetFieldSort","Method","par$"+e.condition.menus)).then(function(t){e.fieldform.FieldSort=t.data})})):e.$message({type:"warning",message:"请选择菜单列表！",showClose:!0,customClass:"warning_class"})},FieldLockChange:function(e){e?(this.radioflag=!0,this.fieldform.FieldLockPos="0"):(this.radioflag=!1,this.fieldform.FieldLockPos="-1")},FieldDisplayChange:function(e){},CloseDialog:function(){this.fieldmsgflag=!1,this.LoadFieldsDataList(this.menurowid)},SaveFieldData:function(){var e=this,t="";for(var i in e.fieldform){var l=e.fieldform[i];t=t?t+"^"+i+"|"+l:i+"|"+l}t=t+"^FieldTable|"+e.menurowid,e.$refs.fieldform.validate(function(i){i&&e.$ajax.request(e.axiosConfig("web.INMSetComm","SaveFieldSet","Method","parr$"+t)).then(function(t){1==t.data&&(e.$message({type:"success",message:"更新成功",showClose:!0,customClass:"success_class"}),e.fieldmsgflag=!1,e.LoadFieldsDataList(e.menurowid))})})},RowClickEvent:function(e,t){this.fieldrowid=e.rowID},RowDblClick:function(e,t){var i=this;i.winFlag=1,i.fieldrowid=e.rowID,i.fieldmsgflag=!0,i.$nextTick(function(){i.$refs.fieldform.resetFields(),i.$ajax.request(i.axiosConfig("web.INMSetComm","GetFieldsData","RecMethod","id$"+e.rowID)).then(function(e){i.SetCodeFormVal(i.fieldform,"fieldform",e.data)})})},SetCodeFormVal:function(e,t,i){for(var l in e){for(var o=this.$refs[t].$children,a=o.length,n=0;n<a;n++)o[n].$options.propsData.prop==l&&("hgswitch"==o[n].$children[1].$options._componentTag?"true"==i[l]?e[l]=!0:e[l]=!1:e[l]=i[l]);"RowID"!=l&&"FieldLockPos"!=l||(e[l]=i[l])}1==e.FieldLock?this.radioflag=!0:this.radioflag=!1},HandleClose:function(e){e(),this.LoadFieldsDataList(this.menurowid)}},created:function(){this.LoadMouldData()}},c={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"table-list-panel"},[i("div",{staticClass:"top-tool-inputDiv"},[i("el-form",{attrs:{model:e.condition,inline:!0}},[i("el-form-item",{attrs:{label:e.$t("menu.TableListSet.5nrnc6xfmmk0")}},[i("el-select",{staticStyle:{width:"140px"},attrs:{clearable:"",filterable:"",placeholder:e.$t("menu.TableListSet.5nrnc6xhcd00"),size:"mini"},on:{clear:e.MouldClearMethod,change:e.MouldSelectChange},model:{value:e.condition.mould,callback:function(t){e.$set(e.condition,"mould",t)},expression:"condition.mould"}},e._l(e.mouldstore,function(e){return i("el-option",{key:e.rw,attrs:{label:e.ModuleDesc,value:e.rw}})}),1)],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("menu.TableListSet.5nrnc6xj06s0")}},[i("el-select",{staticStyle:{width:"140px"},attrs:{clearable:"",filterable:"",placeholder:e.$t("menu.TableListSet.5nrnc6xhcd00"),size:"mini"},on:{change:e.MenuSelectChange},model:{value:e.condition.menus,callback:function(t){e.$set(e.condition,"menus",t)},expression:"condition.menus"}},e._l(e.menustore,function(e){return i("el-option",{key:e.rw,attrs:{label:e.MenuDesc,value:e.rw}})}),1)],1)],1)],1),e._v(" "),i("div",{staticClass:"top-tool-button"},[i("hgbutton",{attrs:{type:"text",issvg:e.styleCode,icon:e.styleCode?"#nm-icon-add":"nm-icon-lite-add"},on:{click:e.AddFieldsData}},[e._v(e._s(e.$t("menu.TableListSet.5nrnc6xl6o00")))]),e._v(" "),i("hgbutton",{attrs:{type:"text",issvg:e.styleCode,icon:e.styleCode?"#nm-icon-to-up":"nm-icon-lite-up"},on:{click:e.MoveUpMethod}},[e._v(e._s(e.$t("menu.TableListSet.5nrnc6xl7j80")))]),e._v(" "),i("hgbutton",{attrs:{type:"text",issvg:e.styleCode,icon:e.styleCode?"#nm-icon-to-down":"nm-icon-lite-down"},on:{click:e.MoveDownMethod}},[e._v(e._s(e.$t("menu.TableListSet.5nrnc6xl83o0")))])],1),e._v(" "),i("div",{staticClass:"top-tool-table"},[i("el-table",{ref:"menulistform",staticStyle:{width:"100%"},attrs:{"highlight-current-row":!0,data:e.fieldslist,"header-cell-style":e.headerCellFontWeight,height:e.styleCode?e.Height-130:e.Height-124,border:e.styleCode},on:{"row-click":e.RowClickEvent,"row-dblclick":e.RowDblClick}},[i("el-table-column",{attrs:{prop:"fieldDesc",label:e.$t("menu.TableListSet.5ncy6uu4auo0"),"show-overflow-tooltip":"",width:"200"}}),e._v(" "),i("el-table-column",{attrs:{prop:"fieldCode",label:e.$t("menu.TableListSet.5ncy6uu4b2g0"),"show-overflow-tooltip":"",width:"200"}}),e._v(" "),i("el-table-column",{attrs:{prop:"fieldSort",label:e.$t("menu.TableListSet.5nrnc6xqoao0"),"show-overflow-tooltip":"",width:"100"}}),e._v(" "),i("el-table-column",{attrs:{prop:"fieldDisplay",label:e.$t("menu.TableListSet.5nrnc6xrqpk0"),"show-overflow-tooltip":"",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{prop:"fieldLock",label:e.$t("menu.TableListSet.5ncy6uu4bmw0"),"show-overflow-tooltip":"",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{prop:"fieldSelect",label:e.$t("menu.TableListSet.5ncy6uu4btg0"),"show-overflow-tooltip":"",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{prop:"fieldLockPos",label:e.$t("menu.TableListSet.5nrnc6xsttg0"),"show-overflow-tooltip":"",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{prop:"fieldWidth",label:e.$t("menu.TableListSet.5ncy6uu4c6k0"),"show-overflow-tooltip":"",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{prop:"fieldType",label:e.$t("menu.TableListSet.5nrnc6xtwuw0"),"show-overflow-tooltip":""}}),e._v(" "),e._e()],1),e._v(" "),i("hgpagination",{attrs:{styleCode:e.styleCode,sizes:[20,40,50,100],totalCount:e.totalCount,pageNumber:e.currentPage,pageSize:e.currentPageSize},on:{changePage:e.HandleCurrentChange,getPageSize:e.HandleSizeChange}})],1),e._v(" "),i("el-dialog",{attrs:{title:0==e.winFlag?e.$t("menu.TableListSet.5nrnc6xl6o00"):e.$t("menu.TableListSet.5nrnc6xl6o01"),modal:"",visible:e.fieldmsgflag,"close-on-click-modal":!1,width:"400px","before-close":e.HandleClose},on:{"update:visible":function(t){e.fieldmsgflag=t}}},[i("div",{staticClass:"dialog-header-title",attrs:{slot:"title"},slot:"title"},[e.styleCode?i("i",{class:[0==e.winFlag?"nm-icon-w-plus":"nm-icon-w-edit"]}):e._e(),e._v(" "),0==e.winFlag?i("span",[e._v(e._s(e.$t("menu.TableListSet.5nrnc6xl6o00")))]):1==e.winFlag?i("span",[e._v(e._s(e.$t("menu.TableListSet.5nrnc6xl6o01")))]):e._e()]),e._v(" "),i("el-form",{ref:"fieldform",attrs:{model:e.fieldform,"label-position":"right",rules:e.fieldrules,"label-width":"120px",inline:!0,align:"left"}},[i("el-form-item",{attrs:{label:e.$t("menu.TableListSet.5ncy6uu4auo0"),prop:"FieldDesc"}},[i("el-input",{staticStyle:{width:"220px"},attrs:{placeholder:e.$t("menu.TableListSet.5nrnc6xx2qw0"),size:"mini"},model:{value:e.fieldform.FieldDesc,callback:function(t){e.$set(e.fieldform,"FieldDesc",t)},expression:"fieldform.FieldDesc"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("menu.TableListSet.5ncy6uu4b2g0"),prop:"FieldCode"}},[i("el-input",{staticStyle:{width:"220px"},attrs:{placeholder:e.$t("menu.TableListSet.5nrnc6xx2qw0"),size:"mini"},model:{value:e.fieldform.FieldCode,callback:function(t){e.$set(e.fieldform,"FieldCode",t)},expression:"fieldform.FieldCode"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("menu.TableListSet.5nrnc6xqoao0"),prop:"FieldSort"}},[i("el-input-number",{staticStyle:{width:"220px"},attrs:{disabled:"",placeholder:"",size:"mini",min:1},model:{value:e.fieldform.FieldSort,callback:function(t){e.$set(e.fieldform,"FieldSort",t)},expression:"fieldform.FieldSort"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("menu.TableListSet.5ncy6uu4c6k0"),prop:"FieldWidth"}},[i("el-input-number",{staticStyle:{width:"220px"},attrs:{placeholder:e.$t("menu.TableListSet.5nrnc6xx2qw0"),size:"mini",min:50},model:{value:e.fieldform.FieldWidth,callback:function(t){e.$set(e.fieldform,"FieldWidth",t)},expression:"fieldform.FieldWidth"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("menu.TableListSet.5nrnc6xrqpk0"),prop:"FieldDisplay"}},[i("hgswitch",{on:{change:e.FieldDisplayChange},model:{value:e.fieldform.FieldDisplay,callback:function(t){e.$set(e.fieldform,"FieldDisplay",t)},expression:"fieldform.FieldDisplay"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("menu.TableListSet.5ncy6uu4bmw0"),prop:"FieldLock"}},[i("hgswitch",{on:{change:e.FieldLockChange},model:{value:e.fieldform.FieldLock,callback:function(t){e.$set(e.fieldform,"FieldLock",t)},expression:"fieldform.FieldLock"}})],1),e._v(" "),e.radioflag?i("el-form-item",{attrs:{label:e.$t("menu.TableListSet.5ncy6uu4h4c0"),prop:"FieldLockPos"}},[i("el-radio-group",{model:{value:e.fieldform.FieldLockPos,callback:function(t){e.$set(e.fieldform,"FieldLockPos",t)},expression:"fieldform.FieldLockPos"}},[i("el-radio",{attrs:{label:"0"}},[e._v(e._s(e.$t("menu.TableListSet.5ncy6uu4hhc0")))]),e._v(" "),i("el-radio",{attrs:{label:"1"}},[e._v(e._s(e.$t("menu.TableListSet.5ncy6uu4hng0")))])],1)],1):e._e(),e._v(" "),i("el-form-item",{attrs:{label:e.$t("menu.TableListSet.5ncy6uu4btg0"),prop:"FieldSelect"}},[i("hgswitch",{model:{value:e.fieldform.FieldSelect,callback:function(t){e.$set(e.fieldform,"FieldSelect",t)},expression:"fieldform.FieldSelect"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("menu.TableListSet.5nrnc6xtwuw0"),prop:"FieldType"}},[i("el-select",{staticStyle:{width:"220px"},attrs:{placeholder:e.$t("menu.TableListSet.5nrnc6xhcd00"),size:"mini"},model:{value:e.fieldform.FieldType,callback:function(t){e.$set(e.fieldform,"FieldType",t)},expression:"fieldform.FieldType"}},e._l(e.typestores,function(e){return i("el-option",{key:e.code,attrs:{value:e.code,label:e.desc}})}),1)],1)],1),e._v(" "),i("div",{staticClass:"bottom-button"},[i("hgbutton",{directives:[{name:"intervalclick",rawName:"v-intervalclick",value:{func:e.SaveFieldData,time:500},expression:"{func:SaveFieldData,time:500}"}],attrs:{type:e.styleCode?"default":"success",styleCode:e.styleCode}},[e._v(e._s(e.$t("menu.TableListSet.5nrnc6y7i200")))]),e._v(" "),i("hgbutton",{attrs:{type:"default",styleCode:e.styleCode},on:{click:e.CloseDialog}},[e._v(e._s(e.$t("menu.TableListSet.5nrnc6y7ivk0")))])],1)],1)],1)},staticRenderFns:[]};var u=i("VU/8")(r,c,!1,function(e){i("mpWm")},null,null);t.default=u.exports},mpWm:function(e,t){}});