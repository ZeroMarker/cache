webpackJsonp([189],{"7i95":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=o("Dd8w"),a=o.n(l),i=o("NYxO"),r=o("XlQt"),s=o("W5Fe"),n=o("doZQ"),c={components:{hgbutton:r.default,hgpagination:s.default,hgswitch:n.default},computed:a()({},Object(i.b)(["Height","styleCode"])),data:function(){return{tableHeight:"",currentPage:1,currentPageSize:20,totalCount:0,dialogVisible:!1,dialogVisible2:!1,selRow:"",finds:{},tableData:[],WardData:[],FloorWard:[],editForm:{FloorCode:"",FloorDesc:"",FloorShort:"",FloorRemark:"",FloorStatus:"Y",rw:""},rules:{FloorCode:[{required:!0,message:"请输入代码！",trigger:"blur"}],FloorDesc:[{required:!0,message:"请输入描述！",trigger:"blur"}]},winFlag:0}},created:function(){this.tableHeight=this.$store.state.systemset.height-76,this.GetWardData(),this.FindClick()},methods:{HandleCurrentChange:function(e){this.currentPage=e.currentPage,this.FindClick()},HandleSizeChange:function(e){this.currentPageSize=e,this.FindClick()},GetWardData:function(){var e=this,t=e.axiosConfig("web.INMDBComm","FindWardList","RecQuery","parr$^Y");e.$ajax.request(t).then(function(t){t.data.rows.forEach(function(t){e.WardData.push({key:t.rw,label:t.WardDesc})})}).catch(function(e){})},RowClick:function(e){this.selRow=e},RowDblClick:function(e){this.winFlag=1,this.selRow=e;var t=this;if(""!=e.rw){var o=this.axiosConfig("web.INMDBComm","GetFloor","RecMethod","id$"+e.rw);this.$ajax.request(o).then(function(e){t.dialogVisible=!0,t.$nextTick(function(){t.$refs.editForm.resetFields(),t.setForm(t.$refs.editForm,t.editForm,e.data)})}).catch(function(e){})}},FindClick:function(){var e=this,t=(this.currentPage-1)*this.currentPageSize,o=this.currentPageSize,l=e.axiosConfig("web.INMDBComm","FindFloorList","RecQuery","parr$","input$","start$"+t,"limit$"+o);e.$ajax.request(l).then(function(t){e.tableData=t.data.rows,e.totalCount=parseInt(t.data.results),e.selRow=""}).catch(function(e){})},AddClick:function(){var e=this;this.winFlag=0,this.dialogVisible=!0,this.$nextTick(function(){e.$refs.editForm.resetFields(),e.editForm.rw=""})},SaveClick:function(){var e=this;this.$refs.editForm.validate(function(t){if(!t)return!1;var o="";for(var l in e.editForm)void 0==e.editForm[l]&&(e.editForm[l]=""),o=e.editForm[l]instanceof Date?o+l+"|"+e.editForm[l].Format("yyyy-MM-dd")+"^":o+l+"|"+e.editForm[l].toString()+"^";if(""!=o){var a=e.axiosConfig("web.INMDBComm","SaveFloor","Method","parr$"+o);e.$ajax.request(a).then(function(t){1==t.data?(e.$message({message:"保存成功！",type:"success",showClose:!0,customClass:"success_class"}),e.dialogVisible=!1,e.FindClick()):0==t.data?e.$message({type:"error",message:"保存失败！",showClose:!0,customClass:"error_class"}):e.$message({type:"error",message:t.data,showClose:!0,customClass:"error_class"})}).catch(function(t){e.$message({type:"error",message:"保存失败！",showClose:!0,customClass:"error_class"})})}})},SetFloorWard:function(){var e=this;if(e.selRow&&e.selRow.rw){e.FloorWard=new Array;var t=this.axiosConfig("web.INMDBComm","GetFloor","RecMethod","id$"+e.selRow.rw);this.$ajax.request(t).then(function(t){e.dialogVisible2=!0,e.$nextTick(function(){t.data.FloorWards&&(e.FloorWard=t.data.FloorWards.split(","))})}).catch(function(e){})}else e.$message({type:"warning",message:"请选择要设置的楼层！",showClose:!0,customClass:"warning_class"})},SaveFloorWard:function(){var e=this;if(e.selRow&&e.selRow.rw)if(0!=e.FloorWard.length){var t=e.selRow.rw,o=e.FloorWard.toString(),l=e.axiosConfig("web.INMDBComm","SaveFloorWard","Method","id$"+t,"wards$"+o);e.$ajax.request(l).then(function(t){1==t.data?e.$message({type:"success",message:"保存成功！",showClose:!0,customClass:"success_class"}):e.$message({type:"error",message:"保存失败！",showClose:!0,customClass:"error_class"}),e.dialogVisible2=!1}).catch(function(e){})}else e.$message({type:"warning",message:"请选择要设置的病区！",showClose:!0,customClass:"warning_class"})}}},d={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"floor-set-panel"},[o("div",{staticClass:"top-tool-button"},[o("hgbutton",{attrs:{type:"text",issvg:e.styleCode,icon:e.styleCode?"#nm-icon-reload":"nm-icon-lite-reload"},on:{click:e.FindClick}},[e._v(e._s(e.$t("menu.FloorSet.5nrnaw39bqc0")))]),e._v(" "),o("hgbutton",{attrs:{type:"text",issvg:e.styleCode,icon:e.styleCode?"#nm-icon-add":"nm-icon-lite-add"},on:{click:e.AddClick}},[e._v(e._s(e.$t("menu.FloorSet.5nrnaw39chc0")))]),e._v(" "),o("hgbutton",{attrs:{type:"text",issvg:e.styleCode,icon:e.styleCode?"#nm-icon-slice-only":"nm-icon-lite-slice-only"},on:{click:e.SetFloorWard}},[e._v(e._s(e.$t("menu.FloorSet.5ncy634ymm80")))])],1),e._v(" "),o("div",{staticClass:"top-tool-table"},[o("el-table",{attrs:{data:e.tableData,height:e.styleCode?e.Height-79:e.Height-73,border:e.styleCode,"header-cell-style":e.headerCellFontWeight,"highlight-current-row":"",align:"left",label:e.$t("menu.FloorSet.5ncy634yob00")},on:{"row-dblclick":e.RowDblClick,"row-click":e.RowClick}},[o("el-table-column",{attrs:{type:"index",align:"center",width:"40"}}),e._v(" "),o("el-table-column",{attrs:{label:e.$t("menu.FloorSet.5nrnaw3anb40"),prop:"FloorCode","show-overflow-tooltip":"",width:"200"}}),e._v(" "),o("el-table-column",{attrs:{label:e.$t("menu.FloorSet.5nrnaw3bpz00"),prop:"FloorDesc","show-overflow-tooltip":"",width:"200"}}),e._v(" "),o("el-table-column",{attrs:{label:e.$t("menu.FloorSet.5ncy634yqd40"),prop:"FloorShort","show-overflow-tooltip":"",width:"200"}}),e._v(" "),o("el-table-column",{attrs:{label:e.$t("menu.FloorSet.5nrnaw3cq9k0"),prop:"FloorRemark","show-overflow-tooltip":"",width:""}}),e._v(" "),o("el-table-column",{attrs:{label:e.$t("menu.FloorSet.5nrnaw3e3l80"),prop:"StatusDesc","show-overflow-tooltip":"",width:"100"}}),e._v(" "),e._e()],1),e._v(" "),o("hgpagination",{attrs:{styleCode:e.styleCode,sizes:[20,40,50,100],totalCount:e.totalCount,pageNumber:e.currentPage,pageSize:e.currentPageSize},on:{changePage:e.HandleCurrentChange,getPageSize:e.HandleSizeChange}})],1),e._v(" "),o("div",[o("el-dialog",{attrs:{title:0==e.winFlag?e.$t("menu.FloorSet.5nrnaw39chc0"):e.$t("menu.FloorSet.5nrnaw39chc1"),visible:e.dialogVisible,modal:"","close-on-click-modal":!1,width:"394px",align:"center"},on:{"update:visible":function(t){e.dialogVisible=t}}},[o("div",{staticClass:"dialog-header-title",attrs:{slot:"title"},slot:"title"},[e.styleCode?o("i",{class:[0==e.winFlag?"nm-icon-w-plus":"nm-icon-w-edit"]}):e._e(),e._v(" "),0==e.winFlag?o("span",[e._v(e._s(e.$t("menu.FloorSet.5nrnaw39chc0")))]):1==e.winFlag?o("span",[e._v(e._s(e.$t("menu.FloorSet.5nrnaw39chc1")))]):e._e()]),e._v(" "),o("el-form",{ref:"editForm",attrs:{model:e.editForm,rules:e.rules,inline:!0,"label-width":"100px","label-position":"right",align:"left"}},[o("el-form-item",{attrs:{label:e.$t("menu.FloorSet.5nrnaw3anb40"),prop:"FloorCode"}},[o("el-input",{staticStyle:{width:"240px"},attrs:{clearable:"",placeholder:e.$t("menu.FloorSet.5nrnaw3j8d40"),size:"mini"},model:{value:e.editForm.FloorCode,callback:function(t){e.$set(e.editForm,"FloorCode",t)},expression:"editForm.FloorCode"}})],1),e._v(" "),o("el-form-item",{attrs:{label:e.$t("menu.FloorSet.5nrnaw3bpz00"),prop:"FloorDesc"}},[o("el-input",{staticStyle:{width:"240px"},attrs:{clearable:"",placeholder:e.$t("menu.FloorSet.5nrnaw3m9so0"),size:"mini"},model:{value:e.editForm.FloorDesc,callback:function(t){e.$set(e.editForm,"FloorDesc",t)},expression:"editForm.FloorDesc"}})],1),e._v(" "),o("el-form-item",{attrs:{label:e.$t("menu.FloorSet.5ncy634yqd40"),prop:"FloorShort"}},[o("el-input",{staticStyle:{width:"240px"},attrs:{clearable:"",placeholder:e.$t("menu.FloorSet.5nrnaw3ps0c0"),size:"mini"},model:{value:e.editForm.FloorShort,callback:function(t){e.$set(e.editForm,"FloorShort",t)},expression:"editForm.FloorShort"}})],1),e._v(" "),o("el-form-item",{attrs:{label:e.$t("menu.FloorSet.5nrnaw3cq9k0"),prop:"FloorRemark"}},[o("el-input",{staticStyle:{width:"240px"},attrs:{type:"textarea",row:2,clearable:"",placeholder:e.$t("menu.FloorSet.5nrnaw3tpmc0"),size:"mini"},model:{value:e.editForm.FloorRemark,callback:function(t){e.$set(e.editForm,"FloorRemark",t)},expression:"editForm.FloorRemark"}})],1),e._v(" "),o("el-form-item",{attrs:{label:e.$t("menu.FloorSet.5nrnaw3e3l80"),prop:"HolidayStatus"}},[o("hgswitch",{attrs:{"active-value":"Y","inactive-value":"N","inactive-text":e.$t("menu.FloorSet.5nrnaw3ynfg0"),"active-text":e.$t("menu.FloorSet.5nrnawkk9yw0"),size:"mini"},model:{value:e.editForm.FloorStatus,callback:function(t){e.$set(e.editForm,"FloorStatus",t)},expression:"editForm.FloorStatus"}})],1)],1),e._v(" "),o("div",{staticClass:"bottom-button"},[o("hgbutton",{directives:[{name:"intervalclick",rawName:"v-intervalclick",value:{func:e.SaveClick,time:500},expression:"{func:SaveClick,time:500}"}],attrs:{type:e.styleCode?"default":"success",styleCode:e.styleCode}},[e._v(e._s(e.$t("menu.FloorSet.5nrnawkkcb80")))]),e._v(" "),o("hgbutton",{attrs:{type:"default",styleCode:e.styleCode},on:{click:function(t){e.dialogVisible=!1}}},[e._v(e._s(e.$t("menu.FloorSet.5nrnawkkd800")))])],1)],1)],1),e._v(" "),o("el-dialog",{attrs:{title:e.$t("menu.FloorSet.5ncy634ymm80"),visible:e.dialogVisible2,"close-on-click-modal":!1,width:"600px",modal:""},on:{"update:visible":function(t){e.dialogVisible2=t}}},[o("div",{staticClass:"dialog-header-title",attrs:{slot:"title"},slot:"title"},[e.styleCode?o("i",{staticClass:"nm-icon-w-paper"}):e._e(),e._v(" "),o("span",[e._v(e._s(e.$t("menu.FloorSet.5ncy634ymm80")))])]),e._v(" "),o("div",{staticStyle:{"text-align":"center"}},[o("el-transfer",{staticStyle:{"text-align":"left",display:"inline-block"},attrs:{data:e.WardData,filterable:"",titles:[e.$t("menu.FloorSet.5nrnawkns1k0"),e.$t("menu.FloorSet.5ncy63532gs0")]},model:{value:e.FloorWard,callback:function(t){e.FloorWard=t},expression:"FloorWard"}})],1),e._v(" "),o("div",{staticClass:"bottom-button"},[o("hgbutton",{directives:[{name:"intervalclick",rawName:"v-intervalclick",value:{func:e.SaveFloorWard,time:500},expression:"{func:SaveFloorWard,time:500}"}],attrs:{type:e.styleCode?"default":"success",styleCode:e.styleCode}},[e._v(e._s(e.$t("menu.FloorSet.5nrnawkkcb80")))]),e._v(" "),o("hgbutton",{attrs:{type:"default",styleCode:e.styleCode},on:{click:function(t){e.dialogVisible2=!1}}},[e._v(e._s(e.$t("menu.FloorSet.5nrnawkkd800")))])],1)])],1)},staticRenderFns:[]};var u=o("VU/8")(c,d,!1,function(e){o("QUuL")},null,null);t.default=u.exports},QUuL:function(e,t){}});