webpackJsonp([298],{"1j0y":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("Dd8w"),n=a.n(i),o=a("NYxO"),l=a("XlQt"),s=a("W5Fe"),r={name:"ModuleSet",components:{hgbutton:l.default,hgpagination:s.default},computed:n()({},Object(o.b)(["Height","styleCode"])),data:function(){var t=this;return{currentPage:1,currentPageSize:20,totalCount:0,dialogVisible:!1,labelWidth:"width:150px",finds:{},tableData:[],MenuData:[],editForm:{HospitalName:"",StartDate:"",EndDate:"",rw:""},rules:{HospitalName:[{required:!0,message:"请输入医院名称！",trigger:"blur"}],StartDate:[{required:!0,type:"date",message:"请选择启用日期！",trigger:"change"},{validator:function(e,a,i){t.editForm.StartDate&&t.editForm.EndDate&&t.editForm.StartDate>t.editForm.EndDate?i("开始日期大于结束日期"):i()}}]},winFlag:0}},created:function(){this.findClick()},watch:{"editForm.StartDate":{handler:function(t,e){"string"==typeof t&&(this.editForm.StartDate=new Date(t.replace(/-/g,"/")))},deep:!0},"editForm.EndDate":{handler:function(t,e){"string"==typeof t&&(this.editForm.EndDate=new Date(t.replace(/-/g,"/")))},deep:!0}},methods:{handleCurrentChange:function(t){this.currentPage=t.currentPage,this.findClick()},handleSizeChange:function(t){this.currentPageSize=t,this.findClick()},rowDblclick:function(t){var e=this;if(e.winFlag=1,""!=t.rw){var a=this.axiosConfig("web.INMDBComm","GetHospitalSet","RecMethod","id$"+t.rw);this.$ajax.request(a).then(function(t){e.dialogVisible=!0,e.$nextTick(function(){e.$refs.editForm.resetFields(),e.setForm(e.$refs.editForm,e.editForm,t.data)})}).catch(function(t){})}},findClick:function(){var t=this,e=(this.currentPage-1)*this.currentPageSize,a=this.currentPageSize,i=this.axiosConfig("web.INMDBComm","FindHospitalSetList","RecQuery","parr$","start$"+e,"limit$"+a);this.$ajax.request(i).then(function(e){t.tableData=e.data.rows,t.totalCount=parseInt(e.data.results)}).catch(function(t){})},addClick:function(){var t=this;t.winFlag=0,t.dialogVisible=!0,t.$nextTick(function(){t.$refs.editForm.resetFields(),t.editForm.StartDate=new Date,t.editForm.rw=""})},saveClick:function(){var t=this;this.$refs.editForm.validate(function(e){if(!e)return!1;var a="";for(var i in t.editForm)void 0==t.editForm[i]&&(t.editForm[i]=""),a=t.editForm[i]instanceof Date?a+i+"|"+t.editForm[i].Format("yyyy-MM-dd")+"^":a+i+"|"+t.editForm[i].toString()+"^";if(""!=a){var n=t.axiosConfig("web.INMDBComm","SaveHospitalSet","Method","parr$"+a);t.$ajax.request(n).then(function(e){1==e.data?(t.$message({message:"保存成功！",type:"success",showClose:!0,customClass:"success_class"}),t.dialogVisible=!1,t.findClick()):t.$message({type:"warning",message:"保存失败！",showClose:!0,customClass:"warning_class"})}).catch(function(e){t.$message({type:"warning",message:"保存失败！",showClose:!0,customClass:"warning_class"})})}})}}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hospital-set-panel"},[a("div",{staticClass:"top-tool-button"},[a("hgbutton",{attrs:{type:"text",issvg:t.styleCode,icon:t.styleCode?"#nm-icon-reload":"nm-icon-lite-reload"},on:{click:t.findClick}},[t._v(t._s(t.$t("menu.HospitalSet.5nrnax8v37c0")))]),t._v(" "),a("hgbutton",{attrs:{type:"text",issvg:t.styleCode,icon:t.styleCode?"#nm-icon-add":"nm-icon-lite-add"},on:{click:t.addClick}},[t._v(t._s(t.$t("menu.HospitalSet.5nrnax8v4dk0")))])],1),t._v(" "),a("div",{staticClass:"top-tool-table"},[a("el-table",{attrs:{data:t.tableData,height:t.styleCode?t.Height-79:t.Height-73,border:t.styleCode,"header-cell-style":t.headerCellFontWeight,"highlight-current-row":"","show-overflow-tooltip":"",align:"left"},on:{"row-dblclick":t.rowDblclick}},[a("el-table-column",{attrs:{type:"index",label:"",width:"40",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"HospitalName",label:t.$t("menu.HospitalSet.5ncy63emcvs0"),"show-overflow-tooltip":"",align:"left"}}),t._v(" "),a("el-table-column",{attrs:{prop:"StartDate",label:t.$t("menu.HospitalSet.5nrnax8x0k00"),"show-overflow-tooltip":"",align:"left",formatter:t.PTableDateHisShow}}),t._v(" "),a("el-table-column",{attrs:{prop:"EndDate",label:t.$t("menu.HospitalSet.5nrnax8ypxw0"),"show-overflow-tooltip":"",align:"left",formatter:t.PTableDateHisShow}}),t._v(" "),t._e()],1),t._v(" "),a("hgpagination",{attrs:{styleCode:t.styleCode,sizes:[20,40,50,100],totalCount:t.totalCount,pageNumber:t.currentPage,pageSize:t.currentPageSize},on:{changePage:t.handleCurrentChange,getPageSize:t.handleSizeChange}})],1),t._v(" "),a("div",[a("el-dialog",{attrs:{title:0==t.winFlag?t.$t("menu.HospitalSet.5nrnax8v4dk0"):t.$t("menu.HospitalSet.5nrnax8v4dk1"),visible:t.dialogVisible,"close-on-click-modal":!1,width:"354px"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("div",{staticClass:"dialog-header-title",attrs:{slot:"title"},slot:"title"},[t.styleCode?a("i",{class:[0==t.winFlag?"nm-icon-w-plus":"nm-icon-w-edit"]}):t._e(),t._v(" "),0==t.winFlag?a("span",[t._v(t._s(t.$t("menu.HospitalSet.5nrnax8v4dk0")))]):1==t.winFlag?a("span",[t._v(t._s(t.$t("menu.HospitalSet.5nrnax8v4dk1")))]):t._e()]),t._v(" "),a("el-form",{ref:"editForm",attrs:{model:t.editForm,rules:t.rules,"label-width":"130px",inline:!0,"label-position":"right",align:"left"}},[a("el-form-item",{attrs:{label:t.$t("menu.HospitalSet.5ncy63emcvs0"),prop:"HospitalName"}},[a("el-input",{style:t.labelWidth,attrs:{size:"mini"},model:{value:t.editForm.HospitalName,callback:function(e){t.$set(t.editForm,"HospitalName",e)},expression:"editForm.HospitalName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:t.$t("menu.HospitalSet.5nrnax8x0k00"),prop:"StartDate"}},[a("el-date-picker",{style:t.labelWidth,attrs:{type:"date",format:this.$store.state.mainframe.DateFormat,placeholder:t.$t("menu.HospitalSet.5nrnax932co0"),"default-value":new Date,size:"mini"},model:{value:t.editForm.StartDate,callback:function(e){t.$set(t.editForm,"StartDate",e)},expression:"editForm.StartDate"}})],1),t._v(" "),a("el-form-item",{attrs:{label:t.$t("menu.HospitalSet.5nrnax8ypxw0"),prop:"EndDate"}},[a("el-date-picker",{style:t.labelWidth,attrs:{type:"date",format:this.$store.state.mainframe.DateFormat,placeholder:t.$t("menu.HospitalSet.5nrnax932co0"),size:"mini"},model:{value:t.editForm.EndDate,callback:function(e){t.$set(t.editForm,"EndDate",e)},expression:"editForm.EndDate"}})],1)],1),t._v(" "),a("div",{staticClass:"bottom-button"},[a("hgbutton",{attrs:{type:t.styleCode?"default":"success",styleCode:t.styleCode},on:{click:t.saveClick}},[t._v(t._s(t.$t("menu.HospitalSet.5nrnax95asw0")))]),t._v(" "),a("hgbutton",{attrs:{type:"default",styleCode:t.styleCode},on:{click:function(e){t.dialogVisible=!1}}},[t._v(t._s(t.$t("menu.HospitalSet.5nrnax95bzs0")))])],1)],1)],1)])},staticRenderFns:[]};var c=a("VU/8")(r,d,!1,function(t){a("CnEa")},null,null);e.default=c.exports},CnEa:function(t,e){}});