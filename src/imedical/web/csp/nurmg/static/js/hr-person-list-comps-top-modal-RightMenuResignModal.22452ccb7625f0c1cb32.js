webpackJsonp([305],{"3MPm":function(e,t){},GvIo:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("woOf"),s=i.n(n),a=i("QgPK"),o=i("9eQB"),l={components:{hgbutton:i("XlQt").default},name:"RightMenuResignModal",mixins:[a.RightMenuMixin],data:function(){return{initData:{ResignReason:[]},rules:{ResignDate:[{required:!0,message:"请选择离职日期",trigger:"change"}],ResignReason:[{required:!0,message:"请选择离职原因",type:"array",trigger:"change"}]},auth:{submit:"ResignSure"},config:{add:{ClassName:"web.INMInternComm",MethodName:"SaveResign",MethodType:"Method"},listReason:{ClassName:"web.INMInternComm",MethodName:"GetReason",MethodType:"Method"},checkResign:{ClassName:"web.INMInternComm",MethodName:"CheckResignRec",MethodType:"Method"},dict:{ClassName:"web.INMDBComm",MethodName:"FindPubCode",MethodType:"Query"}},rowId:"",showOtherReason:!1,reasonList:[]}},created:function(){this.loadDictData()},methods:{edit:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.model=s()({},this.initData,e),this.showOtherReason=!1,this.visible=!0},loadDictData:function(){var e,t=this;e=s()({},this.config.dict,{type:"离职原因"}),this.asyncRequest(e).then(function(e){t.reasonList=e.data.rows}).catch(function(){t.$message.warning("获取退休原因数据失败")})},onChangeOther:function(e){var t,i=this;t=s()({},this.config.listReason,{str:e.toString()}),e&&e.length>0?this.asyncRequest(t).then(function(e){i.showOtherReason=e.data.split(o.DELIMITER.Semicolon).includes("其他"),i.showOtherReason&&(i.model=s()(i.model,{ResignOther:""}))}):this.showOtherReason=!1},handleSubmit:function(e,t){var i,n,a=this,o={ResignType:e,ResignCreater:this.LoginId,ResignStatus:t};i=s()({},this.model,o);var l=this.packageParam(i);n=s()({},this.config.add,{parr:l}),this.$refs.form.validate(function(e){if(!e)return!1;a.asyncRequest(n).then(function(e){e.data>0?(a.rowId=e.data,a.checkResign("N","A")):0==e.data&&a.nurMessage.warning("更新失败，请勿重复申请")})})},checkResign:function(e,t){var i,n=this,a=this.model.ResignDate.Format(this.DateFormat),l={id:this.rowId,type:e,status:t,parr:["",this.LoginId,a].join(o.DELIMITER.Caret)};i=s()({},this.config.checkResign,l),this.asyncRequest(i).then(function(e){1==e.data&&(n.$message.success("离职成功"),n.$emit("ok"))}).finally(function(){n.close()})}}},r={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"resignmodal"},[i("el-dialog",{attrs:{title:e.$t("menu.RightMenuResignModal.5nrnbjd5bos0"),modal:"","close-on-click-modal":!1,top:"4%",visible:e.visible,width:"50%"},on:{"update:visible":function(t){e.visible=t}}},[i("div",{staticClass:"dialog-header-title",attrs:{slot:"title"},slot:"title"},[i("i",{staticClass:"nm-icon-w-paper"}),e._v(" "),i("span",[e._v(e._s(e.$t("menu.RightMenuResignModal.5nrnbjd5bos0")))])]),e._v(" "),i("el-form",{ref:"form",attrs:{model:e.model,rules:e.rules,inline:!0,"label-position":"right"}},[i("fieldset",{staticClass:"resign_fieldset"},[i("el-form-item",{attrs:{label:e.$t("menu.RightMenuResignModal.5nrnbjd6yk00"),"label-width":"60px"}},[i("el-input",{staticStyle:{width:"120px"},attrs:{type:"text",value:e.model.WardDesc,size:"mini",disabled:""}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("menu.RightMenuResignModal.5nrnbjd92200"),"label-width":"60px"}},[i("el-input",{staticStyle:{width:"120px"},attrs:{type:"text",value:e.model.NameDesc,size:"mini",disabled:""}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("menu.RightMenuResignModal.5nrnbjdacck0"),prop:"ResignDate","label-width":"80px"}},[i("el-date-picker",{staticStyle:{width:"160px"},attrs:{type:"date",format:e.DateFormat,placeholder:e.$t("menu.RightMenuResignModal.5nrnbjdbdos0"),size:"mini"},model:{value:e.model.ResignDate,callback:function(t){e.$set(e.model,"ResignDate",t)},expression:"model.ResignDate"}})],1),e._v(" "),i("el-form-item",{staticClass:"check-group",staticStyle:{"margin-left":"6px"},attrs:{label:e.$t("menu.RightMenuResignModal.5nrnbjdcg9g0"),prop:"ResignReason"}},[i("el-checkbox-group",{on:{change:e.onChangeOther},model:{value:e.model.ResignReason,callback:function(t){e.$set(e.model,"ResignReason",t)},expression:"model.ResignReason"}},e._l(e.reasonList,function(t){return i("el-checkbox",{key:t.SubValue,staticStyle:{width:"50%",margin:"0",padding:"0"},attrs:{label:t.SubValue}},[e._v(e._s(t.SubDesc))])}),1),e._v(" "),i("el-input",{directives:[{name:"show",rawName:"v-show",value:e.showOtherReason,expression:"showOtherReason"}],staticStyle:{width:"100%",margin:"0"},attrs:{size:"small"},model:{value:e.model.ResignOther,callback:function(t){e.$set(e.model,"ResignOther",t)},expression:"model.ResignOther"}})],1)],1)]),e._v(" "),i("div",{staticStyle:{margin:"10px 0 0 0","font-size":"0","text-align":"center"}},[e.showSubmitAuth?i("hgbutton",{directives:[{name:"intervalclick",rawName:"v-intervalclick",value:{func:e.handleSubmit,time:500,value1:"N",value2:"Y"},expression:"{func: handleSubmit,time: 500, value1:'N', value2:'Y'}"}],attrs:{type:"default"}},[e._v(e._s(e.$t("menu.RightMenuResignModal.5nrnbjdcipk0")))]):e._e(),e._v(" "),i("hgbutton",{attrs:{type:"default"},on:{click:e.close}},[e._v(e._s(e.$t("menu.RightMenuResignModal.5nrnbjdcj4c0")))])],1)],1)],1)},staticRenderFns:[]};var d=i("VU/8")(l,r,!1,function(e){i("3MPm")},"data-v-03c46244",null);t.default=d.exports}});