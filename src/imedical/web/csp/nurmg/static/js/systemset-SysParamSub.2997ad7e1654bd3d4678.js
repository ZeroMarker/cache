webpackJsonp([237],{XrjJ:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("Dd8w"),r=a.n(o),i=a("XlQt"),l=a("W5Fe"),n=a("NYxO"),s={props:["parid"],components:{hgbutton:i.default,hgpagination:l.default},computed:r()({},Object(n.b)(["styleCode"])),data:function(){return{tableData:[],currentPage:1,currentPageSize:20,totalCount:0,dialogVisible:!1,selRow:"",editForm:{SubCode:"",SubDesc:"",SubValue:"",SubSymbol:"",SubColor:"",SubRemark:"",SubStDate:new Date,SubEndDate:"",rw:"",SubSort:1},rules:{SubCode:[{required:!0,message:"请输入代码！",trigger:"blur"}],SubDesc:[{required:!0,message:"请输入名称！",trigger:"blur"}]},winFlag:0}},created:function(){this.FindClick()},methods:{HandleCurrentChange:function(e){this.currentPage=e.currentPage,this.FindClick()},HandleSizeChange:function(e){this.currentPageSize=e,this.FindClick()},UpSort:function(){var e=this;""!=e.selRow?e.$ajax.request(e.axiosConfig("web.INMSetComm","SysParamSubSort","Method","rowid$"+e.selRow.rw,"type$up")).then(function(t){0==t.data&&e.$message({type:"warning",message:"已经置顶了",showClose:!0,customClass:"warning_class"}),e.FindClick()}):e.$message({type:"warning",message:"请选择要移动的行",showClose:!0,customClass:"warning_class"})},DownSort:function(){var e=this;e.selRow?e.$ajax.request(e.axiosConfig("web.INMSetComm","SysParamSubSort","Method","rowid$"+e.selRow.rw,"type$down")).then(function(t){1==t.data&&e.$message({type:"warning",message:"已经置底了",showClose:!0,customClass:"warning_class"}),e.FindClick()}):e.$message({type:"warning",message:"请选择要移动的行",showClose:!0,customClass:"warning_class"})},FindClick:function(){var e=this,t=e.parid;if(""!=t){var a=(e.currentPage-1)*e.currentPageSize,o=e.currentPageSize,r=e.axiosConfig("web.INMSetComm","FindSetParSubList","RecQuery","parr$"+t,"start$"+a,"limit$"+o);e.$ajax.request(r).then(function(t){e.tableData=t.data.rows,e.totalCount=parseInt(t.data.results),e.selRow=""}).catch(function(e){})}},RowDblclick:function(e){this.selRow=e;var t=this;if(t.winFlag=1,""!=e.rw){var a=this.axiosConfig("web.INMSetComm","GetParamSub","RecMethod","id$"+e.rw);this.$ajax.request(a).then(function(e){t.dialogVisible=!0,t.$nextTick(function(){t.$refs.form2.resetFields(),t.setForm(t.$refs.form2,t.editForm,e.data)})}).catch(function(e){})}},RowClick:function(e){this.selRow=e},AddClick:function(){var e=this;e.winFlag=0,e.dialogVisible=!0,e.$nextTick(function(){e.$refs.form2.resetFields(),e.editForm.rw="",e.$ajax.request(e.axiosConfig("web.INMSetComm","SetParamSubSort","Method","par$"+e.parid)).then(function(t){e.editForm.SubSort=t.data})})},SaveClick:function(){var e=this,t=this;t.$refs.form2.validate(function(a){if(!a)return!1;var o="";for(var r in t.editForm)void 0==t.editForm[r]&&(t.editForm[r]=""),o=t.editForm[r]instanceof Date?o+r+"|"+t.editForm[r].Format("yyyy-MM-dd")+"^":o+r+"|"+t.editForm[r].toString()+"^";if(""!=o&&""!=e.parid){o=o+"^parid|"+e.parid;var i=t.axiosConfig("web.INMSetComm","SaveParamSub","Method","parr$"+o);t.$ajax.request(i).then(function(e){1==e.data?(t.$message({message:"保存成功！",type:"success",showClose:!0,customClass:"success_class"}),t.dialogVisible=!1,t.FindClick()):t.$message({type:"error",message:"保存失败",showClose:!0,customClass:"error_class"})}).catch(function(e){t.$message({type:"error",message:"保存失败",showClose:!0,customClass:"error_class"})})}})}}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sysparam-sub-panel"},[a("div",{staticClass:"per-top-tool-button dialog-div-top-radius"},[a("hgbutton",{attrs:{type:"text",issvg:e.styleCode,icon:e.styleCode?"#nm-icon-reload":"nm-icon-lite-reload"},on:{click:e.FindClick}},[e._v(e._s(e.$t("menu.SysParamSub.5nrnc76kij40")))]),e._v(" "),a("hgbutton",{attrs:{type:"text",issvg:e.styleCode,icon:e.styleCode?"#nm-icon-add":"nm-icon-lite-add"},on:{click:e.AddClick}},[e._v(e._s(e.$t("menu.SysParamSub.5nrnc76kjc80")))]),e._v(" "),a("hgbutton",{attrs:{type:"text",issvg:e.styleCode,icon:e.styleCode?"#nm-icon-to-up":"nm-icon-lite-up"},on:{click:e.UpSort}},[e._v(e._s(e.$t("menu.SysParamSub.5nrnc76kjo80")))]),e._v(" "),a("hgbutton",{attrs:{type:"text",issvg:e.styleCode,icon:e.styleCode?"#nm-icon-to-down":"nm-icon-lite-down"},on:{click:e.DownSort}},[e._v(e._s(e.$t("menu.SysParamSub.5nrnc76kjy00")))])],1),e._v(" "),a("div",{staticClass:"top-tool-dialog-table dialog-table-bottom-radius"},[a("el-table",{attrs:{data:e.tableData,height:"400px",border:e.styleCode,"header-cell-style":e.headerCellFontWeight,"highlight-current-row":"",align:"left",label:e.$t("menu.SysParamSub.5ncy6uq77tw0")},on:{"row-dblclick":e.RowDblclick,"row-click":e.RowClick}},[a("el-table-column",{attrs:{type:"index",width:"50",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("menu.SysParamSub.5nrnc76lqyk0"),prop:"SubCode","show-overflow-tooltip":"",width:"100",align:"left"}}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("menu.SysParamSub.5nrnc76npj40"),prop:"SubDesc","show-overflow-tooltip":"",width:"150",align:"left"}}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("menu.SysParamSub.5nrnc76p7800"),prop:"SubValue","show-overflow-tooltip":"",width:"100",align:"left"}}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("menu.SysParamSub.5nrnc76qg2o0"),prop:"SubSymbol","show-overflow-tooltip":"",width:"100",align:"left"}}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("menu.SysParamSub.5nrnc76s62s0"),prop:"SubColor","show-overflow-tooltip":"",width:"100",align:"left"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("el-tag",{directives:[{name:"show",rawName:"v-show",value:e.row.SubColor,expression:"scope.row.SubColor"}],staticStyle:{width:"50px","vertical-align":"middle"},attrs:{color:e.row.SubColor,size:"mini"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("menu.SysParamSub.5nrnc76t5eo0"),prop:"SubRemark",width:"100","show-overflow-tooltip":"",align:"left"}}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("menu.SysParamSub.5nrnc76ujbs0"),prop:"SubSort","show-overflow-tooltip":"",width:"60",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("menu.SysParamSub.5nrnc76w0jo0"),prop:"SubStDate","show-overflow-tooltip":"",width:"100",align:"left",formatter:e.PTableDateHisShow}}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("menu.SysParamSub.5nrnc76x2s80"),prop:"SubEndDate","show-overflow-tooltip":"",width:"100",align:"left",formatter:e.PTableDateHisShow}}),e._v(" "),e._e(),e._v(" "),e._e()],1),e._v(" "),a("hgpagination",{attrs:{styleCode:e.styleCode,sizes:[20,40,50,100],totalCount:e.totalCount,pageNumber:e.currentPage,pageSize:e.currentPageSize},on:{changePage:e.HandleCurrentChange,getPageSize:e.HandleSizeChange}})],1),e._v(" "),a("div",[a("el-dialog",{attrs:{title:0==e.winFlag?e.$t("menu.SysParamSub.5nrnc76kjc80"):e.$t("menu.SysParamSub.5nrnc76kjc81"),visible:e.dialogVisible,"close-on-click-modal":!1,"append-to-body":"",width:"394px",align:"center"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticClass:"dialog-header-title",attrs:{slot:"title"},slot:"title"},[e.styleCode?a("i",{class:[0==e.winFlag?"nm-icon-w-plus":"nm-icon-w-edit"]}):e._e(),e._v(" "),0==e.winFlag?a("span",[e._v(e._s(e.$t("menu.SysParamSub.5nrnc76kjc80")))]):1==e.winFlag?a("span",[e._v(e._s(e.$t("menu.SysParamSub.5nrnc76kjc81")))]):e._e()]),e._v(" "),a("el-form",{ref:"form2",attrs:{model:e.editForm,rules:e.rules,"label-width":"120px",inline:!0,"label-position":"right",align:"left"}},[a("el-form-item",{attrs:{label:e.$t("menu.SysParamSub.5nrnc76lqyk0"),prop:"SubCode"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{disabled:!!e.editForm.rw,placeholder:e.$t("menu.SysParamSub.5nrnc770jn80"),size:"mini"},model:{value:e.editForm.SubCode,callback:function(t){e.$set(e.editForm,"SubCode",t)},expression:"editForm.SubCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("menu.SysParamSub.5nrnc76npj40"),prop:"SubDesc"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:e.$t("menu.SysParamSub.5nrnc772dvk0"),size:"mini"},model:{value:e.editForm.SubDesc,callback:function(t){e.$set(e.editForm,"SubDesc",t)},expression:"editForm.SubDesc"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("menu.SysParamSub.5nrnc76p7800"),prop:"SubValue"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:e.$t("menu.SysParamSub.5ncy6uq7fpo0"),size:"mini"},model:{value:e.editForm.SubValue,callback:function(t){e.$set(e.editForm,"SubValue",t)},expression:"editForm.SubValue"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("menu.SysParamSub.5nrnc76qg2o0"),prop:"SubSymbol"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:e.$t("menu.SysParamSub.5ncy6uq7g0s0"),size:"mini"},model:{value:e.editForm.SubSymbol,callback:function(t){e.$set(e.editForm,"SubSymbol",t)},expression:"editForm.SubSymbol"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("menu.SysParamSub.5nrnc76s62s0"),prop:"SubColor"}},[a("el-color-picker",{attrs:{size:"mini"},model:{value:e.editForm.SubColor,callback:function(t){e.$set(e.editForm,"SubColor",t)},expression:"editForm.SubColor"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("menu.SysParamSub.5nrnc76t5eo0"),prop:"SubRemark"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{type:"textarea",placeholder:e.$t("menu.SysParamSub.5nrnc777is80"),row:2,size:"mini"},model:{value:e.editForm.SubRemark,callback:function(t){e.$set(e.editForm,"SubRemark",t)},expression:"editForm.SubRemark"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("menu.SysParamSub.5nrnc76w0jo0"),prop:"SubStDate"}},[a("el-date-picker",{staticStyle:{width:"200px"},attrs:{type:"date",format:this.$store.state.mainframe.DateFormat,placeholder:e.$t("menu.SysParamSub.5ncy6uq7h6w0"),size:"mini"},model:{value:e.editForm.SubStDate,callback:function(t){e.$set(e.editForm,"SubStDate",t)},expression:"editForm.SubStDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("menu.SysParamSub.5nrnc76x2s80"),prop:"SubEndDate"}},[a("el-date-picker",{staticStyle:{width:"200px"},attrs:{type:"date",format:this.$store.state.mainframe.DateFormat,placeholder:e.$t("menu.SysParamSub.5ncy6uq7hks0"),size:"mini"},model:{value:e.editForm.SubEndDate,callback:function(t){e.$set(e.editForm,"SubEndDate",t)},expression:"editForm.SubEndDate"}})],1)],1),e._v(" "),a("div",{staticClass:"bottom-button"},[a("hgbutton",{directives:[{name:"intervalclick",rawName:"v-intervalclick",value:{func:e.SaveClick,time:500},expression:"{func:SaveClick,time:500,}"}],attrs:{type:e.styleCode?"default":"success",styleCode:e.styleCode}},[e._v(e._s(e.$t("menu.SysParamSub.5nrnc779kk40")))]),e._v(" "),a("hgbutton",{attrs:{type:"default",styleCode:e.styleCode},on:{click:function(t){e.dialogVisible=!1}}},[e._v(e._s(e.$t("menu.SysParamSub.5nrnc779l3c0")))])],1)],1)],1)])},staticRenderFns:[]};var c=a("VU/8")(s,u,!1,function(e){a("wxBK")},null,null);t.default=c.exports},wxBK:function(e,t){}});