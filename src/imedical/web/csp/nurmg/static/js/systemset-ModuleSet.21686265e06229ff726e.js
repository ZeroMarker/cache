webpackJsonp([278],{"+sIa":function(e,t){},yLHA:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("Dd8w"),l=n.n(i),o=n("NYxO"),a=n("XlQt"),s=n("W5Fe"),d=n("doZQ"),r={components:{hgbutton:a.default,hgpagination:s.default,hgswitch:d.default},computed:l()({},Object(o.b)(["Height","DeveloperMode","styleCode"])),data:function(){return{currentPage:1,currentPageSize:20,totalCount:0,dialogVisible:!1,finds:{findcode:"",finddesc:""},tableData:[],MenuData:[],editForm:{ModuleCode:"",ModuleDesc:"",ModuleMenuDR:"",ModuleSort:"",ModuleStDate:"",ModuleEndDate:"",rw:"",IsAdvanced:"Y"},rules:{ModuleCode:[{required:!0,message:"请输入模块代码！",trigger:"blur"}],ModuleDesc:[{required:!0,message:"请输入模块名称！",trigger:"blur"}],ModuleStDate:[{required:!0,message:"请选择启用日期！",trigger:"change",type:"date"}]},winFlag:0}},created:function(){this.FindClick()},watch:{"editForm.ModuleStDate":{handler:function(e,t){e||(e=null),!e instanceof Date&&(this.editForm.ModuleStDate=new Date(e.replace(/-/g,"/")))},deep:!0},"editForm.ModuleEndDate":{handler:function(e,t){e||(e=null),!e instanceof Date&&(this.editForm.ModuleEndDate=new Date(e.replace(/-/g,"/")))},deep:!0},"editForm.rw":{handler:function(e,t){this.GetMenuData()},deep:!0},currentPage:function(e,t){this.FindClick()}},methods:{HandleCurrentChange:function(e){this.currentPage=e.currentPage,this.FindClick()},HandleSizeChange:function(e){this.currentPageSize=e,this.FindClick()},GetMenuData:function(){var e=this,t=e.axiosConfig("web.INMSetComm","FindMenuList","RecQuery","parr$^^"+e.editForm.rw+"^1");e.$ajax.request(t).then(function(t){e.MenuData=t.data.rows}).catch(function(e){})},RowDblClick:function(e){if(this.winFlag=1,this.DeveloperMode){var t=this;if(""!=e.rw){var n=this.axiosConfig("web.INMSetComm","GetModule","RecMethod","id$"+e.rw);this.$ajax.request(n).then(function(e){t.dialogVisible=!0,t.$nextTick(function(){t.$refs.editForm.resetFields(),t.setForm(t.$refs.editForm,t.editForm,e.data)})}).catch(function(e){})}}else t.$message({type:"warning",message:"非开发者不可编辑",showClose:!0,customClass:"ward_class"})},FindClick:function(){var e=this,t=this.finds.findcode+"^"+this.finds.finddesc,n=(this.currentPage-1)*this.currentPageSize,i=this.currentPageSize,l=this.axiosConfig("web.INMSetComm","FindModuleList","RecQuery","parr$"+t,"start$"+n,"limit$"+i);this.$ajax.request(l).then(function(t){e.tableData=t.data.rows,e.totalCount=parseInt(t.data.results)}).catch(function(e){})},AddClick:function(){this.winFlag=0,this.dialogVisible=!0,this.ResetClick()},SaveClick:function(){var e=this;this.$refs.editForm.validate(function(t){if(!t)return!1;var n="";for(var i in e.editForm)void 0==e.editForm[i]&&(e.editForm[i]=""),n=e.editForm[i]instanceof Date?n+i+"|"+e.editForm[i].Format("yyyy-MM-dd")+"^":n+i+"|"+e.editForm[i].toString()+"^";""!=n&&e.$ajax.request(e.axiosConfig("web.INMSetComm","IsExistModule","Method","parr$"+n)).then(function(t){-1!=t.data?e.$ajax.request(e.axiosConfig("web.INMSetComm","SaveModule","Method","parr$"+n)).then(function(t){1==t.data?(e.$message({message:"保存成功！",type:"success",showClose:!0,customClass:"success_class"}),e.dialogVisible=!1,e.FindClick()):e.$message({type:"warning",message:"保存失败！",showClose:!0,customClass:"warning_class"})}).catch(function(t){e.$message({type:"warning",message:"保存失败！",showClose:!0,customClass:"warning_class"})}):e.$message({type:"warning",message:"该模块代码已存在，保存失败",showClose:!0,customClass:"warning_class"})})})},ResetClick:function(){var e=this;e.$nextTick(function(){e.$refs.editForm.resetFields(),e.editForm.rw="",e.editForm.IsAdvanced="Y",e.editForm.ModuleStDate=new Date;var t=e.axiosConfig("web.INMSetComm","GetMaxModuleSort","Method");e.$ajax.request(t).then(function(t){e.editForm.ModuleSort=parseInt(t.data)}).catch(function(e){})})}}},u={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"module-set-panel"},[n("div",{staticClass:"top-tool-input"},[n("el-form",{ref:"finds",attrs:{model:e.finds,inline:!0},nativeOn:{submit:function(e){e.preventDefault()}}},[n("el-form-item",{attrs:{label:e.$t("menu.ModuleSet.5nrnc66dze80")}},[n("el-input",{staticStyle:{width:"140px"},attrs:{size:"mini"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.FindClick(t)}},model:{value:e.finds.findcode,callback:function(t){e.$set(e.finds,"findcode",t)},expression:"finds.findcode"}})],1),e._v(" "),n("el-form-item",{attrs:{label:e.$t("menu.ModuleSet.5nrnc66ewbk0")}},[n("el-input",{staticStyle:{width:"140px"},attrs:{size:"mini"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.FindClick(t)}},model:{value:e.finds.finddesc,callback:function(t){e.$set(e.finds,"finddesc",t)},expression:"finds.finddesc"}})],1),e._v(" "),n("el-form-item",[n("hgbutton",{attrs:{type:"default",styleCode:e.styleCode,icon:"nm-icon-w-find"},on:{click:e.FindClick}},[e._v(e._s(e.$t("menu.ModuleSet.5nrnc66exfo0")))]),e._v(" "),0==this.$store.state.login.LoginId&&e.DeveloperMode?n("hgbutton",{attrs:{type:"default",styleCode:e.styleCode,icon:"nm-icon-add"},on:{click:e.AddClick}},[e._v(e._s(e.$t("menu.ModuleSet.5nrnc66ey900")))]):e._e()],1)],1)],1),e._v(" "),n("div",{staticClass:"top-tool-table"},[n("el-table",{attrs:{data:e.tableData,height:e.styleCode?e.Height-93:e.Height-91,border:e.styleCode,"header-cell-style":e.headerCellFontWeight,"highlight-current-row":"","show-overflow-tooltip":"",align:"left"},on:{"row-dblclick":e.RowDblClick}},[n("el-table-column",{attrs:{type:"index",label:"",width:"40",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"ModuleCode",label:e.$t("menu.ModuleSet.5ncy6txbzg00"),align:"left"}}),e._v(" "),n("el-table-column",{attrs:{prop:"ModuleDesc",label:e.$t("menu.ModuleSet.5ncy6txbzv80"),align:"left"}}),e._v(" "),n("el-table-column",{attrs:{prop:"MenuDesc",label:e.$t("menu.ModuleSet.5ncy6txc08w0"),width:"150",align:"left"}}),e._v(" "),n("el-table-column",{attrs:{prop:"ModuleSort",label:e.$t("menu.ModuleSet.5nrnc66fv480"),width:"100",align:"left"}}),e._v(" "),n("el-table-column",{attrs:{prop:"ModuleStDate",label:e.$t("menu.ModuleSet.5nrnc66gquw0"),width:"120",align:"left",formatter:e.PTableDateHisShow}}),e._v(" "),n("el-table-column",{attrs:{prop:"ModuleEndDate",label:e.$t("menu.ModuleSet.5nrnc66hms40"),width:"120",align:"left",formatter:e.PTableDateHisShow}}),e._v(" "),e._e()],1),e._v(" "),n("hgpagination",{attrs:{styleCode:e.styleCode,sizes:[20,40,50,100],totalCount:e.totalCount,pageNumber:e.currentPage,pageSize:e.currentPageSize},on:{changePage:e.HandleCurrentChange,getPageSize:e.HandleSizeChange}})],1),e._v(" "),n("div",[n("el-dialog",{attrs:{title:0==e.winFlag?e.$t("menu.ModuleSet.5nrnc66ey900"):e.$t("menu.ModuleSet.5nrnc66ey901"),visible:e.dialogVisible,"close-on-click-modal":!1,width:"344px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("div",{staticClass:"dialog-header-title",attrs:{slot:"title"},slot:"title"},[e.styleCode?n("i",{class:[0==e.winFlag?"nm-icon-w-plus":"nm-icon-w-edit"]}):e._e(),e._v(" "),0==e.winFlag?n("span",[e._v(e._s(e.$t("menu.ModuleSet.5nrnc66ey900")))]):1==e.winFlag?n("span",[e._v(e._s(e.$t("menu.ModuleSet.5nrnc66ey901")))]):e._e()]),e._v(" "),n("el-form",{ref:"editForm",attrs:{model:e.editForm,rules:e.rules,"label-width":"100px",inline:!0,"label-position":"right",align:"left"}},[n("el-form-item",{attrs:{label:e.$t("menu.ModuleSet.5ncy6txbzg00"),prop:"ModuleCode"}},[n("el-input",{staticStyle:{width:"200px"},attrs:{disabled:!!e.editForm.rw,size:"mini"},model:{value:e.editForm.ModuleCode,callback:function(t){e.$set(e.editForm,"ModuleCode",t)},expression:"editForm.ModuleCode"}})],1),e._v(" "),n("el-form-item",{attrs:{label:e.$t("menu.ModuleSet.5ncy6txc4fo0"),prop:"ModuleDesc"}},[n("el-input",{staticStyle:{width:"200px"},attrs:{size:"mini"},model:{value:e.editForm.ModuleDesc,callback:function(t){e.$set(e.editForm,"ModuleDesc",t)},expression:"editForm.ModuleDesc"}})],1),e._v(" "),n("el-form-item",{attrs:{label:e.$t("menu.ModuleSet.5ncy6txc08w0"),prop:"ModuleMenuDR"}},[n("el-select",{staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:e.$t("menu.ModuleSet.5nrnc66jz1w0"),size:"mini"},model:{value:e.editForm.ModuleMenuDR,callback:function(t){e.$set(e.editForm,"ModuleMenuDR",t)},expression:"editForm.ModuleMenuDR"}},e._l(e.MenuData,function(e){return n("el-option",{key:e.rw,attrs:{label:e.MenuDesc,value:e.rw}})}),1)],1),e._v(" "),n("el-form-item",{attrs:{label:e.$t("menu.ModuleSet.5nrnc66fv480"),prop:"ModuleSort"}},[n("el-input-number",{staticStyle:{width:"200px"},attrs:{min:1,max:100,size:"mini"},model:{value:e.editForm.ModuleSort,callback:function(t){e.$set(e.editForm,"ModuleSort",e._n(t))},expression:"editForm.ModuleSort"}})],1),e._v(" "),n("el-form-item",{attrs:{label:e.$t("menu.ModuleSet.5nrnc66gquw0"),prop:"ModuleStDate"}},[n("el-date-picker",{staticStyle:{width:"200px"},attrs:{type:"date",format:this.$store.state.mainframe.DateFormat,placeholder:e.$t("menu.ModuleSet.5nrnc66ndfw0"),"default-value":new Date,size:"mini"},model:{value:e.editForm.ModuleStDate,callback:function(t){e.$set(e.editForm,"ModuleStDate",t)},expression:"editForm.ModuleStDate"}})],1),e._v(" "),n("el-form-item",{attrs:{label:e.$t("menu.ModuleSet.5nrnc66hms40"),prop:"ModuleEndDate"}},[n("el-date-picker",{staticStyle:{width:"200px"},attrs:{type:"date",format:this.$store.state.mainframe.DateFormat,placeholder:e.$t("menu.ModuleSet.5nrnc66ndfw0"),size:"mini"},model:{value:e.editForm.ModuleEndDate,callback:function(t){e.$set(e.editForm,"ModuleEndDate",t)},expression:"editForm.ModuleEndDate"}})],1),e._v(" "),0==this.$store.state.login.LoginId&&e.DeveloperMode?n("el-form-item",{attrs:{label:e.$t("menu.ModuleSet.5nrnc66q9qs0"),prop:"IsAdvanced"}},[n("hgswitch",{attrs:{"inactive-value":"N","inactive-color":"#ff4949","inactive-text":e.$t("menu.ModuleSet.5nrnc66r5xw0"),"active-value":"Y","active-color":"#13ce66","active-text":e.$t("menu.ModuleSet.5nrnc66s1x80"),disabled:!e.DeveloperMode},model:{value:e.editForm.IsAdvanced,callback:function(t){e.$set(e.editForm,"IsAdvanced",t)},expression:"editForm.IsAdvanced"}})],1):e._e(),e._v(" "),0==this.$store.state.login.LoginId&&e.DeveloperMode?n("span",{staticStyle:{"margin-left":"243px"}}):e._e()],1),e._v(" "),e.DeveloperMode?n("div",{staticClass:"bottom-button"},[n("hgbutton",{directives:[{name:"intervalclick",rawName:"v-intervalclick",value:{func:e.SaveClick,time:500},expression:"{func:SaveClick,time:500}"}],attrs:{type:e.styleCode?"default":"success",styleCode:e.styleCode}},[e._v(e._s(e.$t("menu.ModuleSet.5nrnc66s3i80")))]),e._v(" "),n("hgbutton",{attrs:{type:"default",styleCode:e.styleCode},on:{click:function(t){e.dialogVisible=!1}}},[e._v(e._s(e.$t("menu.ModuleSet.5nrnc66s3vk0")))])],1):e._e()],1)],1)])},staticRenderFns:[]};var c=n("VU/8")(r,u,!1,function(e){n("+sIa")},null,null);t.default=c.exports}});