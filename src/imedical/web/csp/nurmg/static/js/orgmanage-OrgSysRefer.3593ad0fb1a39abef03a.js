webpackJsonp([152,295],{"0+/o":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("Dd8w"),a=i.n(n),l=(i("zL8q"),i("NYxO")),o=i("d6c6"),r=i("XlQt"),s=i("z8xk"),c={components:{tinymce:o.default,hgbutton:r.default,Hgpanel:s.default},watch:{filterText:function(e){this.$refs.tree.filter(e)}},computed:a()({},Object(l.b)(["Height","SysTomcat","styleCode"])),name:"OrgSysRefer",data:function(){return{download:!1,FileUrl:[],treeInput:"",treedata:[{id:"0",label:"全部制度",children:[]}],defaultProps:{children:"children",label:"label"},selectNode:{id:"",level:1},selectSubNode:{id:"",label:""},dialogTreeVisible:!1,treeNodeForm:{SystemDesc:"",SystemPar:"",StartDate:(new Date).addDate(-1),EndDate:"",rw:""},rules:{SystemDesc:[{required:!0,message:"请输入内容！",trigger:"blur"}]},myValue:this.value,contextToolbar:"bold italic underline strikethrough superscript subscript lineheight forecolor backcolor alignleft aligncenter alignright alignjustify | bullist numlist indent2em outdent indent | table | removeformat | preview print"}},created:function(){this.LoadTreeData()},methods:{FilterTreeClick:function(){var e=this.treeInput;e=e||"",this.$refs.treedata.filter(e)},filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},LoadTreeData:function(){var e=this;e.$ajax.request(e.axiosConfig("web.INMOrgComm","FindSystemTree","Method","par$0","dateFlag$0")).then(function(t){e.treedata[0].children=t.data})},onClick:function(e){this.$emit("onClick",e,o.default)},clear:function(){this.myValue=""},NodeClick:function(e,t,i){e.children&&0!=e.children.length||(this.selectSubNode.id=e.id,this.selectSubNode.label=e.label,this.FindTableData())},FindTableData:function(){var e=this;e.myValue="";e.selectSubNode.id;e.selectSubNode.id?e.$ajax.request(e.axiosConfig("web.INMOrgComm","GetSysContent","Method","id$"+e.selectSubNode.id)).then(function(t){""!=t.data&&(e.myValue=t.data.ContentExt.replace(/☼/g,'"'),e.FileUrl=t.data.FileUrl.toString())}):e.message({message:"请选择要编辑的内容",type:"warning",showClose:!0,customClass:"warning_class"})},downloadExportFile:function(e,t){var i=document.createElement("a"),n=e;"string"==typeof e||(window.navigator&&window.navigator.msSaveOrOpenBlob&&(n=window.navigator.msSaveOrOpenBlob(e,t)),n=window.URL.createObjectURL(e)),i.href=n,i.download=t,document.body.appendChild(i),i.click(),document.body.removeChild(i),"string"!=typeof e&&window.URL.revokeObjectURL(n)},DownLoad:function(){var e=this,t=this,i=new Array;t.FileUrl.split(",").forEach(function(e){e&&i.push(e)}),0!=i.length?i.forEach(function(i){var n=i.substring(i.lastIndexOf("/")+1);i.substring(i.lastIndexOf(".")+1);e.$ajax({method:"get",url:t.SysTomcat+i,responseType:"blob"}).then(function(e){var i=e.data,a=new Blob([i]);t.downloadExportFile(a,n)})}):t.$message({type:"warning",message:"无可下载文件！",showClose:!0,customClass:"warning_class"})}}},d={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"orgsysrefer-panel"},[i("el-row",{staticStyle:{padding:"10px"},attrs:{gutter:12}},[i("el-col",{attrs:{span:9}},[i("hgpanel",{staticStyle:{width:"100%"},attrs:{title:e.$t("menu.OrgSysRefer.5nrnbpdu8h80"),styleCode:e.styleCode,icon:"#nm-icon-paper",panelHeight:e.Height-31}},[i("div",{staticClass:"panel-button-space",attrs:{slot:"tool"},slot:"tool"},[i("el-input",{staticStyle:{width:"140px"},attrs:{placeholder:e.$t("menu.OrgSysRefer.5nrnbpdv69w0"),size:"mini","suffix-icon":e.styleCode?"nm-icon-w-find":"nm-icon-lite-search"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.FilterTreeClick(t)}},model:{value:e.treeInput,callback:function(t){e.treeInput=t},expression:"treeInput"}})],1),e._v(" "),i("div",[i("el-tree",{ref:"treedata",staticStyle:{"overflow-y":"auto"},style:{height:e.Height-120+"px"},attrs:{data:e.treedata,"default-expand-all":"","node-key":"id","filter-node-method":e.filterNode,"highlight-current":"",props:e.defaultProps},on:{"node-click":e.NodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node,a=t.data;return i("span",{staticClass:"custom-tree-node"},[i("span",[e._v(e._s(n.label))]),e._v(" "),1==a.stopFlag?i("i",{staticClass:"el-icon-remove",staticStyle:{color:"#FF0000"}}):e._e()])}}])})],1)])],1),e._v(" "),i("el-col",{attrs:{span:15}},[i("hgpanel",{staticStyle:{width:"100%"},attrs:{title:e.$t("menu.OrgSysRefer.5ncy6j1fc300"),styleCode:e.styleCode,icon:"#nm-icon-paper",panelHeight:e.Height-31}},[i("div",{staticClass:"panel-button-space",attrs:{slot:"tool"},slot:"tool"},[i("hgbutton",{directives:[{name:"intervalclick",rawName:"v-intervalclick",value:{func:e.DownLoad,time:1e3},expression:"{func:DownLoad,time:1000}"}],attrs:{type:"default",styleCode:e.styleCode,icon:"nm-icon-w-download"}},[e._v(e._s(e.$t("menu.OrgSysRefer.5ncy6j1fde00")))])],1),e._v(" "),i("div",{staticClass:"tinymce-box"},[i("div",{staticClass:"tinymce-box-title"},[i("div",{staticClass:"title"},[e._v(e._s(e.selectSubNode.label))])]),e._v(" "),i("div",{staticStyle:{padding:"10px"}},[i("tinymce",{staticStyle:{width:"100%"},attrs:{toolbar:e.contextToolbar,disabled:!0,height:e.Height-174},model:{value:e.myValue,callback:function(t){e.myValue=t},expression:"myValue"}})],1)])])],1)],1)],1)},staticRenderFns:[]};var u=i("VU/8")(c,d,!1,function(e){i("EirN")},null,null);t.default=u.exports},EirN:function(e,t){},d6c6:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("5eDb"),a=i.n(n),l=i("iB2v"),o=(i("axCQ"),i("3Oml"),i("NBEC"),i("HaK5"),i("Q/P+"),i("f85y"),i("yXOt"),i("Abny"),i("S0tB"),i("njYm"),i("SlIL"),i("gBhd"),{components:{Editor:l.a},name:"tinymce",props:{value:{type:String,default:""},disabled:{type:Boolean,default:!1},plugins:{type:[String,Array],default:"lists advlist table wordcount preview print link image paste code"},toolbar:{type:[String,Array],default:"styleselect | fontselect fontsizeselect bold italic underline strikethrough superscript subscript removeformat lineheight forecolor backcolor | alignleft aligncenter alignright alignjustify | bullist numlist indent2em outdent indent | table link image media | preview print code"},height:{type:Number,default:300},wordLimit:{type:[Number,Boolean],default:!1},uploadAddress:{type:[String],default:""}},data:function(){var e=this,t="./nurmg/";return{init:{language_url:t+"static/tinymce/langs/zh_CN.js",language:"zh_CN",skin_url:t+"static/tinymce/skins/ui/oxide",content_css:t+"static/tinymce/skins/ui/oxide/content.min.css",external_plugins:{indent2em:"../tinymce/plugins/indent2em/plugin.min.js",lineheight:"../tinymce/plugins/lineheight/plugin.min.js",ax_wordlimit:"../tinymce/plugins/ax_wordlimit/plugin.min.js",media:"../tinymce/plugins/media/plugin.min.js"},height:this.height,plugins:this.plugins,toolbar:this.toolbar,branding:!1,menubar:!1,elementpath:!1,toolbar_mode:"sliding",default_link_target:"_blank",fontsize_formats:"初号=42pt 小初=36pt 一号=26pt 小一=24pt 二号=22pt 小二=18pt 三号=16pt 小三=15pt 四号=14pt 小四=12pt 五号=10.5pt 小五=9pt 六号=7.5pt 小六=6.5pt 七号=5.5pt 八号=5pt 8=8pt 10=10pt 11=11pt 20=20pt",paste_retain_style_properties:"color font-size text-indent text-align margin margin-left margin-top margin-bottom margin-right border border-style border-collapse border-top border-left border-bottom border-right mso-border-top-alt mso-border-left-alt mso-border-alt padding mso-padding-alt",paste_preprocess:function(e,t){t.content=t.content.replace(/font-family:(\S)*?;/gi,"font-family:宋体;"),t.content=t.content.replace(/text-indent: -(\S)*?pt;/gi,"").replace(/windowtext 1.0pt/gi,"1px").replace(/<table/gi,'<table cellspacing="0" cellpadding="0"')},file_picker_callback:function(t,i,n){var a=".jpg, .jpeg, .png, .gif, .pdf, .txt, .zip, .rar, .7z, .doc, .docx, .xls, .xlsx, .ppt, .pptx, .mp3, .mp4";switch(n.filetype){case"image":a=".png, .jpg, .jpeg, .gif";break;case"media":a=".mp3, .mp4";break;case"file":a=".pdf, .txt, .zip, .rar, .7z, .doc, .docx, .xls, .xlsx, .ppt, .pptx"}var l=e.uploadAddress,o=document.createElement("input");o.setAttribute("type","file"),o.setAttribute("accept",a),o.onchange=function(){var e=this.files[0],i=void 0,a=void 0;(i=new XMLHttpRequest).withCredentials=!1,i.open("POST",l),i.onload=function(){if(200==i.status){var a=i.responseText.split(":")[0],o=i.responseText.split(":")[1];if("success"==a)switch(n.filetype){case"image":t(l.split("Fileupdate")[0]+o,{title:e.name,alt:e.name});break;case"media":var r=URL.createObjectURL(e),s=document.createElement("video");s.onloadedmetadata=function(e){URL.revokeObjectURL(r),t(l.split("Fileupdate")[0]+o,{width:s.videoWidth,height:s.videoHeight})},s.src=r,s.load();break;case"file":t(l.split("Fileupdate")[0]+o,{title:e.name,text:e.name})}}},(a=new FormData).append("file",e,e.name),i.send(a)},o.click()},contextmenu:"link linkchecker image imagetools table spellchecker configurepermanentpen media cut copy paste",font_formats:"黑体=黑体;宋体=宋体;新宋体=新宋体;仿宋=仿宋;楷体=楷体;隶书=隶书;微软雅黑=微软雅黑,Microsoft YaHei;等线=等线;方正姚体=方正姚体;方正舒体=方正舒体;华文中宋=华文中宋;华文仿宋=华文仿宋;华文宋体=华文宋体;华文彩云=华文彩云;华文新魏=华文新魏;华文楷体=华文楷体;华文琥珀=华文琥珀;华文细黑=华文细黑;华文行楷=华文行楷;华文隶书=华文隶书;幼圆=幼圆; Andale Mono=andale mono,times; Arial=arial,helvetica,sans-serif; Arial Black=arial black,avant garde; Book Antiqua=book antiqua,palatino; Comic Sans MS=comic sans ms,sans-serif; Courier New=courier new,courier; Georgia=georgia,palatino; Helvetica=helvetica; Impact=impact,chicago; Symbol=symbol; Tahoma=tahoma,arial,helvetica,sans-serif;Times New Roman=times new roman,times; Trebuchet MS=trebuchet ms,geneva;",content_style:"body { font-family:宋体;}",ax_wordlimit_num:this.wordLimit,ax_wordlimit_callback:function(e,t,i){e.notificationManager.open({type:"warning ",text:"当前字数："+t.length+"，限制字数："+i,timeout:2e3,closeButton:!0,icon:"warning"})}},myValue:this.value}},mounted:function(){a.a.init({})},methods:{onClick:function(e){this.$emit("onClick",e,a.a)},clear:function(){this.myValue=""},onBlur:function(e){this.$emit("onBlur",e,a.a)}},watch:{value:function(e){this.myValue=e},myValue:function(e){this.$emit("input",e)}}}),r={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tinymce-box"},[i("Editor",{attrs:{init:e.init,disabled:e.disabled},on:{onBlur:e.onBlur,onClick:e.onClick},model:{value:e.myValue,callback:function(t){e.myValue=t},expression:"myValue"}})],1)},staticRenderFns:[]};var s=i("VU/8")(o,r,!1,function(e){i("jeM7")},null,null);t.default=s.exports},jeM7:function(e,t){}});