webpackJsonp([272],{Fj6q:function(e,t){},gLeI:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("Dd8w"),n=a.n(s),o=a("zL8q"),r=a("NYxO"),i=a("XlQt"),l=a("W5Fe"),c=a("qfDe").create_excel,p={components:{hgbutton:i.default,hgpagination:l.default},computed:n()({},Object(r.b)(["Height","SysTomcat","LoginId","DateFormat","styleCode"])),name:"PersonTransByPlan",data:function(){return{elementlist:[],disabled:!1,id:"",index:"",searchform:{StDate:"",EndDate:"",Person:"",Ward:"",Status:"Y"},CheckForm:{CheckStatus:"",CheckSuggestion:""},AppEditForm:{AppWard:sessionStorage.loginWardDesc,AppNur:sessionStorage.loginName,AppDate:new Date,AppStatus:"",AppNurCount:"",PlanStDate:"",PlanEndDate:"",PlanDays:"",AppReason:"",AppNurCondition:"",AppSalary:"",AppRemark:"",NoCheck:"",NoCheckReason:"",RowID:""},endform:{EndReason:""},backform:{date:""},pickeroptions:{disabledDate:function(e){return e.getTime()<Date.parse(new Date)-864e5}},backrule:{date:[{required:!0,type:"date",message:"返科日期不能为空",trigger:"change"}]},AppEditRules:{AppWard:[{required:!0,message:"申请科室不能为空",trigger:"change"}],AppNurCount:[{required:!0,message:"申请人数不能为空",trigger:"change"}],PlanStDate:[{required:!0,message:"计划开始日期不能为空",trigger:"change",type:"date"}],PlanEndDate:[{required:!0,message:"计划结束日期不能为空",trigger:"change",type:"date"}],AppReason:[{required:!0,message:"申请原因不能为空",trigger:"change"}]},AppData:[],HisData:[],wardstore:[],selection:[],selectrow:"",checkrow:"",CheckData:[],levelstore:[],personlist:[],statusstore:[{code:"N",desc:"未提交"},{code:"Y",desc:"待审核"},{code:"A",desc:"已审核"},{code:"HA",desc:"提请护理部审核"},{code:"B",desc:"驳回"}],CheckStatus:[{code:"A",desc:"审核通过"},{code:"HA",desc:"提请护理部审核"}],holder:"请输入关键字",toprole:"",currentPage:1,currentPageSize:20,totalCount:0,currentPage1:1,currentPageSize1:20,totalCount1:0,dialogAppVisible:!1,dialogCheckVisible:!1,drawer:!1,dialogEndVisible:!1,dialogHisVisible:!1,dialogBackVisible:!1,WardNurData:[],winFlag:0}},created:function(){this.LoadAppData(),this.LoadWardData(),this.GetTopRole(),this.LoadWardNurData(),this.loadTypeComm("levelstore","护士层级");var e=this.$router.currentRoute.path.slice(1,this.$router.currentRoute.path.length);this.loadElementsForRouter("elementlist",e)},methods:{loadTypeComm:function(e,t){var a=this;a.$ajax.request(a.axiosConfig("web.INMPersonCountComm","FindPubCode","Query","type$"+t)).then(function(t){a[e]=t.data.rows})},LoadWardNurData:function(){var e=this;e.$ajax.request(e.axiosConfig("web.INMPersonComm","FindWardNurData","RecQuery","ward$","nurseid$"+sessionStorage.loginID)).then(function(t){e.WardNurData=t.data.rows})},GetTopRole:function(){for(var e=sessionStorage.loginRoleCodes,t=100,a=0;a<e.split("^").length;a++)a<=t&&(t=a);this.toprole=t},numberinput:function(e){/^[0-9]+([.]{1}[0-9]+){0,1}$/.test(e)||(this.AppEditForm.AppNurCount="")},LoadWardData:function(){var e=this;e.$ajax.request(e.axiosConfig("web.INMDBComm","FindInuseWardList","RecQuery","parr$","input$")).then(function(t){e.wardstore=t.data.rows})},LoadAppData:function(){var e=this,t="";for(var a in e.searchform)t=-1!=a.indexOf("Date")?e.searchform[a]instanceof Date?t?t+"^"+a+"|"+e.searchform[a].Format("YYYY-MM-dd"):a+"|"+e.searchform[a].Format("YYYY-MM-dd"):t?t+"^"+a+"|":a+"|":void 0==e.searchform[a]?t?t+"^"+a+"|":a+"|":t?t+"^"+a+"|"+e.searchform[a]:a+"|"+e.searchform[a];e.$ajax.request(e.axiosConfig("web.INMPersonComm","FindTransApp","RecQuery","start$"+(e.currentPage-1)*e.currentPageSize,"limit$"+e.currentPageSize,"parr$"+t,"id$"+sessionStorage.loginID,"roles$"+sessionStorage.loginRoleCodes)).then(function(t){e.AppData=t.data.rows,e.totalCount=parseInt(t.data.results),e.selection=new Array,e.selectrow=""})},querySearch:function(e,t){var a=this.personlist;t(e?a.filter(this.createFilter(e)):a)},createFilter:function(e){return function(t){return t.PerName.toLowerCase().indexOf(e.toLowerCase())>-1||t.PerID.toLowerCase().indexOf(e.toLowerCase())>-1}},LoadAllNur:function(){var e=this,t=sessionStorage.getItem("loginID");e.$ajax.request(e.axiosConfig("web.INMHRComm","FindPersonList","RecQuery","parr$","input$","loginID$"+t,"qward$"+e.AppEditForm.AppWard)).then(function(t){e.personlist=t.data.rows})},GetIndex:function(e){this.index=e},handleSelect:function(e){this.CheckData[this.index].NurLevel=e.Level,this.CheckData[this.index].NurType=e.NurType,this.CheckData[this.index].NurWard=e.WardDesc,this.CheckData[this.index].TransNurId=e.perdr,this.CheckData[this.index].WardId=e.perward},AddApp:function(){var e=this;e.winFlag=0,e.dialogAppVisible=!0,e.$nextTick(function(){e.$refs.AppEditForm.resetFields()}),e.AppEditForm.RowID=""},DeleteApp:function(){var e=this,t=e.selection,a="";void 0==t||t.length<1?e.$message({type:"warning",message:"请选择要删除的记录",showClose:!0,customClass:"warning_class"}):e.$confirm("此操作将删除"+t.length+"条记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){for(var s=0;s<t.length;s++){var n=t[s];if(n){if("未提交"!=n.TransStatus&&"驳回"!=n.TransStatus)return void e.$message({type:"warning",message:"已提交记录不可删除",showClose:!0,customClass:"warning_class"});if(n.CreateUserPr!=sessionStorage.getItem("loginID"))return void e.$message({type:"warning",message:"非本人创建不可删除",showClose:!0,customClass:"warning_class"});n.RowID&&(a=""==a?n.RowID:a+"^"+n.RowID)}}var o=e.axiosConfig("web.INMPersonComm","DeletePerTran","Method","parr$"+a);e.$ajax.request(o).then(function(t){e.LoadAppData()})}).catch(function(){e.$message({type:"info",message:"已取消删除",showClose:!0,customClass:"info_class"})})},CheckApp:function(){var e=this;if(e.selectrow){if("未提交"==e.selectrow.TransStatus||"驳回"==e.selectrow.TransStatus)return void e.$message({type:"warning",message:"未提交不能审核",showClose:!0,customClass:"warning_class"});if("审核通过"==e.selectrow.TransStatus)return void e.$message({type:"warning",message:"不能重复审核",showClose:!0,customClass:"warning_class"});e.id=e.selectrow.RowID}else{if(0==e.selection.length)return void e.$message({type:"warning",message:"请选择要审核的记录",showClose:!0,customClass:"warning_class"});if(e.selection.length>1)return void e.$message({type:"warning",message:"请选择单条记录",showClose:!0,customClass:"warning_class"});if("未提交"==e.selection[0].TransStatus||"驳回"==e.selection[0].TransStatus)return void e.$message({type:"warning",message:"未提交不能审核",showClose:!0,customClass:"warning_class"});if("审核通过"==e.selection[0].TransStatus)return void e.$message({type:"warning",message:"不能重复审核",showClose:!0,customClass:"warning_class"});e.id=e.selection[0].RowID,e.AppEditForm.AppStatus=e.selection[0].TransStatus}e.CheckData=new Array,e.dialogCheckVisible=!0,e.LoadAllNur(),e.CheckForm.CheckStatus=e.AppEditForm.NoCheck,e.CheckForm.CheckSuggestion=e.AppEditForm.NoCheckReason,e.$ajax.request(e.axiosConfig("web.INMPersonComm","FindTransNurseList","RecQuery","parr$","type$plan","app$"+e.id)).then(function(t){e.CheckData=t.data.rows;for(var a=0;a<e.CheckData.length;a++)e.CheckData[a].TransStDate=new Date(Date.parse(e.CheckData[a].TransStDate.toString().replace(/-/g,"/"))),e.CheckData[a].TransEndDate&&(e.CheckData[a].TransEndDate=new Date(Date.parse(e.CheckData[a].TransEndDate.toString().replace(/-/g,"/"))))})},CheckDetail:function(){var e=this;e.CheckData=new Array,e.id=e.selectrow.RowID,e.dialogCheckVisible=!0,e.CheckForm.CheckStatus=e.AppEditForm.NoCheck,e.CheckForm.CheckSuggestion=e.AppEditForm.NoCheckReason,e.$ajax.request(e.axiosConfig("web.INMPersonComm","FindTransNurseList","RecQuery","parr$","type$plan","app$"+e.id)).then(function(t){e.CheckData=t.data.rows})},RejectApp:function(){var e=this;if(e.selectrow){if("未提交"==e.selectrow.TransStatus)return void e.$message({type:"warning",message:"未提交不能驳回",showClose:!0,customClass:"warning_class"});if("驳回"==e.selectrow.TransStatus)return void e.$message({type:"warning",message:"不能重复驳回",showClose:!0,customClass:"warning_class"});if("审核通过"==e.selectrow.TransStatus)return void e.$message({type:"warning",message:"已审核不能驳回",showClose:!0,customClass:"warning_class"});e.id=e.selectrow.RowID}else{if(0==e.selection.length)return void e.$message({type:"warning",message:"请选择要驳回的记录",showClose:!0,customClass:"warning_class"});if(e.selection.length>1)return void e.$message({type:"warning",message:"请选择单条记录",showClose:!0,customClass:"warning_class"});if("未提交"==e.selection[0].TransStatus)return void e.$message({type:"warning",message:"未提交不能驳回",showClose:!0,customClass:"warning_class"});if("驳回"==e.selection[0].TransStatus)return void e.$message({type:"warning",message:"不能重复驳回",showClose:!0,customClass:"warning_class"});if("审核通过"==e.selection[0].TransStatus)return void e.$message({type:"warning",message:"已审核不能驳回",showClose:!0,customClass:"warning_class"});e.id=e.selection[0].RowID}e.dialogEndVisible=!0,e.$nextTick(function(){e.$refs.endform.resetFields()})},SaveEndForm:function(){var e=this,t="";""!=e.endform.EndReason&&void 0!=e.endform.EndReason&&(t=e.endform.EndReason),e.$ajax.request(e.axiosConfig("web.INMPersonComm","RejectApp","Method","app$"+e.id,"id$"+sessionStorage.loginID,"reason$"+t)).then(function(t){return"1"==t.data?(e.LoadAppData(),e.dialogEndVisible=!1,e.dialogAppVisible=!1,void e.$message({type:"success",message:"操作成功",showClost:!0,customClass:"success_class"})):void e.$message({type:"error",message:"操作失败",showClost:!0,customClass:"error_class"})})},Export:function(){if(0!=this.AppData.length){var e=o.Loading.service({fullscreen:!0,text:"拼命加载中..."}),t=new Array,a=new Array;c([{label:"申请人",prop:"AppNur",width:50},{label:"申请人数",prop:"AppCount",width:50},{label:"预计天数",prop:"AppDays",width:130},{label:"申请科室",prop:"AppWard",width:130},{label:"申请日期",prop:"AppDate",width:130}],this.AppData,t,"","export","调岗审批","调岗审批",a,e),e.close()}else this.$message({type:"warning",message:"无数据导出",showClose:!0,customClass:"warning_class"})},PersonDistribute:function(){this.drawer=!0},RowSelect:function(e){this.selection=e},RowDbClick:function(e){this.selectrow=e,this.winFlag=1,this.OperateApp(e.RowID)},LookApp:function(e){this.selectrow=e,this.OperateApp(e.RowID)},OperateApp:function(e){var t=this;t.$ajax.request(t.axiosConfig("web.INMPersonComm","GetTransRec","RecMethod","id$"+e)).then(function(e){t.dialogAppVisible=!0,t.$nextTick(function(){t.$refs.AppEditForm.resetFields(),t.setCodeFormVal(t.AppEditForm,e.data,"AppEditForm")}),"审核通过"==e.data.AppStatus?t.disabled=!0:t.disabled=!1})},SaveAPP:function(e){var t=this,a="";t.$refs.AppEditForm.validate(function(s){if(s){for(var n in t.AppEditForm)a=-1!=n.indexOf("Date")?t.AppEditForm[n]instanceof Date?a?a+"^"+n+"|"+t.AppEditForm[n].Format("YYYY-MM-dd"):n+"|"+t.AppEditForm[n].Format("YYYY-MM-dd"):a?a+"^"+n+"|":n+"|":void 0==t.AppEditForm[n]?a?a+"^"+n+"|":n+"|":a?a+"^"+n+"|"+t.AppEditForm[n]:n+"|"+t.AppEditForm[n];t.$ajax.request(t.axiosConfig("web.INMPersonComm","SaveTransApp","Method","parr$"+a,"flag$"+e,"id$"+sessionStorage.loginID)).then(function(e){1==e.data?(t.$message({type:"success",message:"更新成功！",showClose:!0,customClass:"success_class"}),t.dialogAppVisible=!1,t.LoadAppData()):t.$message({type:"warning",message:"保存失败",showClose:!0,customClass:"warning_class"})})}})},SaveCheck:function(e){var t=this,a="";if("Y"==e){if(""==t.CheckForm.CheckStatus||void 0==t.CheckForm.CheckStatus)return void t.$message({type:"warning",message:"请置审核结果",showClose:!0,customClass:"warning_class"});if(t.CheckForm.CheckStatus==t.AppEditForm.NoCheck)return void t.$message({type:"warning",message:"不能重复提交",showClose:!0,customClass:"warning_class"})}var s="";if(""!=t.CheckForm.CheckSuggestion&&void 0!=t.CheckForm.CheckSuggestion&&(s=t.CheckForm.CheckSuggestion),a="Status|"+t.CheckForm.CheckStatus+"^CheckSuggestion|"+s,0!=t.CheckData.length){for(var n=0;n<t.CheckData.length;n++){var o="",r="";if(!t.CheckData[n].TransNurName||!t.CheckData[n].NurWard)return void t.$message({type:"warning",message:"护士信息不能为空",showClose:!0,customClass:"warning_class"});if(!t.CheckData[n].TransStDate)return void t.$message({type:"warning",message:"调配开始日期不能为空",showClose:!0,customClass:"warning_class"});if("轮转"==t.CheckData[n].NurType&&!t.CheckData[n].TransEndDate)return void t.$message({type:"warning",message:"轮转护士的调配结束日期不能为空",showClose:!0,customClass:"warning_class"});if(t.CheckData[n].TransStDate instanceof Date&&(o=t.CheckData[n].TransStDate.Format("YYYY-MM-dd")),"string"==typeof t.CheckData[n].TransStDate&&(o=t.CheckData[n].TransStDate),t.CheckData[n].TransEndDate instanceof Date&&(r=t.CheckData[n].TransEndDate.Format("YYYY-MM-dd")),"string"==typeof t.CheckData[n].TransEndDate&&(r=t.CheckData[n].TransEndDate),t.CheckData[n].InWard==t.CheckData[n].NurWard)return void t.$message({type:"warning",message:"存在人员转入转出科室一样",showClose:!0,customClass:"warning_class"});a=(a=a+"「^NurseId|"+t.CheckData[n].TransNurId+"^WardId|"+t.CheckData[n].WardId+"^TransStDate|"+o+"^TransEndDate|"+r)+"^TransDays|"+t.CheckData[n].TransDays+"^TransType|Plan^TransNur|"+t.CheckData[n].TransNur+"^TransReason|"+t.CheckData[n].TransReason}"N"==e?t.$ajax.request(t.axiosConfig("web.INMPersonComm","SaveTransNurse","Method","parr$"+a,"flag$"+e,"app$"+t.id,"nurseid$"+sessionStorage.loginID)).then(function(a){if(1!=a.data)return"0"==a.data?void("N"==e?t.$message({type:"warning",message:"保存失败",showClose:!0,customClass:"warning_class"}):t.$message({type:"warning",message:"审核失败",showClose:!0,customClass:"warning_class"})):void t.$message({type:"warning",message:a.data,showClose:!0,customClass:"warning_class"});"N"==e?t.$message({type:"success",message:"保存成功！",showClose:!0,customClass:"success_class"}):t.$message({type:"success",message:"审核成功！",showClose:!0,customClass:"success_class"}),t.dialogCheckVisible=!1,t.dialogAppVisible=!1,t.LoadAppData()}):t.$confirm("此操作会将下列护士调配至其他科室, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$ajax.request(t.axiosConfig("web.INMPersonComm","SaveTransNurse","Method","parr$"+a,"flag$"+e,"app$"+t.id,"nurseid$"+sessionStorage.loginID)).then(function(a){if(1!=a.data)return"0"==a.data?void("N"==e?t.$message({type:"warning",message:"保存失败",showClose:!0,customClass:"warning_class"}):t.$message({type:"warning",message:"审核失败",showClose:!0,customClass:"warning_class"})):void t.$message({type:"warning",message:a.data,showClose:!0,customClass:"warning_class"});"N"==e?t.$message({type:"success",message:"保存成功！",showClose:!0,customClass:"success_class"}):t.$message({type:"success",message:"审核成功！",showClose:!0,customClass:"success_class"}),t.dialogCheckVisible=!1,t.dialogAppVisible=!1,t.LoadAppData()})})}else t.$message({type:"warning",message:"无数据保存",showClose:!0,customClass:"warning_class"})},CheckHistory:function(e){var t=this;t.$ajax.request(t.axiosConfig("web.INMPersonComm","FindCheckHistory","RecQuery","id$"+e)).then(function(e){t.HisData=e.data.rows,e.data.rows.length>0?t.dialogHisVisible=!0:t.$message({type:"warning",message:"无审批明细",showClose:!0,customClass:"warning_class"})})},RowClick:function(e){this.checkrow=e},setCodeFormVal:function(e,t,a){for(var s in e){for(var n=this.$refs[a].$children,o=n.length,r=0;r<o;r++)n[r].$options.propsData.prop==s&&("el-date-picker"==n[r].$children[1].$options._componentTag?t[s]?this[a][s]=new Date(Date.parse(t[s].replace(/-/g,"/"))):this[a][s]="":this[a][s]=t[s]);"RowID"==s&&(this.AppEditForm[s]=t[s])}},GetDays:function(){var e="",t="";if(""!=this.AppEditForm.PlanStDate&&void 0!=this.AppEditForm.PlanStDate&&""!=this.AppEditForm.PlanEndDate&&void 0!=this.AppEditForm.PlanEndDate){this.AppEditForm.PlanStDate instanceof Date&&(e=this.AppEditForm.PlanStDate.Format("YYYY-MM-dd")),this.AppEditForm.PlanEndDate instanceof Date&&(t=this.AppEditForm.PlanEndDate.Format("YYYY-MM-dd"));var a=this.DateDifference(e,t);if("-1"==a)return this.$message({type:"warning",message:"结束日期必须大于开始日期",showClose:!0,customClass:"warning_class"}),this.AppEditForm.PlanStDate="",void(this.AppEditForm.PlanEndDate="");this.AppEditForm.PlanDays=a}},GetTransDays:function(e,t){var a=this,s="",n="";if(!a.CheckData[e].TransNurName)return a.$message({type:"warning",message:"请先选择调配人员",showClose:!0,customClass:"warning_class"}),a.CheckData[e].TransStDate="",void(a.CheckData[e].TransEndDate="");if(a.CheckData[e].TransStDate&&a.CheckData[e].TransEndDate){a.CheckData[e].TransStDate instanceof Date&&(s=a.CheckData[e].TransStDate.Format("YYYY-MM-dd")),a.CheckData[e].TransEndDate instanceof Date&&(n=a.CheckData[e].TransEndDate.Format("YYYY-MM-dd"));var o=a.DateDifference(s,n);if("-1"==o)return a.$message({type:"warning",message:"开始日期必须小于结束日期",showClose:!0,customClass:"warning_class"}),a.CheckData[e].TransStDate="",void(a.CheckData[e].TransEndDate="");a.CheckData[e].TransDays=o}else a.CheckData[e].TransDays="";"st"==t&&a.CheckData[e].TransStDate&&a.CheckData[e].TransNurId&&(s=a.CheckData[e].TransStDate.Format("YYYY-MM-dd"),a.$ajax.request(a.axiosConfig("web.INMHRComm","GetCurrentWard","Method","perdr$"+a.CheckData[e].TransNurId,"date$"+s)).then(function(t){""!=t.data?(a.CheckData[e].WardId=t.data,a.$ajax.request(a.axiosConfig("web.INMDBComm","GetWard","RecMethod","id$"+t.data)).then(function(t){a.CheckData[e].NurWard=t.data.WardDesc})):a.$message({type:"warning",message:t.data,showClose:!0,customClass:"warning_class"})}))},AddTransNur:function(){this.CheckData.push({TransNurName:"",NurType:"",NurLevel:"",NurWard:"",WardId:"",TransStDate:new Date(Date.parse(this.selection[0].PlanStDate.toString().replace(/-/g,"/"))),TransEndDate:new Date(Date.parse(this.selection[0].PlanEndDate.toString().replace(/-/g,"/"))),TransDays:this.selection[0].PlanDays,TransNurId:"",TransNur:"",InWard:0==this.selection.length?this.selectrow.AppWard:this.selection[0].AppWard,InWardid:0==this.selection.length?this.selectrow.AppWardId:this.selection[0].AppWardId,TransReason:"",CreateUser:"",CreateDate:"",CreateUserId:""})},DeleteTransNur:function(e){var t=this;t.$confirm("此操作将删除第"+(e+1)+"条记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.CheckData.splice(e,1)})},BackDep:function(){var e=this;""!=e.checkrow?"审核通过"==e.AppEditForm.AppStatus?""!=e.checkrow.TransEndDate?"定科"==e.checkrow.NurType?e.$ajax.request(e.axiosConfig("web.INMPersonComm","IsBack","Method","id$"+e.checkrow.TransNur)).then(function(t){1==t.data?e.dialogBackVisible=!0:e.$message({type:"warning",message:t.data,showClose:!0,customClass:"warning_class"})}):e.$message({type:"warning",message:"非定科护士无法提前返科",showClose:!0,customClass:"warning_class"}):e.$message({type:"warning",message:"非用人申请记录无法提前返科",showClose:!0,customClass:"warning_class"}):e.$message({type:"warning",message:"仅对审核通过的记录有效",showClose:!0,customClass:"warning_class"}):e.$message({type:"warning",message:"请选择要提前返科的记录",showClose:!0,customClass:"warning_class"})},SaveBackDep:function(){var e=this;e.$refs.backform.validate(function(t){if(t){var a="";if(e.backform.date instanceof Date&&(a=e.backform.date.Format("YYYY-MM-dd")),"-1"==e.DateDifference(e.checkrow.TransStDate,a))return void e.$message({type:"warning",message:"返科日期不能早于调配开始日期",showClose:!0,customClass:"warning_class"});var s="「^NurseId|"+e.checkrow.TransNurId+"^TransStDate|"+a;e.$ajax.request(e.axiosConfig("web.INMPersonComm","IsHasArg","Method","parr$"+s)).then(function(t){"0"==t.data?e.$ajax.request(e.axiosConfig("web.INMPersonComm","BackDep","Method","id$"+e.checkrow.TransNur,"date$"+a)).then(function(t){if(1==t.data)return e.dialogBackVisible=!1,e.CheckDetail(),void e.$message({type:"success",message:"返科成功",showClose:!0,customClass:"success_class"});t.data.length<100?e.$message({type:"warning",message:t.data,showClose:!0,customClass:"warning_class"}):e.$message({type:"warning",message:"返科失败",showClose:!0,customClass:"warning_class"})}):e.$message({type:"warning",message:t.data+"存在"+a+"之后的排班",showClose:!0,customClass:"warning_class"})})}})},DateDifference:function(e,t){var a,s;return(a=new Date(t))-(s=new Date(e))<=0?"-1":parseInt(Math.abs(a-s)/1e3/60/60/24)},handleCurrentChange:function(e){this.currentPage=e.currentPage,this.LoadAppData()},handleSizeChange:function(e){this.currentPageSize=e,this.LoadAppData()},handleclose:function(){this.dialogAppVisible=!1,this.selectrow="",this.$refs.AppData.clearSelection()},stopSrcoll:function(){document.body.style.overflow="hidden",document.addEventListener("touchmove",function(e){e.preventDefault()},!1)},Back:function(){}}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"per-trans-plan-panel"},[a("div",{staticStyle:{height:"auto",width:"1000px",margin:"auto"}},[a("el-steps",{staticStyle:{"margin-top":"20px","margin-bottom":"4px"},attrs:{space:400,"align-center":"",active:2,"finish-status":"success"}},[a("el-step",{attrs:{title:e.$t("menu.PersonTransByPlan.5ncy65zo5z40")}}),e._v(" "),a("el-step",{attrs:{title:e.$t("menu.PersonTransByPlan.5ncy65zo6es0")}}),e._v(" "),a("el-step",{attrs:{title:e.$t("menu.PersonTransByPlan.5nrnb16tp3k0")}})],1)],1),e._v(" "),a("div",[a("el-row",{staticStyle:{padding:"10px"}},[a("el-col",[a("div",{staticClass:"top-tool-button-dialog-toph dialog-div-top-radius"},[a("el-form",{attrs:{model:e.searchform,inline:!0}},[a("el-form-item",{attrs:{label:e.$t("menu.PersonTransByPlan.5nrnb16uu1s0")}},[a("el-date-picker",{staticStyle:{width:"120px"},attrs:{type:"date",format:e.DateFormat,size:"mini"},model:{value:e.searchform.StDate,callback:function(t){e.$set(e.searchform,"StDate",t)},expression:"searchform.StDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("menu.PersonTransByPlan.5nrnb16wfug0")}},[a("el-date-picker",{staticStyle:{width:"120px"},attrs:{type:"date",format:e.DateFormat,size:"mini"},model:{value:e.searchform.EndDate,callback:function(t){e.$set(e.searchform,"EndDate",t)},expression:"searchform.EndDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("menu.PersonTransByPlan.5ncy65zo8hc0")}},[a("el-select",{staticStyle:{width:"140px"},attrs:{"default-first-option":"",filterable:"",clearable:"",placeholder:e.$t("menu.PersonTransByPlan.5nrnb16y9f00"),size:"mini"},model:{value:e.searchform.Ward,callback:function(t){e.$set(e.searchform,"Ward",t)},expression:"searchform.Ward"}},e._l(e.wardstore,function(e){return a("el-option",{key:e.rw,attrs:{label:e.WardDesc,value:e.rw}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("menu.PersonTransByPlan.5nrnb170i0k0")}},[a("el-input",{staticStyle:{width:"110px"},attrs:{filterable:"",clearable:"",placeholder:e.$t("menu.PersonTransByPlan.5nrnb172ajo0"),size:"mini"},model:{value:e.searchform.Person,callback:function(t){e.$set(e.searchform,"Person",t)},expression:"searchform.Person"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("menu.PersonTransByPlan.5nrnb173f3w0")}},[a("el-select",{staticStyle:{width:"100px"},attrs:{"default-first-option":"",filterable:"",clearable:"",placeholder:e.$t("menu.PersonTransByPlan.5nrnb16y9f00"),size:"mini"},model:{value:e.searchform.Status,callback:function(t){e.$set(e.searchform,"Status",t)},expression:"searchform.Status"}},e._l(e.statusstore,function(e){return a("el-option",{key:e.code,attrs:{label:e.desc,value:e.code}})}),1)],1),e._v(" "),a("el-form-item",[a("hgbutton",{attrs:{type:"default",styleCode:e.styleCode,icon:"nm-icon-w-find"},on:{click:e.LoadAppData}},[e._v(e._s(e.$t("menu.PersonTransByPlan.5nrnb174mg80")))])],1)],1)],1),e._v(" "),a("div",{staticClass:"top-tool-buttonDiv"},[this.elementlist.AddApp||0==e.LoginId?a("hgbutton",{ref:"AddApp",attrs:{type:"text",issvg:e.styleCode,icon:e.styleCode?"#nm-icon-add":"nm-icon-lite-add"},on:{click:e.AddApp}},[e._v(e._s(e.$t("menu.PersonTransByPlan.5nrnb174obk0")))]):e._e(),e._v(" "),this.elementlist.DeleteApp||0==e.LoginId?a("hgbutton",{ref:"DeleteApp",attrs:{type:"text",issvg:e.styleCode,icon:e.styleCode?"#nm-icon-cancel":"nm-icon-lite-cancel"},on:{click:e.DeleteApp}},[e._v(e._s(e.$t("menu.PersonTransByPlan.5nrnb174pdc0")))]):e._e(),e._v(" "),this.elementlist.CheckApp||0==e.LoginId?a("hgbutton",{ref:"CheckApp",attrs:{type:"text",issvg:e.styleCode,icon:e.styleCode?"#nm-icon-stamp":"nm-icon-lite-stamp"},on:{click:e.CheckApp}},[e._v(e._s(e.$t("menu.PersonTransByPlan.5nrnb174q540")))]):e._e(),e._v(" "),this.elementlist.RejectApp||0==e.LoginId?a("hgbutton",{ref:"RejectApp",attrs:{type:"text",issvg:e.styleCode,icon:e.styleCode?"#nm-icon-back":"nm-icon-lite-back"},on:{click:e.RejectApp}},[e._v(e._s(e.$t("menu.PersonTransByPlan.5nrnb174qvw0")))]):e._e(),e._v(" "),this.elementlist.Export||0==e.LoginId?a("hgbutton",{ref:"Export",attrs:{type:"text",issvg:e.styleCode,icon:e.styleCode?"#nm-icon-export":"nm-icon-lite-export"},on:{click:e.Export}},[e._v(e._s(e.$t("menu.PersonTransByPlan.5nrnb174rgg0")))]):e._e(),e._v(" "),this.elementlist.PersonDistribute||0==e.LoginId?a("hgbutton",{ref:"PersonDistribute",attrs:{type:"text",issvg:e.styleCode,icon:e.styleCode?"#nm-icon-specialty":"nm-icon-lite-caseload"},on:{click:e.PersonDistribute}},[e._v(e._s(e.$t("menu.PersonTransByPlan.5nrnb174sow0")))]):e._e()],1),e._v(" "),a("div",{staticClass:"top-tool-dialog-table dialog-table-bottom-radius"},[a("el-table",{ref:"AppData",attrs:{data:e.AppData,height:e.styleCode?e.Height-234:e.Height-228,"header-cell-style":e.headerCellFontWeight,border:e.styleCode,"highlight-current-row":""},on:{"selection-change":e.RowSelect,"row-dblclick":e.RowDbClick}},[a("el-table-column",{attrs:{type:"selection",width:"50",align:"center"}}),e._v(" "),e._e(),e._v(" "),a("el-table-column",{attrs:{width:"100",label:e.$t("menu.PersonTransByPlan.5nrnb178cu00")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("hgbutton",{attrs:{type:"text",issvg:e.styleCode,icon:e.styleCode?"#nm-icon-ok":"nm-icon-lite-ok"},on:{click:function(a){return e.CheckHistory(t.row.RowID)}}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"TransStatus",width:"110",label:e.$t("menu.PersonTransByPlan.5nrnb173f3w0")}}),e._v(" "),a("el-table-column",{attrs:{prop:"AppCount",width:"100",label:e.$t("menu.PersonTransByPlan.5ncy65zohsg0")}}),e._v(" "),a("el-table-column",{attrs:{prop:"AppDays",width:"100",label:e.$t("menu.PersonTransByPlan.5ncy65zohzs0")}}),e._v(" "),a("el-table-column",{attrs:{prop:"AppWard",width:"150",label:e.$t("menu.PersonTransByPlan.5ncy65zo8hc0")}}),e._v(" "),a("el-table-column",{attrs:{prop:"AppNur",width:"120",label:e.$t("menu.PersonTransByPlan.5nrnb170i0k0")}}),e._v(" "),a("el-table-column",{attrs:{prop:"AppDate",label:e.$t("menu.PersonTransByPlan.5nrnb17c4mw0")}}),e._v(" "),e._e(),e._v(" "),e._e()],1),e._v(" "),a("hgpagination",{attrs:{styleCode:e.styleCode,sizes:[20,40,50,100],totalCount:e.totalCount,pageNumber:e.currentPage,pageSize:e.currentPageSize},on:{changePage:e.handleCurrentChange,getPageSize:e.handleSizeChange}})],1)])],1)],1),e._v(" "),a("div",[a("el-dialog",{attrs:{title:e.$t("menu.PersonTransByPlan.5nrnb17dksk0"),visible:e.drawer,width:"60%"},on:{"update:visible":function(t){e.drawer=t}}},[a("div",{staticClass:"dialog-header-title",attrs:{slot:"title"},slot:"title"},[e.styleCode?a("i",{staticClass:"nm-icon-w-paper"}):e._e(),e._v(" "),a("span",[e._v(e._s(e.$t("menu.PersonTransByPlan.5nrnb17dksk0")))])]),e._v(" "),a("div",{staticClass:"top-tool-dialog-table dialog-table-bottom-radius dialog-div-top-radius"},[a("el-table",{staticClass:"dialog-table-bottom-radius dialog-div-top-radius",staticStyle:{"border-bottom":"0"},attrs:{title:e.$t("menu.PersonTransByPlan.5nrnb17dksk0"),data:e.WardNurData,height:e.Height-128,"header-cell-style":e.headerCellFontWeight,border:e.styleCode,"highlight-current-row":""}},[a("el-table-column",{attrs:{label:e.$t("menu.PersonTransByPlan.5nrnb17fxbo0"),prop:"Ward","show-overflow-tooltip":"",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("menu.PersonTransByPlan.5nrnb17i2g40"),prop:"PatCount","show-overflow-tooltip":"",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("menu.PersonTransByPlan.5nrnb17j3ns0"),prop:"NurCount","show-overflow-tooltip":"",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("menu.PersonTransByPlan.5nrnb17k3s40"),prop:"NurPat","show-overflow-tooltip":"",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("menu.PersonTransByPlan.5nrnb17mdvg0"),"show-overflow-tooltip":"",width:"50",prop:"Dange"}}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("menu.PersonTransByPlan.5nrnb17ocg00"),prop:"Emerge","show-overflow-tooltip":"",width:"50"}}),e._v(" "),e._l(e.levelstore,function(e){return a("el-table-column",{key:e.SubValue,attrs:{width:"100",label:e.SubDesc,prop:e.SubValue}})})],2)],1)])],1),e._v(" "),a("el-dialog",{attrs:{title:e.$t("menu.PersonTransByPlan.5nrnb178cu00"),modal:"","close-on-click-modal":!1,top:"11%",visible:e.dialogHisVisible,width:"500px"},on:{"update:visible":function(t){e.dialogHisVisible=t}}},[a("div",{staticClass:"dialog-header-title",attrs:{slot:"title"},slot:"title"},[e.styleCode?a("i",{staticClass:"nm-icon-w-paper"}):e._e(),e._v(" "),a("span",[e._v(e._s(e.$t("menu.PersonTransByPlan.5nrnb178cu00")))])]),e._v(" "),a("div",[a("el-steps",{attrs:{direction:"vertical",active:1,space:70,"align-center":""}},e._l(e.HisData,function(t,s){return a("el-step",{key:s,attrs:{title:"("+t.status+") "+t.date+" "+t.time+e.$t("menu.PersonTransByPlan.5ncy65zplr00")+t.pername+e.$t("menu.PersonTransByPlan.5nrnb17rx2s0")+t.do,description:e.$t("menu.PersonTransByPlan.5nrnb17u3tg0")+t.reason}})}),1)],1)]),e._v(" "),a("el-dialog",{staticStyle:{overflow:"hidden"},attrs:{title:0==e.winFlag?e.$t("menu.PersonTransByPlan.5nrnb174obk0"):e.$t("menu.PersonTransByPlan.5nrnb174obk1"),modal:"","close-on-click-modal":!1,visible:e.dialogAppVisible,width:"992px"},on:{"update:visible":function(t){e.dialogAppVisible=t}}},[a("div",{staticClass:"dialog-header-title",attrs:{slot:"title"},slot:"title"},[e.styleCode?a("i",{class:[0==e.winFlag?"nm-icon-w-plus":"nm-icon-w-edit"]}):e._e(),e._v(" "),0==e.winFlag?a("span",[e._v(e._s(e.$t("menu.PersonTransByPlan.5nrnb174obk0")))]):1==e.winFlag?a("span",[e._v(e._s(e.$t("menu.PersonTransByPlan.5nrnb174obk1")))]):e._e()]),e._v(" "),a("el-form",{ref:"AppEditForm",attrs:{model:e.AppEditForm,rules:e.AppEditRules,inline:!0,"label-position":"right","label-width":"120px",align:"left"}},[a("el-form-item",{attrs:{label:e.$t("menu.PersonTransByPlan.5ncy65zo8hc0"),prop:"AppWard"}},[a("el-input",{staticStyle:{width:"192px"},attrs:{size:"mini",disabled:""},model:{value:e.AppEditForm.AppWard,callback:function(t){e.$set(e.AppEditForm,"AppWard",t)},expression:"AppEditForm.AppWard"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("menu.PersonTransByPlan.5nrnb170i0k0"),prop:"AppNur"}},[a("el-input",{staticStyle:{width:"192px"},attrs:{size:"mini",disabled:""},model:{value:e.AppEditForm.AppNur,callback:function(t){e.$set(e.AppEditForm,"AppNur",t)},expression:"AppEditForm.AppNur"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("menu.PersonTransByPlan.5nrnb17c4mw0"),prop:"AppDate"}},[a("el-date-picker",{staticStyle:{width:"192px"},attrs:{format:e.DateFormat,size:"mini",disabled:""},model:{value:e.AppEditForm.AppDate,callback:function(t){e.$set(e.AppEditForm,"AppDate",t)},expression:"AppEditForm.AppDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("menu.PersonTransByPlan.5nrnb173f3w0"),prop:"AppStatus"}},[a("el-input",{staticStyle:{width:"192px"},attrs:{size:"mini",disabled:""},model:{value:e.AppEditForm.AppStatus,callback:function(t){e.$set(e.AppEditForm,"AppStatus",t)},expression:"AppEditForm.AppStatus"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("menu.PersonTransByPlan.5ncy65zohsg0"),prop:"AppNurCount"}},[a("el-input",{staticStyle:{width:"192px"},attrs:{size:"mini"},on:{change:function(t){return e.numberinput(e.AppEditForm.AppNurCount)}},model:{value:e.AppEditForm.AppNurCount,callback:function(t){e.$set(e.AppEditForm,"AppNurCount",t)},expression:"AppEditForm.AppNurCount"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("menu.PersonTransByPlan.5nrnb180v2g0"),prop:"PlanStDate"}},[a("el-date-picker",{staticStyle:{width:"192px"},attrs:{"picker-options":e.pickeroptions,size:"mini",type:"date",format:e.DateFormat},on:{change:e.GetDays},model:{value:e.AppEditForm.PlanStDate,callback:function(t){e.$set(e.AppEditForm,"PlanStDate",t)},expression:"AppEditForm.PlanStDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("menu.PersonTransByPlan.5nrnb182h680"),prop:"PlanEndDate"}},[a("el-date-picker",{staticStyle:{width:"192px"},attrs:{"picker-options":e.pickeroptions,size:"mini",type:"date",format:e.DateFormat},on:{change:e.GetDays},model:{value:e.AppEditForm.PlanEndDate,callback:function(t){e.$set(e.AppEditForm,"PlanEndDate",t)},expression:"AppEditForm.PlanEndDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("menu.PersonTransByPlan.5ncy65zzifo0"),prop:"PlanDays"}},[a("el-input",{staticStyle:{width:"192px"},attrs:{size:"mini",disabled:""},model:{value:e.AppEditForm.PlanDays,callback:function(t){e.$set(e.AppEditForm,"PlanDays",t)},expression:"AppEditForm.PlanDays"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("menu.PersonTransByPlan.5ncy65zzj680"),prop:"AppReason","inline-message":!0}},[a("el-input",{staticStyle:{width:"836px","margin-top":"5px","margin-bottom":"8px"},attrs:{type:"textarea",size:"mini",rows:3},model:{value:e.AppEditForm.AppReason,callback:function(t){e.$set(e.AppEditForm,"AppReason",t)},expression:"AppEditForm.AppReason"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("menu.PersonTransByPlan.5ncy65zzk100"),prop:"AppNurCondition"}},[a("el-input",{staticStyle:{width:"836px","margin-top":"7px","margin-bottom":"8px"},attrs:{type:"textarea",size:"mini",rows:3},model:{value:e.AppEditForm.AppNurCondition,callback:function(t){e.$set(e.AppEditForm,"AppNurCondition",t)},expression:"AppEditForm.AppNurCondition"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("menu.PersonTransByPlan.5ncy65zzks80"),prop:"AppSalary"}},[a("el-input",{staticStyle:{width:"836px","margin-top":"7px","margin-bottom":"8px"},attrs:{type:"textarea",size:"mini",rows:3},model:{value:e.AppEditForm.AppSalary,callback:function(t){e.$set(e.AppEditForm,"AppSalary",t)},expression:"AppEditForm.AppSalary"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("menu.PersonTransByPlan.5nrnb1844mk0"),prop:"AppRemark"}},[a("el-input",{staticStyle:{width:"836px","margin-top":"7px","margin-bottom":"5px"},attrs:{type:"textarea",size:"mini",rows:3},model:{value:e.AppEditForm.AppRemark,callback:function(t){e.$set(e.AppEditForm,"AppRemark",t)},expression:"AppEditForm.AppRemark"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{label:"RoWID",prop:"RowID"}},[a("el-input",{attrs:{size:"mini",width:"400px"},model:{value:e.AppEditForm.RowID,callback:function(t){e.$set(e.AppEditForm,"RowID",t)},expression:"AppEditForm.RowID"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{label:"NoCheck",prop:"NoCheck"}},[a("el-input",{attrs:{size:"mini",width:"400px"},model:{value:e.AppEditForm.NoCheck,callback:function(t){e.$set(e.AppEditForm,"NoCheck",t)},expression:"AppEditForm.NoCheck"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{label:"NoCheckReason",prop:"NoCheckReason"}},[a("el-input",{attrs:{size:"mini",width:"400px"},model:{value:e.AppEditForm.NoCheckReason,callback:function(t){e.$set(e.AppEditForm,"NoCheckReason",t)},expression:"AppEditForm.NoCheckReason"}})],1)],1),e._v(" "),a("div",{staticClass:"bottom-button"},[e.AppEditForm.AppStatus==e.$t("menu.PersonTransByPlan.5ncy6600v2k0")||""==e.AppEditForm.AppStatus||e.AppEditForm.AppStatus==e.$t("menu.PersonTransByPlan.5nrnb174qvw0")?a("hgbutton",{directives:[{name:"intervalclick",rawName:"v-intervalclick",value:{func:e.SaveAPP,time:500,value:"N"},expression:"{func:SaveAPP,time:500,value:'N'}"}],attrs:{type:e.styleCode?"default":"success",styleCode:e.styleCode}},[e._v(e._s(e.$t("menu.PersonTransByPlan.5nrnb186pww0")))]):e._e(),e._v(" "),e.AppEditForm.AppStatus==e.$t("menu.PersonTransByPlan.5ncy6600v2k0")||""==e.AppEditForm.AppStatus||e.AppEditForm.AppStatus==e.$t("menu.PersonTransByPlan.5nrnb174qvw0")?a("hgbutton",{directives:[{name:"intervalclick",rawName:"v-intervalclick",value:{func:e.SaveAPP,time:500,value:"Y"},expression:"{func:SaveAPP,time:500,value:'Y'}"}],staticStyle:{width:"120px"},attrs:{type:"default",styleCode:e.styleCode}},[e._v(e._s(e.$t("menu.PersonTransByPlan.5nrnb189tck0")))]):e._e(),e._v(" "),e.AppEditForm.AppStatus!=e.$t("menu.PersonTransByPlan.5ncy6608uog0")||!this.elementlist.CheckDetail&&0!=e.LoginId?e._e():a("hgbutton",{directives:[{name:"intervalclick",rawName:"v-intervalclick",value:{func:e.CheckDetail,time:500},expression:"{func:CheckDetail,time:500}"}],ref:"CheckDetail",attrs:{type:"default",styleCode:e.styleCode}},[e._v(e._s(e.$t("menu.PersonTransByPlan.5ncy6609uu80")))]),e._v(" "),a("hgbutton",{attrs:{type:"default",styleCode:e.styleCode},on:{click:e.handleclose}},[e._v(e._s(e.$t("menu.PersonTransByPlan.5nrnb18a3io0")))])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.$t("menu.PersonTransByPlan.5nrnb174qvw0"),modal:"","close-on-click-modal":!1,visible:e.dialogEndVisible,width:"454px"},on:{"update:visible":function(t){e.dialogEndVisible=t}}},[a("div",{staticClass:"dialog-header-title",attrs:{slot:"title"},slot:"title"},[e.styleCode?a("i",{staticClass:"nm-icon-w-paper"}):e._e(),e._v(" "),a("span",[e._v(e._s(e.$t("menu.PersonTransByPlan.5nrnb174qvw0")))])]),e._v(" "),a("el-form",{ref:"endform",attrs:{inline:"",model:e.endform,"label-position":"right","label-width":"100px",align:"left"}},[a("el-form-item",{attrs:{label:e.$t("menu.PersonTransByPlan.5ncy6609wx80"),prop:"EndReason"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{type:"textarea",rows:3,size:"mini"},model:{value:e.endform.EndReason,callback:function(t){e.$set(e.endform,"EndReason",t)},expression:"endform.EndReason"}})],1)],1),e._v(" "),a("div",{staticClass:"bottom-button"},[a("hgbutton",{directives:[{name:"intervalclick",rawName:"v-intervalclick",value:{func:e.SaveEndForm,time:500},expression:"{func:SaveEndForm,time:500}"}],attrs:{type:"default",styleCode:e.styleCode}},[e._v(e._s(e.$t("menu.PersonTransByPlan.5nrnb18bciw0")))]),e._v(" "),a("hgbutton",{attrs:{type:"default",styleCode:e.styleCode},on:{click:function(t){e.dialogEndVisible=!1}}},[e._v(e._s(e.$t("menu.PersonTransByPlan.5nrnb18a3io0")))])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.$t("menu.PersonTransByPlan.5nrnb18ce6c0"),modal:"","close-on-click-modal":!1,visible:e.dialogBackVisible,width:"450px"},on:{"update:visible":function(t){e.dialogBackVisible=t}}},[a("div",{staticClass:"dialog-header-title",attrs:{slot:"title"},slot:"title"},[e.styleCode?a("i",{staticClass:"nm-icon-w-paper"}):e._e(),e._v(" "),a("span",[e._v(e._s(e.$t("menu.PersonTransByPlan.5nrnb18ce6c0")))])]),e._v(" "),a("el-form",{ref:"backform",attrs:{inline:!0,model:e.backform,rules:e.backrule,"label-position":"left"}},[a("el-form-item",{attrs:{label:e.$t("menu.PersonTransByPlan.5nrnb18dix00"),prop:"date"}},[a("el-date-picker",{staticStyle:{width:"150px"},attrs:{type:"date",format:e.DateFormat,size:"mini"},model:{value:e.backform.date,callback:function(t){e.$set(e.backform,"date",t)},expression:"backform.date"}})],1)],1),e._v(" "),a("div",{staticClass:"bottom-button"},[a("hgbutton",{directives:[{name:"intervalclick",rawName:"v-intervalclick",value:{func:e.SaveBackDep,time:500},expression:"{func:SaveBackDep,time:500}"}],attrs:{type:"default",styleCode:e.styleCode}},[e._v(e._s(e.$t("menu.PersonTransByPlan.5nrnb18bciw0")))]),e._v(" "),a("hgbutton",{attrs:{type:"default",styleCode:e.styleCode},on:{click:function(t){e.dialogBackVisible=!1}}},[e._v(e._s(e.$t("menu.PersonTransByPlan.5nrnb18a3io0")))])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.$t("menu.PersonTransByPlan.5nrnb174q540"),modal:"","close-on-click-modal":!1,top:"5%",visible:e.dialogCheckVisible,width:"920px"},on:{"update:visible":function(t){e.dialogCheckVisible=t}}},[a("div",{staticClass:"dialog-header-title",attrs:{slot:"title"},slot:"title"},[e.styleCode?a("i",{staticClass:"nm-icon-w-paper"}):e._e(),e._v(" "),a("span",[e._v(e._s(e.$t("menu.PersonTransByPlan.5nrnb174q540")))])]),e._v(" "),a("div",{staticClass:"top-tool-button-dialog-toph dialog-div-top-radius"},[a("el-form",{ref:"CheckForm",attrs:{model:e.CheckForm,inline:!0,"label-position":"right","label-width":"66px"}},[a("el-form-item",{attrs:{label:e.$t("menu.PersonTransByPlan.5nrnb18fcfs0"),prop:"CheckStatus"}},[a("el-select",{attrs:{filterable:"",clearable:"",size:"mini",placeholder:e.$t("menu.PersonTransByPlan.5nrnb16y9f00")},model:{value:e.CheckForm.CheckStatus,callback:function(t){e.$set(e.CheckForm,"CheckStatus",t)},expression:"CheckForm.CheckStatus"}},e._l(e.CheckStatus,function(e){return a("el-option",{key:e.code,attrs:{label:e.desc,value:e.code}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("menu.PersonTransByPlan.5nrnb18i5ks0"),prop:"CheckSuggestion"}},[a("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:e.$t("menu.PersonTransByPlan.5nrnb18j3dg0"),size:"mini"},on:{input:function(t){e.CheckForm.CheckSuggestion=t.replace(/^|/g,"")}},model:{value:e.CheckForm.CheckSuggestion,callback:function(t){e.$set(e.CheckForm,"CheckSuggestion",t)},expression:"CheckForm.CheckSuggestion"}})],1)],1)],1),e._v(" "),e.AppEditForm.AppStatus!=e.$t("menu.PersonTransByPlan.5ncy6608uog0")?a("div",{staticClass:"top-tool-buttonDiv"},[a("hgbutton",{attrs:{type:"text",issvg:e.styleCode,icon:e.styleCode?"#nm-icon-add":"nm-icon-lite-add"},on:{click:e.AddTransNur}},[e._v(e._s(e.$t("menu.PersonTransByPlan.5nrnb174obk0")))])],1):e._e(),e._v(" "),e.AppEditForm.AppStatus==e.$t("menu.PersonTransByPlan.5ncy6608uog0")?a("div",{staticClass:"top-tool-buttonDiv"},[a("hgbutton",{attrs:{type:"default",styleCode:e.styleCode},on:{click:e.BackDep}},[e._v(e._s(e.$t("menu.PersonTransByPlan.5nrnb18j71o0")))])],1):e._e(),e._v(" "),a("div",{staticClass:"top-tool-dialog-table dialog-table-bottom-radius"},[a("el-table",{staticClass:"dialog-table-bottom-radius",staticStyle:{"border-bottom":"0"},attrs:{data:e.CheckData,height:450,"header-cell-style":e.headerCellFontWeight,border:e.styleCode,"highlight-current-row":""},on:{"row-click":e.RowClick}},[a("el-table-column",{attrs:{prop:"TransNurName",width:"150",label:e.$t("menu.PersonTransByPlan.5nrnb18khjg0"),"class-name":"column-padding1"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-autocomplete",{staticClass:"nameinput",attrs:{disabled:e.disabled,"popper-class":"transplan-my-kqoption","value-key":"PerName","fetch-suggestions":e.querySearch,placeholder:e.$t("menu.PersonTransByPlan.5nrnb18khjg0")},on:{focus:function(a){return e.GetIndex(t.$index)},select:e.handleSelect},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.item;return[a("div",{staticStyle:{"margin-left":"10px",width:"100px",display:"inline-block"}},[e._v(e._s(s.PerName))]),e._v(" "),a("div",{staticStyle:{"margin-left":"10px",width:"50px",display:"inline-block"}},[e._v(e._s(s.Sex))]),e._v(" "),a("div",{staticStyle:{"margin-left":"10px",width:"70px",display:"inline-block"}},[e._v(e._s(s.PerID))]),e._v(" "),a("div",{staticStyle:{"margin-left":"10px",width:"70px",display:"inline-block"}},[e._v(e._s(s.Level))]),e._v(" "),a("div",{staticStyle:{"margin-left":"10px",width:"120px",display:"inline-block"}},[e._v(e._s(s.WardDesc))])]}}],null,!0),model:{value:t.row.TransNurName,callback:function(a){e.$set(t.row,"TransNurName",a)},expression:"scope.row['TransNurName']"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"NurType","show-overflow-tooltip":"",width:"100",label:e.$t("menu.PersonTransByPlan.5nrnb18n2p40")}}),e._v(" "),a("el-table-column",{attrs:{prop:"NurLevel","show-overflow-tooltip":"",width:"100",label:e.$t("menu.PersonTransByPlan.5nrnb18o1vo0")}}),e._v(" "),a("el-table-column",{attrs:{prop:"NurWard","show-overflow-tooltip":"",width:"100",label:e.$t("menu.PersonTransByPlan.5ncy660glj80")}}),e._v(" "),a("el-table-column",{attrs:{prop:"TransStDate",width:"150",label:e.$t("menu.PersonTransByPlan.5nrnb18p5180"),"class-name":"column-padding"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",size:"mini","picker-options":e.pickeroptions,disabled:e.disabled,format:e.DateFormat},on:{change:function(a){return e.GetTransDays(t.$index,"st")}},model:{value:t.row.TransStDate,callback:function(a){e.$set(t.row,"TransStDate",a)},expression:"scope.row['TransStDate']"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"TransEndDate",width:"150",label:e.$t("menu.PersonTransByPlan.5nrnb18qf240"),"class-name":"column-padding"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",size:"mini","picker-options":e.pickeroptions,disabled:e.disabled,format:e.DateFormat},on:{change:function(a){return e.GetTransDays(t.$index,"end")}},model:{value:t.row.TransEndDate,callback:function(a){e.$set(t.row,"TransEndDate",a)},expression:"scope.row['TransEndDate']"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("menu.PersonTransByPlan.5nrnb18srv40"),prop:"TransDays"}}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("menu.PersonTransByPlan.5nrnb174pdc0"),disabled:!e.disabled},scopedSlots:e._u([{key:"default",fn:function(t){return[a("hgbutton",{attrs:{type:"text",issvg:e.styleCode,icon:e.styleCode?"#nm-icon-cancel":"nm-icon-lite-cancel",disabled:e.disabled},on:{click:function(a){return e.DeleteTransNur(t.$index)}}})]}}])}),e._v(" "),e._e()],1)],1),e._v(" "),a("div",{staticClass:"bottom-button"},[a("hgbutton",{directives:[{name:"intervalclick",rawName:"v-intervalclick",value:{func:e.SaveCheck,time:500,value:"N"},expression:"{func:SaveCheck,time:500,value:'N'}"}],attrs:{type:e.styleCode?"default":"success",styleCode:e.styleCode}},[e._v(e._s(e.$t("menu.PersonTransByPlan.5nrnb186pww0")))]),e._v(" "),a("hgbutton",{directives:[{name:"intervalclick",rawName:"v-intervalclick",value:{func:e.SaveCheck,time:500,value:"Y"},expression:"{func:SaveCheck,time:500,value:'Y'}"}],staticStyle:{width:"100px"},attrs:{type:"default",styleCode:e.styleCode}},[e._v(e._s(e.$t("menu.PersonTransByPlan.5nrnb189tck0")))])],1)])],1)},staticRenderFns:[]};var u=a("VU/8")(p,d,!1,function(e){a("Fj6q")},null,null);t.default=u.exports}});