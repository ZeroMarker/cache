webpackJsonp([184],{"7nTN":function(e,t){},yn9Y:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("woOf"),n=r.n(a),s=r("Dd8w"),i=r.n(s),d=r("NYxO"),l=r("XlQt"),o=r("W5Fe"),u={components:{hgbutton:l.default,hgpagination:o.default},computed:i()({},Object(d.b)(["Height","SysTomcat","LoginId","DateFormat","MonthFormat","styleCode"])),name:"NurRewardList",data:function(){return{pageSize:{width:"",height:""},tableHeight:"",nursewarddata:[],nurserewardform:{PerDepDR:"",PerInfo:"",EndDate:new Date((new Date).getFullYear(),(new Date).getMonth()+1,0),StDate:new Date((new Date).getFullYear(),(new Date).getMonth(),1)},nurserewardtable:[],nurserewardtableAll:[],pagesize:20,currentPage:1,totalCount:0,elementlist:[],rewardvisible:!1,nurserewardedit:{RewardNurse:"",RewardWard:"",RewardContent:"",RewardUnit:"",RewardResult:"",RewardLevel:"",RewardDate:"",RewardTeacher:"",Certifier:"",RewardMark:"",RowID:""},rules:{RewardNurse:[{required:!0,message:"请选择获奖护士！",trigger:"change"}],RewardWard:[{required:!0,message:"请选择病区！",trigger:"change"}],RewardContent:[{required:!0,message:"请输入获奖内容！",trigger:"blur"}],RewardDate:[{required:!0,message:"请选择获奖日期！",trigger:"change"}]},nurseInfoStore:[],resignWardStore:[],rewardlevelstore:[],isEdit:!1,winFlag:0,selectedRow:{},selectedRowId:""}},methods:{setSize:function(){this.pageSize.width=document.documentElement.clientWidth-180+"px",this.pageSize.height=document.documentElement.clientHeight-100+"px"},loadLocData:function(){var e=this;e.$ajax.request(e.axiosConfig("web.INMDataLimit","FindRoleWardList","RecQuery","nurseid$"+sessionStorage.getItem("loginID"))).then(function(t){e.nursewarddata=t.data.rows})},handleDelete:function(){var e=this;if(this.selectedRowId){var t={className:"DHCINM.HR.MgNurReward",rowId:this.selectedRowId},r=n()({},{ClassName:"web.INMPerSubComm",MethodName:"DeleteItem",MethodType:"Method"},t);this.asyncRequest(r).then(function(t){t.data>1?(e.nurMessage.success("删除记录成功"),e.searchRewardData()):e.nurMessage.error("删除记录失败")}).catch(function(t){return e.nurMessage.error(t)})}else this.nurMessage.warning("请选择一条要删除的行")},addRewardData:function(){var e=this;e.winFlag=0,e.rewardvisible=!0,e.$nextTick(function(){e.$refs.nurserewardedit.resetFields()})},searchRewardData:function(){var e=this,t=sessionStorage.getItem("loginRoleCodes"),r=sessionStorage.getItem("loginID"),a=this.packageParam(this.nurserewardform,{role:t,nurseid:r}),s=n()({},{ClassName:"web.INMPerSubComm",MethodName:"FindRewardList",MethodType:"RecQuery"},{param:a,parr:""}),i=(this.currentPage-1)*this.pagesize,d=this.currentPage*this.pagesize;this.asyncRequest(s).then(function(t){var r=t.data;e.nurserewardtable=r.rows.slice(i,d),e.nurserewardtableAll=r.rows,e.totalCount=parseInt(r.results)})},rowDbClickEvent:function(e,t){var r=this,a=this;a.winFlag=1,a.rewardvisible=!0;var n={ClassName:"web.INMPersonComm",MethodName:"GetRewardRec",MethodType:"RecMethod",id:e.rowid};this.asyncRequest(n).then(function(e){var t=e.data;a.isEmptyObject(t)||(r.$nextTick(function(){return r.setForm(r.$refs.nurserewardedit,r.nurserewardedit,t)}),r.wardChange())})},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},handlerSure:function(e){var t=this,r={ClassName:"web.INMPersonComm",MethodName:"SaveReward",MethodType:"Method",parr:this.packageParam(this[e],{RewardStatus:"A"})};this.asyncRequest(r).then(function(e){e.data>0?(t.nurMessage.success("更新成功"),t.searchRewardData(),t.rewardvisible=!1):t.nurMessage.warning("更新失败")}).catch(function(){return t.nurMessage.error("请求失败，网络故障")})},closeHandler:function(){this.rewardvisible=!1},visibleChange:function(e){e||(this.nurserewardedit.RewardNurse="")},wardChange:function(){this.loadNurseInfoStore()},loadNurseInfoStore:function(){var e=this;if(e.nurserewardedit.RewardWard){var t=e.nurserewardedit.RewardWard;e.$ajax.request(e.axiosConfig("web.INMPersonComm","FindNurInfoOfWard","RecQuery","parr$"+t,"role$"+sessionStorage.getItem("loginRoleCodes"),"nurseid$"+sessionStorage.getItem("loginID"))).then(function(t){e.nurseInfoStore=t.data.rows})}else e.nurseInfoStore=new Array},loadResignWardStore:function(){var e=this,t=e.axiosConfig("web.INMDataLimit","FindRoleWardList","RecQuery","start$0","limit$5000","nurseid$"+sessionStorage.getItem("loginID"));e.$ajax.request(t).then(function(t){e.resignWardStore=t.data.rows})},rowClickEvent:function(e,t,r){this.selectedRow=e,this.selectedRowId=e.rowid},handleSizeChange:function(e){this.pagesize=e,this.searchRewardData()},handleCurrentChange:function(e){this.currentPage=e.currentPage,this.searchRewardData()}},watch:{"nurserewardedit.RewardWard":function(e,t){e&&this.wardChange()}},created:function(){var e=this;e.setSize(),e.loadLocData(),e.tableHeight=e.$store.state.mainframe.Height-130,e.searchRewardData(),e.loadSysParamSubData("获奖等级","rewardlevelstore"),e.loadResignWardStore();var t=e.$router.currentRoute.path.slice(1,e.$router.currentRoute.path.length);e.$nextTick(function(){e.loadElementsForRouter("elementlist",t)})}},w={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"nurrewardlist-panel"},[r("div",{staticClass:"top-tool-inputDiv"},[r("el-form",{attrs:{inline:!0,model:e.nurserewardform,"label-position":"left"}},[r("el-form-item",{attrs:{label:e.$t("menu.NurRewardList.5nrnbfpl2t80")}},[r("el-select",{staticStyle:{width:"140px"},attrs:{filterable:"",clearable:"",placeholder:e.$t("menu.NurRewardList.5nrnbfpm4e80"),size:"mini"},model:{value:e.nurserewardform.PerDepDR,callback:function(t){e.$set(e.nurserewardform,"PerDepDR",t)},expression:"nurserewardform.PerDepDR"}},e._l(e.nursewarddata,function(e){return r("el-option",{key:e.rw,attrs:{label:e.WardDesc,value:e.rw}})}),1)],1),e._v(" "),r("el-form-item",{attrs:{label:e.$t("menu.NurRewardList.5nrnbfpntdc0")}},[r("el-input",{staticStyle:{width:"100px"},attrs:{placeholder:e.$t("menu.NurRewardList.5nrnbfppca40"),size:"mini"},model:{value:e.nurserewardform.PerInfo,callback:function(t){e.$set(e.nurserewardform,"PerInfo",t)},expression:"nurserewardform.PerInfo"}})],1),e._v(" "),r("el-form-item",{attrs:{label:e.$t("menu.NurRewardList.5nrnbfpqdi00")}},[r("el-date-picker",{staticStyle:{width:"120px"},attrs:{type:"date",format:e.DateFormat,placeholder:e.$t("menu.NurRewardList.5nrnbfpqdi00"),size:"mini"},model:{value:e.nurserewardform.StDate,callback:function(t){e.$set(e.nurserewardform,"StDate",t)},expression:"nurserewardform.StDate"}})],1),e._v(" "),r("el-form-item",{attrs:{label:e.$t("menu.NurRewardList.5nrnbfpsjkw0")}},[r("el-date-picker",{staticStyle:{width:"120px"},attrs:{type:"date",format:e.DateFormat,placeholder:e.$t("menu.NurRewardList.5nrnbfpsjkw0"),size:"mini"},model:{value:e.nurserewardform.EndDate,callback:function(t){e.$set(e.nurserewardform,"EndDate",t)},expression:"nurserewardform.EndDate"}})],1),e._v(" "),r("el-form-item",[this.elementlist.rewardsearch||0==e.LoginId?r("hgbutton",{ref:"rewardsearch",attrs:{type:"default",styleCode:e.styleCode,icon:"nm-icon-w-find"},on:{click:e.searchRewardData}},[e._v(e._s(e.$t("menu.NurRewardList.5nrnbfpu3lw0")))]):e._e()],1)],1)],1),e._v(" "),r("div",{staticClass:"top-tool-button"},[this.elementlist.rewardadd||0==e.LoginId?r("hgbutton",{ref:"rewardadd",attrs:{type:"text",issvg:e.styleCode,icon:e.styleCode?"#nm-icon-add":"nm-icon-lite-add"},on:{click:e.addRewardData}},[e._v(e._s(e.$t("menu.NurRewardList.5nrnbfpu5600")))]):e._e(),e._v(" "),this.elementlist.exportedit||0==e.LoginId?r("hgbutton",{attrs:{type:"text",issvg:e.styleCode,icon:e.styleCode?"#nm-icon-export":"nm-icon-lite-export"},on:{click:function(t){e.exportData("nurserewardtable",e.nurserewardtableAll,e.$t("menu.NurRewardList.5ncy6d6wdwg0"))}}},[e._v(e._s(e.$t("menu.NurRewardList.5nrnbfpu63g0")))]):e._e(),e._v(" "),e.elementlist.rewardDelete||0==e.LoginId?r("hgbutton",{attrs:{type:"text",issvg:e.styleCode,icon:e.styleCode?"#nm-icon-cancel":"nm-icon-lite-cancel"},on:{click:e.handleDelete}},[e._v(e._s(e.$t("menu.NurRewardList.5nrnbfpu63g1")))]):e._e()],1),e._v(" "),r("div",{staticClass:"top-tool-table"},[r("el-table",{ref:"nurserewardtable",staticStyle:{width:"100%"},attrs:{"highlight-current-row":!0,data:e.nurserewardtable,"header-cell-style":e.headerCellFontWeight,border:e.styleCode,height:e.styleCode?e.tableHeight:e.tableHeight+6},on:{"row-dblclick":e.rowDbClickEvent,"row-click":e.rowClickEvent}},[r("el-table-column",{attrs:{type:"index",width:"40",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"nurseID",label:e.$t("menu.NurRewardList.5nrnbfpwv080"),"show-overflow-tooltip":"",width:"100"}}),e._v(" "),r("el-table-column",{attrs:{prop:"nurseName",label:e.$t("menu.NurRewardList.5nrnbfpy4ng0"),"show-overflow-tooltip":"",width:"100"}}),e._v(" "),r("el-table-column",{attrs:{prop:"rewardWard",label:e.$t("menu.NurRewardList.5nrnbfpl2t80"),"show-overflow-tooltip":"",width:"200"}}),e._v(" "),r("el-table-column",{attrs:{prop:"rewardContent",label:e.$t("menu.NurRewardList.5ncy6d6ykfk0"),"show-overflow-tooltip":"",width:""}}),e._v(" "),r("el-table-column",{attrs:{prop:"rewardResult",label:e.$t("menu.NurRewardList.5nrnbfq04ak0"),"show-overflow-tooltip":"",width:"80"}}),e._v(" "),r("el-table-column",{attrs:{prop:"rewardLevel",label:e.$t("menu.NurRewardList.5ncy6d6yn8o0"),"show-overflow-tooltip":"",width:"80"}}),e._v(" "),r("el-table-column",{attrs:{prop:"rewardDate",label:e.$t("menu.NurRewardList.5ncy6d6yotg0"),"show-overflow-tooltip":"",width:"100",formatter:e.PTableDateHisShow}}),e._v(" "),e._e()],1),e._v(" "),r("hgpagination",{attrs:{styleCode:e.styleCode,sizes:[20,40,50,100],totalCount:e.totalCount,pageNumber:e.currentPage,pageSize:e.pagesize},on:{changePage:e.handleCurrentChange,getPageSize:e.handleSizeChange}})],1),e._v(" "),r("el-dialog",{attrs:{title:0==e.winFlag?e.$t("menu.NurRewardList.5nrnbfpu5600"):e.$t("menu.NurRewardList.5nrnbfpu5601"),modal:"","close-on-click-modal":!1,visible:e.rewardvisible,width:"534px"},on:{"update:visible":function(t){e.rewardvisible=t}}},[r("div",{staticClass:"dialog-header-title",attrs:{slot:"title"},slot:"title"},[e.styleCode?r("i",{class:[0==e.winFlag?"nm-icon-w-plus":"nm-icon-w-edit"]}):e._e(),e._v(" "),0==e.winFlag?r("span",[e._v(e._s(e.$t("menu.NurRewardList.5nrnbfpu5600")))]):1==e.winFlag?r("span",[e._v(e._s(e.$t("menu.NurRewardList.5nrnbfpu5601")))]):e._e()]),e._v(" "),r("el-form",{ref:"nurserewardedit",staticClass:"RewardSelectClass",attrs:{model:e.nurserewardedit,rules:e.rules,inline:!0,"label-width":"100px","label-position":"right",align:"left"}},[r("el-form-item",{attrs:{label:e.$t("menu.NurRewardList.5nrnbfpl2t80"),prop:"RewardWard"}},[r("el-select",{staticStyle:{width:"140px"},attrs:{disabled:e.isEdit,filterable:"",clearable:"",placeholder:e.$t("menu.NurRewardList.5nrnbfpm4e80"),size:"mini"},on:{change:e.wardChange,"visible-change":e.visibleChange},model:{value:e.nurserewardedit.RewardWard,callback:function(t){e.$set(e.nurserewardedit,"RewardWard",t)},expression:"nurserewardedit.RewardWard"}},e._l(e.resignWardStore,function(e){return r("el-option",{key:e.rw,attrs:{label:e.WardDesc,value:e.rw}})}),1)],1),e._v(" "),r("el-form-item",{attrs:{label:e.$t("menu.NurRewardList.5nrnbfpy4ng0"),prop:"RewardNurse"}},[r("el-select",{staticStyle:{width:"140px"},attrs:{filterable:"",clearable:"",placeholder:e.$t("menu.NurRewardList.5nrnbfpm4e80"),size:"mini"},model:{value:e.nurserewardedit.RewardNurse,callback:function(t){e.$set(e.nurserewardedit,"RewardNurse",t)},expression:"nurserewardedit.RewardNurse"}},e._l(e.nurseInfoStore,function(e){return r("el-option",{key:e.nurserow,attrs:{label:e.nursename,value:e.nurserow}})}),1)],1),e._v(" "),r("el-form-item",{attrs:{label:e.$t("menu.NurRewardList.5ncy6d6ykfk0"),prop:"RewardContent"}},[r("el-input",{staticStyle:{width:"390px"},attrs:{placeholder:e.$t("menu.NurRewardList.5ncy6d6ykfk0"),size:"mini"},model:{value:e.nurserewardedit.RewardContent,callback:function(t){e.$set(e.nurserewardedit,"RewardContent",t)},expression:"nurserewardedit.RewardContent"}})],1),e._v(" "),r("el-form-item",{attrs:{label:e.$t("menu.NurRewardList.5ncy6d6yotg0"),prop:"RewardDate"}},[r("el-date-picker",{staticStyle:{width:"140px"},attrs:{type:"date",format:e.DateFormat,placeholder:e.$t("menu.NurRewardList.5ncy6d6yotg0"),size:"mini"},model:{value:e.nurserewardedit.RewardDate,callback:function(t){e.$set(e.nurserewardedit,"RewardDate",t)},expression:"nurserewardedit.RewardDate"}})],1),e._v(" "),r("el-form-item",{attrs:{label:e.$t("menu.NurRewardList.5ncy6d6z3mg0"),prop:"RewardResult"}},[r("el-input",{staticStyle:{width:"140px"},attrs:{placeholder:e.$t("menu.NurRewardList.5ncy6d6z3mg0"),size:"mini"},model:{value:e.nurserewardedit.RewardResult,callback:function(t){e.$set(e.nurserewardedit,"RewardResult",t)},expression:"nurserewardedit.RewardResult"}})],1),e._v(" "),r("el-form-item",{attrs:{label:e.$t("menu.NurRewardList.5ncy6d6yn8o0"),prop:"RewardLevel"}},[r("el-select",{staticStyle:{width:"140px"},attrs:{placeholder:e.$t("menu.NurRewardList.5ncy6d6yn8o0"),size:"mini"},model:{value:e.nurserewardedit.RewardLevel,callback:function(t){e.$set(e.nurserewardedit,"RewardLevel",t)},expression:"nurserewardedit.RewardLevel"}},e._l(e.rewardlevelstore,function(e){return r("el-option",{key:e.SubValue,attrs:{label:e.SubDesc,value:e.SubValue}})}),1)],1),e._v(" "),r("el-form-item",{attrs:{label:e.$t("menu.NurRewardList.5ncy6d6z5mc0"),prop:"RewardUnit"}},[r("el-input",{staticStyle:{width:"140px"},attrs:{placeholder:e.$t("menu.NurRewardList.5ncy6d6z5mc0"),size:"mini"},model:{value:e.nurserewardedit.RewardUnit,callback:function(t){e.$set(e.nurserewardedit,"RewardUnit",t)},expression:"nurserewardedit.RewardUnit"}})],1),e._v(" "),r("el-form-item",{attrs:{label:e.$t("menu.NurRewardList.5ncy6d6z6fg0"),prop:"RewardTeacher"}},[r("el-input",{staticStyle:{width:"140px"},attrs:{placeholder:e.$t("menu.NurRewardList.5ncy6d6z6fg0"),size:"mini"},model:{value:e.nurserewardedit.RewardTeacher,callback:function(t){e.$set(e.nurserewardedit,"RewardTeacher",t)},expression:"nurserewardedit.RewardTeacher"}})],1),e._v(" "),r("el-form-item",{attrs:{label:e.$t("menu.NurRewardList.5ncy6d6z7740"),prop:"Certifier"}},[r("el-input",{staticStyle:{width:"140px"},attrs:{placeholder:e.$t("menu.NurRewardList.5ncy6d6z7740"),size:"mini"},model:{value:e.nurserewardedit.Certifier,callback:function(t){e.$set(e.nurserewardedit,"Certifier",t)},expression:"nurserewardedit.Certifier"}})],1),e._v(" "),r("el-form-item",{attrs:{label:e.$t("menu.NurRewardList.5nrnbfq9hvk0"),prop:"RewardMark"}},[r("el-input",{staticStyle:{width:"390px","margin-top":"5px","margin-bottom":"5px"},attrs:{type:"textarea",placeholder:e.$t("menu.NurRewardList.5nrnbfq9hvk0"),size:"mini"},model:{value:e.nurserewardedit.RewardMark,callback:function(t){e.$set(e.nurserewardedit,"RewardMark",t)},expression:"nurserewardedit.RewardMark"}})],1)],1),e._v(" "),r("div",{staticClass:"bottom-button"},[this.elementlist.rewardsave||0==e.LoginId?r("hgbutton",{ref:"rewardsave",attrs:{type:e.styleCode?"default":"success",styleCode:e.styleCode},on:{click:function(t){return e.handlerSure("nurserewardedit")}}},[e._v(e._s(e.$t("menu.NurRewardList.5nrnbfqbld80")))]):e._e(),e._v(" "),r("hgbutton",{attrs:{type:"default",styleCode:e.styleCode},on:{click:e.closeHandler}},[e._v(e._s(e.$t("menu.NurRewardList.5nrnbfqbmeg0")))])],1)],1)],1)},staticRenderFns:[]};var c=r("VU/8")(u,w,!1,function(e){r("7nTN")},null,null);t.default=c.exports}});