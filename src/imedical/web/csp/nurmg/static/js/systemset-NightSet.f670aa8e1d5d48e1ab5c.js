webpackJsonp([258],{GUxi:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=s("Dd8w"),a=s.n(l),o=s("NYxO"),i=s("XlQt"),c=s("W5Fe"),n=s("z8xk"),r={name:"NightSet",components:{hgbutton:i.default,hgpagination:c.default,hgpanel:n.default},computed:a()({},Object(o.b)(["Height","styleCode"])),data:function(){return{TableData:[],BelowLoading:!1,Holiday:[],Week:[{value:1,desc:"星期一",Selected:!1},{value:2,desc:"星期二",Selected:!1},{value:3,desc:"星期三",Selected:!1},{value:4,desc:"星期四",Selected:!1},{value:5,desc:"星期五",Selected:!1},{value:6,desc:"星期六",Selected:!1},{value:0,desc:"星期日",Selected:!1}],SelectRow:{},Sort:"",Exclude:{holiday:"N",week:"N"}}},methods:{LoadHoliday:function(){var e=this;this.Holiday=[];var t=this.axiosConfig("web.INMDBComm","FindPubCode","Query","type$法定假期");this.$ajax.request(t).then(function(t){t.data instanceof Object?e.Holiday=t.data.rows.map(function(e){return e.Selected=!1,e}):e.$message({type:"error",message:"获取节假日失败",showClose:!0,customClass:"error_class"})}).catch(function(t){e.$message({type:"error",message:"获取节假日失败",showClose:!0,customClass:"error_class"})})},Reset:function(){this.Sort="",this.Exclude={holiday:"N",week:"N"}},LoadNightType:function(){var e=this;this.Reset(),this.SelectRow={},this.TableData=[];var t=this.axiosConfig("web.INMQualControlComm","FindQualTypeList","RecQuery","type$N");this.$ajax.request(t).then(function(t){t.data instanceof Object?e.TableData=t.data.rows:e.$message({type:"error",message:"获取质控排班类型失败",showClose:!0,customClass:"error_class"})}).catch(function(t){e.$message({type:"error",message:"获取质控排班类型失败",showClose:!0,customClass:"error_class"})})},LoadTypeSet:function(){var e=this;this.Reset();var t=this.axiosConfig("web.INMSetComm","GetQaulTypeSet","Method","qual$"+this.SelectRow.rw);this.$ajax.request(t).then(function(t){t.data instanceof Object?(e.Holiday.forEach(function(e){t.data.Holiday.indexOf(e.SubValue)>-1?e.Selected=!0:e.Selected=!1}),e.Week.forEach(function(e){t.data.Week.indexOf(e.value)>-1?e.Selected=!0:e.Selected=!1}),e.Sort=t.data.Sort,t.data.Exclude.forEach(function(t){e.Exclude[t]&&(e.Exclude[t]="Y")})):e.$message({type:"error",message:"获取质控排班类型配置失败",showClose:!0,customClass:"error_class"})}).catch(function(t){e.$message({type:"error",message:"获取质控排班类型配置失败",showClose:!0,customClass:"error_class"})})},Save:function(){var e=this,t=this.SelectRow.rw,s=this.Holiday.filter(function(e){return 1==e.Selected}).map(function(e){return e.SubValue}).join(","),l=this.Week.filter(function(e){return 1==e.Selected}).map(function(e){return e.value}).join(","),a=this.Sort,o=[];"Y"==this.Exclude.holiday&&o.push("holiday"),"Y"==this.Exclude.week&&o.push("week");var i=t+"^"+s+"^"+l+"^"+a+"^"+o.join(","),c=this.axiosConfig("web.INMSetComm","SaveQaulTypeSet","Method","parr$"+i);this.$ajax.request(c).then(function(t){1==t.data?e.$message({type:"success",message:"保存成功",showClose:!0,customClass:"success_class"}):e.$message({type:"error",message:"保存失败",showClose:!0,customClass:"error_class"})}).catch(function(t){e.$message({type:"error",message:"保存失败",showClose:!0,customClass:"error_class"})})},RowClick:function(e){this.SelectRow=e,this.LoadTypeSet()}},created:function(){this.LoadHoliday(),this.LoadNightType()}},d={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"night-set-panel",staticStyle:{height:"calc(100% - 10px)"}},[s("el-row",{staticStyle:{padding:"10px 12px 10px 10px"}},[s("el-col",{attrs:{span:24}},[s("hgpanel",{staticStyle:{width:"100%"},attrs:{title:e.$t("menu.NightSet.5ncy6tof2tw0"),styleCode:e.styleCode,icon:"#nm-icon-paper",panelHeight:240}},[s("div",{staticClass:"top-tool-table",staticStyle:{"padding-top":"2px"}},[s("el-table",{staticClass:"qual-table",attrs:{data:e.TableData,"header-cell-style":e.headerCellFontWeight,"highlight-current-row":"",border:e.styleCode,height:e.styleCode?203:204},on:{"row-click":e.RowClick}},[s("el-table-column",{attrs:{type:"index",align:"center",width:"40"}}),e._v(" "),s("el-table-column",{attrs:{label:e.$t("menu.NightSet.5nrnc6ipuco0"),prop:"SubCode","show-overflow-tooltip":""}}),e._v(" "),s("el-table-column",{attrs:{label:e.$t("menu.NightSet.5nrnc6iqp800"),prop:"SubDesc","show-overflow-tooltip":""}})],1)],1)])],1)],1),e._v(" "),s("el-row",{staticStyle:{padding:"0 12px 10px 10px"}},[s("el-col",{attrs:{span:24}},[s("hgpanel",{staticStyle:{width:"100%"},attrs:{title:e.$t("menu.NightSet.5ncy6tof7k40"),styleCode:e.styleCode,icon:"#nm-icon-paper",panelHeight:e.Height-283}},[s("div",{staticClass:"top-tool-input",attrs:{slot:"tool"},slot:"tool"},[s("el-form",{attrs:{inline:!0}},[s("el-form-item",[s("el-input",{staticStyle:{"text-align":"center",width:"120px"},attrs:{placeholder:e.$t("menu.NightSet.5ncy6tof8cc0")},model:{value:e.Sort,callback:function(t){e.Sort=t},expression:"Sort"}})],1),e._v(" "),s("el-form-item",[s("hgbutton",{attrs:{type:e.styleCode?"default":"success",styleCode:e.styleCode,icon:"nm-icon-w-save"},on:{click:e.Save}},[e._v(e._s(e.$t("menu.NightSet.5nrnc6iqr900")))])],1)],1)],1),e._v(" "),s("div",{staticClass:"night-set-items"},[s("div",{staticStyle:{display:"flex"},style:{height:e.Height-369+"px"}},[s("div",{staticClass:"night-set-items-first",staticStyle:{flex:"1 1 300px"}},[s("div",{staticClass:"night-set-items-head"},[e._v(e._s(e.$t("menu.NightSet.5nrnc6iqs540"))),s("el-checkbox",{staticStyle:{"margin-left":"10px"},attrs:{"true-label":"Y","false-label":"N"},model:{value:e.Exclude.holiday,callback:function(t){e.$set(e.Exclude,"holiday",t)},expression:"Exclude.holiday"}},[e._v(e._s("排除"))])],1),e._v(" "),s("el-scrollbar",{staticStyle:{"overflow-x":"hidden",width:"100%"},style:{height:e.styleCode?e.Height-406+"px":e.Height-404+"px"}},e._l(e.Holiday,function(t){return s("div",{key:t.SubValue,class:t.Selected?"item_selected":"item_unselected",on:{click:function(e){t.Selected=!t.Selected}}},[e._v(e._s(t.SubDesc))])}),0)],1),e._v(" "),s("div",{staticClass:"night-set-items-second",staticStyle:{flex:"1 1 300px"}},[s("div",{staticClass:"night-set-items-head"},[e._v(e._s(e.$t("menu.NightSet.5nrnc6irncg0"))),s("el-checkbox",{staticStyle:{"margin-left":"10px"},attrs:{"true-label":"Y","false-label":"N"},model:{value:e.Exclude.week,callback:function(t){e.$set(e.Exclude,"week",t)},expression:"Exclude.week"}},[e._v(e._s("排除"))])],1),e._v(" "),s("el-scrollbar",{staticStyle:{"overflow-x":"hidden",width:"100%"},style:{height:e.styleCode?e.Height-410+"px":e.Height-404+"px"}},e._l(e.Week,function(t){return s("div",{key:t.code,class:t.Selected?"item_selected":"item_unselected",on:{click:function(e){t.Selected=!t.Selected}}},[e._v(e._s(t.desc))])}),0)],1)])])])],1)],1)],1)},staticRenderFns:[]};var u=s("VU/8")(r,d,!1,function(e){s("brZQ")},null,null);t.default=u.exports},brZQ:function(e,t){}});