webpackJsonp([39,19,66,67,81,112,276],{"+XUz":function(e,t){},"//Fk":function(e,t,n){e.exports={default:n("U5ju"),__esModule:!0}},"/oEb":function(e,t){},"2KxR":function(e,t){e.exports=function(e,t,n,o){if(!(e instanceof t)||void 0!==o&&o in e)throw TypeError(n+": incorrect invocation!");return e}},"2N8g":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("woOf"),i=n.n(o),a=n("mvHQ"),r=n.n(a),l=n("9eQB"),s=n("6WKJ"),c={name:"DhcDictSelector",data:function(){return{dictList:[],sourceList:[],initFlag:!0,defaultAction:{ClassName:"web.INMDBComm",MethodName:"FindPubCode",MethodType:"Query"}}},props:{value:[String,Array],queryParam:Object,filterField:{type:Array,default:function(){return["SubDesc"]}},triggerChange:{type:Boolean},dictCode:{type:String},dictKey:String,dictLabel:{type:String,default:"SubDesc"},dictValue:{type:Array,default:function(){return["SubValue"]}},dictData:Array,disabled:Boolean,placeholder:{type:String,default:"请选择列表值"},size:{type:String,default:"mini"},multiple:{type:Boolean},defaultFirstOption:{type:Boolean},filterable:{type:Boolean,default:!0},clearable:{type:Boolean,default:!0}},watch:{dictData:{immediate:!0,handler:function(e){e&&e.length&&(this.dictList=e,this.sourceList=e)}},dictCode:{immediate:!0,handler:function(e){e&&this.loadDict()}},queryParam:{immediate:!0,handler:function(e,t){e&&r()(e)!==r()(t)&&this.loadDict()}},multiple:{immediate:!0,handler:function(e){e&&(this.val=[])}}},computed:{val:{get:function(){return this.value},set:function(e){this.$emit("input",e)}},currentDictKey:function(){return this.dictKey||this.dictValue[0]},isCustomApi:function(){return Object(s.isNotEmptyObject)(this.queryParam)&&!this.dictCode}},created:function(){},mounted:function(){},methods:{loadDict:function(){var e=this,t={};this.isCustomApi?i()(t,this.queryParam):i()(t,this.defaultAction,{type:this.dictCode}),this.asyncRequest(t).then(function(t){e.dictList=t.data.rows,e.sourceList=t.data.rows}).catch(function(t){e.$message.error("字典请求网络异常")})},handleChange:function(e){this.val=e,this.triggerChange?this.$emit("change",e):this.$emit("input",e)},handleValue:function(e){var t="",n=[];return this.dictValue&&this.dictValue.length>0&&(this.dictValue.forEach(function(t){return n.push(e[t])}),t=n.join(l.DELIMITER.Caret)),t},filterMethod:function(e){var t=this;this.dictList=e?this.sourceList.filter(function(n){return"[object string]"===Object.prototype.toString.call(n).toLowerCase()?n.includes(e):Object(s.isNotEmptyArray)(t.filterField)?t.checkInObjectWithFields(e,n,t.filterField):void 0}):this.sourceList},handleClear:function(e){this.filterMethod(e)},checkInObjectWithFields:function(e,t,n){var o=!1;for(var i in t)t.hasOwnProperty(i)&&n.includes(i)&&(o=o||t[i].includes(e.toUpperCase()));return o}}},u={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-select",e._b({attrs:{value:e.val,"default-first-option":e.defaultFirstOption,filterable:e.filterable,disabled:e.disabled,clearable:e.clearable,size:e.size,placeholder:e.placeholder,multiple:e.multiple},on:{change:e.handleChange}},"el-select",e.$attrs,!1),e._l(e.dictList,function(t){return n("el-option",{key:t[e.currentDictKey],attrs:{label:t[e.dictLabel],value:e.handleValue(t)}})}),1)},staticRenderFns:[]},d=n("VU/8")(c,u,!1,null,null,null);t.default=d.exports},"4WTo":function(e,t,n){var o=n("NWt+");e.exports=function(e,t){var n=[];return o(e,!1,n.push,n,t),n}},"5PlU":function(e,t,n){var o=n("RY/4"),i=n("dSzd")("iterator"),a=n("/bQp");e.exports=n("FeBl").isIterable=function(e){var t=Object(e);return void 0!==t[i]||"@@iterator"in t||a.hasOwnProperty(o(t))}},"7Doy":function(e,t,n){var o=n("EqjI"),i=n("7UMu"),a=n("dSzd")("species");e.exports=function(e){var t;return i(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!i(t.prototype)||(t=void 0),o(t)&&null===(t=t[a])&&(t=void 0)),void 0===t?Array:t}},"82Mu":function(e,t,n){var o=n("7KvD"),i=n("L42u").set,a=o.MutationObserver||o.WebKitMutationObserver,r=o.process,l=o.Promise,s="process"==n("R9M2")(r);e.exports=function(){var e,t,n,c=function(){var o,i;for(s&&(o=r.domain)&&o.exit();e;){i=e.fn,e=e.next;try{i()}catch(o){throw e?n():t=void 0,o}}t=void 0,o&&o.enter()};if(s)n=function(){r.nextTick(c)};else if(!a||o.navigator&&o.navigator.standalone)if(l&&l.resolve){var u=l.resolve(void 0);n=function(){u.then(c)}}else n=function(){i.call(o,c)};else{var d=!0,f=document.createTextNode("");new a(c).observe(f,{characterData:!0}),n=function(){f.data=d=!d}}return function(o){var i={fn:o,next:void 0};t&&(t.next=i),e||(e=i,n()),t=i}}},"9Bbf":function(e,t,n){"use strict";var o=n("kM2E");e.exports=function(e){o(o.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},"9C8M":function(e,t,n){"use strict";var o=n("evD5").f,i=n("Yobk"),a=n("xH/j"),r=n("+ZMJ"),l=n("2KxR"),s=n("NWt+"),c=n("vIB/"),u=n("EGZi"),d=n("bRrM"),f=n("+E39"),h=n("06OY").fastKey,p=n("LIJb"),m=f?"_s":"size",v=function(e,t){var n,o=h(t);if("F"!==o)return e._i[o];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,c){var u=e(function(e,o){l(e,u,t,"_i"),e._t=t,e._i=i(null),e._f=void 0,e._l=void 0,e[m]=0,void 0!=o&&s(o,n,e[c],e)});return a(u.prototype,{clear:function(){for(var e=p(this,t),n=e._i,o=e._f;o;o=o.n)o.r=!0,o.p&&(o.p=o.p.n=void 0),delete n[o.i];e._f=e._l=void 0,e[m]=0},delete:function(e){var n=p(this,t),o=v(n,e);if(o){var i=o.n,a=o.p;delete n._i[o.i],o.r=!0,a&&(a.n=i),i&&(i.p=a),n._f==o&&(n._f=i),n._l==o&&(n._l=a),n[m]--}return!!o},forEach:function(e){p(this,t);for(var n,o=r(e,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(o(n.v,n.k,this);n&&n.r;)n=n.p},has:function(e){return!!v(p(this,t),e)}}),f&&o(u.prototype,"size",{get:function(){return p(this,t)[m]}}),u},def:function(e,t,n){var o,i,a=v(e,t);return a?a.v=n:(e._l=a={i:i=h(t,!0),k:t,v:n,p:o=e._l,n:void 0,r:!1},e._f||(e._f=a),o&&(o.n=a),e[m]++,"F"!==i&&(e._i[i]=a)),e},getEntry:v,setStrong:function(e,t,n){c(e,t,function(e,n){this._t=p(e,t),this._k=n,this._l=void 0},function(){for(var e=this._k,t=this._l;t&&t.r;)t=t.p;return this._t&&(this._l=t=t?t.n:this._t._f)?u(0,"keys"==e?t.k:"values"==e?t.v:[t.k,t.v]):(this._t=void 0,u(1))},n?"entries":"values",!n,!0),d(t)}}},ALrJ:function(e,t,n){var o=n("+ZMJ"),i=n("MU5D"),a=n("sB3e"),r=n("QRG4"),l=n("oeOm");e.exports=function(e,t){var n=1==e,s=2==e,c=3==e,u=4==e,d=6==e,f=5==e||d,h=t||l;return function(t,l,p){for(var m,v,b=a(t),g=i(b),y=o(l,p,3),C=r(g.length),P=0,w=n?h(t,C):s?h(t,0):void 0;C>P;P++)if((f||P in g)&&(v=y(m=g[P],P,b),e))if(n)w[P]=v;else if(v)switch(e){case 3:return!0;case 5:return m;case 6:return P;case 2:w.push(m)}else if(u)return!1;return d?-1:c||u?u:w}}},BDhv:function(e,t,n){var o=n("kM2E");o(o.P+o.R,"Set",{toJSON:n("m9gC")("Set")})},BO1k:function(e,t,n){e.exports={default:n("fxRn"),__esModule:!0}},CXw9:function(e,t,n){"use strict";var o,i,a,r,l=n("O4g8"),s=n("7KvD"),c=n("+ZMJ"),u=n("RY/4"),d=n("kM2E"),f=n("EqjI"),h=n("lOnJ"),p=n("2KxR"),m=n("NWt+"),v=n("t8x9"),b=n("L42u").set,g=n("82Mu")(),y=n("qARP"),C=n("dNDb"),P=n("iUbK"),w=n("fJUb"),_=s.TypeError,I=s.process,M=I&&I.versions,D=M&&M.v8||"",x=s.Promise,S="process"==u(I),A=function(){},T=i=y.f,k=!!function(){try{var e=x.resolve(1),t=(e.constructor={})[n("dSzd")("species")]=function(e){e(A,A)};return(S||"function"==typeof PromiseRejectionEvent)&&e.then(A)instanceof t&&0!==D.indexOf("6.6")&&-1===P.indexOf("Chrome/66")}catch(e){}}(),R=function(e){var t;return!(!f(e)||"function"!=typeof(t=e.then))&&t},N=function(e,t){if(!e._n){e._n=!0;var n=e._c;g(function(){for(var o=e._v,i=1==e._s,a=0,r=function(t){var n,a,r,l=i?t.ok:t.fail,s=t.resolve,c=t.reject,u=t.domain;try{l?(i||(2==e._h&&B(e),e._h=1),!0===l?n=o:(u&&u.enter(),n=l(o),u&&(u.exit(),r=!0)),n===t.promise?c(_("Promise-chain cycle")):(a=R(n))?a.call(n,s,c):s(n)):c(o)}catch(e){u&&!r&&u.exit(),c(e)}};n.length>a;)r(n[a++]);e._c=[],e._n=!1,t&&!e._h&&L(e)})}},L=function(e){b.call(s,function(){var t,n,o,i=e._v,a=E(e);if(a&&(t=C(function(){S?I.emit("unhandledRejection",i,e):(n=s.onunhandledrejection)?n({promise:e,reason:i}):(o=s.console)&&o.error&&o.error("Unhandled promise rejection",i)}),e._h=S||E(e)?2:1),e._a=void 0,a&&t.e)throw t.v})},E=function(e){return 1!==e._h&&0===(e._a||e._c).length},B=function(e){b.call(s,function(){var t;S?I.emit("rejectionHandled",e):(t=s.onrejectionhandled)&&t({promise:e,reason:e._v})})},j=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),N(t,!0))},O=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw _("Promise can't be resolved itself");(t=R(e))?g(function(){var o={_w:n,_d:!1};try{t.call(e,c(O,o,1),c(j,o,1))}catch(e){j.call(o,e)}}):(n._v=e,n._s=1,N(n,!1))}catch(e){j.call({_w:n,_d:!1},e)}}};k||(x=function(e){p(this,x,"Promise","_h"),h(e),o.call(this);try{e(c(O,this,1),c(j,this,1))}catch(e){j.call(this,e)}},(o=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n("xH/j")(x.prototype,{then:function(e,t){var n=T(v(this,x));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=S?I.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&N(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),a=function(){var e=new o;this.promise=e,this.resolve=c(O,e,1),this.reject=c(j,e,1)},y.f=T=function(e){return e===x||e===r?new a(e):i(e)}),d(d.G+d.W+d.F*!k,{Promise:x}),n("e6n0")(x,"Promise"),n("bRrM")("Promise"),r=n("FeBl").Promise,d(d.S+d.F*!k,"Promise",{reject:function(e){var t=T(this);return(0,t.reject)(e),t.promise}}),d(d.S+d.F*(l||!k),"Promise",{resolve:function(e){return w(l&&this===r?x:this,e)}}),d(d.S+d.F*!(k&&n("dY0y")(function(e){x.all(e).catch(A)})),"Promise",{all:function(e){var t=this,n=T(t),o=n.resolve,i=n.reject,a=C(function(){var n=[],a=0,r=1;m(e,!1,function(e){var l=a++,s=!1;n.push(void 0),r++,t.resolve(e).then(function(e){s||(s=!0,n[l]=e,--r||o(n))},i)}),--r||o(n)});return a.e&&i(a.v),n.promise},race:function(e){var t=this,n=T(t),o=n.reject,i=C(function(){m(e,!1,function(e){t.resolve(e).then(n.resolve,o)})});return i.e&&o(i.v),n.promise}})},EqBC:function(e,t,n){"use strict";var o=n("kM2E"),i=n("FeBl"),a=n("7KvD"),r=n("t8x9"),l=n("fJUb");o(o.P+o.R,"Promise",{finally:function(e){var t=r(this,i.Promise||a.Promise),n="function"==typeof e;return this.then(n?function(n){return l(t,e()).then(function(){return n})}:e,n?function(n){return l(t,e()).then(function(){throw n})}:e)}})},F7I5:function(e,t){},HpRW:function(e,t,n){"use strict";var o=n("kM2E"),i=n("lOnJ"),a=n("+ZMJ"),r=n("NWt+");e.exports=function(e){o(o.S,e,{from:function(e){var t,n,o,l,s=arguments[1];return i(this),(t=void 0!==s)&&i(s),void 0==e?new this:(n=[],t?(o=0,l=a(s,arguments[2],2),r(e,!1,function(e){n.push(l(e,o++))})):r(e,!1,n.push,n),new this(n))}})}},L42u:function(e,t,n){var o,i,a,r=n("+ZMJ"),l=n("knuC"),s=n("RPLV"),c=n("ON07"),u=n("7KvD"),d=u.process,f=u.setImmediate,h=u.clearImmediate,p=u.MessageChannel,m=u.Dispatch,v=0,b={},g=function(){var e=+this;if(b.hasOwnProperty(e)){var t=b[e];delete b[e],t()}},y=function(e){g.call(e.data)};f&&h||(f=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return b[++v]=function(){l("function"==typeof e?e:Function(e),t)},o(v),v},h=function(e){delete b[e]},"process"==n("R9M2")(d)?o=function(e){d.nextTick(r(g,e,1))}:m&&m.now?o=function(e){m.now(r(g,e,1))}:p?(a=(i=new p).port2,i.port1.onmessage=y,o=r(a.postMessage,a,1)):u.addEventListener&&"function"==typeof postMessage&&!u.importScripts?(o=function(e){u.postMessage(e+"","*")},u.addEventListener("message",y,!1)):o="onreadystatechange"in c("script")?function(e){s.appendChild(c("script")).onreadystatechange=function(){s.removeChild(this),g.call(e)}}:function(e){setTimeout(r(g,e,1),0)}),e.exports={set:f,clear:h}},LIJb:function(e,t,n){var o=n("EqjI");e.exports=function(e,t){if(!o(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},"NWt+":function(e,t,n){var o=n("+ZMJ"),i=n("msXi"),a=n("Mhyx"),r=n("77Pl"),l=n("QRG4"),s=n("3fs2"),c={},u={};(t=e.exports=function(e,t,n,d,f){var h,p,m,v,b=f?function(){return e}:s(e),g=o(n,d,t?2:1),y=0;if("function"!=typeof b)throw TypeError(e+" is not iterable!");if(a(b)){for(h=l(e.length);h>y;y++)if((v=t?g(r(p=e[y])[0],p[1]):g(e[y]))===c||v===u)return v}else for(m=b.call(e);!(p=m.next()).done;)if((v=i(m,g,p.value,t))===c||v===u)return v}).BREAK=c,t.RETURN=u},U5ju:function(e,t,n){n("M6a0"),n("zQR9"),n("+tPU"),n("CXw9"),n("EqBC"),n("jKW+"),e.exports=n("FeBl").Promise},Xd32:function(e,t,n){n("+tPU"),n("zQR9"),e.exports=n("5PlU")},"b/uI":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("woOf"),i=n.n(o),a=n("BO1k"),r=n.n(a),l=n("Dd8w"),s=n.n(l),c=n("/dO2"),u=n("vBUk"),d=n("qCJG"),f=n("XlQt"),h=n("doZQ"),p=n("NYxO"),m={name:"NurEditableTable",components:{NurIconPicker:d.default,hgbutton:f.default,hgswitch:h.default},props:{idKey:{type:String,default:"Tid"},showAddBtn:{type:Boolean,default:!0},showDeleteBtn:{type:Boolean,default:!0},showSave:{type:Boolean,default:!0},defaultRow:{type:Object,default:function(){}},tableData:{type:Array,default:function(){return[]}},columns:{type:Array,default:function(){return[]}},draggable:{type:Boolean,default:!1},showIndex:{type:Boolean,default:!0},showSelection:{type:Boolean,default:!1},tableId:{type:String},tableRef:{type:String,required:!0},showAction:{type:Object,default:function(){}},height:{type:Number,default:400}},data:function(){return{tid:"inm_"+Object(u.randomString)(),showCell:"",selectedRows:[],selectedRow:{}}},mounted:function(){this.draggable&&(document.body.ondrop=function(e){e.preventDefault(),e.stopPropagation()},this.initSortable())},created:function(){},computed:s()({elTableId:function(){return this.tableId?this.tableId:this.tableRef},tableHeight:function(){return this.height}},Object(p.b)(["styleCode"])),methods:{clearSelectedData:function(){this.selectedRow={},this.selectedRows=[]},propDescHandler:function(e,t){var n=e[t.prop],o=t.formItem.type,i=e[t.prop+"_Desc"];if(i&&t.editable)return i;if("select"===o){var a=t.formItem.options;return this.handleSelectDesc(n,a)}if("selectGroup"===o){var r=t.formItem.options.flatMap(function(e){return e.options});return this.handleSelectDesc(n,r)}if("singleCheckbox"===o){var l=t.formItem.options;return this.handleSelectDesc(n,l)}return n},handleSelectDesc:function(e,t){if(!e)return"";if(!t||!Array.isArray(t)||0===t.length)return"";if("[object String]"===Object.prototype.toString.call(e)){if(e.includes(",")){var n=e.split(","),o=[],i=function(e){var n=t.find(function(t){return t.value===e});o.push(n.label)},a=!0,l=!1,s=void 0;try{for(var c,u=r()(n);!(a=(c=u.next()).done);a=!0){i(c.value)}}catch(e){l=!0,s=e}finally{try{!a&&u.return&&u.return()}finally{if(l)throw s}}return o.join()}var d=t.find(function(t){return t.value===e});return d&&d.label?d.label:""}if(Array.isArray(e)){var f=[],h=function(e){var n=t.find(function(t){return t.value===e});if(!n)return"continue";f.push(n.label)},p=!0,m=!1,v=void 0;try{for(var b,g=r()(e);!(p=(b=g.next()).done);p=!0)h(b.value)}catch(e){m=!0,v=e}finally{try{!p&&g.return&&g.return()}finally{if(m)throw v}}return f.join()}},currentRowEdit:function(e){return this.selectedRow[this.idKey]===e[this.idKey]},handleQueryFkDesc:function(e){var t=this.tableData.findIndex(function(t){return t.Tid===e.Tid});this.$emit("load-foreign-key",t)},handleAction:function(e){var t=this.tableData.findIndex(function(t){return t.Tid===e.Tid});this.$emit("loadForm",t)},handleAdd:function(){this.selectedRow={},this.$emit("add-row")},handleDelete:function(){this.$emit("delete-rows",this.selectedRows)},handleSave:function(){this.$emit("save")},handleCellClick:function(e,t,n){this.showCell=t.property+"_"+e.Tid},handleRowClick:function(e){this.showSelection?this.$refs[this.tableRef].toggleRowSelection(e):this.selectedRows=[e]},onSelectChange:function(e,t){if(t.computed){var n=e[t.prop];n=Array.isArray(n)?n[0]:n;var o=t.formItem.options.find(function(e){return e.value===n}),i=!0,a=!1,l=void 0;try{for(var s,c=r()(t.computed);!(i=(s=c.next()).done);i=!0){var u=s.value,d=u.col,f=u.option;f=f||"value",e[d]=o?o[f]:""}}catch(e){a=!0,l=e}finally{try{!i&&c.return&&c.return()}finally{if(a)throw l}}}},onMouseLeave:function(){this.selectedRow={}},handleRowDblClick:function(e){this.selectedRow=e},handleSelectionChange:function(e){this.showSelection&&(this.selectedRows=e)},add:function(){this.tableData.push({})},getCompProps:function(e){var t=i()({},e);return"select"===t.type&&delete t.options,delete t.type,t.size="mini",t},initSortable:function(){var e=this,t=this,n="#"+t.elTableId+" .el-table__body>tbody",o=t.$refs[t.tableRef].$el.querySelector(n);c.a.create(o,{animation:150,handle:".sortable-handle",filter:".sortable-disabled",dragClass:"sortable-drag",ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",onEnd:function(n){var o=n.newIndex,i=n.oldIndex;e.$emit("drag",o,i);var a=t.tableData[i];t.tableData.splice(i,1),t.tableData.splice(o,0,a);for(var r=Math.min(o,i),l=Math.max(o,i),s=r;s<=l;s++)t.tableData[s].Sort=s+1},onUpdate:function(e){e.newIndex,e.oldIndex}})}}},v={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"nur-editable-table"},[n("div",{staticClass:"top-tool-button"},[e.showAddBtn?n("hgbutton",{attrs:{type:"text",issvg:e.styleCode,icon:e.styleCode?"#nm-icon-add":"nm-icon-lite-add"},on:{click:e.handleAdd}},[e._v("新增")]):e._e(),e._v(" "),e.showDeleteBtn?n("hgbutton",{attrs:{type:"text",issvg:e.styleCode,icon:e.styleCode?"#nm-icon-cancel":"nm-icon-lite-cancel"},on:{click:e.handleDelete}},[e._v("删除")]):e._e(),e._v(" "),e.showSave?n("hgbutton",{attrs:{type:"text",issvg:e.styleCode,icon:e.styleCode?"#nm-icon-save":"nm-icon-lite-save"},on:{click:e.handleSave}},[e._v("保存")]):e._e()],1),e._v(" "),n("div",{staticClass:"top-tool-table dialog-table-bottom-radius"},[n("el-table",{ref:e.tableRef,staticClass:"dialog-table-bottom-radius",staticStyle:{"border-bottom":"0"},attrs:{id:e.elTableId,data:e.tableData,"highlight-current-row":"","row-key":"Tid",height:e.tableHeight,"header-cell-style":e.headerCellFontWeight,border:e.styleCode},on:{"selection-change":e.handleSelectionChange,"cell-click":e.handleCellClick,"row-dblclick":e.handleRowDblClick,"row-click":e.handleRowClick}},[e.draggable?n("el-table-column",{attrs:{label:"拖拽",width:"60",align:"center"}},[[n("i",{staticClass:"el-icon-s-unfold sortable-handle",staticStyle:{"font-size":"24px"}})]],2):e._e(),e._v(" "),e.showSelection?n("el-table-column",{attrs:{type:"selection",width:"40",align:"center"}}):e._e(),e._v(" "),e.showIndex?n("el-table-column",{attrs:{type:"index",width:"40",align:"center"}}):e._e(),e._v(" "),e._l(e.columns,function(t){return n("el-table-column",{key:t.prop,attrs:{prop:t.prop,label:t.label,width:t.width,align:t.align},scopedSlots:e._u([{key:"default",fn:function(o){var i=o.row;return o.col,o.$index,[t.editable&&e.currentRowEdit(i)?n("div",["input"===t.formItem.type?n("el-input",e._b({model:{value:i[t.prop],callback:function(n){e.$set(i,t.prop,n)},expression:"row[column.prop]"}},"el-input",e.getCompProps(t.formItem),!1)):"inputNumber"===t.formItem.type?n("el-input-number",e._b({model:{value:i[t.prop],callback:function(n){e.$set(i,t.prop,n)},expression:"row[column.prop]"}},"el-input-number",e.getCompProps(t.formItem),!1)):"select"===t.formItem.type?n("el-select",e._b({attrs:{clearable:"",filterable:""},on:{change:function(n){return e.onSelectChange(i,t)}},model:{value:i[t.prop],callback:function(n){e.$set(i,t.prop,n)},expression:"row[column.prop]"}},"el-select",e.getCompProps(t.formItem),!1),e._l(t.formItem.options,function(e){return n("el-option",{key:e.value,attrs:{value:e.value,label:e.label}})}),1):"selectGroup"===t.formItem.type?n("el-select",e._b({model:{value:i[t.prop],callback:function(n){e.$set(i,t.prop,n)},expression:"row[column.prop]"}},"el-select",e.getCompProps(t.formItem),!1),e._l(t.formItem.options,function(t){return n("el-option-group",{key:t.label,attrs:{label:t.label}},e._l(t.options,function(e){return n("el-option",{key:e.value,attrs:{value:e.value,label:e.label}})}),1)}),1):"switch"===t.formItem.type?n("hgswitch",e._b({model:{value:i[t.prop],callback:function(n){e.$set(i,t.prop,n)},expression:"row[column.prop]"}},"hgswitch",e.getCompProps(t.formItem),!1)):"singleCheckbox"===t.formItem.type?n("el-checkbox",e._b({model:{value:i[t.prop],callback:function(n){e.$set(i,t.prop,n)},expression:"row[column.prop]"}},"el-checkbox",e.getCompProps(t.formItem),!1)):"nurIconPicker"===t.formItem.type?n("nur-icon-picker",e._b({model:{value:i[t.prop],callback:function(n){e.$set(i,t.prop,n)},expression:"row[column.prop]"}},"nur-icon-picker",e.getCompProps(t.formItems),!1)):e._e()],1):n("span",[e._v(e._s(e.propDescHandler(i,t)))])]}}],null,!0)})}),e._v(" "),e.showAction&&e.showAction.show?n("el-table-column",{attrs:{label:e.showAction.label,align:e.showAction.align},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.row;return[n("el-popover",{attrs:{placement:"right",width:"200",trigger:"click"}},[n("ol",{staticClass:"nm-more-setting"},[n("li",{on:{click:function(t){return e.handleQueryFkDesc(o)}}},[n("i",{staticClass:"el-icon-finished",staticStyle:{"font-size":"16px"}}),e._v(" "),n("span",{staticStyle:{"padding-left":"4px"}},[e._v("配置外键描述查询字段")])]),e._v(" "),n("li",{on:{click:function(t){return e.handleAction(o)}}},[n("i",{staticClass:"el-icon-cpu",staticStyle:{"font-size":"16px"}}),e._v(" "),n("span",{staticStyle:{"padding-left":"4px"}},[e._v("配置下拉数据源API")])])]),e._v(" "),n("i",{staticClass:"el-icon-more",staticStyle:{"font-size":"14px",cursor:"pointer"},attrs:{slot:"reference"},slot:"reference"})])]}}],null,!1,4159572702)}):e._e()],2)],1)])},staticRenderFns:[]};var b=n("VU/8")(m,v,!1,function(e){n("F7I5")},null,null);t.default=b.exports},bRrM:function(e,t,n){"use strict";var o=n("7KvD"),i=n("FeBl"),a=n("evD5"),r=n("+E39"),l=n("dSzd")("species");e.exports=function(e){var t="function"==typeof i[e]?i[e]:o[e];r&&t&&!t[l]&&a.f(t,l,{configurable:!0,get:function(){return this}})}},d7EF:function(e,t,n){"use strict";t.__esModule=!0;var o=a(n("us/S")),i=a(n("BO1k"));function a(e){return e&&e.__esModule?e:{default:e}}t.default=function(){return function(e,t){if(Array.isArray(e))return e;if((0,o.default)(Object(e)))return function(e,t){var n=[],o=!0,a=!1,r=void 0;try{for(var l,s=(0,i.default)(e);!(o=(l=s.next()).done)&&(n.push(l.value),!t||n.length!==t);o=!0);}catch(e){a=!0,r=e}finally{try{!o&&s.return&&s.return()}finally{if(a)throw r}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},dNDb:function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},fJUb:function(e,t,n){var o=n("77Pl"),i=n("EqjI"),a=n("qARP");e.exports=function(e,t){if(o(e),i(t)&&t.constructor===e)return t;var n=a.f(e);return(0,n.resolve)(t),n.promise}},fxRn:function(e,t,n){n("+tPU"),n("zQR9"),e.exports=n("g8Ux")},g8Ux:function(e,t,n){var o=n("77Pl"),i=n("3fs2");e.exports=n("FeBl").getIterator=function(e){var t=i(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return o(t.call(e))}},iUbK:function(e,t,n){var o=n("7KvD").navigator;e.exports=o&&o.userAgent||""},ioQ5:function(e,t,n){n("HpRW")("Set")},"jKW+":function(e,t,n){"use strict";var o=n("kM2E"),i=n("qARP"),a=n("dNDb");o(o.S,"Promise",{try:function(e){var t=i.f(this),n=a(e);return(n.e?t.reject:t.resolve)(n.v),t.promise}})},knuC:function(e,t){e.exports=function(e,t,n){var o=void 0===n;switch(t.length){case 0:return o?e():e.call(n);case 1:return o?e(t[0]):e.call(n,t[0]);case 2:return o?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return o?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return o?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},lHA8:function(e,t,n){e.exports={default:n("pPW7"),__esModule:!0}},m9gC:function(e,t,n){var o=n("RY/4"),i=n("4WTo");e.exports=function(e){return function(){if(o(this)!=e)throw TypeError(e+"#toJSON isn't generic");return i(this)}}},oNmr:function(e,t,n){n("9Bbf")("Set")},oeOm:function(e,t,n){var o=n("7Doy");e.exports=function(e,t){return new(o(e))(t)}},pPW7:function(e,t,n){n("M6a0"),n("zQR9"),n("+tPU"),n("ttyz"),n("BDhv"),n("oNmr"),n("ioQ5"),e.exports=n("FeBl").Set},qARP:function(e,t,n){"use strict";var o=n("lOnJ");e.exports.f=function(e){return new function(e){var t,n;this.promise=new e(function(e,o){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=o}),this.resolve=o(t),this.reject=o(n)}(e)}},qCJG:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("IcnI"),i={name:"NurIconPicker",data:function(){return{name:"",icons:[{label:"常用图标",options:[{value:o.a.getters.styleCode?"nm-icon-w-plus":"nm-icon-lite-w-plus",label:o.a.getters.styleCode?"nm-icon-w-plus":"nm-icon-lite-w-plus"},{value:o.a.getters.styleCode?"nm-icon-w-edit-log":"nm-icon-lite-write-order",label:o.a.getters.styleCode?"nm-icon-w-edit-log":"nm-icon-lite-write-order"},{value:o.a.getters.styleCode?"nm-icon-w-close":"nm-icon-lite-w-close",label:o.a.getters.styleCode?"nm-icon-w-close":"nm-icon-lite-w-close"},{value:o.a.getters.styleCode?"nm-icon-w-find":"nm-icon-lite-w-find",label:o.a.getters.styleCode?"nm-icon-w-find":"nm-icon-lite-w-find"},{value:o.a.getters.styleCode?"nm-icon-w-save":"nm-icon-lite-save",label:o.a.getters.styleCode?"nm-icon-w-save":"nm-icon-lite-save"},{value:o.a.getters.styleCode?"nm-icon-w-submit":"nm-icon-lite-submit",label:o.a.getters.styleCode?"nm-icon-w-submit":"nm-icon-lite-submit"},{value:o.a.getters.styleCode?"nm-icon-chexiao":"nm-icon-lite-chexiao",label:o.a.getters.styleCode?"nm-icon-chexiao":"nm-icon-lite-chexiao"},{value:o.a.getters.styleCode?"nm-icon-w-ok":"nm-icon-lite-ok",label:o.a.getters.styleCode?"nm-icon-w-ok":"nm-icon-lite-ok"},{value:o.a.getters.styleCode?"nm-icon-publish":"nm-icon-lite-plane",label:o.a.getters.styleCode?"nm-icon-publish":"nm-icon-lite-plane"},{value:o.a.getters.styleCode?"nm-icon-xiazai":"nm-icon-lite-download",label:o.a.getters.styleCode?"nm-icon-xiazai":"nm-icon-lite-download"},{value:o.a.getters.styleCode?"nm-icon-w-back":"nm-icon-lite-w-back",label:o.a.getters.styleCode?"nm-icon-w-back":"nm-icon-lite-w-back"},{value:o.a.getters.styleCode?"nm-icon-del":"nm-icon-lite-del",label:o.a.getters.styleCode?"nm-icon-del":"nm-icon-lite-del"},{value:o.a.getters.styleCode?"nm-icon-w-print":"nm-icon-lite-print",label:o.a.getters.styleCode?"nm-icon-w-print":"nm-icon-lite-print"},{value:o.a.getters.styleCode?"nm-icon-excel":"nm-icon-lite-excel",label:o.a.getters.styleCode?"nm-icon-excel":"nm-icon-lite-excel"},{value:o.a.getters.styleCode?"nm-icon-tongji":"nm-icon-lite-chart",label:o.a.getters.styleCode?"nm-icon-tongji":"nm-icon-lite-chart"}]}]}},props:{value:{type:String},size:{type:String,default:"mini"}},computed:{val:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}},methods:{selectIcon:function(e){this.name=e,this.$emit("select",e)}}},a={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"nur-icon-picker"}},[n("el-select",{attrs:{placeholder:"请选择",size:e.size},model:{value:e.val,callback:function(t){e.val=t},expression:"val"}},e._l(e.icons,function(t){return n("el-option-group",{key:t.label,staticClass:"nur-icon-picker-dropdown",attrs:{label:t.label}},e._l(t.options,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}},[n("i",{class:e.value,staticStyle:{"font-size":"20px"}})])}),1)}),1)],1)},staticRenderFns:[]};var r=n("VU/8")(i,a,!1,function(e){n("/oEb")},"data-v-256cc8fc",null);t.default=r.exports},qo66:function(e,t,n){"use strict";var o=n("7KvD"),i=n("kM2E"),a=n("06OY"),r=n("S82l"),l=n("hJx8"),s=n("xH/j"),c=n("NWt+"),u=n("2KxR"),d=n("EqjI"),f=n("e6n0"),h=n("evD5").f,p=n("ALrJ")(0),m=n("+E39");e.exports=function(e,t,n,v,b,g){var y=o[e],C=y,P=b?"set":"add",w=C&&C.prototype,_={};return m&&"function"==typeof C&&(g||w.forEach&&!r(function(){(new C).entries().next()}))?(C=t(function(t,n){u(t,C,e,"_c"),t._c=new y,void 0!=n&&c(n,b,t[P],t)}),p("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(e){var t="add"==e||"set"==e;e in w&&(!g||"clear"!=e)&&l(C.prototype,e,function(n,o){if(u(this,C,e),!t&&g&&!d(n))return"get"==e&&void 0;var i=this._c[e](0===n?0:n,o);return t?this:i})}),g||h(C.prototype,"size",{get:function(){return this._c.size}})):(C=v.getConstructor(t,e,b,P),s(C.prototype,n),a.NEED=!0),f(C,e),_[e]=C,i(i.G+i.W+i.F,_),g||v.setStrong(C,e,b),C}},t8x9:function(e,t,n){var o=n("77Pl"),i=n("lOnJ"),a=n("dSzd")("species");e.exports=function(e,t){var n,r=o(e).constructor;return void 0===r||void 0==(n=o(r)[a])?t:i(n)}},ttyz:function(e,t,n){"use strict";var o=n("9C8M"),i=n("LIJb");e.exports=n("qo66")("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return o.def(i(this,"Set"),e=0===e?0:e,e)}},o)},u8ul:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("lHA8"),i=n.n(o),a=n("c/Tr"),r=n.n(a),l=n("woOf"),s=n.n(l),c=n("Dd8w"),u=n.n(c),d=n("b/uI"),f=n("2N8g"),h=n("Eb5U"),p=n("vBUk"),m=n("NYxO"),v=n("XlQt"),b=[{prop:"PropertyName",label:"属性名",width:"160"},{prop:"PropertyDesc",label:"属性描述",width:"160"}],g={name:"PageSettingModal",components:{NurEditableTable:d.default,DhcDictSelect:f.default,hgbutton:v.default},data:function(){return{tableConfig:h.TableConfig.table,queryConfig:h.TableConfig.query,buttonConfig:h.TableConfig.button,activeTab:"table",api:{list:{ClassName:"web.INMLCDPComm",MethodName:"FindDataBySql",MethodType:"JsonQuery"},mulList:{ClassName:"web.INMLCDPComm",MethodName:"FindDataBySqlMultiple",MethodType:"JsonMethod"},saveBatch:{ClassName:"web.INMLCDPComm",MethodName:"SaveAllData",MethodType:"JsonMethod"},saveQuery:{ClassName:"web.INMLCDPComm",MethodName:"SaveQuery",MethodType:"JsonMethod"},listQuery:{ClassName:"web.INMLCDPComm",MethodName:"FindLCDPQuery",MethodType:"JsonMethod"}},formRules:{},formItems:[],formModel:{APIDR:"",APIClass:"",APIMethod:"",APIMethodType:"",APIParameter:[{Key:"",Value:""}],WidgetAPIDesc:"",WidgetAPICode:""},formConfig:{labelPosition:"right",labelWidth:"100px",inline:!0},visibleEditor:!1,dialogConfig:{title:"更多设置",width:"710px",appendToBody:!0,modal:!0,closeOnClickModal:!1},methodTypes:h.ApiMethodType,fieldList:[],queryApiIndex:-1,tempIdKey:"Tid",propStore:[],propTableData:[],propTableColumns:b,propPagination:{pageSize:20,pageSizes:[20,30,50,100,200,400],total:0,currentPage:1,layout:"total,sizes,prev,pager,next,jumper"},currentClazz:"",selectedPropList:[],showPropDialog:!1,propDialogConfig:{title:"外键描述字段配置",width:"600px",appendToBody:!0,modal:!0,closeOnClickModal:!1}}},props:{classId:[Number,String]},created:function(){this.loadPropData(),this.loadQueryConfig(),this.loadTableData(),this.loadButtonConfig()},mounted:function(){},updated:function(){},destroyed:function(){},watch:{},computed:u()({},Object(m.b)(["LoginId","Height","styleCode"]),{apiListParam:function(){var e={nurseId:this.LoginId,start:0,end:1e4};return s()({},{ClassName:"web.INMLCDPComm",MethodName:"FindDataBySql",MethodType:"JsonQuery"},e,{className:"CT.DHCINM.LCDP.MgAPI"})},tableHeight:function(){return this.Height+87-162}}),methods:{handleConfirmDescKeys:function(){this.selectedPropList.map(function(e){return e.PropertyName})},handlePropRowClick:function(e,t,n){this.$refs.propTable.toggleRowSelection(e)},handleSelectionChange:function(e){this.selectedPropList=e},handleTabClick:function(){},handleApiChange:function(e){var t=this,n={id:e},o=s()({},{ClassName:"web.INMLCDPComm",MethodName:"GetAPI",MethodType:"JsonMethod"},n);this.asyncRequest(o).then(function(e){var n=e.data,o=n.APIClass,i=n.APIMethod,a=n.APIMethodType,r=n.APIParameter;t.formModel=s()({},t.formModel,{APIClass:o,APIMethod:i,APIMethodType:a,APIParameter:r}),t.fieldList=[],Array.isArray(n.ReturnList)&&n.ReturnList.forEach(function(e){t.fieldList.push({value:e.ReturnCode,label:e.ReturnCode})})})},addParam:function(){this.formModel.APIParameter.push({Key:"",Value:""})},removeParam:function(e){this.formModel.APIParameter.length<1?this.nurMessage.warning("至少需要一个参数"):e>-1&&this.formModel.APIParameter.splice(e,1)},handleSelectFk:function(e){this.queryApiIndex=e,this.loadPropTableData()},handleEditApi:function(e){this.queryApiIndex=e;var t=this.queryConfig.tableData[e];if("nurDictSelect"===t.WidgetType){var n=t.APIClass,o=t.APIMethod,i=t.APIMethodType,a=t.APIParameter,r=t.WidgetAPICode,l=t.WidgetAPIDesc,c=t.APIDR;a=a||[{Key:"",Value:""}],this.visibleEditor=!0,this.formModel=s()({},this.formModel,{APIClass:n,APIMethod:o,APIMethodType:i,APIParameter:a,WidgetAPICode:r,WidgetAPIDesc:l,APIDR:c}),this.handleApiChange(c)}else this.nurMessage.warning("只有下拉选择框才可以配置数据源")},handleSaveApi:function(){this.queryConfig.tableData[this.queryApiIndex]=s()({},this.queryConfig.tableData[this.queryApiIndex],this.formModel),this.visibleEditor=!1},close:function(){this.$emit("close")},handleAddButton:function(){var e="tid_"+Object(p.randomString)(8);this.buttonConfig.tableData.push({Tid:e,Status:"Y",ButtonStyle:"text"})},handleDeleteButton:function(e){this.deleteRows(this.buttonConfig.tableData,e,"CT.DHCINM.LCDP.MgButton")},handleSaveButton:function(){this.handleSave()},handleAddQuery:function(){var e="tid_"+Object(p.randomString)(8);this.queryConfig.tableData.push({Tid:e,Status:"Y",WidgetType:"normalInput",WidgetOperator:"="})},handleDeleteQuery:function(e){this.deleteRows(this.queryConfig.tableData,e,"CT.DHCINM.LCDP.MgQuery")},handleSaveQuery:function(){this.handleSave()},handleSave:function(){var e=this,t=[{tab:"table",clazz:"CT.DHCINM.LCDP.MgTable",api:this.api.saveBatch,keyProp:"FieldCode"},{tab:"query",clazz:"CT.DHCINM.LCDP.MgQuery",api:this.api.saveQuery,keyProp:"WidgetCode"},{tab:"button",clazz:"CT.DHCINM.LCDP.MgButton",api:this.api.saveBatch,keyProp:"ButtonCode"}],n=this[this.activeTab+"Config"].tableData,o=t.find(function(t){return t.tab===e.activeTab}),a=o.clazz,l=o.api,c=o.keyProp,u=n.map(function(e){return e[c]}),d=r()(new i.a(u));if(u.length===d.length)if(u.some(function(e){return!e}))this.nurMessage.error("保存失败，存在空的字段编码");else{n.map(function(t,n){t.Parref=e.classId,t.Sort=n+1});var f=s()({},l,{list:n,className:a});this.asyncRequest(f).then(function(t){t.data>0?(e.nurMessage.success("保存属性配置成功"),"table"===e.activeTab?e.loadTableData():"query"===e.activeTab?e.loadQueryConfig():e.loadButtonConfig()):e.nurMessage.warning("保存属性配置失败")})}else this.nurMessage.error("字段编码存在重复")},handleSaveTable:function(){var e=this,t=this.tableConfig.tableData,n=t.map(function(e){return e.FieldCode}),o=r()(new i.a(n));if(n.length===o.length)if(n.some(function(e){return!e}))this.nurMessage.error("保存失败，存在空的显示编码");else{t.map(function(t,n){t.Parref=e.classId,t.Sort=n+1});var a=s()({},this.api.saveBatch,{list:t,className:"CT.DHCINM.LCDP.MgTable"});this.asyncRequest(a).then(function(t){t.data>0?(e.nurMessage.success("保存属性配置成功"),e.loadTableData()):e.nurMessage.warning("保存属性配置失败")})}else this.nurMessage.error("显示编码存在重复")},handleAddTable:function(){var e="tid_"+Object(p.randomString)(8);this.tableConfig.tableData.push({Tid:e,FieldDisplay:"Y",FieldSort:"N",FieldLock:"N",FieldWidth:"120"})},handleDeleteTable:function(e){this.deleteRows(this.tableConfig.tableData,e,"CT.DHCINM.LCDP.MgTable")},submit:function(){this.nurMessage.success("配置信息提交成功")},deleteRows:function(e,t,n){var o=this;if(t&&Array.isArray(t))if(0!==t.length){var i=[];if(t.forEach(function(t){var n=e.findIndex(function(e){return e.Tid===t.Tid});if(n>-1){var o=e[n].RowId;o&&i.push(o),e.splice(n,1)}}),0!==i.length){var a=s()({},{ClassName:"web.INMLCDPComm",MethodName:"DeleteAllData",MethodType:"JsonMethod"},{className:n,rowIds:i});this.asyncRequest(a).then(function(e){e.data>0?(o.nurMessage.success("删除成功"),"CT.DHCINM.LCDP.MgTable"===n?o.loadTableData():"CT.DHCINM.LCDP.MgQuery"===n?o.loadQueryConfig():o.loadButtonConfig()):o.nurMessage.warning("删除出错")}).catch(function(){o.nurMessage.error("删除失败，网络错误")})}}else this.nurMessage.warning("请选择需要删除的行数据")},loadData:function(e){},loadButtonConfig:function(){var e=this,t={Parref:this.classId},n=s()({},this.api.mulList,{className:"CT.DHCINM.LCDP.MgButton",conditions:[{prop:"Parref",operator:"=",model:"Parref"}],array:t,nurseId:this.LoginId,start:0,end:1e4});this.asyncRequest(n).then(function(t){var n=t.data;e.buttonConfig.tableData=n.rows,e.buttonConfig.tableData.map(function(e){return e.Tid="tid_"+Object(p.randomString)(8)})})},loadQueryConfig:function(){var e=this,t=("CT.DHCINM.LCDP.MgQuery".startsWith("%"),{ClassDR:this.classId}),n=s()({},this.api.listQuery,{array:t});this.asyncRequest(n).then(function(t){var n=t.data;e.queryConfig.tableData=n.rows,e.queryConfig.tableData.map(function(e){return e.Tid="tid_"+Object(p.randomString)(8)})})},loadTableData:function(){var e=this,t={Parref:this.classId},n=s()({},this.api.mulList,{className:"CT.DHCINM.LCDP.MgTable",conditions:[{prop:"Parref",operator:"=",model:"Parref"}],array:t,nurseId:this.LoginId,start:0,end:1e4});this.asyncRequest(n).then(function(t){e.tableConfig.tableData=t.data.rows,e.tableConfig.tableData.map(function(e){return e.Tid="tid_"+Object(p.randomString)(8)})})},loadPropData:function(){var e=this,t={Parref:this.classId},n=s()({},this.api.mulList,{className:"CT.DHCINM.LCDP.MgProperty",conditions:[{prop:"Parref",operator:"=",model:"Parref"}],array:t,nurseId:this.LoginId,start:0,end:1e4});this.asyncRequest(n).then(function(t){var n=t.data.rows;e.propStore=n;var o=n.map(function(e){var t={};return t.label=e.PropertyDesc,t.value=e.RowId,t.PropertyName=e.PropertyName,t});e.tableConfig.columns[0].formItem.options=o,e.queryConfig.columns[0].formItem.options=o})},handlePageSizeChange:function(e){this.propPagination.pageSize=e,this.loadPropTableData()},handleCurrentChange:function(e){this.propPagination.currentPage=e,this.loadPropTableData()},loadPropTableData:function(){var e=this,t=this.queryConfig.tableData[this.queryApiIndex];if("normalInput"===t.WidgetType){var n=this.propStore.find(function(e){return e.RowId===t.WidgetProp});if(n){var o=n.PropertyType;if(o.startsWith("%"))this.nurMessage.warning("映射字段类型为基本类型不可设置描述字段");else{var i=this.propPagination,a=i.currentPage,r=i.pageSize,l=(a-1)*r,c=r,u=s()({},{ClassName:"web.INMLCDPComm",MethodName:"FindProp",MethodType:"JsonQuery"},{className:o,array:{PropName:""},start:l,limit:c});this.asyncRequest(u).then(function(t){var n=t.data;n instanceof Object?(e.propTableData=n.rows,e.propPagination.total=parseInt(n.results),e.showPropDialog=!0):e.nurMessage.warning("服务器错误，请检查后端")}).catch(function(t){return e.nurMessage.error("请求出错，网络故障:",t)})}}else this.nurMessage.warning("设置的映射字段不存在")}else this.nurMessage.warning("只有输入框的查询组件才需要配置描述字段")}}},y={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"db-design-dialog-wrapper",attrs:{id:"page-setting-modal"}},[n("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.handleTabClick},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[n("el-tab-pane",{attrs:{label:"列表配置",name:"table"}},[n("nur-editable-table",e._b({attrs:{"table-id":"table-config","table-ref":"tableConfig",height:e.Height-112},on:{"add-row":e.handleAddTable,"delete-rows":e.handleDeleteTable,save:e.handleSaveTable}},"nur-editable-table",e.tableConfig,!1))],1),e._v(" "),n("el-tab-pane",{attrs:{label:"查询配置",name:"query"}},[n("nur-editable-table",e._b({attrs:{"table-id":"query-config","table-ref":"queryConfig",height:e.Height-112},on:{"add-row":e.handleAddQuery,"delete-rows":e.handleDeleteQuery,save:e.handleSaveQuery,loadForm:e.handleEditApi,"load-foreign-key":e.handleSelectFk}},"nur-editable-table",e.queryConfig,!1))],1),e._v(" "),n("el-tab-pane",{attrs:{label:"按钮配置",name:"button"}},[n("nur-editable-table",e._b({attrs:{"table-id":"button-config","table-ref":"buttonConfig",height:e.Height-112},on:{"add-row":e.handleAddButton,"delete-rows":e.handleDeleteButton,save:e.handleSaveButton}},"nur-editable-table",e.buttonConfig,!1))],1)],1),e._v(" "),n("el-dialog",e._b({attrs:{visible:e.showPropDialog},on:{"update:visible":function(t){e.showPropDialog=t}}},"el-dialog",e.propDialogConfig,!1),[n("div",{staticClass:"top-tool-buttonDiv"},[n("hgbutton",{attrs:{type:"default",styleCode:e.styleCode},on:{click:e.handleConfirmDescKeys}},[e._v("确认")])],1),e._v(" "),n("div",{staticClass:"nm-prop-table"},[n("el-table",e._g({ref:"propTable",attrs:{data:e.propTableData,"highlight-current-row":"",border:"",height:400}},{"row-click":e.handlePropRowClick,"selection-change":e.handleSelectionChange}),[n("el-table-column",{attrs:{type:"selection",width:"60"}}),e._v(" "),n("el-table-column",{attrs:{type:"index",width:"60"}}),e._v(" "),e._l(e.propTableColumns,function(t,o){return n("el-table-column",e._b({key:o},"el-table-column",t,!1))}),e._v(" "),n("el-table-column")],2),e._v(" "),n("el-pagination",e._g(e._b({},"el-pagination",e.propPagination,!1),{"size-change":e.handlePageSizeChange,"current-change":e.handleCurrentChange}))],1)]),e._v(" "),n("el-dialog",e._b({attrs:{visible:e.visibleEditor},on:{"update:visible":function(t){e.visibleEditor=t}}},"el-dialog",e.dialogConfig,!1),[n("el-form",e._b({ref:"formRef",attrs:{model:e.formModel,rules:e.formRules}},"el-form",e.formConfig,!1),[n("el-form-item",{attrs:{prop:"APIDR",label:"API"}},[n("dhc-dict-select",{staticStyle:{width:"200px"},attrs:{queryParam:e.apiListParam,dictKey:"RowId",dictLabel:"APIMethodDesc",dictValue:["RowId"],"trigger-change":""},on:{change:e.handleApiChange},model:{value:e.formModel.APIDR,callback:function(t){e.$set(e.formModel,"APIDR",t)},expression:"formModel.APIDR"}})],1),e._v(" "),n("el-form-item",{attrs:{prop:"APIClass",label:"类名"}},[n("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请填写类名",size:"mini"},model:{value:e.formModel.APIClass,callback:function(t){e.$set(e.formModel,"APIClass",t)},expression:"formModel.APIClass"}})],1),e._v(" "),n("el-form-item",{attrs:{prop:"APIMethod",label:"方法名"}},[n("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请填写方法名",size:"mini"},model:{value:e.formModel.APIMethod,callback:function(t){e.$set(e.formModel,"APIMethod",t)},expression:"formModel.APIMethod"}})],1),e._v(" "),n("el-form-item",{attrs:{prop:"APIMethodType",label:"方法类型"}},[n("dhc-dict-select",{staticStyle:{width:"200px"},attrs:{"dict-data":e.methodTypes,dictKey:"value",dictLabel:"label",dictValue:["value"]},model:{value:e.formModel.APIMethodType,callback:function(t){e.$set(e.formModel,"APIMethodType",t)},expression:"formModel.APIMethodType"}})],1),e._v(" "),e._l(e.formModel.APIParameter,function(t,o){return n("el-form-item",{key:o,attrs:{label:"参数"+(o+1),prop:"APIParameter."+o+".Value"}},[n("el-input",{staticStyle:{width:"80px"},attrs:{placeholder:"参数名",size:"mini"},model:{value:t.Key,callback:function(n){e.$set(t,"Key",n)},expression:"param.Key"}}),e._v(" "),n("el-input",{staticStyle:{width:"80px"},attrs:{placeholder:"参数值",size:"mini"},model:{value:t.Value,callback:function(n){e.$set(t,"Value",n)},expression:"param.Value"}}),e._v(" "),n("i",{staticClass:"el-icon-plus nurIcon",on:{click:e.addParam}}),e._v(" "),n("i",{staticClass:"el-icon-minus nurIcon",on:{click:function(t){return e.removeParam(o)}}})],1)}),e._v(" "),n("br"),e._v(" "),n("el-form-item",{attrs:{prop:"labelKey",label:"label"}},[n("dhc-dict-select",{staticStyle:{width:"200px"},attrs:{"dict-data":e.fieldList,dictKey:"value",dictLabel:"label",dictValue:["value"]},model:{value:e.formModel.WidgetAPIDesc,callback:function(t){e.$set(e.formModel,"WidgetAPIDesc",t)},expression:"formModel.WidgetAPIDesc"}})],1),e._v(" "),n("el-form-item",{attrs:{prop:"valueKey",label:"value"}},[n("dhc-dict-select",{staticStyle:{width:"200px"},attrs:{"dict-data":e.fieldList,dictKey:"value",dictLabel:"label",dictValue:["value"]},model:{value:e.formModel.WidgetAPICode,callback:function(t){e.$set(e.formModel,"WidgetAPICode",t)},expression:"formModel.WidgetAPICode"}})],1)],2),e._v(" "),n("div",{staticClass:"bottom-button"},[n("hgbutton",{attrs:{type:e.styleCode?"default":"success",styleCode:e.styleCode},on:{click:function(t){return e.handleSaveApi()}}},[e._v("保存")]),e._v(" "),n("hgbutton",{attrs:{type:"default"},on:{click:function(t){e.visibleEditor=!1}}},[e._v("关闭")])],1)],1)],1)},staticRenderFns:[]};var C=n("VU/8")(g,y,!1,function(e){n("+XUz")},null,null);t.default=C.exports},"us/S":function(e,t,n){e.exports={default:n("Xd32"),__esModule:!0}},"xH/j":function(e,t,n){var o=n("hJx8");e.exports=function(e,t,n){for(var i in t)n&&e[i]?e[i]=t[i]:o(e,i,t[i]);return e}}});