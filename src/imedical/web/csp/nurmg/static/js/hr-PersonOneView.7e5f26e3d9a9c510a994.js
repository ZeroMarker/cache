webpackJsonp([169],{Db5U:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("f0Md"),i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"show",rawName:"v-show",value:!0,expression:"true"}],staticClass:"peroneview-panel",staticStyle:{border:"1px solid gray","border-radius":"2px"}},[a("div",{staticClass:"topdata"},[a("div",[a("span",[t._v(t._s(t.$t("menu.PersonOneView.5nrnbkzrsqk0"))+t._s(t.toppersontotal))]),t._v(" "),t._l(t.postduty,function(e){return a("span",{key:e.index},[t._v(t._s(e.name)+"："+t._s(e.data))])})],2),t._v(" "),a("div",t._l(t.hireduty,function(e){return a("span",{key:e.index,style:{color:e.color}},[t._v(t._s(e.name)+"："+t._s(e.data))])}),0),t._v(" "),a("div",t._l(t.degree,function(e){return a("span",{key:e.index},[t._v(t._s(e.name)+"："+t._s(e.data))])}),0)]),t._v(" "),a("div",{style:t.tableSize},[a("el-row",{staticStyle:{"margin-top":"5px"}},[a("el-col",{attrs:{span:2}},[a("div")]),t._v(" "),a("el-col",{attrs:{span:20}},[a("div",{staticClass:"satistic_person_title",style:{marginRight:t.titlemarginRigth,width:t.headdivwidth},attrs:{id:"alltitle"}},[a("span",{staticStyle:{cursor:"pointer","text-decoration":"underline"},on:{click:function(e){t.handleWardClick("all",t.$t("menu.PersonOneView.5nrnbkzslg00"))}}},[t._v(t._s(t.$t("menu.PersonOneView.5nrnbkztoys0"))+t._s(t.persontotal)+t._s(t.$t("menu.PersonOneView.5nrnbkztpdo0")))]),t._v(" "),a("div",{staticStyle:{position:"absolute",top:"0px",right:"0px"}},[a("el-select",{staticStyle:{width:"80px"},attrs:{size:"mini"},on:{change:function(e){return t.handleSexClick()}},model:{value:t.sextype,callback:function(e){t.sextype=e},expression:"sextype"}},[a("el-option",{attrs:{value:"",label:t.$t("menu.PersonOneView.5nrnbkzur2s0")}}),t._v(" "),t._l(t.sextypes,function(t){return a("el-option",{key:t.rw,attrs:{label:t.desc,value:t.rw}})})],2),t._v(" "),a("el-select",{staticStyle:{width:"100px"},attrs:{size:"mini"},on:{change:function(e){return t.handleTypeClick()}},model:{value:t.ordertype,callback:function(e){t.ordertype=e},expression:"ordertype"}},t._l(t.ordertypes,function(t){return a("el-option",{key:t.rw,attrs:{label:t.desc,value:t.rw}})}),1)],1)])]),t._v(" "),a("el-col",{attrs:{span:2}},[a("div")])],1),t._v(" "),t._l(t.cols,function(e){return a("el-row",{key:e.index,staticStyle:{"margin-top":"5px"},attrs:{name:"ss"}},[a("el-col",{attrs:{span:2}},[a("div")]),t._v(" "),a("el-col",{attrs:{span:20}},[a("div",{staticClass:"satistic_person_title",style:{marginRight:t.titlemarginRigth,width:t.headdivwidth}},[a("span",{staticStyle:{cursor:"pointer","text-decoration":"underline"},on:{click:function(a){return t.handleWardClick(e.id,e.name)}}},[t._v(t._s(e.name)+"("+t._s(e.total)+t._s(t.$t("menu.PersonOneView.5nrnbkztpdo0")))])]),t._v(" "),0==t.ordertype2||3==t.ordertype2||t.selectid||4==t.ordertype2||5==t.ordertype2?a("table",{staticClass:"OS_table",attrs:{width:e.tablewidth,border:"0",cellspacing:"0",cellpadding:"0"}},t._l(e.trs,function(e){return a("tr",{key:e.index},t._l(e,function(e){return a("td",{key:e.index,attrs:{align:"center",width:t.tdwidth}},[a("div",{style:{color:e.split("!")[1]},attrs:{title:e.split("!")[0]}},[t._v("\n                                "+t._s(e.split("!")[0])+"\n                            ")])])}),0)}),0):t._e()]),t._v(" "),a("el-col",{attrs:{span:2}},[a("div")])],1)})],2)])},staticRenderFns:[]};var s=function(t){a("kXi1")},n=a("VU/8")(r.a,i,!1,s,null,null);e.default=n.exports},f0Md:function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__=__webpack_require__("Dd8w"),__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__),__WEBPACK_IMPORTED_MODULE_1_vuex__=__webpack_require__("NYxO");__webpack_exports__.a={name:"PersonOneView",computed:__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default()({},Object(__WEBPACK_IMPORTED_MODULE_1_vuex__.b)(["Height"])),data:function(){return{tableSize:{height:"",overflowY:""},cols:[],tdwidth:70,persontotal:0,toppersontotal:0,hireduty:[],postduty:[],degree:[],years:[],colors:["#6019D0","#F28139","#E82E38","#0D9FFF","#d17474","#000000","#999999","#64E572","#DDDF00"],echartheadname:"全院",titlemarginRigth:"",headdivwidth:"100%",ordertype:0,ordertype2:0,refreshTableData:!0,selectid:"",ordertypes:[{rw:0,desc:"默认"},{rw:1,desc:"科室"},{rw:2,desc:"片区"},{rw:3,desc:"首字母"},{rw:4,desc:"病区类型"},{rw:5,desc:"所属单位"}],sextype:"",sextypes:[{rw:"男",desc:"男"},{rw:"女",desc:"女"}]}},methods:{handlerClose:function(t){t()},setTableSize:function(){this.tableSize.height=this.Height-120+"px",this.tableSize.overflowY="scroll"},handleWardClick:function(t,e){this.loadTopdata(t),this.echartheadname=e},searchdata:function(){this.loadTopdata("all"),this.refreshTableData=!0},loadwarddata:function loadwarddata(id){var that=this;that.cols=new Array,id=id||"",that.selectid=id,that.refreshTableData=!id;var sextype=that.sextype,ordertype=that.ordertype,parr="^"+id+"^"+sextype;that.$nextTick(function(){that.$ajax.request(that.axiosConfig("web.INMPersonCountComm","FindWardPersonCount","Method","parr$"+parr,"ordertype$"+ordertype,"role$"+sessionStorage.getItem("loginRoleCodes"),"nurseid$"+sessionStorage.getItem("loginID"))).then(function(d){if(that.ordertype2=that.ordertype,d.data){var data=eval(d.data),datacols=new Array,alltitle=document.getElementById("alltitle"),width=alltitle.offsetWidth;that.tdwidth=70;var tdlength=parseInt((width-1)/that.tdwidth);that.tdwidth=parseInt((width-1)/tdlength);var tablewidth=tdlength*that.tdwidth+1;that.titlemarginRigth=width-tablewidth+"px",that.headdivwidth=tablewidth+"px";for(var i=0;i<data.length;i++){var warrwid=data[i].id,warrwname=data[i].name,nurses=eval(data[i].nurse),trs=new Array;if(tdlength<=nurses.length){tdlength=tdlength<1?1:tdlength;for(var forlength=Math.ceil(nurses.length/tdlength),j=0;j<forlength;j++)trs.push(nurses.slice(j*tdlength,(j+1)*tdlength))}else tablewidth=nurses.length*that.tdwidth+1,trs.push(nurses);datacols.push({id:warrwid,name:warrwname,total:nurses.length,tablewidth:tablewidth,trs:trs})}that.cols=datacols}})})},loadTopdata:function loadTopdata(id){var that=this,ordertype=that.ordertype,sextype=that.sextype;that.refreshTableData||(ordertype=0);var parr=id+"^"+ordertype+"^"+sextype;that.$ajax.request(that.axiosConfig("web.INMPersonCountComm","FindCount","Method","parr$"+parr,"role$"+sessionStorage.getItem("loginRoleCodes"),"nurseid$"+sessionStorage.getItem("loginID"))).then(function(d){var data=eval(d.data);that.hireduty=data.data.hireduty,that.postduty=data.data.postduty,that.degree=data.data.degree,that.years=data.data.years,that.toppersontotal=data.total,"all"==id?(that.persontotal=data.total,that.loadwarddata("")):1!=that.ordertype&&2!=that.ordertype||that.refreshTableData&&that.loadwarddata(id)})},handleSexClick:function(){(1==this.ordertype||2==this.ordertype)&&this.selectid?(this.loadTopdata(this.selectid),this.loadwarddata(this.selectid)):this.loadTopdata("all")},handleTypeClick:function(){this.loadTopdata("all")}},created:function(){this.searchdata(),this.setTableSize(),this.hiredutyname=new Array}}},kXi1:function(t,e){}});