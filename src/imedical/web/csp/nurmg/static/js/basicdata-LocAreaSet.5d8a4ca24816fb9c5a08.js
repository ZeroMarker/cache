webpackJsonp([282],{"1zl7":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("Dd8w"),o=a.n(i),s=a("NYxO"),r=a("W5Fe"),n={components:{hgbutton:a("XlQt").default,hgpagination:r.default},computed:o()({},Object(s.b)(["Height","styleCode"])),data:function(){return{currentPage:1,currentPageSize:20,totalCount:0,dialogVisible:!1,dialogVisible2:!1,selRow:"",selLoc:[],tableData:[],PersonData:[],finds:{},editForm:{AreaCode:"",AreaDesc:"",AreaNurHeadDR:"",AreaStDate:new Date,AreaEndDate:"",rw:""},rules:{AreaCode:[{required:!0,message:"请输入片区代码！",trigger:"blur"}],AreaDesc:[{required:!0,message:"请输入片区名称！",trigger:"blur"}],AreaStDate:[{required:!0,message:"请选择启用日期！",trigger:"change",type:"date"}]},LocData:[],winFlag:0}},created:function(){this.FindClick(),this.GetLocData()},methods:{HandleCurrentChange:function(e){this.currentPage=e.currentPage,this.FindClick()},HandleSizeChange:function(e){this.currentPageSize=e,this.FindClick()},FindClick:function(){var e=this,t=e.axiosConfig("web.INMDBComm","FindWardAreaList","RecQuery","parr$");e.$ajax.request(t).then(function(t){e.tableData=t.data.rows,e.totalCount=parseInt(t.data.results),e.selRow=""}).catch(function(e){})},AddClick:function(){var e=this;this.winFlag=0,this.dialogVisible=!0,this.$nextTick(function(){e.$refs.editForm.resetFields(),e.editForm.rw=""})},RowDblClick:function(e){this.winFlag=1,this.selRow=e;var t=this;if(""!=e.rw){var a=this.axiosConfig("web.INMDBComm","GetWardArea","RecMethod","id$"+e.rw);this.$ajax.request(a).then(function(e){t.dialogVisible=!0,t.$nextTick(function(){t.$refs.editForm.resetFields(),t.setForm(t.$refs.editForm,t.editForm,e.data)})}).catch(function(e){})}},RowClick:function(e){this.selRow=e},SaveClick:function(){var e=this;this.$refs.editForm.validate(function(t){if(!t)return!1;var a="";for(var i in e.editForm)void 0==e.editForm[i]&&(e.editForm[i]=""),a=e.editForm[i]instanceof Date?a+i+"|"+e.editForm[i].Format("yyyy-MM-dd")+"^":a+i+"|"+e.editForm[i].toString()+"^";if(""!=a){var o=e.axiosConfig("web.INMDBComm","SaveWardArea","Method","parr$"+a);e.$ajax.request(o).then(function(t){1==t.data?(e.$message({message:"保存成功！",type:"success",showClose:!0,customClass:"success_class"}),e.dialogVisible=!1,e.FindClick()):0==t.data?e.$message({message:"保存失败！",type:"error",showClose:!0,customClass:"error_class"}):e.$message({message:t.data,type:"error",showClose:!0,customClass:"error_class"})}).catch(function(t){e.$message({message:"保存失败！",type:"error",showClose:!0,customClass:"error_class"})})}})},filterMethod:function(e,t){return t.LocDesc.indexOf(e)>-1},GetLocData:function(){var e=this,t=e.axiosConfig("web.INMDBComm","FindWardLocList","RecQuery","parr$Y");e.$ajax.request(t).then(function(t){e.LocData=t.data.rows}).catch(function(e){})},SetLoc:function(){var e=this;e.selRow?(e.dialogVisible2=!0,e.$nextTick(function(){var t=e.axiosConfig("web.INMDBComm","GetAreaLoc","Method","areaid$"+e.selRow.rw);e.$ajax.request(t).then(function(t){e.selLoc=t.data.toString().split(","),e.$refs.arealocTrans.clearQuery("left"),e.$refs.arealocTrans.clearQuery("right")})})):e.$message({message:"请选择一行记录！",type:"warning",showClose:!0,customClass:"warning_class"})},SaveLoc:function(){var e=this,t=e.selRow.rw,a=e.selLoc.toString(),i=e.axiosConfig("web.INMDBComm","SaveAreaLoc","Method","areaid$"+t,"locs$"+a);e.$ajax.request(i).then(function(t){1==t.data?(e.$message({type:"success",message:"设置成功",showClose:!0,customClass:"success_class"}),e.dialogVisible2=!1,e.FindClick()):e.$message({type:"success",message:"设置失败！",showClose:!0,customClass:"success_class"})})},ComputedStDate:function(){this.editForm.AreaEndDate&&this.editForm.AreaStDate&&this.editForm.AreaStDate.getTime()>this.editForm.AreaEndDate.getTime()&&(this.$message({message:"启用日期不能大于停用日期!",type:"error",showClose:!0,customClass:"warning_class"}),this.editForm.AreaStDate="")},ComputedEndDate:function(){this.editForm.AreaEndDate&&this.editForm.AreaStDate&&this.editForm.AreaStDate.getTime()>this.editForm.AreaEndDate.getTime()&&(this.$message({message:"停用日期不能小于启用日期!",type:"error",showClose:!0,customClass:"warning_class"}),this.editForm.AreaEndDate="")}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"loc-area-set-panel"},[a("div",{staticClass:"top-tool-button"},[a("hgbutton",{attrs:{type:"text",issvg:e.styleCode,icon:e.styleCode?"#nm-icon-reload":"nm-icon-lite-reload"},on:{click:e.FindClick}},[e._v(e._s(e.$t("menu.LocAreaSet.5nrnax0auwk0")))]),e._v(" "),a("hgbutton",{attrs:{type:"text",issvg:e.styleCode,icon:e.styleCode?"#nm-icon-add":"nm-icon-lite-add"},on:{click:e.AddClick}},[e._v(e._s(e.$t("menu.LocAreaSet.5nrnax0aw1c0")))]),e._v(" "),a("hgbutton",{attrs:{type:"text",issvg:e.styleCode,icon:e.styleCode?"#nm-icon-house-maint":"nm-icon-lite-house-maint"},on:{click:e.SetLoc}},[e._v(e._s(e.$t("menu.LocAreaSet.5ncy63i5ge40")))])],1),e._v(" "),a("div",{staticClass:"top-tool-table"},[a("el-table",{attrs:{data:e.tableData,height:e.styleCode?e.Height-79:e.Height-73,"header-cell-style":e.headerCellFontWeight,border:e.styleCode,"highlight-current-row":"",align:"left",label:e.$t("menu.LocAreaSet.5nrnax0ckdk0")},on:{"row-dblclick":e.RowDblClick,"row-click":e.RowClick}},[a("el-table-column",{attrs:{type:"index",align:"center",width:"40"}}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("menu.LocAreaSet.5ncy63i5j180"),"show-overflow-tooltip":"",width:"",prop:"AreaCode",align:"left"}}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("menu.LocAreaSet.5ncy63i5jko0"),"show-overflow-tooltip":"",width:"",prop:"AreaDesc",align:"left"}}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("menu.LocAreaSet.5nrnax0e3zk0"),"show-overflow-tooltip":"",width:"",prop:"AreaStDate",align:"left",formatter:e.PTableDateHisShow}}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("menu.LocAreaSet.5nrnax0fzno0"),"show-overflow-tooltip":"",width:"",prop:"AreaEndDate",align:"left",formatter:e.PTableDateHisShow}}),e._v(" "),e._e()],1),e._v(" "),a("hgpagination",{attrs:{styleCode:e.styleCode,sizes:[20,40,50,100],totalCount:e.totalCount,pageNumber:e.currentPage,pageSize:e.currentPageSize},on:{changePage:e.HandleCurrentChange,getPageSize:e.HandleSizeChange}})],1),e._v(" "),a("div",[a("el-dialog",{attrs:{title:0==e.winFlag?e.$t("menu.LocAreaSet.5nrnax0aw1c0"):e.$t("menu.LocAreaSet.5nrnax0aw1c1"),visible:e.dialogVisible,"close-on-click-modal":!1,width:"355px",align:"center"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticClass:"dialog-header-title",attrs:{slot:"title"},slot:"title"},[e.styleCode?a("i",{class:[0==e.winFlag?"nm-icon-w-plus":"nm-icon-w-edit"]}):e._e(),e._v(" "),0==e.winFlag?a("span",[e._v(e._s(e.$t("menu.LocAreaSet.5nrnax0aw1c0")))]):1==e.winFlag?a("span",[e._v(e._s(e.$t("menu.LocAreaSet.5nrnax0aw1c1")))]):e._e()]),e._v(" "),a("el-form",{ref:"editForm",attrs:{model:e.editForm,rules:e.rules,"label-width":"110px","label-position":"right",inline:!0,align:"left"}},[a("el-form-item",{attrs:{label:e.$t("menu.LocAreaSet.5ncy63i5j180"),prop:"AreaCode"}},[a("el-input",{attrs:{clearable:"",placeholder:e.$t("menu.LocAreaSet.5nrnax0idd80"),size:"mini"},model:{value:e.editForm.AreaCode,callback:function(t){e.$set(e.editForm,"AreaCode",t)},expression:"editForm.AreaCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("menu.LocAreaSet.5ncy63i5jko0"),prop:"AreaDesc"}},[a("el-input",{attrs:{clearable:"",placeholder:e.$t("menu.LocAreaSet.5nrnax0k9ic0"),size:"mini"},model:{value:e.editForm.AreaDesc,callback:function(t){e.$set(e.editForm,"AreaDesc",t)},expression:"editForm.AreaDesc"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("menu.LocAreaSet.5nrnax0e3zk0"),prop:"AreaStDate"}},[a("el-date-picker",{attrs:{type:"date",format:this.$store.state.mainframe.DateFormat,placeholder:e.$t("menu.LocAreaSet.5nrnax0nn480"),size:"mini"},on:{change:e.ComputedStDate},model:{value:e.editForm.AreaStDate,callback:function(t){e.$set(e.editForm,"AreaStDate",t)},expression:"editForm.AreaStDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("menu.LocAreaSet.5nrnax0fzno0"),prop:"AreaEndDate"}},[a("el-date-picker",{attrs:{type:"date",format:this.$store.state.mainframe.DateFormat,placeholder:e.$t("menu.LocAreaSet.5nrnax0rhgc0"),size:"mini"},on:{change:e.ComputedEndDate},model:{value:e.editForm.AreaEndDate,callback:function(t){e.$set(e.editForm,"AreaEndDate",t)},expression:"editForm.AreaEndDate"}})],1)],1),e._v(" "),a("div",{staticClass:"bottom-button"},[a("hgbutton",{directives:[{name:"intervalclick",rawName:"v-intervalclick",value:{func:e.SaveClick,time:500},expression:"{func:SaveClick,time:500}"}],attrs:{type:e.styleCode?"default":"success",styleCode:e.styleCode}},[e._v(e._s(e.$t("menu.LocAreaSet.5nrnax0rjkw0")))]),e._v(" "),a("hgbutton",{attrs:{type:"default",styleCode:e.styleCode},on:{click:function(t){e.dialogVisible=!1}}},[e._v(e._s(e.$t("menu.LocAreaSet.5nrnax0rk9s0")))])],1)],1)],1),e._v(" "),a("div",{staticClass:"div-wardlist"},[a("el-dialog",{attrs:{title:e.$t("menu.LocAreaSet.5ncy63i5vec0"),visible:e.dialogVisible2,"close-on-click-modal":!1,width:"600px"},on:{"update:visible":function(t){e.dialogVisible2=t}}},[a("div",{staticClass:"dialog-header-title",attrs:{slot:"title"},slot:"title"},[e.styleCode?a("i",{staticClass:"nm-icon-w-paper"}):e._e(),e._v(" "),a("span",[e._v(e._s(e.$t("menu.LocAreaSet.5ncy63i5vec0")))])]),e._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-transfer",{ref:"arealocTrans",staticStyle:{"text-align":"left",display:"inline-block"},attrs:{filterable:"","filter-method":e.filterMethod,props:{key:"rw",label:"LocDesc"},data:e.LocData},model:{value:e.selLoc,callback:function(t){e.selLoc=t},expression:"selLoc"}})],1),e._v(" "),a("div",{staticClass:"bottom-button"},[a("hgbutton",{directives:[{name:"intervalclick",rawName:"v-intervalclick",value:{func:e.SaveLoc,time:500},expression:"{func:SaveLoc,time:500}"}],attrs:{type:e.styleCode?"default":"success",styleCode:e.styleCode}},[e._v(e._s(e.$t("menu.LocAreaSet.5nrnax0rjkw0")))]),e._v(" "),a("hgbutton",{attrs:{type:"default",styleCode:e.styleCode},on:{click:function(t){e.dialogVisible2=!1}}},[e._v(e._s(e.$t("menu.LocAreaSet.5nrnax0rk9s0")))])],1)])],1)])},staticRenderFns:[]};var c=a("VU/8")(n,l,!1,function(e){a("Rfwc")},null,null);t.default=c.exports},Rfwc:function(e,t){}});