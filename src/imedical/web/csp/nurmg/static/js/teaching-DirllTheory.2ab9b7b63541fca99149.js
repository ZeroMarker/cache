webpackJsonp([190],{qMPL:function(e,t){},uxmr:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("Gu7T"),n=s.n(i),l=s("Dd8w"),o=s.n(l),r=s("NYxO"),a=s("XlQt"),c={name:"ExamTheory",props:["subID","questionList","theoryType","quesVideoTime"],computed:o()({},Object(r.b)(["Height","SysTomcat","styleCode"])),components:{hgbutton:a.default},data:function(){return{isAnalysisFlag:!1,answerTime:"00:00:00",answerTimer:"",timerTop:50,timerRight:50,index:0,answerNum:1,problems:[],imgWidth:"400",dialogSheetVisible:!1,dialogAnalylisVisible:!1,showAnalylistFlag:!1,rightAnswerNum:"",nullAnswerNum:"",saveFlag:!1,isMoveFlag:!1,optionTitleStore:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"]}},watch:{index:function(e,t){this.index+1>this.answerNum&&(this.answerNum=this.index+1)}},methods:{OpenAnswerSheet:function(){this.dialogSheetVisible=!0},CloseAnswerSheet:function(){this.dialogSheetVisible=!1},ToProblemClick:function(e){this.index=e,this.CloseAnswerSheet()},ToAnalysClick:function(e){var t=this,s=new Array;t.problems.forEach(function(i,n){n+1>t.answerNum||(e?1!=i.CorrectFlag&&s.push(i):s.push(i))}),0!=s.length?(t.answerNum=s.length,t.problems=s,t.dialogAnalylisVisible=!1,t.index=0):t.$message({type:"warning",message:"无相关解析",showClose:!0,customClass:"warning_class"})},OpenAnalysis:function(){var e=this,t=this.answerTime;e.$confirm("交卷后不可修改，确定是否交卷?","提示",{confirmButtonText:"确定",cancelButtonText:"关闭",type:"warning"}).then(function(){for(var s=new Array,i=0;i<e.problems.length;i++){var n=e.problems[i],l=n.rw+"^"+n.SubRw+"^"+n.Result.join("」")+"^"+n.ExamScore;s.push(l)}if(0!=s.length){var o=e.theoryType+"^"+e.subID+"^"+t+"^"+e.quesVideoTime,r=e.axiosConfig("web.INMTeaComm","SaveDrillTheory","Method","subParr$"+s.join("「"),"parr$"+o);e.$ajax.request(r).then(function(t){if("success"==t.data.split("^")[0]){e.StopTime();for(var s=t.data.split("^")[1].split("「"),i=new Object,n=0;n<s.length;n++)i[s[n].split(",")[0]]=s[n].substring(s[n].indexOf(",")+1);e.dialogSheetVisible=!1,e.dialogAnalylisVisible=!0,e.showAnalylistFlag=!0;for(var l=0,o=0,r=0;r<e.problems.length;r++){var a=e.problems[r];if(r+1>e.answerNum)return;e.problems[r].rw=i[a.SubRw].split(",")[0],e.problems[r].CorrectFlag=i[a.SubRw].split(",")[1],1==e.problems[r].CorrectFlag&&(l+=1),e.problems[r].rw||(o+=1)}e.rightAnswerNum=l,e.nullAnswerNum=o}else-1!=t.data.indexOf("error")?e.$message({type:"warning",message:t.data.split("^")[1],showClose:!0,customClass:"warning_class"}):e.$message({type:"warning",message:"保存失败,请联系开发",showClose:!0,customClass:"warning_class"})})}else e.$message({type:"warning",message:"无数据保存,请刷新重试",showClose:!0,customClass:"warning_class"})})},CloseAnalysisSheet:function(){this.dialogAnalylisVisible=!1,this.showAnalylistFlag=!1,this.BackClick()},SetAnswerClick:function(e){var t=this.problems[this.index];"S"==t.SubMode?(0==t.Result.length?t.Result.push(e):t.Result.splice(0,1,e),this.problems[this.index]=t):(t.Result.indexOf(e)>-1?t.Result.splice(t.Result.indexOf(e),1):t.Result.push(e),this.problems[this.index]=t),this.problems[this.index].Result.sort(),this.problems[this.index].SubAnswer.sort()},SaveProblem:function(){this.OpenAnswerSheet()},GetAllProblems:function(){var e=[].concat(n()(this.questionList));if(e&&0!=e.length){for(var t=new Array,s=0;s<e.length;s++){var i=e[s],l=new Object;for(var o in i){var r=i[o];"SubUrl"!=o&&"SubOption"!=o&&"Result"!=o&&"SubAnswer"!=o||(""!=r?(r="SubOption"==o||"Result"==o||"SubAnswer"==o?r.split("」"):r.split(","),"Result"!=o&&"SubAnswer"!=o||"M"!=i.SubMode&&"S"!=i.SubMode||(r=r.map(Number))):r="B"==i.SubMode&&"Result"==o?new Array(1).fill(""):new Array),"AnswerTimes"==o&&(r=parseInt(r)),l[o]=r}t.push(l)}this.problems=t,this.index=0,this.answerNum=1,this.StartTime()}else this.$message({type:"warning",message:"未获取需要题目",showClose:!0,customClass:"warning_class"})},BeforClick:function(){0!=this.index?this.index=this.index-1:this.$message({type:"warning",message:"已跳转到本此解答第一题",showClose:!0,customClass:"warning_class"})},NextClick:function(){this.index>=this.problems.length-1?this.$message({type:"warning",message:"已置最后一题",showClose:!0,customClass:"warning_class"}):this.index=this.index+1},BackClick:function(){this.$emit("CloseClick")},StopTime:function(){this.answerTimer&&(clearInterval(this.answerTimer),this.answerTimer="")},StartTime:function(){var e=this;this.answerTimer||(this.answerTimer=setInterval(function(){var t=e.answerTime,s=60*parseInt(t.split(":")[0])*60+60*parseInt(t.split(":")[1])+parseInt(t.split(":")[2]);s+=1;var i=parseInt(s/60/60),n=parseInt(s/60)%60,l=s%60;t=(i=i<10?"0"+i:i)+":"+(n=n<10?"0"+n:n)+":"+(l=l<10?"0"+l:l),e.answerTime=t},1e3))},TimerMouseDown:function(e){var t=this;t.$refs.timer.style.cursor="pointer";var s=t.$refs.answerContext.offsetWidth,i=t.$refs.timer.offsetWidth,n=t.$refs.timer.offsetHeight,l=t.$refs.answerContext.offsetHeight-n-3,o=s-i-3,r=e.pageY-t.timerTop,a=t.timerRight+e.pageX;t.isMoveFlag=!0,t.$refs.timer.onmousemove=function(e){if(t.isMoveFlag){var s=e.pageY-r;s=(s=s<0?0:s)>l?l:s;var i=a-e.pageX;i=(i=i<0?0:i)>o?o:i,t.timerTop=s,t.timerRight=i}}}},created:function(){var e=this;e.GetAllProblems(),e.answerTime="00:00:00",document.onmouseup=function(){e.isMoveFlag=!1}},beforeDestroy:function(){clearInterval(this.answerTimer)}},u={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"drill-theory-panel"},[s("div",{staticClass:"per-top-tool-button",staticStyle:{"border-top-left-radius":"4px","border-top-right-radius":"4px"}},[s("div",{staticStyle:{float:"right","padding-right":"10px"}},[s("span",{staticStyle:{display:"inline-block","font-size":"14px"}},[s("font",{staticStyle:{color:"#6FA6FF"}},[e._v(e._s(e.index+1))]),e._v("/"),s("font",[e._v(e._s(e.problems.length))])],1),e._v(" "),s("hgbutton",{attrs:{type:"text",issvg:e.styleCode,icon:e.styleCode?"#nm-icon-forward":"nm-icon-lite-forward"},on:{click:e.BeforClick}},[e._v("上一题")]),e._v(" "),s("hgbutton",{attrs:{type:"text",issvg:e.styleCode,icon:e.styleCode?"#nm-icon-backward":"nm-icon-lite-backward"},on:{click:e.NextClick}},[e._v("下一题")]),e._v(" "),e.showAnalylistFlag||e.index!=e.problems.length-1?e._e():s("hgbutton",{attrs:{type:"text",issvg:e.styleCode,icon:e.styleCode?"#nm-icon-submit":"nm-icon-lite-submit"},on:{click:e.SaveProblem}},[e._v("交卷")]),e._v(" "),e.showAnalylistFlag||0==e.problems.length?s("hgbutton",{attrs:{type:"text",issvg:e.styleCode,icon:e.styleCode?"#nm-icon-back":"nm-icon-lite-back"},on:{click:e.BackClick}},[e._v("返回")]):e._e()],1)]),e._v(" "),s("div",{ref:"answerContext",staticClass:"answer_context",style:{height:e.Height-56+"px"}},[s("div",{ref:"timer",staticClass:"timer",style:{top:e.timerTop+"px",right:e.timerRight+"px"},on:{mousedown:function(t){return e.TimerMouseDown(t)}}},[s("div",{staticClass:"title"},[e._v("计时器")]),e._v(" "),s("div",{staticClass:"content"},[e._v(e._s(e.answerTime))])]),e._v(" "),e.problems&&e.problems.length>0?s("div",{staticStyle:{margin:"10px 0 0 10px","text-align":"left"}},[s("div",[s("span",{staticClass:"answer-title"},[e._v("【"+e._s("S"==e.problems[e.index].SubMode?"单选题":"M"==e.problems[e.index].SubMode?"多选题":"B"==e.problems[e.index].SubMode?"填空题":"问答题")+"】")]),e._v(" "),"B"==e.problems[e.index].SubMode?e._l(e.problems[e.index].SubDesc.split("﹏﹏"),function(t,i){return s("font",{key:i},[0!=i?s("font",{staticStyle:{"text-decoration":"underline","padding-bottom":"2px"}},[e._v("（"+e._s(i)+"）")]):e._e(),e._v("\n                        "+e._s(t)+"\n                    ")],1)}):s("font",[e._v(e._s(e.problems[e.index].SubDesc))]),e._v(" "),e.problems[e.index].ExamScore?s("font",{staticStyle:{color:"#C6DAEC"}},[e._v("("+e._s(e.problems[e.index].ExamScore)+")")]):e._e(),e._v(" "),e.problems[e.index].SubSource?s("font",{staticStyle:{color:"#C6DAEC"}},[e._v("("+e._s(e.problems[e.index].SubSource)+")")]):e._e()],2),e._v(" "),s("div",{staticStyle:{margin:"20px 0 20px 50px"}},e._l(e.problems[e.index].SubUrl,function(t){return s("img",{key:t,attrs:{width:e.imgWidth,src:e.SysTomcat+t}})}),0),e._v(" "),e.problems[e.index].SubOption?s("div",{staticClass:"exam_theory_sub_option"},[s("ul",e._l(e.problems[e.index].SubOption,function(t,i){return s("li",{key:i},[s("span",{staticClass:"option_default",class:e.problems[e.index].Result.indexOf(i)>-1?"option_active":"",on:{click:function(t){return e.SetAnswerClick(i)}}},[e._v(e._s(e.optionTitleStore[i]))]),e._v(" "),s("font",[e._v(e._s(t))])],1)}),0)]):e._e(),e._v(" "),e.problems[e.index].Result&&"B"==e.problems[e.index].SubMode?s("div",{staticClass:"exam_theory_sub_option"},[s("ul",e._l(e.problems[e.index].Result,function(t,i){return s("li",{key:i},[e._v("\n                        （"+e._s(i+1)+"）\n                        "),s("el-input",{staticStyle:{width:"200px"},attrs:{size:"mini"},model:{value:e.problems[e.index].Result[i],callback:function(t){e.$set(e.problems[e.index].Result,i,t)},expression:"problems[index].Result[ResultIndex]"}})],1)}),0)]):e._e(),e._v(" "),"A"==e.problems[e.index].SubMode?s("div",{staticClass:"exam_theory_sub_option"},[s("el-input",{staticStyle:{width:"400px"},attrs:{type:"textarea",rows:"3",placeholder:"请输入",size:"mini"},model:{value:e.problems[e.index].Result[0],callback:function(t){e.$set(e.problems[e.index].Result,0,t)},expression:"problems[index].Result[0]"}})],1):e._e(),e._v(" "),e.showAnalylistFlag?s("div",{staticClass:"exam_theory_sub_option"},[s("div",[s("div",{staticClass:"analysis_title"},[e._v("答案:")]),e._v(" "),"A"==e.problems[e.index].SubMode?[e._v("\n                        "+e._s(e.problems[e.index].SubRefAnswer)+"\n                    ")]:"B"==e.problems[e.index].SubMode?[e._l(e.problems[e.index].SubAnswer,function(t,i){return s("font",{key:t},[e._v("\n                            （"+e._s(i+1)+"）"+e._s(t)),s("br")])}),e._v(" "),1==e.problems[e.index].CorrectFlag?s("font",[e._v("\n                            回答正确；\n                        ")]):e.problems[e.index].CorrectFlag>0?s("font",[e._v("\n                            部分回答正确;\n                        ")]):s("font",[e._v("\n                            回答错误；\n                        ")])]:[e._v("\n                        正确答案\n                        "),e._l(e.problems[e.index].SubAnswer,function(t){return s("font",{key:t,staticStyle:{color:"#64C6EA"}},[e._v("\n                            "+e._s(e.optionTitleStore[t])+"\n                        ")])}),e._v("\n                        ;\n                        "),1==e.problems[e.index].CorrectFlag?s("font",[e._v("\n                            回答正确\n                        ")]):s("font",[e._v("\n                            您的答案\n                            "),e.problems[e.index].Result&&e.problems[e.index].Result.length>0?e._l(e.problems[e.index].Result,function(t){return s("font",{key:t,staticStyle:{color:"#FF0000"}},[e._v("\n                                    "+e._s(e.optionTitleStore[t])+"\n                                ")])}):e._e(),e._v("\n                            ;回答错误\n                        ")],2)]],2),e._v(" "),e.problems[e.index].SubAnalysis?s("div",[s("div",{staticClass:"analysis_title"},[e._v("解析:")]),e._v(" "),s("div",[e._v(e._s(e.problems[e.index].SubAnalysis))])]):e._e()]):e._e()]):e._e()]),e._v(" "),s("div",[s("el-dialog",{attrs:{title:"答题卡",visible:e.dialogSheetVisible,"append-to-body":"","show-close":!1,"close-on-click-modal":!1,width:"340px","custom-class":"drill-student-exam-card"},on:{"update:visible":function(t){e.dialogSheetVisible=t}}},[s("div",{staticClass:"dialog-header-title",attrs:{slot:"title"},slot:"title"},[e.styleCode?s("i",{staticClass:"nm-icon-w-edit"}):e._e(),e._v(" "),s("span",[e._v("答题卡")])]),e._v(" "),e.problems&&e.problems.length>0?s("div",{},e._l(e.problems,function(t,i){return s("span",{key:i,staticClass:"option_default",class:t.Result&&0!=t.Result.length?"option_active":"",staticStyle:{margin:"10px 10px 0 0"},on:{click:function(t){return e.ToProblemClick(i)}}},[e._v(e._s(i+1))])}),0):e._e(),e._v(" "),s("div",{staticClass:"bottom-button"},[s("hgbutton",{staticStyle:{width:"110px"},attrs:{type:"default",styleCode:e.styleCode},on:{click:e.OpenAnalysis}},[e._v("交卷查看答案")]),e._v(" "),s("hgbutton",{attrs:{type:"default",styleCode:e.styleCode},on:{click:e.CloseAnswerSheet}},[e._v("取消")])],1)]),e._v(" "),s("el-dialog",{attrs:{title:"练习报告",visible:e.dialogAnalylisVisible,"append-to-body":"","show-close":!1,"close-on-click-modal":!1,width:"340px","custom-class":"drill-student-exam-report"},on:{"update:visible":function(t){e.dialogAnalylisVisible=t}}},[s("div",{staticClass:"dialog-header-title",attrs:{slot:"title"},slot:"title"},[e.styleCode?s("i",{staticClass:"nm-icon-w-edit"}):e._e(),e._v(" "),s("span",[e._v("练习报告")])]),e._v(" "),s("div",{staticClass:"bottom-button"},[s("div",{staticClass:"drill-stu-exam-rep-title"},[e._v("报告")]),e._v(" "),s("div",{staticClass:"drill-stu-exam-rep-answer"},[e._v("共解答"+e._s(e.answerNum)+",答对"+e._s(e.rightAnswerNum)+",未答"+e._s(e.nullAnswerNum)+",用时"+e._s(e.answerTime))])]),e._v(" "),e.problems&&e.problems.length>0?s("div",{staticClass:"bottom-button"},[s("span",{staticClass:"drill-stu-exam-rep-title"},[e._v("答题卡 ")]),s("br"),e._v(" "),e._l(e.answerNum,function(t){return s("span",{key:t,staticClass:"option_default ",class:1==e.problems[t-1].CorrectFlag?"option_active":e.problems[t-1].rw?"option_error":"",staticStyle:{display:"inline-block",margin:"5px 10px 0 0"}},[e._v(e._s(t))])})],2):e._e(),e._v(" "),s("div",{staticClass:"bottom-button"},[s("hgbutton",{staticStyle:{width:"110px"},attrs:{type:"default",styleCode:e.styleCode},on:{click:function(t){return e.ToAnalysClick(!1)}}},[e._v("查看全部解析")]),e._v(" "),s("hgbutton",{staticStyle:{width:"110px"},attrs:{type:"default",styleCode:e.styleCode},on:{click:function(t){return e.ToAnalysClick(!0)}}},[e._v("查看错误解析")]),e._v(" "),s("hgbutton",{attrs:{type:"default",styleCode:e.styleCode},on:{click:e.CloseAnalysisSheet}},[e._v("关闭")])],1)])],1)])},staticRenderFns:[]};var d=s("VU/8")(c,u,!1,function(e){s("qMPL")},null,null);t.default=d.exports}});