webpackJsonp([111,180,269,281],{"4fIF":function(e,t){},"G+XJ":function(e,t){},K2FC:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("pFYg"),s=r.n(a),o=r("Dd8w"),l=r.n(o),i=r("NYxO"),n=r("s5sJ"),g={components:{hgbutton:r("XlQt").default},props:["argid","showArgRemarkFlag","tableColumns"],computed:l()({},Object(i.b)(["styleCode"]),{printColumns:function(){return this.tableColumns.filter(function(e){return e.printFlag})},dateColumnIndex:function(){return this.printColumns.findIndex(function(e){return e.prop.indexOf("Date")>-1})}}),data:function(){return{Finds:{ward:"",warddesc:"",stdate:(new Date).getWeekDate(1),enddate:(new Date).getWeekDate(7),remark:""},DateData:[],TableData:[],StyleData:[],Loading:!1,ArgRemarkStore:["病人总数","手术总数","病危总数"],isDOM:"object"===("undefined"==typeof HTMLElement?"undefined":s()(HTMLElement))?function(e){return e instanceof HTMLElement}:function(e){return e&&"object"===(void 0===e?"undefined":s()(e))&&1===e.nodeType&&"string"==typeof e.nodeName},Dom:"",PrintByGroup:!1,PrintParams:{Orientation:2,Left:1,Right:1,Top:3,Bottom:5},PrintRules:{Orientation:[{required:!0,message:"请选择打印方向",trigger:"change"}],Left:[{required:!0,message:"请填写左边距",trigger:"blur"}],Right:[{required:!0,message:"请填写右边距",trigger:"blur"}],Top:[{required:!0,message:"请填写上边距",trigger:"blur"}],Bottom:[{required:!0,message:"请填写下边距",trigger:"blur"}]},WeekDescTrans:{}}},methods:{LoadPrintParram:function(){var e=this,t=this.axiosConfig("web.INMSetComm","FindParamSubList","RecQuery","parr$^ArgPrintParram");this.$ajax.request(t).then(function(t){if(t.data instanceof Object&&t.data.rows.length>0){var r={};t.data.rows.forEach(function(e){r[e.SubCode]=e.SubDesc}),e.WeekDescTrans["星期一"]=r["星期一"]?r["星期一"]:"星期一",e.WeekDescTrans["星期二"]=r["星期二"]?r["星期二"]:"星期二",e.WeekDescTrans["星期三"]=r["星期三"]?r["星期三"]:"星期三",e.WeekDescTrans["星期四"]=r["星期四"]?r["星期四"]:"星期四",e.WeekDescTrans["星期五"]=r["星期五"]?r["星期五"]:"星期五",e.WeekDescTrans["星期六"]=r["星期六"]?r["星期六"]:"星期六",e.WeekDescTrans["星期日"]=r["星期日"]?r["星期日"]:"星期日"}else e.WeekDescTrans={"星期一":"星期一","星期二":"星期二","星期三":"星期三","星期四":"星期四","星期五":"星期五","星期六":"星期六","星期日":"星期日"};e.FindData()}).catch(function(t){e.$message({type:"error",message:"获取排班打印参数失败",showClose:!0,customClass:"error_class"})})},FindData:function(){var e=this;if(e.argid){e.Loading=!0;var t=e.axiosConfig("web.INMArgComm","GetArrange","RecMethod","id$"+e.argid);e.$ajax.request(t).then(function(t){if(t.data instanceof Object){e.Finds.ward=t.data.ArgWardDR,e.Finds.warddesc=t.data.WardDesc,e.Finds.stdate=new Date(t.data.ArgStDate),e.Finds.enddate=new Date(t.data.ArgEndDate),e.Finds.remark=t.data.ArgRemarks.replace(/「/g,"<br>");for(var r=new Date(e.Finds.stdate);r<=e.Finds.enddate;r=r.addDate(1))e.DateData.push({desc:r.Format("M-d"),id:r.Format("YYYY-MM-dd"),weekDesc:e.WeekDescTrans[r.getWeek()]});var a=t.data.ArgOtherRemark;e.Finds.ArgOtherRemark=a?a.split(","):new Array(e.DateData.length*e.ArgRemarkStore.length).fill("");var s=t.data.ArgWardDR+"^"+e.Finds.stdate.Format("YYYY-MM-dd")+"^"+e.Finds.enddate.Format("YYYY-MM-dd"),o=e.axiosConfig("web.INMArgComm","FindArrangeSubList","RecQuery","parr$"+s,"input$","nurseid$"+sessionStorage.getItem("loginID"));e.$ajax.request(o).then(function(t){if(t.data instanceof Object){e.TableData=t.data.rows;var r=e.axiosConfig("web.INMArgComm","FindArgStyle","RecQuery","parr$"+s,"input$");e.$ajax.request(r).then(function(t){e.Loading=!1,t.data instanceof Object?e.StyleData=t.data.rows:e.$message({type:"error",message:"获取排班表样式失败",showClose:!0,customClass:"error_class"})}).catch(function(t){e.Loading=!1,e.$message({type:"error",message:"获取排班表样式失败",showClose:!0,customClass:"error_class"})})}else e.Loading=!1,e.$message({type:"error",message:"获取排班表详情失败",showClose:!0,customClass:"error_class"})}).catch(function(t){e.Loading=!1,e.$message({type:"error",message:"获取排班表详情失败",showClose:!0,customClass:"error_class"})})}else e.Loading=!1,e.$message({type:"error",message:"获取排班表信息失败",showClose:!0,customClass:"error_class"})}).catch(function(t){e.Loading=!1,e.$message({type:"error",message:"获取排班表信息失败",showClose:!0,customClass:"error_class"})})}},GetCellStyle:function(e,t){if(!(e&&t&&this.StyleData&&this.StyleData[e]))return"padding-left:2px;";var r="padding-left:2px;";if(this.StyleData[e][t]&&"!"!=this.StyleData[e][t])if(-1!=t.indexOf("Date")){r="";for(var a=this.StyleData[e][t].split("@"),s=0;s<a.length;s++)if(a[s]){var o="padding-left:2px;",l=a[s].split("!")[0],i=a[s].split("!")[1];l&&(o=o+"color:"+l+";"),i&&(o=o+"background-color:"+i),r=""==r?o:r+"@"+o}}else{var n=this.StyleData[e][t].split("!")[0],g=this.StyleData[e][t].split("!")[1];n&&(r=r+"color:"+n+";"),g&&(r=r+"background-color:"+g)}return r},getStyle:function(){for(var e="",t=document.querySelectorAll("style,link"),r=0;r<t.length;r++)e+=t[r].outerHTML;return e},getHtml:function(){for(var e=document.querySelectorAll("input"),t=document.querySelectorAll("textarea"),r=document.querySelectorAll("select"),a=0;a<e.length;a++)"checkbox"==e[a].type||"radio"==e[a].type?1==e[a].checked?e[a].setAttribute("checked","checked"):e[a].removeAttribute("checked"):(e[a].type,e[a].setAttribute("value",e[a].value));for(var s=0;s<t.length;s++)"textarea"==t[s].type&&(t[s].innerHTML=t[s].value);for(var o=0;o<r.length;o++)if("select-one"==r[o].type){var l=r[o].children;for(var i in l)"OPTION"==l[i].tagName&&(1==l[i].selected?l[i].setAttribute("selected","selected"):l[i].removeAttribute("selected"))}return this.Dom.outerHTML},getDom:function(e){"string"==typeof e?this.Dom=document.querySelector(e):(this.isDOM(e),this.Dom=this.isDOM(e)?e:e.$el)},printClickByGroup:function(){this.PrintByGroup=!0,this.print_click()},printClickNoByGroup:function(){this.PrintByGroup=!1,this.print_click()},print_click:function(){var e=this;e.$refs.PrintParams.validate(function(t){if(t){e.getDom(e.$refs.divPrint);var r=e.getStyle(),a=e.getHtml(),s=a.match(/<table[\s\S]*?tbody>/g)[0],o=a.match(/<tr class=\"group-class\"[\s\S]*?<tr class=\"[\s\S]*?group-end-class\"[\s\S]*?<\/tr>/g),l=a.match(/<tr class=\"ArgRemarkClass\"[\s\S]*?<\/tr>/g),i=document.getElementById("arg_print_remark").innerHTML;i='<tr><td colspan="14">'+i+"</td></tr>";var g=Object(n.a)();if(g.PRINT_INIT(""),g.SET_PRINT_PAGESIZE(e.PrintParams.Orientation,"210mm","297mm","A4"),e.PrintByGroup)o.forEach(function(t){var a=r+s+t+i+"</tbody></table>";g.ADD_PRINT_TABLE(e.PrintParams.Top+"mm",e.PrintParams.Left+"mm","RightMargin:"+e.PrintParams.Right+"mm","BottomMargin:"+e.PrintParams.Bottom+"mm",a),g.NewPageA()});else{var d=o.reduce(function(e,t){return e+t},""),c="";l&&(c=l.reduce(function(e,t){return e+t},"")),d=r+s+d+c+i+"</tbody></table>",g.ADD_PRINT_TABLE(e.PrintParams.Top+"mm",e.PrintParams.Left+"mm","RightMargin:"+e.PrintParams.Right+"mm","BottomMargin:"+e.PrintParams.Bottom+"mm",d)}return 2==e.PrintParams.Orientation&&g.SET_SHOW_MODE("LANDSCAPE_DEFROTATED",1),void g.PREVIEW()}})},GetDateData:function(e){var t=this.printColumns.findIndex(function(e){return e.prop.indexOf("Date")>-1});if(t)return this.DateData[e-t]},GetColMaxWidth:function(e){var t="";switch(e){case"PerName":case"PerPost":case"ArgPerBeds":t="70px";break;case"LevelDesc":t="40px";break;case"ArgTotalHour":case"ArgProductHour":case"ArgAllProductHour":t="60px";break;default:t=""}return t}},created:function(){this.LoadPrintParram()}},d={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{directives:[{name:"loading",rawName:"v-loading.body",value:e.Loading,expression:"Loading",modifiers:{body:!0}}],staticClass:"div-main-arg-print",attrs:{"element-loading-text":e.$t("menu.ArrangePrint.5nrnasupqjk0")}},[r("div",{attrs:{width:"100%",align:"right"}},[r("el-form",{ref:"PrintParams",attrs:{model:e.PrintParams,rules:e.PrintRules,inline:!0,align:"left"}},[r("el-form-item",{attrs:{prop:"Orientation",label:e.$t("menu.ArrangePrint.5ncy62c77240")}},[r("el-radio-group",{model:{value:e.PrintParams.Orientation,callback:function(t){e.$set(e.PrintParams,"Orientation",t)},expression:"PrintParams.Orientation"}},[r("el-radio",{attrs:{label:2}},[e._v(e._s(e.$t("menu.ArrangePrint.5ncy62c785o0")))]),e._v(" "),r("el-radio",{attrs:{label:1}},[e._v(e._s(e.$t("menu.ArrangePrint.5ncy62c78x00")))])],1)],1),e._v(" "),r("el-form-item",{attrs:{prop:"Left",label:e.$t("menu.ArrangePrint.5ncy62c79y80")}},[r("el-input-number",{staticStyle:{width:"100px"},attrs:{size:"mini",min:0,placeholder:"mm"},model:{value:e.PrintParams.Left,callback:function(t){e.$set(e.PrintParams,"Left",t)},expression:"PrintParams.Left"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"Right",label:e.$t("menu.ArrangePrint.5ncy62c7b980")}},[r("el-input-number",{staticStyle:{width:"100px"},attrs:{size:"mini",min:0,placeholder:"mm"},model:{value:e.PrintParams.Right,callback:function(t){e.$set(e.PrintParams,"Right",t)},expression:"PrintParams.Right"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"Top",label:e.$t("menu.ArrangePrint.5ncy62c7ca80")}},[r("el-input-number",{staticStyle:{width:"100px"},attrs:{size:"mini",min:0,placeholder:"mm"},model:{value:e.PrintParams.Top,callback:function(t){e.$set(e.PrintParams,"Top",t)},expression:"PrintParams.Top"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"Bottom",label:e.$t("menu.ArrangePrint.5ncy62c7d740")}},[r("el-input-number",{staticStyle:{width:"100px"},attrs:{size:"mini",min:0,placeholder:"mm"},model:{value:e.PrintParams.Bottom,callback:function(t){e.$set(e.PrintParams,"Bottom",t)},expression:"PrintParams.Bottom"}})],1),e._v(" "),r("el-form-item",[r("hgbutton",{staticStyle:{"margin-right":"0"},attrs:{type:"default",styleCode:e.styleCode},on:{click:e.printClickByGroup}},[e._v(e._s(e.$t("menu.ArrangePrint.5ncy62c7gec0")))])],1),e._v(" "),r("el-form-item",[r("hgbutton",{attrs:{type:"default",styleCode:e.styleCode},on:{click:e.printClickNoByGroup}},[e._v(e._s(e.$t("menu.ArrangePrint.5nrnasupyos0")))])],1)],1)],1),e._v(" "),r("div",{ref:"divPrint",attrs:{id:"div-print"}},[r("div",[r("table",{staticStyle:{width:"100%"},attrs:{border:"1px solid #ccc",cellspacing:"0",cellpadding:"0"}},[r("caption",{staticStyle:{"margin-bottom":"10px"}},[r("span",{staticStyle:{"font-size":"14px",color:"#000","font-weight":"bold"}},[e._v(e._s(e.Finds.warddesc)+e._s(e.$t("menu.ArrangePrint.5ncy62c7v340"))+e._s(e.Finds.stdate.Format("YYYY-MM-dd")+" - "+e.Finds.enddate.Format("YYYY-MM-dd")+")"))])]),e._v(" "),r("thead",[r("tr",e._l(e.printColumns,function(t,a){return r("th",{key:t.prop,class:{"week-arg-print":t.prop.indexOf("Date")>-1},staticStyle:{color:"#000","font-weight":"normal","font-size":"14px"},attrs:{rowspan:-1==t.prop.indexOf("Date")?2:1,width:t.width?t.width+"px":""}},[e._v(e._s(-1==t.prop.indexOf("Date")?t.label:e.GetDateData(a)?e.GetDateData(a).weekDesc:""))])}),0),e._v(" "),r("tr",e._l(e.DateData,function(t){return r("th",{key:t.id,staticStyle:{color:"#000","font-weight":"normal","font-size":"14px"}},[e._v(e._s(t.desc))])}),0)]),e._v(" "),r("tbody",[e.showArgRemarkFlag&&!isNaN(e.dateColumnIndex)?e._l(e.ArgRemarkStore.length,function(t){return r("tr",{key:t,staticClass:"ArgRemarkClass"},e._l(e.printColumns,function(a,s){return r("td",{key:a.prop},[e._v(e._s(-1==a.prop.indexOf("Date")?0==s?e.ArgRemarkStore[t-1]:"":e.Finds.ArgOtherRemark[(t-1)*e.DateData.length+(s-e.dateColumnIndex)]))])}),0)}):e._e(),e._v(" "),e._l(e.TableData,function(t,a){return[t.ArgPerDR?r("tr",{key:a,staticClass:"arg-post-tr",class:a!=e.TableData.length-1&&e.TableData[a+1].ArgPerDR?"":"group-end-class",staticStyle:{height:"30px"}},e._l(e.printColumns,function(s,o){return r("td",{key:s.prop,class:{"arg-print-date":s.prop.indexOf("Date")>-1,"arg-print-normal":-1==s.prop.indexOf("Date")},style:{maxWidth:e.GetColMaxWidth(s.prop)},attrs:{width:s.prop.indexOf("Date")>-1?"50px":s.width?s.width+"px":"",align:s.prop.indexOf("Date")>-1||["PerSort","PerPost","LevelDesc","ArgPerBeds"].includes(s.prop)?"center":"left"}},[-1==s.prop.indexOf("Date")?[e._v(e._s(t[s.prop]))]:e.GetDateData(o)?r("span",[e._l(t["Date"+e.GetDateData(o).id].split("%")[0].split("「"),function(s,l){return r("font",{key:l,attrs:{"v-if":!!s}},[r("font",{style:e.GetCellStyle(a,"Date"+e.GetDateData(o).id).split("@")[l]},[e._v(e._s(s.split("」")[1]?s.split("」")[1].split("『")[0]:s.split("」")[1]))]),e._v(" "),r("font",{staticStyle:{color:"#000","background-color":"#FFF"}},[e._v(e._s(t["Date"+e.GetDateData(o).id].split("%")[0].split("「").length-1>l?"、":""))])],1)}),e._v(" "),r("font",[e._v(e._s(t["Date"+e.GetDateData(o).id].split("%")[0]&&t["Date"+e.GetDateData(o).id].split("%")[1]?"/":""))]),e._v(" "),t["Date"+e.GetDateData(o).id].split("%")[1]?r("font",{style:e.GetCellStyle(a,"Date"+e.GetDateData(o).id).split("@")[0]},[e._v("\n                                    "+e._s(t["Date"+e.GetDateData(o).id].split("%")[1])+"\n                                    ")]):e._e()],2):e._e()],2)}),0):r("tr",{key:a,staticClass:"group-class",staticStyle:{height:"30px","text-align":"left"}},[r("td",{staticStyle:{"background-color":"#DCF8A8","padding-left":"2px",height:"24px",color:"#000"},attrs:{colspan:e.printColumns.length}},[e._v("\n                                "+e._s(t.PerName)+"\n                            ")])])]})],2)]),e._v(" "),r("div",{staticStyle:{"min-width":"34px",color:"#000","padding-left":"10px","border-right":"1px solid #ccc","border-left":"1px solid #ccc","border-bottom":"1px solid #ccc","font-size":"14px","white-space":"pre-wrap","text-align":"left"},attrs:{id:"arg_print_remark"},domProps:{innerHTML:e._s(e.$t("menu.ArrangePrint.5ncy62cfp2o0")+e.Finds.remark)}})])])])},staticRenderFns:[]};var c=r("VU/8")(g,d,!1,function(e){r("4fIF")},null,null);t.default=c.exports},KAYL:function(e,t){},Ngjc:function(e,t){},OR42:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("bOdI"),s=r.n(a),o=r("Gu7T"),l=r.n(o),i=r("mvHQ"),n=r.n(i),g=r("Dd8w"),d=r.n(g),c=r("NYxO"),m=r("u0bH"),u=r("K2FC"),p=r("Sw6Q"),h=(r("zL8q"),r("/dO2")),f=r("qJe4"),A=r("XlQt"),b=r("doZQ"),w={name:"ArrangeTable",components:{ArgPrint:u.default,ArgLog:p.default,ArgCheck:f.default,hgbutton:A.default,hgswitch:b.default},props:["ArrangeId"],computed:d()({},Object(c.b)(["Height","styleCode"]),{ColumnsToShow:function(){return this.ColumnsParsed.filter(function(e){return e.show})}}),directives:{cellMouseDown:{componentUpdated:function(e,t,r){var a=r.context;a.$nextTick(function(r){var s=e.querySelectorAll(".el-table__body-wrapper .el-table__body tbody .PerRow");[].forEach.call(s,function(e){var r=e.querySelectorAll(".date_column");[].forEach.call(r,function(r){r.ArgTableCellMousedown||(r.ArgTableCellMousedown=function(s){r.focus(),0==s.button&&(s&&s.stopPropagation?(s.stopPropagation(),s.preventDefault()):(s.cancelBubble=!0,s.returnValue=!1),a[t.arg](e.rowIndex,r.cellIndex,s))},r.addEventListener("mousedown",r.ArgTableCellMousedown))})})})}},cellMouseUp:{componentUpdated:function(e,t,r){var a=r.context;a.$nextTick(function(r){var s=e.querySelectorAll(".el-table__body-wrapper .el-table__body tbody .PerRow");[].forEach.call(s,function(e){var r=e.querySelectorAll(".date_column");[].forEach.call(r,function(r){r.ArgTableCellMouseup||(r.ArgTableCellMouseup=function(s){0==s.button&&(s&&s.stopPropagation?(s.stopPropagation(),s.preventDefault()):(s.cancelBubble=!0,s.returnValue=!1),a[t.arg](e.rowIndex,r.cellIndex,s))},r.addEventListener("mouseup",r.ArgTableCellMouseup))})})})}},cellContextmenu:{componentUpdated:function(e,t,r){var a=r.context;a.$nextTick(function(r){var s=e.querySelectorAll(".el-table__body-wrapper .el-table__body tbody .PerRow");[].forEach.call(s,function(e){var r=e.querySelectorAll(".date_column");[].forEach.call(r,function(r){r.ArgTableCellContextmenu||(r.ArgTableCellContextmenu=function(s){s&&s.stopPropagation?(s.stopPropagation(),s.preventDefault()):(s.cancelBubble=!0,s.returnValue=!1),a[t.arg](e.rowIndex,r.cellIndex,s)},r.addEventListener("contextmenu",r.ArgTableCellContextmenu))})})})}},mouseWheel:{componentUpdated:function(e,t,r){var a=r.context;e.ArgTableMousewheel||(e.ArgTableMousewheel=function(e){a[t.arg](e)},e.addEventListener("mousewheel",e.ArgTableMousewheel))}},span:{componentUpdated:function(e,t,r){r.context.$nextTick(function(t){var r=e.querySelectorAll(".el-table__body-wrapper .el-table__body tbody .GrpRow");[].forEach.call(r,function(e){if(e.childNodes&&e.childNodes.length>2){for(var t=e.childNodes.length-1,r=0;r<t-1;r++)e.removeChild(e.childNodes[e.childNodes.length-1]);e.childNodes[1].colSpan=t}})})}}},data:function(){var e=this;return{WardStore:[],ArgUpdateDay:1,ToolForm:{ArgWardDR:"",ArgStDate:new Date,ArgEndDate:new Date,ArgCrtUser:this.$store.state.login.LoginId,ArgRemarks:"",ArgStatus:"",rw:"",WardDesc:"",ArgOtherRemark:[],ArgOtherRemarkLength:7},QuickArgShow:!1,loading:!1,tableHeight:"",currentPage:1,currentPageSize:20,totalCount:0,dialogVisible:!1,dialogVisible3:!1,dialogVisible4:!1,dialogVisible6:!1,addtimeflag:!0,PersonData:[],tableData:[],styleData:[],WardPostData:[],LocPersonData:[],WardPerson:[],selGroup:"",selRows:[],selCells:[],selPersons:[],lastSelCell:[],cutBoard:[],editForm:{ArgPostType:"",ArgHolidayTime:"H",ArgPerDR:"",ArgDate:new Date,ArgPostDR:"",ArgStTime1T:"",ArgStTime1:"",ArgEndTime1:"",ArgEndTime1T:"",ArgNextDay1:!1,ArgTime1:"",ArgStTime2:"",ArgStTime2T:"",ArgEndTime2:"",ArgEndTime2T:"",ArgNextDay2:!1,ArgNextDay2St:!1,ArgTime2:"",ArgStTime3:"",ArgStTime3T:"",ArgEndTime3:"",ArgEndTime3T:"",ArgNextDay3St:!1,ArgNextDay3:!1,ArgTime3:"",ArgWorkRemark:"",rw:"",ArgSecondTime:"",ArgSecStTime:"",ArgSecEndTime:"",ArgSecEndTimeT:"",ArgSecNextDay:!1,HolidayFlag:!1},rowData:{ArgPerDR:"",ArgPerSort:"",ArgGroupDR:"",ArgEditUser:"",ArgWorkRemark:"",rw:"",ArgPerBeds:""},QuickForm:{QuickDesc:"打开快排",QuickPostDR:"",QuickPostDesc:"",QuickStatus:"N"},editRules:{ArgPerDR:[{required:!0,message:"护士不能为空",trigger:"blur"}],ArgDate:[{required:!0,message:"日期不能为空",trigger:"blur",type:"date"}],ArgPostDR:[{required:!0,message:"班次不能为空",trigger:"change"}]},elementlist:{},selectCell:{colprop:"",rowRec:""},nextMethod:"",editFlag:!1,argUpdateDay:1,dialogVisibleLog:!1,dialogVisibleCheck:!1,moveType:"",dialogVisibleArgPlus:!1,editFormArgPlus:{ArgType:"Y",ArgStTime1:"",ArgEndTime1:"",ArgWorkRemark:"",rw:"",ArgEditUser:sessionStorage.getItem("loginID")},rulesArgPlus:{ArgType:[{required:!0,message:"类型不能为空",trigger:"change"}],ArgTime:[{required:!1,message:"时间不能为空",trigger:"change"},{validator:function(t,r,a){var s=e,o=/^([0-1][0-9]|[2][0-3]):([0-5][0-9])$/;if(s.editFormArgPlus.ArgStTime1)if(o.test(s.editFormArgPlus.ArgStTime1))if(s.editFormArgPlus.ArgEndTime1)if(o.test(s.editFormArgPlus.ArgEndTime1)){var l=s.editFormArgPlus.ArgStTime1;l=60*parseInt(l.split(":")[0])+parseInt(l.split(":")[1]);var i=s.editFormArgPlus.ArgEndTime1;l>(i=60*parseInt(i.split(":")[0])+parseInt(i.split(":")[1]))?a("开始时间不可大于结束时间"):a()}else a("结束时间不合法");else a("结束时间不能为空");else a("开始时间不合法");else a("开始时间不能为空")}}]},dialogVisibleWish:!1,wishEditForm:{PostDesc:"",ArgTime:"",Remark:"",PerDR:"",rw:"",Auditor:"",Type:!0,rowId:""},firstInFlag:!0,ArgTimeSlot:!1,SysArgType:"Week",PickerOptions:{disabledDate:function(t){return"Week"==e.SysArgType?1!=t.getDay():1!=t.getDate()}},showBeforArgFlag:!1,beforArgForm:{StartDate:"",EndDate:""},beforTableColumn:[],beforArgTableData:[],ArgRemarkStore:["病人总数","手术总数","病危总数"],showArgRemarkFlag:!1,showInfoFlag:!0,WardCombStore:[],WardPostGroup:[],PostGroupForm:{GroupButDesc:"打开组合",GroupDR:"",GroupStatus:"N"},PostGroupShow:!1,FixHead:{},IconRemark:"用符号来表示用户身份:",ColumnsUnparsed:[],ColumnsParsed:[]}},created:function(){var e=this;e.tableHeight=e.Height-167,e.ToolForm.rw=e.ArrangeId,e.LoadRoleWard(),e.GetArgParam();var t=e.$router.currentRoute.path.slice(1,e.$router.currentRoute.path.length);e.loadElementsForRouter("elementlist",t),document.body.onkeydown=function(t){"/arrangelist"==e.$router.currentRoute.path&&(t.ctrlKey&&"67"==t.keyCode&&e.CopyClick(),t.ctrlKey&&"88"==t.keyCode&&e.CutClick(),t.ctrlKey&&"86"==t.keyCode&&e.PasteClick(),"46"==t.keyCode&&e.DeleteClick(),t.ctrlKey&&"83"==t.keyCode&&e.SaveClick(),t.ctrlKey&&"80"==t.keyCode&&e.PrintClick())}},mounted:function(){var e=this;document.body.ondrop=function(e){e.preventDefault(),e.stopPropagation()};var t=document.querySelector("#argtable .el-table__body-wrapper tbody");h.a.create(t,{onUpdate:function(t){var r=t.newIndex,a=t.oldIndex;if(r!=a){e.loading=!0;var s=r>a?a+1:r,o=r>a?r:a-1,l=0,i="";e.tableData[a].GrpSort=r>a?parseInt(e.tableData[o].GrpSort):parseInt(e.tableData[s].GrpSort);for(var n=s;n<=o;n++)e.tableData[n].ArgPerDR?(r>a?(e.tableData[n].ArgPerSort=parseInt(e.tableData[n].ArgPerSort)-1,e.tableData[n].GrpSort=parseInt(e.tableData[n].GrpSort)-1):(e.tableData[n].ArgPerSort=parseInt(e.tableData[n].ArgPerSort)+1,e.tableData[n].GrpSort=parseInt(e.tableData[n].GrpSort)+1),i=i?i+"@"+e.tableData[n].ArgRowId+"「"+e.tableData[n].ArgPerSort:e.tableData[n].ArgRowId+"「"+e.tableData[n].ArgPerSort):l+=1;r>a?(e.tableData[a].ArgPerSort=parseInt(e.tableData[a].ArgPerSort)+r-a-l,e.tableData.find(function(t,s,o){return s>r||(e.tableData[a].ArgGroupDR=t.ArgGroupDR,!1)})):(e.tableData[a].ArgPerSort=parseInt(e.tableData[a].ArgPerSort)+r-a+l,e.tableData.find(function(t,s,o){return s>=r||(e.tableData[a].ArgGroupDR=t.ArgGroupDR,!1)})),i=i?i+"@"+e.tableData[a].ArgRowId+"「"+e.tableData[a].ArgPerSort+"「"+e.tableData[a].ArgGroupDR:e.tableData[a].ArgRowId+"「"+e.tableData[a].ArgPerSort+"「"+e.tableData[a].ArgGroupDR;var g=e.tableData.splice(a,1);e.tableData.splice(r,0,g[0]);var d=e.axiosConfig("web.INMArgComm","ChangeArgRowSort","Method","parr$"+i);e.$ajax.request(d).then(function(t){1==t.data?(e.$message({type:"success",message:"保存成功",showClose:!0,customClass:"success_class"}),e.loading=!1):(e.$message({type:"error",message:"保存失败",showClose:!0,customClass:"error_class"}),e.FindTableData())}).catch(function(t){e.$message({type:"error",message:"保存失败",showClose:!0,customClass:"error_class"}),e.FindTableData()})}},animation:150,draggable:".Sortable"})},watch:{"editForm.ArgPostType":{handler:function(e,t){"H"==this.editForm.ArgPostType?this.editForm.HolidayFlag=!0:this.editForm.HolidayFlag=!1},deep:!0},"editForm.ArgPostDR":{handler:function(e,t){var r=this,a=this;if(!a.editFlag){a.InitEditFormTime();var s=a.axiosConfig("web.INMDBComm","GetWardPost","RecMethod","id$"+a.editForm.ArgPostDR);a.$ajax.request(s).then(function(e){"H"==e.data.PostType?r.editForm.HolidayFlag=!0:r.editForm.HolidayFlag=!1,void 0!=e.data.PostEndTime3&&""!=e.data.PostEndTime3?a.addtimeflag=!1:a.addtimeflag=!0;for(var t=0,s=1;s<=3;s++){var o=e.data["PostEndTime"+s]?e.data["PostEndTime"+s]:"",l=e.data["PostStTime"+s]?e.data["PostStTime"+s]:"";o.indexOf("次日")>-1?(a.editForm["ArgNextDay"+s]=!0,t=s,a.editForm["ArgEndTime"+s+"T"]=o.split("次日")[1]):(a.editForm["ArgNextDay"+s]=!1,a.editForm["ArgEndTime"+s+"T"]=o),l.indexOf("次日")>-1?(a.editForm["ArgNextDay"+s+"St"]=!0,a.editForm["ArgStTime"+s+"T"]=l.split("次日")[1]):(a.editForm["ArgNextDay"+s+"St"]=!1,a.editForm["ArgStTime"+s+"T"]=l),a.editForm["ArgStTime"+s]=l,a.editForm["ArgEndTime"+s]=o}if(t>=1)for(var i=t+1;i<4;i++)a.editForm["ArgNextDay"+i]=!0,a.editForm["ArgNextDay"+i+"St"]=!0}).catch(function(e){})}},deep:!0},selCells:{handler:function(e,t){var r=this;r.$nextTick(function(){var a=document.getElementsByClassName("right-menu");a&&(a[0].style.display="none"),t.forEach(function(t){if(t&&t[0]&&t[1]&&-1==r.findInArray(e,t)){var a=r.getCell(t[0],t[1]);if(a){var s=t[0],o=r.ColumnsToShow[t[1]-1].prop;if(""==r.styleData[s][o]||void 0==r.styleData[s][o]||"!"==r.styleData[s][o])r.ColumnsToShow[t[1]-1].show&&(a.style.color="",a.style.backgroundColor="");else{a.style.color="",a.style.backgroundColor="";for(var l=r.styleData[s][o].split("@"),i=0;i<l.length;i++)if(l[i]&&"!"!==l[i]){var n=l[i].split("!")[0],g=l[i].split("!")[1];if(a.childNodes[0]&&a.childNodes[0]){var d=a.childNodes[0].childNodes[0];d.childNodes[i]&&(""!=n&&(d.childNodes[i].style.color=n),""!=g&&(d.childNodes[i].style.backgroundColor=g))}}}a.style.border="1px solid transparent",a.style.borderRight="1px solid #dfe6ec",a.style.borderBottom="1px solid #dfe6ec"}}}),e.forEach(function(t){if(t&&t[0]&&t[1]){var a=r.getCell(t[0],t[1]);a&&(a.style.backgroundColor="#CCFFFF",a.style.border="1px solid #217346",t[1]>0&&-1!=r.findInArray(e,[t[0],t[1]-1])&&(a.style.borderLeft="1px solid transparent",r.getCell(t[0],t[1]-1).style.borderRight="1px solid #dfe6ec"),t[1]<r.ColumnsToShow.length+1&&-1!=r.findInArray(e,[t[0],t[1]+1])&&(a.style.borderRight="1px solid #dfe6ec",r.getCell(t[0],t[1]+1).style.borderLeft="1px solid transparent"),t[0]>0&&-1!=r.findInArray(e,[t[0]-1,t[1]])&&(a.style.borderTop="1px solid transparent",r.getCell(t[0]-1,t[1]).style.borderBottom="1px solid #dfe6ec"),t[0]<r.tableData.length&&-1!=r.findInArray(e,[t[0]+1,t[1]])&&(a.style.borderBottom="1px solid #dfe6ec",r.getCell(t[0]+1,t[1]).style.borderTop="1px solid transparent"))}})})},deep:!0},"QuickForm.QuickPostDR":function(e,t){e&&(this.QuickForm.QuickPostDesc=this.getItmInData(this.WardPostData,"rw",e,"PostDesc"))},Height:function(e,t){e&&(this.tableHeight=e-202)}},methods:{LoadRoleWard:function(){var e=this,t=e.axiosConfig("web.INMDataLimit","FindRoleWardList","RecQuery","nurseid$"+sessionStorage.loginID);e.$ajax.request(t).then(function(t){t.data instanceof Object?e.WardStore=t.data.rows:e.$message({type:"error",message:"获取权限病区失败",showClose:!0,customClass:"error_class"})}).catch(function(t){e.$message({type:"error",message:"获取权限病区失败",showClose:!0,customClass:"error_class"})})},GetArgParam:function(){var e=this;e.ArgUpdateDay=1;var t=e.axiosConfig("web.INMSetComm","GetArgParam","RecMethod","id$1");e.$ajax.request(t).then(function(t){t.data instanceof Object?(isNaN(parseInt(t.data.ArgUpdateDay))?e.ArgUpdateDay=1:e.ArgUpdateDay=parseInt(t.data.ArgUpdateDay),t.data.ArgIconSort&&e.$ajax.all([e.$ajax.request(e.axiosConfig("web.INMDBComm","FindPubCode","Query","type$职务")),e.$ajax.request(e.axiosConfig("web.INMDBComm","FindPubCode","Query","type$聘任职称"))]).then(e.$ajax.spread(function(r,a){r.data instanceof Object&&a.data instanceof Object?t.data.ArgIconSort.split(",").reverse().forEach(function(s){"T"==s?e.IconRemark+=(t.data.ArgGroupIcon?"组长"+t.data.ArgGroupIcon:"")+(t.data.ArgInternIcon?"实习生"+t.data.ArgInternIcon:"")+(t.data.ArgComeIcon?"进修生"+t.data.ArgComeIcon:""):"P"==s?r.data.rows.forEach(function(t){e.IconRemark+=t.SubSymbol?t.SubDesc+t.SubSymbol:""}):"H"==s&&a.data.rows.forEach(function(t){e.IconRemark+=t.SubSymbol?t.SubDesc+t.SubSymbol:""})}):e.$message({type:"error",message:"获取标识数据失败",showClose:!0,customClass:"error_class"})})).catch(function(t){e.$message({type:"error",message:"获取标识数据失败",showClose:!0,customClass:"error_class"})}),e.ArgTimeSlot="true"==t.data.ArgTimeSlot,"Month"==t.data.ArgPeriod?e.SysArgType="Month":e.SysArgType="Week",e.LoadFixParam()):e.$message({type:"error",message:"获取排班参数失败",showClose:!0,customClass:"error_class"})}).catch(function(t){e.$message({type:"error",message:"获取排班参数失败",showClose:!0,customClass:"error_class"})})},LoadFixParam:function(){var e=this;this.FixHead={};var t=this.axiosConfig("web.INMSetComm","FindParamSubList","RecQuery","parr$^ArgFixParam"),r=this.axiosConfig("web.INMSetComm","FindParamSubList","RecQuery","parr$^ArgColumns");this.$ajax.all([this.$ajax.request(t),this.$ajax.request(r)]).then(this.$ajax.spread(function(t,r){if(r.data instanceof Object&&r.data.rows.length>0){var a=[],s=[],o=!1;r.data.rows.forEach(function(e){var t=["N","Y","Y","","Y"];if(e.SubValue){var r=e.SubValue.split(",");e.SubValue=t.map(function(e,t){return 3==t?r[t]:r[t]&&["Y","N"].includes(r[t])?r[t]:e})}else e.SubValue=t;"Y"==e.SubValue[0]?a.push(e):s.push(e),"PerDate"==e.SubCode&&(o=!0)}),e.ColumnsUnparsed=[].concat(a,s),e.ColumnsUnparsed.length>0&&!o&&e.ColumnsUnparsed.push({SubCode:"PerDate"}),a.length>0&&(e.FixHead.Selection="true"),a.forEach(function(t){e.FixHead[t.SubCode]="true"})}else t.data instanceof Object&&t.data.rows.length>0&&t.data.rows.forEach(function(t){e.FixHead[t.SubCode]=t.SubDesc,"true"==t.SubDesc&&(e.FixHead.Selection="true")});e.FindClick()})).catch(function(t){e.$message({type:"error",message:"获取排班固定列参数失败",showClose:!0,customClass:"error_class"})})},FindClick:function(){var e=this,t=this;if(t.loading=!0,t.ToolForm.rw){var r=t.axiosConfig("web.INMArgComm","GetArrange","RecMethod","id$"+t.ToolForm.rw);t.$ajax.request(r).then(function(r){if(r.data instanceof Object){t.ToolForm.ArgWardDR=r.data.ArgWardDR,t.ToolForm.ArgStDate=new Date(r.data.ArgStDate.replace(/-/g,"/")),t.ToolForm.ArgEndDate=new Date(r.data.ArgEndDate.replace(/-/g,"/")),t.ToolForm.ArgCrtUser=t.$store.state.login.LoginId,t.ToolForm.ArgRemarks=r.data.ArgRemarks,t.ToolForm.ArgStatus=r.data.ArgStatus,t.ToolForm.rw=r.data.rw,t.ToolForm.WardDesc=r.data.WardDesc;var a=r.data.ArgOtherRemark;if(a)t.ToolForm.ArgOtherRemark=a.split(",");else{var s=e.DateDifference(t.ToolForm.ArgStDate,t.ToolForm.ArgEndDate)+1;t.ToolForm.ArgOtherRemarkLength=s<7?7:s,t.ToolForm.ArgOtherRemark=new Array(s*t.ArgRemarkStore.length).fill("")}t.ArgStDateChange(),t.GetWardPostData(),t.GetWardPostComb()}else t.loading=!1,t.$message({type:"error",message:"获取排班表信息失败",showClose:!0,customClass:"error_class"})}).catch(function(e){t.loading=!1,t.$message({type:"error",message:"获取排班表信息失败",showClose:!0,customClass:"error_class"})})}else t.ResetFindsInfo(),t.ResetArgCellRelated(),t.firstInFlag&&("Week"==t.SysArgType?t.ToolForm.ArgStDate=(new Date).getWeekDate(1).addDate(7):t.ToolForm.ArgStDate=(new Date).getMonthLastDate().addDate(1),t.ArgStDateChange()),t.WardStore&&t.WardStore.length>0&&(t.ToolForm.ArgWardDR=t.WardStore[0].rw,t.ArgWardChange())},ResetFindsInfo:function(){this.ToolForm.WardDesc="",this.ToolForm.ArgCrtUser=this.$store.state.login.LoginId,this.ToolForm.ArgRemarks="",this.ToolForm.ArgStatus="",this.ToolForm.rw=""},ResetArgCellRelated:function(){this.selGroup="",this.selRows=[],this.selCells=[],this.selPersons=[],this.lastSelCell=[],this.selectCell={colprop:"",rowRec:""},this.rowData={ArgPerDR:"",ArgPerSort:"",ArgGroupDR:"",ArgEditUser:"",ArgWorkRemark:"",rw:"",ArgPerBeds:""}},ArgStDateChange:function(){this.loading=!0,"Week"==this.SysArgType?this.ToolForm.ArgEndDate=this.ToolForm.ArgStDate.addDate(6):this.ToolForm.ArgEndDate=this.ToolForm.ArgStDate.getMonthLastDate(),this.ChangeTableHead(),this.firstInFlag?(this.firstInFlag=!1,this.ToolForm.rw?this.FindTableData():this.ToolForm.ArgWardDR?this.GetArrangeInfo():this.loading=!1):(this.ResetFindsInfo(),this.ResetArgCellRelated(),this.ToolForm.ArgWardDR?this.GetArrangeInfo():this.loading=!1)},ChangeTableHead:function(){var e=this;if(this.ColumnsParsed=new Array,this.ColumnsUnparsed.length>0){var t=[];this.ColumnsUnparsed.forEach(function(r){if("PerDate"!=r.SubCode)t.push({prop:r.SubCode,label:r.SubDesc,fixed:"Y"==r.SubValue[0],printFlag:"Y"==r.SubValue[1],exportFlag:"Y"==r.SubValue[2],width:r.SubValue[3],show:"Y"==r.SubValue[4]});else for(var a=e.ToolForm.ArgStDate.Format("YYYY-MM-dd"),s=e.ToolForm.ArgEndDate.Format("YYYY-MM-dd"),o=new Date(a),l=new Date(s),i=new Date(a);i.between(o,l);i=i.addDate(1)){var n=i.Format("YYYY-MM-dd"),g=i.getWeek();t.push({prop:"Date"+n,label:g+"\n"+i.Format("M-d"),fixed:!1,printFlag:!0,exportFlag:!0,width:110,show:!0})}}),this.ColumnsParsed=t}else{this.ColumnsParsed.push({prop:"PerSort",label:"",width:40,printFlag:!0,exportFlag:!0,show:!0}),this.ColumnsParsed.push({prop:"PerName",label:"姓名",width:120,printFlag:!0,exportFlag:!0,show:!0}),this.ColumnsParsed.push({prop:"PerPost",label:"职称",width:80,printFlag:!0,exportFlag:!0,show:!0}),this.ColumnsParsed.push({prop:"LevelDesc",label:"层级",width:50,printFlag:!0,exportFlag:!0,show:!0}),this.ColumnsParsed.push({prop:"WorlYear",label:"年限",width:50,printFlag:!0,exportFlag:!0,show:!0});for(var r=this.ToolForm.ArgStDate.Format("YYYY-MM-dd"),a=this.ToolForm.ArgEndDate.Format("YYYY-MM-dd"),s=new Date(r),o=new Date(a),l=new Date(r);l.between(s,o);l=l.addDate(1)){var i=l.Format("YYYY-MM-dd"),n=l.getWeek();this.ColumnsParsed.push({prop:"Date"+i,label:n+"\n"+l.Format("M-d"),width:110,printFlag:!0,exportFlag:!0,show:!0})}this.ColumnsParsed.push({prop:"ArgWorkRemark",label:"备注说明",printFlag:!0,exportFlag:!0,show:!0}),this.ColumnsParsed.push({prop:"ArgTotalHour",label:"周小时数",width:80,printFlag:!1,exportFlag:!1,show:!0}),this.ColumnsParsed.push({prop:"ArgProductHour",label:"本周积假",width:80,printFlag:!1,exportFlag:!1,show:!0}),this.ColumnsParsed.push({prop:"ArgAllProductHour",label:"累计积假",width:80,printFlag:!1,exportFlag:!1,show:!0}),this.ColumnsParsed.push({prop:"PerID",label:"工号",width:0,printFlag:!1,exportFlag:!1,show:!1}),this.ColumnsParsed.push({prop:"WorlYear",label:"工作年限",width:0,printFlag:!1,exportFlag:!1,show:!1}),this.ColumnsParsed.push({prop:"ArgPerSort",label:"序号",width:0,printFlag:!1,exportFlag:!1,show:!1}),this.ColumnsParsed.push({prop:"ArgGroupDR",label:"分组",width:0,printFlag:!1,exportFlag:!1,show:!1}),this.ColumnsParsed.push({prop:"ArgPerDR",label:"ArgPerDR",width:0,printFlag:!1,exportFlag:!1,show:!1}),this.ColumnsParsed.push({prop:"ArgRowId",label:"ArgRowId",width:0,printFlag:!1,exportFlag:!1,show:!1})}this.$nextTick(function(){e.$refs.argtable.doLayout()})},ArgWardChange:function(){this.GetWardPostData(),this.GetWardPostComb(),this.ResetFindsInfo(),this.ResetArgCellRelated(),this.ToolForm.ArgStDate instanceof Date&&this.GetArrangeInfo()},GetWardPostData:function(){var e=this;if(this.ToolForm.ArgWardDR){var t=void 0==this.editForm.ArgPostType?"":this.editForm.ArgPostType;t="S"==t?"":t;var r="^"+this.ToolForm.ArgWardDR+"^"+t,a=e.axiosConfig("web.INMDBComm","FindWardPostList","RecQuery","parr$"+r);e.$ajax.request(a).then(function(t){t.data instanceof Object?e.WardPostData=t.data.rows:e.$message({type:"error",message:"获取病区班次失败",showClose:!0,customClass:"error_class"})}).catch(function(t){e.$message({type:"error",message:"获取病区班次失败",showClose:!0,customClass:"error_class"})})}},GetArrangeInfo:function(){var e=this;e.loading=!0;var t=e.ToolForm.ArgWardDR+"^"+e.ToolForm.ArgStDate.Format("YYYY-MM-dd"),r=e.axiosConfig("web.INMArgComm","IsExsitArg","Method","parr$"+t,"input$");e.$ajax.request(r).then(function(a){if(a.data>0){e.ToolForm.rw=a.data;var s=e.axiosConfig("web.INMArgComm","GetArrange","RecMethod","id$"+a.data);e.$ajax.request(s).then(function(t){t.data instanceof Object?(e.ToolForm.WardDesc=t.data.WardDesc,e.ToolForm.ArgCrtUser=t.data.ArgCrtUser,e.ToolForm.ArgRemarks=t.data.ArgRemarks,e.ToolForm.ArgStatus=t.data.ArgStatus,e.FindTableData()):(e.loading=!1,e.$message({type:"error",message:"获取排班表信息失败",showClose:!0,customClass:"error_class"}))}).catch(function(t){e.loading=!1,e.$message({type:"error",message:"获取排班表信息失败",showClose:!0,customClass:"error_class"})})}else{if(!e.elementlist.argtablesave&&0!=sessionStorage.loginID)return void e.FindTableData();e.$confirm("是否进行模板排班?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",closeOnClickModal:!1,type:"warning"}).then(function(){t=e.GetForm("ToolForm"),r=e.axiosConfig("web.INMArgComm","ArrangeByTemplate","Method","parr$"+t,"nurseid$"+sessionStorage.loginID),e.$ajax.request(r).then(function(t){t.data>0?(e.$message({type:"success",message:"操作成功",showClose:!0,customClass:"success_class"}),e.ToolForm.rw=t.data,e.FindTableData()):e.$message({type:"error",message:"操作失败",showClose:!0,customClass:"error_class"})}).catch(function(t){e.$message({type:"error",message:"操作失败",showClose:!0,customClass:"error_class"})})}).catch(function(){t=e.ToolForm.ArgWardDR+"^"+e.ToolForm.ArgStDate.addDate(-7).Format("YYYY-MM-dd"),r=e.axiosConfig("web.INMArgComm","IsExsitArg","Method","parr$"+t,"input$"),e.$ajax.request(r).then(function(t){t.data>0?(e.loading=!1,e.$confirm("上周已排,是否复制上周班次?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",model:!1,type:"warning",closeOnClickModal:!1}).then(function(){e.CopyLastArg(t.data)}).catch(function(){e.FindTableData()})):e.FindTableData()}).catch(function(t){e.$message({type:"error",message:"获取上周排班信息失败",showClose:!0,customClass:"error_class"}),e.FindTableData()})})}}).catch(function(t){e.loading=!1,e.$message({type:"error",message:"获取排班表信息失败",showClose:!0,customClass:"error_class"})})},FindTableData:function(){var e=this,t=this;if(t.ToolForm.ArgWardDR&&t.ToolForm.ArgStDate instanceof Date){var r=t.selRows;t.tableData=[];var a=t.ToolForm.ArgWardDR+"^"+t.ToolForm.ArgStDate.Format("YYYY-MM-dd")+"^"+t.ToolForm.ArgEndDate.Format("YYYY-MM-dd"),s=t.axiosConfig("web.INMArgComm","FindArrangeSubList","RecQuery","parr$"+a,"input$","nurseid$"+sessionStorage.getItem("loginID"));t.$ajax.request(s).then(function(a){if(a.data instanceof Object)if(t.loading=!1,a.data.rows.forEach(function(t){!t.ArgPerDR&&e.ColumnsToShow[0].prop&&"PerName"!=e.ColumnsToShow[0].prop&&(t[e.ColumnsToShow[0].prop]=t.PerName)}),t.tableData=a.data.rows,t.nextMethod)switch(t.nextMethod){case"SaveArg":t.SaveArg();break;case"SaveArg2":t.SaveArg2();break;case"SavePerson":t.SavePerson();break;case"MovePersonOnly":t.MovePersonOnly();break;case"MovePerson":t.MovePerson();break;case"CircualtePer":t.CircualtePer();break;case"CircualtePost":t.CircualtePost()}else{var s=[],o=new Array;r.forEach(function(e){var r=t.tableData.findIndex(function(t){return e.ArgPerDR?(e.ArgPerDR==t.ArgPerDR&&o.push(t),e.ArgPerDR==t.ArgPerDR):(e.ArgGroupDR==t.ArgGroupDR&&o.push(t),e.ArgGroupDR==t.ArgGroupDR)});r>-1&&s.push(r)}),s.length>0&&t.$nextTick(function(){t.$refs.argtable.clearSelection(),s.forEach(function(e){t.$refs.argtable.toggleRowSelection(t.tableData[e],!0)})}),t.$nextTick(function(){t.selRows=o}),t.SetStyle()}else t.tableData=[],t.loading=!1,t.$message({type:"error",message:"获取排班表详情失败",showClose:!0,customClass:"error_class"})}).catch(function(e){t.loading=!1,t.tableData=[],t.$message({type:"error",message:"获取排班表详情失败",showClose:!0,customClass:"error_class"})})}},SetStyle:function(){var e=this;e.styleData=new Array;var t=e.ToolForm.ArgWardDR,r=e.ToolForm.ArgStDate;r instanceof Date&&(r=r.Format("YYYY-MM-dd"));var a=e.ToolForm.ArgEndDate;a instanceof Date&&(a=a.Format("YYYY-MM-dd"));var s=t+"^"+r+"^"+a,o=e.axiosConfig("web.INMArgComm","FindArgStyle","RecQuery","parr$"+s,"input$");e.$ajax.request(o).then(function(t){e.loading=!1,t.data instanceof Object&&(e.styleData=t.data.rows,e.tableData.forEach(function(t,r){if(t.ArgPerDR)for(var a=0;a<e.ColumnsToShow.length;a++){var s=e.getCell(r,1+a);s&&(s.style.border="1px solid transparent",s.style.borderRight="1px solid #dfe6ec",s.style.borderBottom="1px solid #dfe6ec",s.style.backgroundColor="");var o=e.ColumnsToShow[a].prop,l=e.getCell(r,1+a);if(l)if(e.styleData[r][o]&&"!"!=e.styleData[r][o])if(-1==o.indexOf("Date")){var i=e.styleData[r][o].split("!")[0],n=e.styleData[r][o].split("!")[1];l.style.color=i,l.style.backgroundColor=n}else{for(var g=e.styleData[r][o].split("@"),d=0;d<g.length;d++)if(g[d]&&"!"!==g[d]){var c=g[d].split("!")[0],m=g[d].split("!")[1];if(l.childNodes[0]&&l.childNodes[0].childNodes[0]){var u=l.childNodes[0].childNodes[0];u.childNodes[d]&&(u.childNodes[d].style.color=c,u.childNodes[d].style.backgroundColor=m)}}l.childNodes[0]&&l.childNodes[0].childNodes[0]&&l.childNodes[0].childNodes[0].childNodes[4]&&l.childNodes[0].childNodes[0].childNodes[4].style&&(l.childNodes[0].childNodes[0].childNodes[4].style.color=g[0].split("!")[0],l.childNodes[0].childNodes[0].childNodes[4].style.backgroundColor=g[0].split("!")[1])}else if(e.ColumnsToShow[a].show){l.style.color="",l.style.backgroundColor="";var p=l.childNodes[0].childNodes[0];if(p&&p.childNodes)for(var h=0;h<p.childNodes.length;h++)p.childNodes[h]&&p.childNodes[h].style&&p.childNodes[h].style.color&&(p.childNodes[h].style.color="",p.childNodes[h].style.backgroundColor="")}}else for(var f=0;f<2;f++){var A=e.getCell(r,f);A&&(A.style.borderRight="1px solid #DCF8A8",A.style.backgroundColor="#DCF8A8")}}))}).catch(function(t){e.loading=!1,e.$message({type:"error",message:"获取排班表样式失败",showClose:!0,customClass:"error_class"})})},RefreshRowData:function(e,t){var r=this,a="";(t?e:r.selCells).forEach(function(e){var t=e[0],s=(e[1],void 0==r.tableData[t].ArgPerDR?"":r.tableData[t].ArgPerDR),o=void 0==r.tableData[t].ArgRowId?"":r.tableData[t].ArgRowId;a=a?a+"^"+s+"!"+o:s+"!"+o});var s=r.ToolForm.ArgStDate instanceof Date?r.ToolForm.ArgStDate.Format("YYYY-MM-dd"):r.ToolForm.ArgStDate,o=r.ToolForm.ArgEndDate instanceof Date?r.ToolForm.ArgEndDate.Format("YYYY-MM-dd"):r.ToolForm.ArgEndDate;r.$ajax.request(r.axiosConfig("web.INMArgComm","FindNurseArgSub","RecQuery","ward$"+r.ToolForm.ArgWardDR,"stDate$"+s,"endDate$"+o,"parr$"+a)).then(function(e){e.data instanceof Object?(e.data.rows.forEach(function(e){r.tableData.forEach(function(t){if(t.ArgPerDR&&e.ArgPerDR==t.ArgPerDR)for(var r in e)t[r]=e[r]})}),r.$forceUpdate(),r.SetCellStyle(r.ToolForm.ArgWardDR,s,o,a)):r.$message({type:"error",message:"获取行数据失败",showClose:!0,customClass:"error_class"}),r.$nextTick(function(){r.loading=!1})}).catch(function(e){r.$nextTick(function(){r.loading=!1}),r.$message({type:"error",message:"获取行数据失败",showClose:!0,customClass:"error_class"})})},SetCellStyle:function(e,t,r,a){var s=this;if(e){var o=s.axiosConfig("web.INMArgComm","FindArgCellStyle","RecQuery","ward$"+e,"stdate$"+t,"enddate$"+r,"parr$"+a);s.$ajax.request(o).then(function(e){e.data.rows.forEach(function(e){s.tableData.forEach(function(t,r){if(t.ArgPerDR){if(void 0!=t.ArgPerDR&&t.ArgPerDR==e.ArgPerDR)for(var a=0;a<s.ColumnsToShow.length;a++){var o=s.getCell(r,1+a);o&&(o.style.border="1px solid transparent",o.style.borderRight="1px solid #dfe6ec",o.style.borderBottom="1px solid #dfe6ec",o.style.backgroundColor="");var l=s.ColumnsToShow[a].prop;if(-1!=l.indexOf("Date")){var i=s.getCell(r,1+a);if(i)if(e[l]&&"!"!=e[l])if(-1==l.indexOf("Date")){var n=e[l].split("!")[0],g=e[l].split("!")[1];i.style.color=n,i.style.backgroundColor=g}else{for(var d=e[l].split("@"),c=0;c<d.length;c++)if(d[c]&&"!"!==d[c]){var m=d[c].split("!")[0],u=d[c].split("!")[1];if(i.childNodes[0]&&i.childNodes[0].childNodes[0]){var p=i.childNodes[0].childNodes[0];p.childNodes[c]&&(p.childNodes[c].style.color=m,p.childNodes[c].style.backgroundColor=u)}}i.childNodes[0]&&i.childNodes[0].childNodes[0]&&i.childNodes[0].childNodes[0].childNodes[4]&&i.childNodes[0].childNodes[0].childNodes[4].style&&(i.childNodes[0].childNodes[0].childNodes[4].style.color=d[0].split("!")[0],i.childNodes[0].childNodes[0].childNodes[4].style.backgroundColor=d[0].split("!")[1])}else if(s.ColumnsToShow[a].show){i.style.color="",i.style.backgroundColor="";var h=i.childNodes[0].childNodes[0];if(h&&h.childNodes)for(var f=0;f<h.childNodes.length;f++)h.childNodes[f]&&h.childNodes[f].style&&h.childNodes[f].style.color&&(h.childNodes[f].style.color="",h.childNodes[f].style.backgroundColor="")}}}}else for(var A=0;A<2;A++){var b=s.getCell(r,A);b&&(b.style.borderRight="1px solid #DCF8A8",b.style.backgroundColor="#DCF8A8")}})})}).catch(function(e){s.loading=!1,s.$message({type:"error",message:"获取数据行样式失败",showClose:!0,customClass:"error_class"})})}},SelectGrp:function(e,t){var r=this;r.$nextTick(function(){if(t.ArgPerDR)if(-1==e.indexOf(t))t.ArgGroupDR==r.selGroup&&r.tableData.forEach(function(e,t){e.ArgGroupDR==r.selGroup&&(e.ArgPerDR||(r.$refs.argtable.toggleRowSelection(e,!1),r.selGroup=""))});else{var a=t.ArgGroupDR,s="",o=!0;r.tableData.forEach(function(t,r){t.ArgGroupDR==a&&(t.ArgPerDR?-1==e.indexOf(t)&&(o=!1):s=t)}),o&&s&&(r.$refs.argtable.toggleRowSelection(s,!0),r.selGroup=a,r.tableData.forEach(function(e,t){e.ArgGroupDR!=r.selGroup&&r.$refs.argtable.toggleRowSelection(e,!1)}))}else-1!=e.indexOf(t)?r.selGroup=t.ArgGroupDR:r.selGroup="",r.tableData.forEach(function(e,t){e.ArgPerDR?e.ArgGroupDR==r.selGroup?r.$refs.argtable.toggleRowSelection(e,!0):r.$refs.argtable.toggleRowSelection(e,!1):e.ArgGroupDR!=r.selGroup&&r.$refs.argtable.toggleRowSelection(e,!1)})})},CellMouseEnter:function(e,t,r,a){this.ClearAddArgBtn();var s=this.tableData.indexOf(e);if(-1!=s){var o=document.getElementById("addbtn"+t.property+s);o&&(o.style.display="block")}},CellMouseLeave:function(e,t,r,a){var s=this.tableData.indexOf(e);if(-1!=s){var o=document.getElementById("addbtn"+t.property+s);o&&(o.style.display="none")}},AddClick:function(e,t){if("Y"!=this.QuickForm.QuickStatus&&"Y"!=this.PostGroupForm.GroupStatus){var r=new Date(e.substr(4).replace(/\-/g,"/"));r=r.addDate(this.ArgUpdateDay);var a=new Date;("R"==this.ToolForm.ArgStatus||"A"==this.ToolForm.ArgStatus)&&r.setHours(0,0,0,0)<=a.setHours(0,0,0,0)?this.$message({type:"warning",message:"超出修改班次时限",showClose:!0,customClass:"warning_class"}):(this.dialogVisible=!0,this.GetWardPostData(),this.$nextTick(function(){this.editForm.ArgPostDR="",this.editForm.rw="",this.editForm.HolidayFlag=!1,this.editForm.ArgWorkRemark="",this.InitEditFormTime(),this.editForm.ArgPostType="",this.GetWardPostData(),this.editForm.ArgPerDR=t.ArgPerDR,this.editForm.ArgDate=new Date(e.substr(4).replace(/\-/g,"/")),this.editForm.ArgEditUser=sessionStorage.getItem("loginID"),this.rowData.ArgPerDR=t.ArgPerDR,this.rowData.ArgPerSort=t.ArgPerSort,this.rowData.ArgGroupDR=t.ArgGroupDR,this.rowData.rw=t.ArgRowId,this.rowData.ArgWorkRemark=t.ArgWorkRemark}))}},GetForm:function(e){var t="";for(var r in this[e])void 0==this[e][r]&&(this[e][r]=""),t=this[e][r]instanceof Date?t+r+"|"+this[e][r].Format("YYYY-MM-dd")+"^":t+r+"|"+this[e][r].toString()+"^";return t},GetRows:function(){var e="";return this.tableData.forEach(function(t){if(t.ArgPerDR&&t.ArgPerSort){var r=void 0==t.ArgWorkRemark?"":t.ArgWorkRemark,a=void 0==t.ArgGroupDR?"":t.ArgGroupDR,s=void 0==t.ArgRowId?"":t.ArgRowId,o=t.ArgPerBeds?t.ArgPerBeds:"";e=e+"@"+t.ArgPerDR+"^"+t.ArgPerSort+"^"+r+"^"+a+"^"+s+"^"+o}}),e},SaveRows:function(){var e=this;if(!e.ToolForm.ArgWardDR)return e.$message({type:"warning",message:"请选择病区",showClose:!0,customClass:"warning_class"}),!1;if(!e.ToolForm.ArgStDate)return e.$message({type:"warning",message:"请选择开始日期",showClose:!0,customClass:"warning_class"}),!1;var t=e.GetForm("ToolForm"),r="";e.tableData.forEach(function(e){if(e.ArgPerDR&&e.ArgPerSort){var t=void 0==e.ArgWorkRemark?"":e.ArgWorkRemark,a=void 0==e.ArgGroupDR?"":e.ArgGroupDR,s=void 0==e.ArgRowId?"":e.ArgRowId,o=e.ArgPerBeds?e.ArgPerBeds:"";r=r+"@"+e.ArgPerDR+"^"+e.ArgPerSort+"^"+t+"^"+a+"^"+s+"^"+o}});var a=e.axiosConfig("web.INMArgComm","SaveArgRows","Method","parr1$"+t,"parr2$"+r);e.$ajax.request(a).then(function(t){var r=e.ToolForm.ArgStDate;r instanceof Date&&(r=r.Format("YYYY-MM-dd"));var a=e.ToolForm.ArgWardDR+"^"+r,s=e.axiosConfig("web.INMArgComm","IsExsitArg","Method","parr$"+a,"input$");e.$ajax.request(s).then(function(t){0!=t.data&&(e.ToolForm.rw=t.data,e.FindTableData())})}).catch(function(e){})},SaveArg:function(){var e=this;e.ToolForm.ArgWardDR?e.ToolForm.ArgStDate?e.$refs.form3.validate(function(t){if(!t)return!1;if(!e.timeIsValid("editForm",3))return!1;if(!e.ToolForm.rw)return e.nextMethod="SaveArg",e.SaveRows(),!1;var r=e.GetForm("ToolForm"),a=e.GetForm("rowData"),s=e.GetForm("editForm"),o=e.getItmInData(e.WardPostData,"rw",e.editForm.ArgPostDR,"PostDesc");if(""!=r&&""!=a&&""!=s){var l=e.axiosConfig("web.INMArgComm","SaveArgSub","Method","parr1$"+r,"parr2$"+a,"parr3$"+s);e.$ajax.request(l).then(function(t){if(isNaN(t.data))t.data.length<100?e.$message({message:t.data,type:"warning",showClose:!0,customClass:"warning_class"}):e.$message({message:"保存失败！",type:"error",showClose:!0,customClass:"error_class"});else{e.dialogVisible=!1;var r=e.selCells[0],a=e.ColumnsToShow[r[1]-1],s=e.tableData[r[0]][a.prop],l="";if(void 0!=s&&""!=s&&"--"!=s&&e.editForm.rw)for(var i=0;i<s.split("%")[0].split("「").length;i++){var n=s.split("%")[0].split("「")[i];if(n)n.split("」")[0]==t.data&&(l=n.split("」")[1])}if(e.GetIsDisable()){var g=a.prop.substring(4);g||(g="");var d="ArrangeDR|"+e.ToolForm.rw+"^ArgLogPerDR|"+e.editForm.ArgPerDR+"^argDate|"+g+"^ArgLogAfter|"+o;d=d+"^ArgLogBefor|"+l,e.editForm.rw?d+="^ArgLogRemark|修改班次":d+="^ArgLogRemark|添加班次",e.SaveArgLog(d)}}e.nextMethod&&(e.nextMethod=""),e.RefreshRowData(e.selCells)}).catch(function(t){e.$message({message:"保存失败！",type:"error",showClose:!0,customClass:"error_class"}),e.nextMethod&&(e.nextMethod=""),e.RefreshRowData(e.selCells)})}}):e.$message({type:"warning",message:"请选择开始日期",showClose:!0,customClass:"warning_class"}):e.$message({type:"warning",message:"请选择病区",showClose:!0,customClass:"warning_class"})},DeleteGroup:function(){var e=this;e.selGroup?"-"!=e.selGroup?e.ToolForm.rw?e.$confirm("此操作将删除该选中分组, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"关闭",model:!1,type:"warning"}).then(function(){var t=e.axiosConfig("web.INMArgComm","DeleteArgGroup","Method","id$"+e.selGroup);e.$ajax.request(t).then(function(t){1==t.data?(e.$message({message:"删除成功！",type:"success",showClose:!0,customClass:"success_class"}),e.FindTableData(),e.$refs.argtable.clearSelection(),e.selRows=new Array,e.selGroup=""):""!=t.data&&0!=t.data?e.$message({message:t.data,type:"warning",showClose:!0,customClass:"warning_class"}):e.$message({message:"删除失败",type:"error",showClose:!0,customClass:"error_class"})}).catch(function(t){e.$message({message:"删除失败",type:"error",showClose:!0,customClass:"error_class"})})}).catch(function(){e.$message({type:"info",message:"已取消删除",showClose:!0,customClass:"info_class"})}):e.$message({type:"warning",message:"未形成排班，删除无效",showClose:!0,customClass:"warning_class"}):e.$message({type:"warning",message:"未分组删除无效",showClose:!0,customClass:"warning_class"}):e.$message({type:"warning",message:"请选择人员分组",showClose:!0,customClass:"warning_class"})},SaveClick:function(){var e=this;if(e.ToolForm.ArgWardDR)if(e.ToolForm.ArgStDate)if("R"!=e.ToolForm.ArgStatus)if("A"!=e.ToolForm.ArgStatus){var t=e.axiosConfig("web.INMArgComm","CheckWardPostRatio","Method","id$"+e.ToolForm.rw);e.$ajax.request(t).then(function(t){1!=t.data&&e.$message({type:"warning",message:t.data,showClose:!0,customClass:"warning_class",offset:90}),e.ToolForm.ArgStatus="S",e.SaveRows(),e.$message({type:"success",message:"保存成功！",showClose:!0,customClass:"success_class"})}).catch(function(t){e.$message({type:"error",message:"保存失败",showClose:!0,customClass:"error_class"})})}else e.$message({type:"warning",message:"已经审核，不可再保存",showClose:!0,customClass:"warning_class"});else e.$message({type:"warning",message:"已经提交，不可再保存",showClose:!0,customClass:"warning_class"});else e.$message({type:"warning",message:"请选择日期",showClose:!0,customClass:"warning_class"});else e.$message({type:"warning",message:"请选择病区",showClose:!0,customClass:"warning_class"})},ArgSelect:function(e,t,r){var a=this;if("Y"!=a.QuickForm.QuickStatus&&"Y"!=a.PostGroupForm.GroupStatus)if(1==r.isEditPost){var s=document.getElementsByClassName("right-menu");s[0]&&(s[0].style.display="none");var o=new Date(t.substr(4).replace(/\-/g,"/"));o=o.addDate(this.ArgUpdateDay);var l=new Date;if(("R"==this.ToolForm.ArgStatus||"A"==this.ToolForm.ArgStatus)&&o.setHours(0,0,0,0)<=l.setHours(0,0,0,0))this.$message({type:"warning",message:"超出班次修改时限",showClose:!0,customClass:"warning_class"});else if(e){a.editFlag=!0;var i=a.axiosConfig("web.INMArgComm","GetArgSubById","RecMethod","id$"+e);a.$ajax.request(i).then(function(e){var t=e.data;if("Y"==t.ArgType||"N"==t.ArgType)return a.dialogVisibleArgPlus=!0,a.editFormArgPlus.ArgType=t.ArgType,a.editFormArgPlus.ArgStTime1=t.ArgStTime1,a.editFormArgPlus.ArgEndTime1=t.ArgEndTime1,a.editFormArgPlus.ArgWorkRemark=t.ArgWorkRemark,a.editFormArgPlus.rw=t.rw,void(a.editFormArgPlus.ArgEditUser=sessionStorage.getItem("loginID"));a.editForm.ArgPostType=t.ArgPostType,a.GetWardPostData(),a.dialogVisible=!0,a.$nextTick(function(){a.InitEditFormTime(),a.editForm.ArgPostDR="",a.editForm.rw="",a.editForm.ArgRemark="",a.editForm.ArgApplyFlag="",a.editForm.ArgWorkRemark="",t.ArgEndTime3?a.addtimeflag=!1:a.addtimeflag=!0;var e=0;for(var s in a.editForm)if(t[s]&&(-1!=s.indexOf("Date")?t[s]instanceof Date?a.editForm[s]=new Date(t[s]):"string"==typeof t[s]&&(a.editForm[s]=new Date(t[s].replace(/-/g,"/"))):a.editForm[s]="ArgPostType"==s&&"S"==t[s]?"":t[s],-1!=s.indexOf("ArgStTime")||-1!=s.indexOf("ArgEndTime")||-1!=s.indexOf("ArgSecEndTime"))){var o=!1,l=t[s];-1!=l.indexOf("次日")&&(l=l.substring(2),-1!=s.indexOf("ArgEndTime")&&(e=s.substring(s.length-1)),o=!0),-1==s.indexOf("ArgSecEndTime")?-1==s.indexOf("End")?a.editForm["ArgNextDay"+s.substring(s.length-1)+"St"]=o:a.editForm["ArgNextDay"+s.substring(s.length-1)]=o:a.editForm.ArgSecNextDay=o,a.editForm[s+"T"]=l}if(e>=1)for(var i=(e=parseInt(e))+1;i<4;i++)a.editForm["ArgNextDay"+i]=!0,a.editForm["ArgNextDay"+i+"St"]=!0;a.rowData.ArgPerDR=r.ArgPerDR,a.rowData.ArgPerSort=r.ArgPerSort,a.rowData.ArgGroupDR=r.ArgGroupDR,a.rowData.rw=r.ArgRowId,a.rowData.ArgWorkRemark=r.ArgWorkRemark,a.$nextTick(function(){a.editFlag=!1})})}).catch(function(e){a.dialogVisible=!1})}}else a.$message({type:"warning",message:"无权限修改数据",showClose:!0,customClass:"warning_class"})},DeletePerPost:function(){var e=this;if(0!=e.selRows.length)if(e.ToolForm.rw){var t=e.GetForm("ToolForm"),r="";if(e.selRows.forEach(function(e){var t=e.ArgPerDR;""!=t&&void 0!=t&&(r=r+t+",")}),""!=t&&""!=r){var a=e.axiosConfig("web.INMArgComm","DeletePerArgSub","Method","parr1$"+t,"parr2$"+r);e.$ajax.request(a).then(function(t){1==t.data?(e.$message({type:"success",message:"删除成功",showClose:!0,customClass:"success_class"}),e.FindTableData()):e.$message({type:"error",message:"删除失败",showClose:!0,customClass:"error_class"})}).catch(function(t){e.$message({type:"error",message:"删除失败",showClose:!0,customClass:"error_class"})})}}else e.$message({type:"warning",message:"未形成排班，删除无效",showClose:!0,customClass:"warning_class"});else e.$message({type:"warning",message:"请选择要行记录",showClose:!0,customClass:"warning_class"})},RowSelect:function(e){this.selRows=e,this.selCells=new Array},CellMouseDown:function(e,t,r){if(0===r.button)if(r.shiftKey&&0!=this.lastSelCell.length)this.selectMatrix(e,t);else if(r.ctrlKey){var a=this.findInArray(this.selCells,[e,t]),s=this.selCells.concat();-1!=a?s.splice(a,1):(s.push([e,t]),this.lastSelCell=[e,t]),this.selCells=s}else this.selCells=[[e,t]],this.lastSelCell=[e,t]},CellMouseUp:function(e,t,r){0!=r.button||r.ctrlKey||this.selectMatrix(e,t)},getCell:function(e,t){if(!isNaN(e)&&!isNaN(t)&&(this.$refs.argtable&&this.$refs.argtable.$el.childNodes[2].childNodes[0].rows[e]))return this.$refs.argtable.$el.childNodes[2].childNodes[0].rows[e].cells[t]},selectMatrix:function(e,t){if(0!=this.lastSelCell.length){var r=this.lastSelCell[0],a=this.lastSelCell[1];if(r>e){var s=r;r=e,e=s}if(a>t){var o=a;a=t,t=o}for(var l=new Array,i=r;i<=e;i++)if(void 0!=this.tableData[i].ArgPerDR&&""!=this.tableData[i].ArgPerDR)for(var n=a;n<=t;n++)-1!=this.ColumnsToShow[n-1].prop.indexOf("Date")&&l.push([i,n]);l.length>0&&(this.selCells=l)}},findInArray:function(e,t){for(var r=0;r<e.length;r++)if(e[r].toString()==t.toString())return r;return-1},CellContextmenu:function(e,t,r){if(r.preventDefault(),-1!=this.findInArray(this.selCells,[e,t])&&0!=this.CheckIsEditPost()&&this.IdentifyCanArg(this.tableData[e][this.ColumnsToShow[t-1].prop])){var a=document.getElementsByClassName("right-menu");if(a[0]){r.returnValue=!1,r.cancelBubble=!0;var s=r.clientX,o=r.clientY;o+200>document.documentElement.clientHeight&&(this.GetIsDisable()?o-=30:o-=200),a[0].style.left=s-1+"px",a[0].style.top=o+"px",a[0].style.display="block"}}},ArgClick:function(){var e=this,t=document.getElementsByClassName("right-menu");t[0]&&(t[0].style.display="none"),this.dialogVisible3=!0,this.$nextTick(function(){e.editForm.ArgPostType="",e.editForm.ArgPostDR="",e.editForm.rw="",e.editForm.ArgWorkRemark="",e.editForm.HolidayFlag=!1,e.InitEditFormTime(),e.editForm.ArgPerDR=e.selectCell.rowRec.ArgPerDR,e.editForm.ArgDate=new Date(e.selectCell.colprop.substr(4).replace(/\-/g,"/")),e.editForm.ArgEditUser=sessionStorage.getItem("loginID"),e.rowData.ArgPerDR=e.selectCell.rowRec.ArgPerDR,e.rowData.ArgPerSort=e.selectCell.rowRec.ArgPerSort,e.rowData.ArgGroupDR=e.selectCell.rowRec.ArgGroupDR,e.rowData.rw=e.selectCell.rowRec.ArgRowId,e.rowData.ArgWorkRemark=e.selectCell.rowRec.ArgWorkRemark})},CopyClick:function(){var e=document.getElementsByClassName("right-menu");e[0]&&(e[0].style.display="none");var t=this,r=!0;if(t.selCells.find(function(e){var a=e[0],s=e[1],o=new Date(t.ColumnsToShow[s-1].prop.substr(4).replace(/-/g,"/"));return o instanceof Date&&(t.IdentifyCanArg(t.tableData[a]["Date"+o.Format("YYYY-MM-dd")])?void 0:(r=!1,!0))}),r){var a=t.GetForm("ToolForm");t.cutBoard=new Array,t.cutBoard[0]="copy",t.cutBoard[1]=a,t.selCells.forEach(function(e){var r=e[0],a=e[1],s=void 0==t.tableData[r].ArgPerDR?"":t.tableData[r].ArgPerDR,o=void 0==t.tableData[r].ArgGroupDR?"":t.tableData[r].ArgGroupDR,l=void 0==t.tableData[r].ArgPerSort?"":t.tableData[r].ArgPerSort,i=void 0==t.tableData[r].ArgRowId?"":t.tableData[r].ArgRowId,n=new Date(t.ColumnsToShow[a-1].prop.substr(4).replace(/-/g,"/")),g=void 0==t.tableData[r].ArgWorkRemark?"":t.tableData[r].ArgWorkRemark;if(!(""==s||void 0==s||!n instanceof Date)&&t.tableData[r][t.ColumnsToShow[a-1].prop].split("%")[0]){var d="ArgPerDR|"+s+"^ArgGroupDR|"+o+"^ArgPerSort|"+l+"^rw|"+i+"^ArgWorkRemark|"+g;t.cutBoard.push({row:r,col:a,rowdata:d,date:n.Format("YYYY-MM-dd")})}})}else t.$message({type:"warning",message:"所选单元格不合法",showClose:!0,customClass:"warning_class"})},CutClick:function(){var e=document.getElementsByClassName("right-menu");e[0]&&(e[0].style.display="none");var t=this,r=t.GetForm("ToolForm");t.cutBoard=new Array,t.cutBoard[0]="cut",t.cutBoard[1]=r,t.selCells.forEach(function(e){var r=e[0],a=e[1],s=void 0==t.tableData[r].ArgPerDR?"":t.tableData[r].ArgPerDR,o=void 0==t.tableData[r].ArgGroupDR?"":t.tableData[r].ArgGroupDR,l=void 0==t.tableData[r].ArgPerSort?"":t.tableData[r].ArgPerSort,i=void 0==t.tableData[r].ArgRowId?"":t.tableData[r].ArgRowId,n=new Date(t.ColumnsToShow[a-1].prop.substr(4).replace(/-/g,"/")),g=void 0==t.tableData[r].ArgWorkRemark?"":t.tableData[r].ArgWorkRemark;if(!(""==s||void 0==s||!n instanceof Date)&&t.tableData[r][t.ColumnsToShow[a-1].prop].split("%")[0]){var d="ArgPerDR|"+s+"^ArgGroupDR|"+o+"^ArgPerSort|"+l+"^rw|"+i+"^ArgWorkRemark|"+g;t.cutBoard.push({row:r,col:a,rowdata:d,date:n.Format("YYYY-MM-dd")});var c=t.getCell(r,a);c&&("1px solid rgb(33, 115, 70)"==c.style.borderLeft&&(c.style.borderLeft="1px dashed #217346"),"1px solid rgb(33, 115, 70)"==c.style.borderTop&&(c.style.borderTop="1px dashed #217346"),"1px solid rgb(33, 115, 70)"==c.style.borderRight&&(c.style.borderRight="1px dashed #217346"),"1px solid rgb(33, 115, 70)"==c.style.borderBottom&&(c.style.borderBottom="1px dashed #217346"))}})},SortCutBoard:function(){if(!(this.cutBoard.length<4))for(var e=2;e<this.cutBoard.length-1;e++)for(var t=e+1;t<this.cutBoard.length;t++)if(this.cutBoard[e].row>this.cutBoard[t].row||this.cutBoard[e].row==this.cutBoard[t].row&&this.cutBoard[e].col>this.cutBoard[t].col){var r=JSON.parse(n()(this.cutBoard[e]));this.cutBoard[e]=JSON.parse(n()(this.cutBoard[t])),this.cutBoard[t]=JSON.parse(n()(r))}},SortSelCells:function(){if(!(this.selCells.length<2))for(var e=0;e<this.selCells.length-1;e++)for(var t=e+1;t<this.selCells.length;t++)if(this.selCells[e][0]>this.selCells[t][0]||this.selCells[e][0]==this.selCells[t][0]&&this.selCells[e][1]>this.selCells[t][1]){var r=this.selCells[e];this.selCells[e]=this.selCells[t],this.selCells[t]=r}},PasteClick:function(){var e=document.getElementsByClassName("right-menu");e[0]&&(e[0].style.display="none");var t=this;if("R"!=this.ToolForm.ArgStatus&&"A"!=this.ToolForm.ArgStatus)if(t.cutBoard.length<3||""==t.cutBoard[0]||""==t.cutBoard[1])t.$message({type:"warning",message:"剪切板中未复制或剪切任何班次",showClose:!0,customClass:"warning_class"});else if(0!=t.selCells.length){t.SortCutBoard(),t.SortSelCells();var r=!0;if(t.selCells.find(function(e){var a=e[0],s=e[1],o=new Date(t.ColumnsToShow[s-1].prop.substr(4).replace(/-/g,"/"));return o instanceof Date&&(t.IdentifyCanArg(t.tableData[a]["Date"+o.Format("YYYY-MM-dd")])?void 0:(r=!1,!0))}),r){var a=t.cutBoard[1],s=t.GetForm("ToolForm");if(3==t.cutBoard.length&&"copy"==t.cutBoard[0]){var o=t.cutBoard[2].rowdata+"^ArgDate|"+t.cutBoard[2].date;t.selCells.forEach(function(e){var r=e[0],l=e[1],i=void 0==t.tableData[r].ArgPerDR?"":t.tableData[r].ArgPerDR,n=void 0==t.tableData[r].ArgGroupDR?"":t.tableData[r].ArgGroupDR,g=void 0==t.tableData[r].ArgPerSort?"":t.tableData[r].ArgPerSort,d=void 0==t.tableData[r].ArgRowId?"":t.tableData[r].ArgRowId,c=new Date(t.ColumnsToShow[l-1].prop.substr(4).replace(/-/g,"/"));if(!(""==i||void 0==i||!c instanceof Date)){var m="ArgPerDR|"+i+"^ArgGroupDR|"+n+"^ArgPerSort|"+g+"^rw|"+d+"^ArgDate|"+c.Format("YYYY-MM-dd");if(o!=m){if(""!=a&&""!=o&&""!=s&&""!=m){var u=t.axiosConfig("web.INMArgComm","CopyArgSub","Method","copy1$"+a,"copy2$"+o,"paste1$"+s,"paste2$"+m,"type$"+t.cutBoard[0]);t.$ajax.request(u).then(function(r){1==r.data?t.findInArray(t.selCells,e)==t.selCells.length-1&&(t.$message({type:"success",message:"粘贴成功",showClose:!0,customClass:"success_class"}),t.RefreshRowData(t.selCells)):t.$message({type:"error",message:"粘贴失败",showClose:!0,customClass:"error_class"})}).catch(function(e){})}}else t.$message({type:"warning",message:"禁止对同一单元格进行复制粘贴操作",showClose:!0,customClass:"warning_class"})}})}else{var l=t.cutBoard[2].row,i=t.cutBoard[2].col,n=t.selCells[0][0],g=t.selCells[0][1],d=!0;n>l&&(d=!1);for(var c=function(e){for(var r=t.cutBoard[e].rowdata+"^ArgDate|"+t.cutBoard[e].date,o=parseInt(t.cutBoard[e].row)-parseInt(l)-t.GetEmptyRow(l,t.cutBoard[e].row),d=parseInt(n),c=1;c<=o;c++)void 0==t.tableData[d+1].ArgPerDR||""==t.tableData[d+1].ArgPerDR?d+=2:d+=1;if(d>=t.tableData.length)return"continue";var m=parseInt(g)+parseInt(t.cutBoard[e].col)-parseInt(i);if(m>t.ColumnsToShow.length||-1==t.ColumnsToShow[m-1].prop.indexOf("Date"))return"continue";var u=void 0==t.tableData[d].ArgPerDR?"":t.tableData[d].ArgPerDR,p=void 0==t.tableData[d].ArgGroupDR?"":t.tableData[d].ArgGroupDR,h=void 0==t.tableData[d].ArgPerSort?"":t.tableData[d].ArgPerSort,f=void 0==t.tableData[d].ArgRowId?"":t.tableData[d].ArgRowId,A=new Date(t.ColumnsToShow[m-1].prop.substr(4).replace(/-/g,"/"));if(""==u||void 0==u||!A instanceof Date)return"continue";if(A>t.ToolForm.ArgEndDate)return"continue";var b="ArgPerDR|"+u+"^ArgGroupDR|"+p+"^ArgPerSort|"+h+"^rw|"+f+"^ArgDate|"+A.Format("YYYY-MM-dd");if(r==b)return t.$message({type:"warning",message:"禁止对同一单元格进行复制粘贴操作",showClose:!0,customClass:"warning_class"}),"continue";if(""!=a&&""!=r&&""!=s&&""!=b){var w=t.axiosConfig("web.INMArgComm","CopyArgSub","Method","copy1$"+a,"copy2$"+r,"paste1$"+s,"paste2$"+b,"type$"+t.cutBoard[0]);t.$ajax.request(w).then(function(r){if(1!=r.data)return t.FindTableData(),void t.$message({type:"error",message:"粘贴失败！",showClose:!0,customClass:"error_class"});e==t.cutBoard.length-1&&(t.$message({type:"success",message:"粘贴成功",showClose:!0,customClass:"success_class"}),t.FindTableData())})}},m=d?2:t.cutBoard.length-1;d?m<t.cutBoard.length:m>=2;d?m++:m--)c(m)}}else t.$message({type:"warning",message:"所选单元格不合法",showClose:!0,customClass:"warning_class"})}else t.$message({type:"warning",message:"请选择要粘贴的单元格或起始单元格",showClose:!0,customClass:"warning_class"})},GetEmptyRow:function(e,t){var r=0;if(e==t)return 0;for(var a=e;a<=t;a++)void 0!=this.tableData[a].ArgPerDR&&""!=this.tableData[a].ArgPerDR||r++;return r},DeleteArgsub:function(){var e=this;e.editForm.rw?e.$confirm("此操作将删除班次, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"关闭",model:!1,type:"warning"}).then(function(t){var r=e.axiosConfig("web.INMArgComm","DeleteArgSubById","Method","parr$"+e.editForm.rw);e.$ajax.request(r).then(function(t){if(1==t.data){if(e.$message({message:"删除成功！",type:"success",showClose:!0,customClass:"success_class"}),e.dialogVisible=!1,e.GetIsDisable()){var r=e.editForm.ArgDate;r||(r=""),r instanceof Date&&(r=r.Format("YYYY-MM-dd"));var a="ArrangeDR|"+e.ToolForm.rw+"^ArgLogPerDR|"+e.editForm.ArgPerDR+"^argDate|"+r+"^ArgLogAfter|";a=a+"^ArgLogBefor|"+e.editForm.ArgPostDR+"^ArgLogRemark|删除班次",e.SaveArgLog(a)}}else e.$message({type:"error",message:"删除失败！",showClose:!0,customClass:"error_class"});e.RefreshRowData(e.selCells)}).catch(function(t){e.RefreshRowData(e.selCells)})}).catch(function(t){e.$message({type:"info",message:"取消删除",showClose:!0,customClass:"info_class"})}):e.$message({type:"warning",message:"所选未获取ID,请刷新界面",showClose:!0,customClass:"warning_class"})},DeleteClick:function(){var e=document.getElementsByClassName("right-menu");e[0]&&(e[0].style.display="none");var t=this;if(void 0!=t.ToolForm.ArgWardDR&&""!=t.ToolForm.ArgWardDR)if(t.ToolForm.rw&&0!=t.selCells.length){var r=t.selCells[0],a=r[0],s=r[1],o=t.tableData[a];if(1==o.isEditPost)if("R"==this.ToolForm.ArgStatus||"A"==this.ToolForm.ArgStatus){var l=t.ColumnsToShow[s-1].prop,i=new Date(l.substr(4).replace(/\-/g,"/")),n=i.addDate(this.ArgUpdateDay),g=new Date;if(n.setHours(0,0,0,0)<=g.setHours(0,0,0,0))return void this.$message({type:"warning",message:"超出班次修改时限",showClose:!0,customClass:"warning_class"});t.$confirm("此操作将删除已排班次, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"关闭",model:!1,type:"warning"}).then(function(){var e=t.GetForm("ToolForm"),r=void 0==o.ArgPerDR?"":o.ArgPerDR,s=void 0==o.ArgGroupDR?"":o.ArgGroupDR,n=void 0==o.ArgPerSort?"":o.ArgPerSort,g=void 0==o.ArgRowId?"":o.ArgRowId,d=void 0==o.ArgWorkRemark?"":o.ArgWorkRemark;if(!(""==r||void 0==r||!i instanceof Date)){var c="ArgPerDR|"+r+"^ArgGroupDR|"+s+"^ArgPerSort|"+n+"^rw|"+g+"^ArgWorkRemark|"+d;if(""!=e&&""!=c&&""!=i){var m=t.axiosConfig("web.INMArgComm","DeleteArgSub","Method","parr1$"+e,"parr2$"+c,"date$"+i.Format("YYYY-MM-dd"));t.$ajax.request(m).then(function(e){if(1==e.data){if(t.$message({type:"success",message:"删除成功",showClose:!0,customClass:"success_class"}),-1!=t.tableData[a][l].indexOf("」")){var s=t.tableData[a][l].split("%")[0].split("「");if(t.GetIsDisable()){for(var o="",n=0;n<s.length;n++)o=0==n?s[n].split("」")[1]:o+"」"+s[n].split("」")[1];var g=i;g||(g=""),g instanceof Date&&(g=g.Format("YYYY-MM-dd"));var d="ArrangeDR|"+t.ToolForm.rw+"^ArgLogPerDR|"+r+"^argDate|"+g+"^ArgLogAfter|";d=d+"^ArgLogBefor|"+o+"^ArgLogRemark|删除班次",t.SaveArgLog(d)}t.RefreshRowData(t.selCells)}}else t.$message({type:"error",message:e.data,showClose:!0,customClass:"error_class"})}).catch(function(e){})}}}).catch(function(){t.$message({type:"info",message:"已取消删除",showClose:!0,customClass:"info_class"})})}else t.$confirm("此操作将删除已排班次, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"关闭",model:!1,type:"warning"}).then(function(){var e=t.GetForm("ToolForm");t.selCells.forEach(function(r){var a=r[0],s=r[1],l=void 0==t.tableData[a].ArgPerDR?"":t.tableData[a].ArgPerDR,i=void 0==t.tableData[a].ArgGroupDR?"":t.tableData[a].ArgGroupDR,n=void 0==t.tableData[a].ArgPerSort?"":t.tableData[a].ArgPerSort,g=void 0==t.tableData[a].ArgRowId?"":t.tableData[a].ArgRowId,d=void 0==o.ArgWorkRemark?"":o.ArgWorkRemark,c=new Date(t.ColumnsToShow[s-1].prop.substr(4).replace(/-/g,"/"));if(!(""==l||void 0==l||!c instanceof Date)){var m="ArgPerDR|"+l+"^ArgGroupDR|"+i+"^ArgPerSort|"+n+"^rw|"+g+"^ArgWorkRemark|"+d;if(""!=e&&""!=m&&""!=c){var u=t.axiosConfig("web.INMArgComm","DeleteArgSub","Method","parr1$"+e,"parr2$"+m,"date$"+c.Format("YYYY-MM-dd"));t.$ajax.request(u).then(function(e){1==e.data?t.findInArray(t.selCells,r)==t.selCells.length-1&&(t.$message({type:"success",message:"删除成功",showClose:!0,customClass:"success_class"}),t.RefreshRowData(t.selCells)):t.$message({type:"error",message:e.data,showClose:!0,customClass:"error_class"})}).catch(function(e){t.RefreshRowData(t.selCells)})}}})}).catch(function(){t.$message({type:"info",message:"已取消删除",showClose:!0,customClass:"info_class"})});else t.$message({type:"warning",message:"无权限删除数据",showClose:!0,customClass:"warning_class"})}else t.$message({type:"warning",message:"无可删除数据",showClose:!0,customClass:"warning_class"});else t.$message({type:"warning",message:"请选择病区",showClose:!0,customClass:"warning_class"})},SaveArg2:function(){var e=this;if(e.ToolForm.ArgWardDR){var t=e.GetForm("ToolForm");e.$refs.form5.validate(function(r){if(r){if(!e.timeIsValid("editForm",3))return!1;if(!e.ToolForm.rw)return e.nextMethod="SaveArg2",void e.SaveRows();var a="";for(var s in e.editForm)if("ArgPerDR"!=s&&"ArgDate"!=s){var o=e.editForm[s];void 0!=o&&"rw"!=s||(o=""),a=a+s+"|"+o.toString()+"^"}e.getItmInData(e.WardPostData,"rw",e.editForm.ArgPostDR,"PostDesc");e.selCells.forEach(function(r){var s=r[0],o=r[1],l=void 0==e.tableData[s].ArgPerDR?"":e.tableData[s].ArgPerDR,i=void 0==e.tableData[s].ArgGroupDR?"":e.tableData[s].ArgGroupDR,n=void 0==e.tableData[s].ArgPerSort?"":e.tableData[s].ArgPerSort,g=void 0==e.tableData[s].ArgRowId?"":e.tableData[s].ArgRowId,d=new Date(e.ColumnsToShow[o-1].prop.substr(4).replace(/-/g,"/")),c=void 0==e.tableData[s].ArgWorkRemark?"":e.tableData[s].ArgWorkRemark;if(!(""==l||void 0==l||!d instanceof Date)){var m="ArgPerDR|"+l+"^ArgGroupDR|"+i+"^ArgPerSort|"+n+"^rw|"+g+"^ArgWorkRemark|"+c,u=a+"^ArgPerDR|"+l+"^ArgDate|"+d.Format("YYYY-MM-dd");if(""!=t&&""!=m&&""!=u){var p=e.axiosConfig("web.INMArgComm","SaveArgSub","Method","parr1$"+t,"parr2$"+m,"parr3$"+u);e.$ajax.request(p).then(function(t){isNaN(t.data)?t.data.length<100?e.$message({message:t.data,type:"warning",showClose:!0,customClass:"warning_class"}):e.$message({message:"保存失败！",type:"error",showClose:!0,customClass:"error_class"}):e.findInArray(e.selCells,r)==e.selCells.length-1&&(e.$message({type:"success",message:"保存成功",showClose:!0,customClass:"success_class"}),e.RefreshRowData(e.selCells)),e.dialogVisible3=!1,e.nextMethod&&(e.nextMethod="")}).catch(function(t){e.nextMethod&&(e.nextMethod=""),e.FindTableData()})}}})}})}else e.$message({type:"warning",message:"请选择病区",showClose:!0,customClass:"warning_class"})},QuickClick:function(){this.QuickArgShow=!this.QuickArgShow,this.QuickArgShow&&(this.PostGroupShow=!1,this.PostGroupForm.GroupStatus="N",this.PostGroupForm.GroupButDesc="打开组合"),document.getElementById("postradios")&&("Y"==this.QuickForm.QuickStatus?(this.QuickForm.QuickStatus="N",this.QuickForm.QuickDesc="打开快排"):(this.QuickForm.QuickStatus="Y",this.QuickForm.QuickPostDR="",this.QuickForm.QuickDesc="关闭快排",this.editForm.ArgPostType="",this.GetWardPostData()))},CellClick:function(e,t,r,a){var s=this;if(1==e.isEditPost){if("ArgWorkRemark"==t.property)s.tableData.forEach(function(t){t.ArgPerDR&&t.ArgPerDR==e.ArgPerDR?(t.remarkedit="1",s.$nextTick(function(){s.$refs["ArgWorkRemarkPer"+e.ArgPerDR][0].$el.querySelector("input").focus()})):t.remarkedit="0"});else if("ArgPerBeds"==t.property)s.tableData.forEach(function(t){t.ArgPerDR&&t.ArgPerDR==e.ArgPerDR?(t.bededit="1",s.$nextTick(function(){s.$refs["ArgPerBedsPer"+e.ArgPerDR][0].$el.querySelector("input").focus()})):t.bededit="0"});else{s.tableData.forEach(function(e){e.remarkedit="0"}),!t.property||e.ArgPerDR&&-1!=t.property.indexOf("Date")||(s.$refs.argtable.toggleRowSelection(e),s.SelectGrp(s.selRows,e));var o=!0;if(s.selCells.find(function(e){var t=e[0],r=e[1],a=new Date(s.ColumnsToShow[r-1].prop.substr(4).replace(/-/g,"/"));return a instanceof Date&&(s.IdentifyCanArg(s.tableData[t]["Date"+a.Format("YYYY-MM-dd")])?void 0:(o=!1,!0))}),!o)return void s.$message({type:"warning",message:"所选单元格不合法",showClose:!0,customClass:"warning_class"})}if(t.property&&-1!=t.property.indexOf("Date"))if(s.selectCell.colprop=t.property,s.selectCell.rowRec=e,"Y"==s.QuickForm.QuickStatus){if(!s.QuickForm.QuickPostDR)return;if(!s.ToolForm.ArgWardDR)return void s.$message({type:"warning",message:"请选择病区",showClose:!0,customClass:"warning_class"});if(!s.ToolForm.ArgStDate)return void s.$message({type:"warning",message:"请选择开始日期",showClose:!0,customClass:"warning_class"});var l=s.GetForm("ToolForm");if(void 0==e.ArgPerDR||""==e.ArgPerDR||void 0==e.ArgPerSort||""==e.ArgPerSort)return;var i=void 0==e.ArgWorkRemark?"":e.ArgWorkRemark,n=e.ArgPerBeds?e.ArgPerBeds:"",g=void 0==e.ArgGroupDR?"":e.ArgGroupDR,d=void 0==e.ArgRowId?"":e.ArgRowId,c=t.property.substr(4),m="ArgPerDR|"+e.ArgPerDR+"^ArgPerSort|"+e.ArgPerSort+"^ArgWorkRemark|"+i+"^ArgGroupDR|"+g+"^rw|"+d+"^ArgPerBeds|"+n,u=s.QuickForm.QuickPostDR+"^"+c;if(""!=l&&""!=m&&""!=u){var p=s.axiosConfig("web.INMArgComm","QuickArg","Method","parr1$"+l,"parr2$"+m,"parr3$"+u);s.$ajax.request(p).then(function(e){-1==e.data?s.$message({type:"warning",message:"与现有班次存在时间交叉",showClose:!0,customClass:"warning_class"}):0!=e.data?(s.$message({message:"保存成功！",type:"success",showClose:!0,customClass:"success_class"}),s.ToolForm.rw&&s.RefreshRowData(s.selCells)):s.$message({message:"保存失败",type:"error",showClose:!0,customClass:"error_class"}),s.ToolForm.rw||s.SaveRows()}).catch(function(e){s.$message({message:"保存失败",type:"error",showClose:!0,customClass:"error_class"}),s.ToolForm.rw||s.SaveRows()})}}else if("Y"==s.PostGroupForm.GroupStatus){if(!s.PostGroupForm.GroupDR)return;if(!s.ToolForm.ArgWardDR)return void s.$message({type:"warning",message:"请选择病区",showClose:!0,customClass:"warning_class"});if(!s.ToolForm.ArgStDate)return void s.$message({type:"warning",message:"请选择开始日期",showClose:!0,customClass:"warning_class"});var h=s.GetForm("ToolForm");if(!e.ArgPerDR||!e.ArgPerSort)return;var f=e.ArgWorkRemark?e.ArgWorkRemark:"",A=e.ArgPerBeds?e.ArgPerBeds:"",b=e.ArgGroupDR?e.ArgGroupDR:"",w=e.ArgRowId?e.ArgRowId:"",D=t.property.substr(4),C="ArgPerDR|"+e.ArgPerDR+"^ArgPerSort|"+e.ArgPerSort+"^ArgWorkRemark|"+f+"^ArgGroupDR|"+b+"^rw|"+w+"^ArgPerBeds|"+A,v=s.PostGroupForm.GroupDR+"^"+D;if(""!=h&&""!=C&&""!=v){var y=s.axiosConfig("web.INMArgComm","SavePostGroup","Method","parr1$"+h,"parr2$"+C,"parr3$"+v);s.$ajax.request(y).then(function(e){1==e.data?(s.$message({message:"保存成功！",type:"success",showClose:!0,customClass:"success_class"}),s.ToolForm.rw&&s.RefreshRowData(s.selCells)):e.data.length<0?s.$message({type:"warning",message:e.data,showClose:!0,customClass:"warning_class"}):s.$message({message:"保存失败",type:"error",showClose:!0,customClass:"error_class"}),s.ToolForm.rw||s.SaveRows()}).catch(function(e){s.$message({message:"保存失败",type:"error",showClose:!0,customClass:"error_class"}),s.ToolForm.rw||s.SaveRows()})}}}},AddPerson:function(){this.ToolForm.ArgWardDR?this.ToolForm.ArgStDate?(this.selPersons=new Array,this.LocPersonData=new Array,this.GetLocPersonData(),this.dialogVisible4=!0,this.$nextTick(function(){this.$refs.locpersonlist.clearSelection()})):this.$message({type:"warning",message:"请选择开始日期",showClose:!0,customClass:"warning_class"}):this.$message({type:"warning",message:"请选择病区",showClose:!0,customClass:"warning_class"})},GetLocPersonData:function(){var e=this,t=e.ToolForm.ArgWardDR;if(t){var r="";e.ToolForm.ArgStDate instanceof Date&&(r=e.ToolForm.ArgStDate.Format("YYYY-MM-dd"));var a="";e.ToolForm.ArgEndDate instanceof Date&&(a=e.ToolForm.ArgEndDate.Format("YYYY-MM-dd"));var s=t+"^"+r+"^"+a+"^",o=e.axiosConfig("web.INMHRComm","FindLocPerson","RecQuery","parr$"+s,"input$");e.$ajax.request(o).then(function(t){t.data instanceof Object?e.LocPersonData=t.data.rows:e.$message({type:"error",message:"获取科室人员列表失败",showClose:!0,customClass:"error_class"})}).catch(function(t){e.$message({type:"error",message:"获取科室人员列表失败",showClose:!0,customClass:"error_class"})})}},DeletePerson:function(){var e=this;if(0!=e.selRows.length)if(e.ToolForm.rw){var t="";e.selRows.forEach(function(e){if(void 0==e.ArgPerDR||""==e.ArgPerDR)return!0;t=""==t?e.ArgPerDR:t+","+e.ArgPerDR});var r=e.GetForm("ToolForm");e.$confirm("此操作将删除该选中排班人员及其排班, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"关闭",cancelButtonClass:"el-button--primary",model:!1,type:"warning"}).then(function(){var a=e.axiosConfig("web.INMArgComm","DeleteArgPersons","Method","parr1$"+r,"persons$"+t);e.$ajax.request(a).then(function(t){1==t.data?(e.$message({type:"success",message:"删除成功",showClose:!0,customClass:"success_class"}),e.FindTableData(),e.$refs.argtable.clearSelection(),e.selRows=new Array,e.FindClick()):0!=t.data?(e.$message({type:"error",message:t.data,showClose:!0,customClass:"error_class"}),e.FindTableData(),e.selRows=new Array):e.$message({type:"error",message:"删除失败！",showClose:!0,customClass:"error_class"})}).catch(function(e){})})}else e.$message({type:"warning",message:"未形成排班，删除无效",showClose:!0,customClass:"warning_class"});else e.$message({type:"warning",message:"请选择要删除的行",showClose:!0,customClass:"warning_class"})},SelectPerson:function(e){var t=this;e.forEach(function(e){t.selPersons.push(e.PerDR)})},CanselPerson:function(e,t){var r=!0;return this.tableData.forEach(function(t){e.PerDR==t.ArgPerDR&&(r=!1)}),r},SavePerson:function(){var e=this;if(0!=e.selPersons.length){if(!e.ToolForm.rw)return e.nextMethod="SavePerson",void e.SaveRows();var t=e.GetForm("ToolForm"),r=e.selPersons.toString(),a=e.axiosConfig("web.INMArgComm","AddArgPersons","Method","parr1$"+t,"persons$"+r);e.$ajax.request(a).then(function(t){1==t.data?(e.dialogVisible4=!1,e.$message({type:"success",message:"添加成功",showClose:!0,customClass:"success_class"})):e.$message({type:"error",message:"添加失败！",showClose:!0,customClass:"error_class"}),e.nextMethod&&(e.nextMethod=""),e.FindTableData()}).catch(function(e){})}else e.$message({type:"warning",message:"请选择要添加的排班人员",showClose:!0,customClass:"warning_class"})},MovePostAllH:function(e){var t=this;t.ToolForm.rw?t.$nextTick(function(){var r=t.GetForm("ToolForm"),a=t.GetRows(),s=t.axiosConfig("web.INMArgComm","MovePostAllH","Method","parr1$"+r,"type$"+e,"parr2$"+a);t.$ajax.request(s).then(function(e){1!=e.data&&t.$message({type:"error",message:"操作失败",showClose:!0,customClass:"error_class"}),t.FindTableData(),t.$refs.argtable.clearSelection(),t.SelectGrp="",t.selRows=new Array}).catch(function(e){t.FindTableData(),t.$refs.argtable.clearSelection(),t.SelectGrp="",t.selRows=new Array})}):t.$message({type:"warning",message:"未形成排班,请先排班",showClose:!0,customClass:"warning_class"})},MovePostH:function(e){var t=this;if(0!=t.selRows.length)if(t.ToolForm.rw){t.SortSelRow();for(var r=t.GetForm("ToolForm"),a="",s=0;s<t.selRows.length;s++){var o=t.selRows[s];o.ArgPerDR&&(a=""==a?o.ArgPerDR:a+","+o.ArgPerDR)}if(""!=r&&""!=a){var l=t.GetRows(),i=t.axiosConfig("web.INMArgComm","MoveHArgSub","Method","parr1$"+r,"persons$"+a,"type$"+e,"parr2$"+l);t.$ajax.request(i).then(function(e){1!=e.data&&t.$message({type:"error",message:"操作失败",showClose:!0,customClass:"error_class"}),t.FindTableData(),t.$refs.argtable.clearSelection(),t.selRows=new Array}).catch(function(e){t.FindTableData()})}}else t.$message({type:"warning",message:"未形成排班,请先排班",showClose:!0,customClass:"warning_class"});else t.$message({type:"warning",message:"请选择要移动的行记录",showClose:!0,customClass:"warning_class"})},MovePost:function(e){var t=this;if(0!=t.selRows.length)if(t.ToolForm.rw){var r=t.GetForm("ToolForm"),a="";if(t.selRows.forEach(function(e){if(void 0==e.ArgPerDR||""==e.ArgPerDR)return!0;a=""==a?e.ArgPerDR:a+","+e.ArgPerDR}),""!=r&&""!=a){var s=t.GetRows(),o=t.axiosConfig("web.INMArgComm","MoveArgSub","Method","parr1$"+r,"persons$"+a,"type$"+e,"parr2$"+s);t.$ajax.request(o).then(function(e){1!=e.data&&t.$message({type:"error",message:"移动失败",showClose:!0,customClass:"error_class"}),t.FindTableData()}).catch(function(e){t.FindTableData()})}}else t.$message({type:"warning",message:"未形成排班,请先排班",showClose:!0,customClass:"warning_class"});else t.$message({type:"warning",message:"请选择要移动的行记录",showClose:!0,customClass:"warning_class"})},MoveGroup:function(e){var t=this;t.selGroup&&t.selRows&&0!=t.selRows.length?t.ToolForm.rw?t.$nextTick(function(){for(var r=t.GetForm("ToolForm"),a=0;a<t.selRows.length;a++){var s=t.selRows[a],o=t.tableData.indexOf(s);if(1==s.ArgPerSort&&"U"==e)return void t.$message({type:"warning",message:"当前记录已在最上方，不可上移",showClose:!0,customClass:"warning_class"});if("D"==e&&o==t.tableData.length-1)return void t.$message({type:"warning",message:"当前记录已在最下方，不可下移",showClose:!0,customClass:"warning_class"})}var l=t.ToolForm.rw+"^"+t.selGroup,i=t.GetRows(),n=t.axiosConfig("web.INMArgComm","MoveArgGroup","Method","parr$"+l,"type$"+e,"parr1$"+r,"parr2$"+i);t.$ajax.request(n).then(function(e){1==e.data?(t.$refs.argtable.clearSelection(),t.selRows=new Array,t.selGroup="",t.$nextTick(function(){t.FindTableData()})):t.$message({type:"error",message:e.data,showClose:!0,customClass:"error_class"})}).catch(function(e){})}):t.$message({type:"warning",message:"排班未生成，请先生成排班",showClose:!0,customClass:"warning_class"}):t.$message({type:"warning",message:"请选择要移动的组",showClose:!0,customClass:"warning_class"})},MovePersonOnly:function(e){var t=this;if(0!=t.selRows.length){if(!t.ToolForm.rw)return t.moveType=e,t.nextMethod="MovePersonOnly",void t.SaveRows();e||(e=t.moveType),t.SortSelRow();for(var r=t.GetForm("ToolForm"),a="",s=0;s<t.selRows.length;s++){var o=t.selRows[s],l=t.tableData.indexOf(o);if(1==o.GrpSort&&"U"==e)return void t.$message({type:"warning",message:"当前记录已在本组最上方，不可上移",showClose:!0,customClass:"warning_class"});if("D"==e&&(l==t.tableData.length-1||!t.tableData[l+1].ArgPerDR))return void t.$message({type:"warning",message:"当前记录已在本组最下方，不可下移",showClose:!0,customClass:"warning_class"});void 0!=o.ArgPerDR&&""!=o.ArgPerDR&&(a=""==a?o.ArgPerDR:a+","+o.ArgPerDR)}if(""!=r&&""!=a){var i=t.GetRows(),n=t.axiosConfig("web.INMArgComm","MoveArgOnlyPerson","Method","parr1$"+r,"persons$"+a,"type$"+e,"parr2$"+i);t.$ajax.request(n).then(function(e){1!=e.data&&t.$message({type:"error",message:"操作失败",showClose:!0,customClass:"error_class"}),t.nextMethod&&(t.nextMethod=""),t.FindTableData()}).catch(function(e){t.nextMethod&&(t.nextMethod=""),t.FindTableData()})}}else t.$message({type:"warning",message:"请选择要移动的行记录",showClose:!0,customClass:"warning_class"})},MovePerson:function(e){var t=this;if(0!=t.selRows.length){if(!t.ToolForm.rw)return t.moveType=e,t.nextMethod="MovePerson",void t.SaveRows();e||(e=t.moveType),t.SortSelRow(),t.$nextTick(function(){for(var r=t.GetForm("ToolForm"),a="",s=0;s<t.selRows.length;s++){var o=t.selRows[s];if(1==o.ArgPerSort&&"U"==e)return void t.$message({type:"warning",message:"当前记录已在最上方，不可上移",showClose:!0,customClass:"warning_class"});if(t.tableData.indexOf(o)==t.tableData.length-1&&"D"==e)return void t.$message({type:"warning",message:"当前记录已在最下方，不可下移",showClose:!0,customClass:"warning_class"});void 0!=o.ArgPerDR&&""!=o.ArgPerDR&&(a=""==a?o.ArgPerDR:a+","+o.ArgPerDR)}if(""!=r&&""!=a){var l=t.GetRows(),i=t.axiosConfig("web.INMArgComm","MoveArgPerson","Method","parr1$"+r,"persons$"+a,"type$"+e,"parr2$"+l);t.$ajax.request(i).then(function(e){1!=e.data&&t.$message({type:"error",message:"操作失败",showClose:!0,customClass:"error_class"}),t.nextMethod&&(t.nextMethod=""),t.FindTableData()}).catch(function(e){t.nextMethod&&(t.nextMethod=""),t.FindTableData()})}})}else t.$message({type:"warning",message:"请选择要移动的行记录",showClose:!0,customClass:"warning_class"})},SortSelRow:function(){for(var e=0;e<this.selRows.length;e++)for(var t=e+1;t<this.selRows.length;t++){if(this.tableData.indexOf(this.selRows[e])>this.tableData.indexOf(this.selRows[t])){var r=this.selRows[e];this.selRows[e]=this.selRows[t],this.selRows[t]=r}}},RejectClick:function(){var e=this;if(!e.ToolForm.ArgStatus||"R"!=e.ToolForm.ArgStatus&&"A"!=e.ToolForm.ArgStatus)e.$message({type:"warning",message:"非提交状态，不可驳回",showClose:!0,customClass:"warning_class"});else{e.ToolForm.ArgStatus="B";var t=e.GetForm("ToolForm"),r=e.axiosConfig("web.INMArgComm","SaveArrange","Method","parr$"+t);e.$ajax.request(r).then(function(t){0==t.data?e.$message({type:"error",message:"驳回失败！",showClose:!0,customClass:"error_class"}):(e.$message({type:"success",message:"驳回成功！",showClose:!0,customClass:"success_class"}),e.FindClick())}).catch(function(e){})}},ReferClick:function(){var e=this;if(void 0!=e.ToolForm.ArgStatus&&""!=e.ToolForm.ArgStatus&&"N"!=e.ToolForm.ArgStatus)if("R"!=e.ToolForm.ArgStatus)if("A"!=e.ToolForm.ArgStatus){e.ToolForm.ArgStatus="R";var t=e.GetForm("ToolForm"),r=e.axiosConfig("web.INMArgComm","SaveArrange","Method","parr$"+t);e.$ajax.request(r).then(function(t){0==t.data?e.$message({type:"error",message:"提交失败！",showClose:!0,customClass:"error_class"}):(e.$message({type:"success",message:"提交成功！",showClose:!0,customClass:"success_class"}),e.FindClick())}).catch(function(e){})}else e.$message({type:"warning",message:"已审核，不可重复提交",showClose:!0,customClass:"warning_class"});else e.$message({type:"warning",message:"已提交，不可重复提交",showClose:!0,customClass:"warning_class"});else e.$message({type:"warning",message:"未保存，不可提交",showClose:!0,customClass:"warning_class"})},DeleteArg:function(){var e=this,t=e.ToolForm.rw;t&&e.$confirm("确认删除本周排班, 请确认?","提示",{confirmButtonText:"确定",cancelButtonText:"关闭",model:!1,type:"warning"}).then(function(){var r=e.axiosConfig("web.INMArgComm","DeleteArrange","Method","id$"+t);e.$ajax.request(r).then(function(t){"1"==t.data?(e.$message({message:"删除成功！",type:"success",showClose:!0,customClass:"success_class"}),e.$emit("CloseTable")):""!=t.data&&0!=t.data?e.$message({message:t.data,type:"warning",showClose:!0,customClass:"warning_class"}):e.$message({message:"删除失败",type:"error",showClose:!0,customClass:"error_class"})}).catch(function(t){e.$message({message:"删除失败",type:"error",showClose:!0,customClass:"error_class"})})}).catch(function(){e.$message({type:"info",message:"已取消删除",showClose:!0,customClass:"info_class"})})},PrintClick:function(){this.ToolForm.rw?this.dialogVisible6=!0:this.$message({type:"warning",message:"无数据,不可打印！",showClose:!0,customClass:"warning_class"})},ExportClick:function(){var e=this.ColumnsParsed.filter(function(e){return e.exportFlag}),t=[].concat(l()(this.tableData)),r=[].concat(l()(this.styleData)),a=this.ToolForm.ArgRemarks;if(this.showArgRemarkFlag)for(var s=2;s>=0;s--){for(var o={ArgPerDR:this.ArgRemarkStore[s],PerName:this.ArgRemarkStore[s]},i=this.ToolForm.ArgOtherRemarkLength*this.ArgRemarkStore.length-1,n=new Date(this.ToolForm.ArgEndDate);n.between(this.ToolForm.ArgStDate,this.ToolForm.ArgEndDate);n=n.addDate(-1)){var g=n.Format("yyyy-MM-dd"),d=this.ToolForm.ArgOtherRemark[i];o["Date"+g]="%"+(d||""),i-=1}t.unshift(o),r.unshift([])}var c=this.ToolForm.WardDesc+"护士工作安排表("+this.ToolForm.ArgStDate.Format("YYYY-MM-dd")+" - "+this.ToolForm.ArgEndDate.Format("YYYY-MM-dd")+")";Object(m.a)(e,t,r,a,c,"export")},CellMouseWheel:function(e){var t=document.getElementsByClassName("right-menu");t&&t.length>0&&(t[0].style.display="none")},AddTimeClick:function(e){this.addtimeflag=e,this.editForm.ArgStTime3="",this.editForm.ArgStTime3T="",this.editForm.ArgEndTime3="",this.editForm.ArgEndTime3T="",this.editForm.ArgNextDay2&&(this.editForm.ArgNextDay3=!0,this.editForm.ArgNextDay3St=!0)},SetSecStTime:function(){this.editForm.ArgSecStTime&&this.editForm.ArgSecEndTime&&this.editForm.ArgSecStTime>this.editForm.ArgSecEndTime&&(this.$message({type:"warning",message:"开始时间不能大于结束时间",showClose:!0,customClass:"warning_class"}),this.editForm.ArgSecEndTime="",this.editForm.ArgSecEndTimeT="",this.editForm.ArgSecNextDay=!1)},SetSecEndTime:function(){if(this.editForm.ArgSecEndTimeT){if(this.editForm.ArgSecNextDay?this.editForm.ArgSecEndTime="次日"+this.editForm.ArgSecEndTimeT:this.editForm.ArgSecEndTime=this.editForm.ArgSecEndTimeT,!this.editForm.ArgSecStTime)return;this.editForm.ArgSecStTime>this.editForm.ArgSecEndTime&&(this.$message({type:"warning",message:"开始时间不可大于结束时间",showClose:!0,customClass:"warning_class"}),this.editForm.ArgSecEndTime="",this.editForm.ArgSecEndTimeT="",this.editForm.ArgSecNextDay=!1)}else this.editForm.ArgSecEndTime=""},SetArgNextDay:function(e,t){if(t)if(this.editForm["ArgNextDay"+e+"St"]){this.editForm["ArgNextDay"+e]=!0,this.SetTime(e);for(var r=e+1;r<4;r++)this.editForm["ArgNextDay"+r]=!0,this.editForm["ArgNextDay"+r+"St"]=!0,this.SetTime(r)}else this.SetTime(e);else if(this.SetTime(e),this.editForm["ArgNextDay"+e])for(var a=e+1;a<4;a++)this.editForm["ArgNextDay"+a]=!0,this.editForm["ArgNextDay"+a+"St"]=!0,this.SetTime(a)},SetTime:function(e){this.editForm["ArgStTime"+e]=this.editForm["ArgStTime"+e].replace("：",":"),this.editForm["ArgEndTime"+e]=this.editForm["ArgEndTime"+e].replace("：",":"),this.editForm["ArgStTime"+e+"T"]?this.editForm["ArgNextDay"+e+"St"]?this.editForm["ArgStTime"+e]="次日"+this.editForm["ArgStTime"+e+"T"]:this.editForm["ArgStTime"+e]=this.editForm["ArgStTime"+e+"T"]:this.editForm["ArgStTime"+e]="",this.editForm["ArgEndTime"+e+"T"]?this.editForm["ArgNextDay"+e]?this.editForm["ArgEndTime"+e]="次日"+this.editForm["ArgEndTime"+e+"T"]:this.editForm["ArgEndTime"+e]=this.editForm["ArgEndTime"+e+"T"]:this.editForm["ArgEndTime"+e]="";var t=this.editForm["ArgStTime"+e+"T"],r=this.editForm["ArgEndTime"+e+"T"];t&&r&&(t=this.editForm["ArgNextDay"+e+"St"]?60*(24+parseInt(t.split(":")[0]))+parseInt(t.split(":")[1]):60*parseInt(t.split(":")[0])+parseInt(t.split(":")[1]))>(r=this.editForm["ArgNextDay"+e]?60*(24+parseInt(r.split(":")[0]))+parseInt(r.split(":")[1]):60*parseInt(r.split(":")[0])+parseInt(r.split(":")[1]))&&(this.$message({type:"warning",message:"开始时间不可大于结束时间",showClose:!0,customClass:"warning_class"}),this.editForm["ArgEndTime"+e]="",this.editForm["ArgEndTime"+e+"T"]="")},SecTimeBlur:function(e){var t=e.$el.attributes[1].value,r=e.$children[0].currentValue;void 0!=r&&""!=r&&(-1==r.indexOf(":")&&(r=r.substring(0,2)+":"+r.substring(2,4)),this.editForm[t]=r)},TimeSelectBlur:function(e){var t=this,r=navigator.userAgent.toLocaleLowerCase(),a=e.$el.attributes[1].value;null==r.match(/msie/)&&null==r.match(/trident/)||(a=e.$el.attributes[2].value);var s=e.$children[0].value;if(s&&!(s.indexOf(":")>-1)){if(void 0!=s&&""!=s){if(-1==(s=s.replace(/：/gi,":")).indexOf(":"))switch(s.length){case 1:s="0"+s+":00";break;case 2:s+=":00";break;case 3:s="0"+s.substr(0,1)+":"+s.substr(1,2);break;case 4:s=s.substr(0,2)+":"+s.substr(2,2)}else{var o=(s=s.split(":"))[0],l=s[1];s=(o=o.length<2?"0"+o:o)+":"+(l=l.length<2?l+"0":l)}if(!/^([0-1][0-9]|[2][0-3]):([0-5][0-9])$/.test(s))return this.editForm[a]="23:59",void this.$nextTick(function(){t.editForm[a]="",t.$message({type:"warning",message:"输入不合法",showClose:!0,customClass:"warning_class"})});this.editForm[a]=s}else this.editForm[a]="";this.SetTime(a.substr(a.length-2,1))}},InitEditFormTime:function(){this.editForm.ArgStTime1T="",this.editForm.ArgStTime1="",this.editForm.ArgEndTime1="",this.editForm.ArgEndTime1T="",this.editForm.ArgNextDay1=!1,this.editForm.ArgStTime2="",this.editForm.ArgStTime2T="",this.editForm.ArgEndTime2="",this.editForm.ArgEndTime2T="",this.editForm.ArgNextDay2=!1,this.editForm.ArgNextDay2St=!1,this.editForm.ArgStTime3="",this.editForm.ArgStTime3T="",this.editForm.ArgEndTime3="",this.editForm.ArgEndTime3T="",this.editForm.ArgNextDay3=!1,this.editForm.ArgNextDay3ST=!1,this.editForm.ArgSecStTime="",this.editForm.ArgSecEndTime="",this.editForm.ArgSecEndTimeT="",this.editForm.ArgSecNextDay=!1},ClearAddArgBtn:function(){for(var e=document.getElementsByClassName("add-arg-btn"),t=0;t<e.length;t++)e[t]&&"none"!=e[t].style.display&&(e[t].style.display="none")},CopyLastArg:function(e){var t=this;t.loading=!0;var r=t.GetForm("ToolForm"),a=t.axiosConfig("web.INMArgComm","copyLastArg","Method","parr$"+r,"lastid$"+e);t.$ajax.request(a).then(function(e){0!=e.data?(t.ToolForm.rw=e.data,t.FindClick()):(t.loading=!1,t.$message({type:"warning",message:"复制失败",showClose:!0,customClass:"warning_class"}))}).catch(function(e){t.loading=!1})},CheckIsEditPost:function(){var e=this,t=0;return e.selCells.forEach(function(r){var a=r[0];1==e.tableData[a].isEditPost&&(t=1)}),t},GetIsDisable:function(){return"R"==this.ToolForm.ArgStatus||"A"==this.ToolForm.ArgStatus||"B"==this.ToolForm.ArgStatus},SaveArgLog:function(e){var t=this;e=e+"^ArgLogCrt|"+sessionStorage.getItem("loginID"),this.$prompt("请输入原因","提示",{confirmButtonText:"确定",showCancelButton:!1}).then(function(r){var a=r.value;e=e+"^ArgLogReason|"+(a=a||"");var s=t.axiosConfig("web.INMArgComm","SaveArgLog","Method","parr$"+e);t.$ajax.request(s).then(function(e){e.data}).catch(function(e){})}).catch(function(){var r=t.axiosConfig("web.INMArgComm","SaveArgLog","Method","parr$"+e);t.$ajax.request(r).then(function(e){e.data}).catch(function(e){})})},ArgClickPlus:function(){var e=this,t=document.getElementsByClassName("right-menu");t[0]&&(t[0].style.display="none"),this.dialogVisibleArgPlus=!0,this.$nextTick(function(){e.$refs.editFormArgPlus.resetFields(),e.editFormArgPlus.rw="",e.editFormArgPlus.ArgEndTime1="",e.editFormArgPlus.ArgStTime1=""})},ArgTimeBlur:function(e,t){var r=this,a=e.split(".")[0],s=e.split(".")[1],o=navigator.userAgent.toLocaleLowerCase();null==o.match(/msie/)&&null==o.match(/trident/)||(s=t.$el.attributes[2].value);var l=t.$children[0].value;if(l&&!(l.indexOf(":")>-1))if(void 0!=l&&""!=l){if(-1==(l=l.replace(/：/gi,":")).indexOf(":"))switch(l.length){case 1:l="0"+l+":00";break;case 2:l+=":00";break;case 3:l="0"+l.substr(0,1)+":"+l.substr(1,2);break;case 4:l=l.substr(0,2)+":"+l.substr(2,2)}else{var i=(l=l.split(":"))[0],n=l[1];i=i.length<2?"0"+i:i,n=n.length<2?n+"0":n,l=i+":"+n}this[a][s]="",this.$nextTick(function(){r[a][s]=l})}else this[a][s]=""},DelteArgPlus:function(){var e=this;e.editFormArgPlus.rw?e.$confirm("此操作将删除加班班次,是否继续","提示",{confirmButtonText:"确定",cancelButtonText:"关闭",closeOnClickModal:!1,model:!1,type:"warning"}).then(function(){e.$ajax.request(e.axiosConfig("web.INMArgComm","DeleteArgPlus","Method","id$"+e.editFormArgPlus.rw,"nurseId$"+sessionStorage.getItem("loginID"))).then(function(t){1==t.data?(e.$message({type:"success",message:"删除成功",showClose:!0,customClass:"success_class"}),e.dialogVisibleArgPlus=!1,e.RefreshRowData(e.selCells)):e.$message({type:"error",message:"删除失败",showClose:!0,customClass:"error_class"})}).catch(function(t){e.$message({type:"error",message:"删除失败",showClose:!0,customClass:"error_class"})})}).catch(function(){e.$message({type:"info",message:"取消删除",showClose:!0,customClass:"info_class"})}):e.$message({type:"warning",message:"所选未获取ID,请刷新界面",showClose:!0,customClass:"warning_class"})},SaveArgPlus:function(){var e=this;if(e.ToolForm.rw){var t=e.GetForm("ToolForm");e.$refs.editFormArgPlus.validate(function(r){if(r){var a="";for(var s in e.editFormArgPlus){var o=e.editFormArgPlus[s];void 0==o&&(o=""),a=a+s+"|"+o.toString()+"^"}e.selCells.forEach(function(r){var s=r[0],o=r[1],l=void 0==e.tableData[s].ArgPerDR?"":e.tableData[s].ArgPerDR,i=void 0==e.tableData[s].ArgGroupDR?"":e.tableData[s].ArgGroupDR,n=void 0==e.tableData[s].ArgPerSort?"":e.tableData[s].ArgPerSort,g=void 0==e.tableData[s].ArgRowId?"":e.tableData[s].ArgRowId,d=new Date(e.ColumnsToShow[o-1].prop.substr(4).replace(/-/g,"/")),c=void 0==e.tableData[s].ArgWorkRemark?"":e.tableData[s].ArgWorkRemark;if(!(""==l||void 0==l||!d instanceof Date)){var m="ArgPerDR|"+l+"^ArgGroupDR|"+i+"^ArgPerSort|"+n+"^rw|"+g+"^ArgWorkRemark|"+c,u=a+"^ArgPerDR|"+l+"^ArgDate|"+d.Format("YYYY-MM-dd");if(""!=t&&""!=m&&""!=u){var p=e.axiosConfig("web.INMArgComm","SaveArgSub","Method","parr1$"+t,"parr2$"+m,"parr3$"+u);e.$ajax.request(p).then(function(t){var a=Number(t.data);0==t.data?e.$message({type:"error",message:"保存失败！",showClose:!0,customClass:"error_class"}):!isNaN(a)&&a>0?e.findInArray(e.selCells,r)==e.selCells.length-1&&(e.$message({type:"success",message:"保存成功",showClose:!0,customClass:"success_class"}),e.RefreshRowData(e.selCells)):e.$message({type:"error",message:t.data,showClose:!0,customClass:"error_class"}),e.dialogVisibleArgPlus=!1}).catch(function(e){})}}})}})}else e.$message({type:"warning",message:"未形成排班不可排加减班",showClose:!0,customClass:"warning_class"})},WishArgClick:function(e,t,r){var a=this;if("Y"!=this.QuickForm.QuickStatus&&"Y"!=this.PostGroupForm.GroupStatus)if(e){if(!a.ToolForm.rw)return a.$message({type:"warning",message:"请先保存排班",showClose:!0,customClass:"warning_class"}),void(a.dialogVisibleWish=!1);var s=new Date(t.substr(4).replace(/\-/g,"/"));s=s.addDate(this.ArgUpdateDay);var o=new Date;if(("R"==this.ToolForm.ArgStatus||"A"==this.ToolForm.ArgStatus)&&s.setHours(0,0,0,0)<=o.setHours(0,0,0,0))this.$message({type:"warning",message:"超出修改班次时限",showClose:!0,customClass:"warning_class"});else{a.editForm.rw="";var l=a.axiosConfig("web.INMArgComm","getWishArrange","RecMethod","id$"+e);a.$ajax.request(l).then(function(e){a.dialogVisibleWish=!0,a.$nextTick(function(){a.setForm(a.$refs.wishEditForm,a.wishEditForm,e.data),a.wishEditForm.rowId=r.ArgRowId})}).catch(function(e){})}}else a.$message({type:"warning",message:"选择数据无效，请刷新重试",showClose:!0,customClass:"warning_class"})},SaveWishArg:function(e){var t=this,r=t.wishEditForm.rw;if(r){var a=t.ToolForm.rw;if(!a)return t.$message({type:"warning",message:"请先保存排班",showClose:!0,customClass:"warning_class"}),void(t.dialogVisibleWish=!1);var s=t.wishEditForm.rowId;if(!s)return t.$message({type:"warning",message:"未获取行数据，请刷新重试",showClose:!0,customClass:"warning_class"}),void(t.dialogVisibleWish=!1);var o=r+"^"+sessionStorage.getItem("loginID")+"^"+e+"^"+(t.wishEditForm.Type?1:0)+"^"+a+"^"+s,l=t.axiosConfig("web.INMArgComm","AuditWishArrange","Method","parr$"+o);t.$ajax.request(l).then(function(e){1==e.data?(t.dialogVisibleWish=!1,t.$message({type:"success",message:"操作成功",showClose:!0,customClass:"success_class"}),t.RefreshRowData(t.selCells)):t.$message({type:"error",message:e.data,showClose:!0,customClass:"error_class"})}).catch(function(e){t.RefreshRowData(t.selCells)})}else t.$message({type:"warning",message:"选择数据无效，请刷新重试",showClose:!0,customClass:"warning_class"})},IdentifyCanArg:function(e){var t=!0;return"string"==typeof e&&e.split("%")[0]&&e.split("%")[0].split("「").find(function(e){return(!e||!e.split("」")[0])&&(t=!1,!0)}),"string"==typeof e&&""!=e.split("%")[1]&&(t=!1),t},GroupRowSpan:function(e){var t=e.row,r=(e.column,e.rowIndex,e.columnIndex);return t.ArgPerDR||1!=r?!t.ArgPerDR&&r>1?[0,0]:[1,1]:[1,this.ColumnsToShow.length]},showBeforArgClick:function(e){this.ToolForm.ArgWardDR&&this.ToolForm.ArgStDate instanceof Date?(this.showBeforArgFlag=e,e&&(this.beforArgForm.StartDate=this.ToolForm.ArgStDate.addDate(-7),this.SetBeforTableColumn())):this.$message({type:"warning",message:"请选择病区",showClose:!0,customClass:"warning_class"})},SetBeforTableColumn:function(){this.beforArgForm.EndDate=this.beforArgForm.StartDate.addDate(6),"Week"==this.SysArgType?this.beforArgForm.EndDate=this.beforArgForm.StartDate.addDate(6):this.beforArgForm.EndDate=this.beforArgForm.StartDate.getMonthLastDate(),this.beforTableColumn=new Array,this.beforTableColumn.push({prop:"PerName",label:"姓名",width:100,printFlag:!0,show:!0});for(var e=this.beforArgForm.StartDate.Format("YYYY-MM-dd"),t=this.beforArgForm.EndDate.Format("YYYY-MM-dd"),r=new Date(e),a=new Date(t),s=new Date(e);s.between(r,a);s=s.addDate(1)){var o=s.Format("YYYY-MM-dd"),l=s.getWeek();this.beforTableColumn.push({prop:"Date"+o,label:l+"\n"+s.Format("M-d"),width:60,printFlag:!0,show:!0})}this.FindBeforTableData()},FindBeforTableData:function(){var e=this;if(e.ToolForm.ArgWardDR&&e.beforArgForm.StartDate instanceof Date){e.loading=!0,e.beforArgTableData=new Array;var t=e.ToolForm.ArgWardDR+"^"+e.beforArgForm.StartDate.Format("YYYY-MM-dd")+"^"+e.beforArgForm.EndDate.Format("YYYY-MM-dd"),r=e.axiosConfig("web.INMArgComm","FindArrangeSubColorList","RecQuery","parr$"+t,"input$","nurseid$"+sessionStorage.getItem("loginID"));e.$ajax.request(r).then(function(t){t.data instanceof Object?e.beforArgTableData=t.data.rows:e.$message({type:"error",message:"获取排班表详情失败",showClose:!0,customClass:"error_class"}),e.loading=!1}).catch(function(t){e.loading=!1,e.$message({type:"error",message:"获取排班表详情失败",showClose:!0,customClass:"error_class"})})}},beforArgTableRowClassName:function(e){var t=e.row;e.rowIndex;return t.ArgPerDR?"":"groupRowClass"},timeIsValid:function(e,t){if("editForm"==e&&this.editForm.HolidayFlag)return!0;for(var r="",a=0;a<t;a++){var o=this[e]["ArgStTime"+(a+1)],l=this[e]["ArgEndTime"+(a+1)];(o||l)&&(o&&l||(r="第"+(a+1)+"段时间只有开始时间(结束时间)"),!1)}return""!=r&&this.$message(s()({type:"warning",message:r,customClass:!0},"customClass","warning_class")),""==r},DateDifference:function(e,t){if(!e||!t)return 0;var r,a;return(r=new Date(t))-(a=new Date(e))<=0?"0":parseInt(Math.abs(r-a)/1e3/60/60/24)},GetWardPostComb:function(){var e=this;if(this.ToolForm.ArgWardDR){var t=this.ToolForm.ArgWardDR,r=this.axiosConfig("web.INMArgComm","FindCombList","RecQuery","parr$"+t,"flag$1","nurseid$"+sessionStorage.loginID);this.$ajax.request(r).then(function(t){t.data instanceof Object?e.WardCombStore=t.data.rows:e.$message({type:"error",message:"获取病区班次模板套失败",showClose:!0,customClass:"error_class"})}).catch(function(t){e.$message({type:"error",message:"获取病区班次模板套失败",showClose:!0,customClass:"error_class"})})}},CombClick:function(e,t,r,a,s){var o=this;if("Y"!=this.QuickForm.QuickStatus&&"Y"!=this.PostGroupForm.GroupStatus){var l=new Date(e.substr(4).replace(/\-/g,"/"));l=l.addDate(this.ArgUpdateDay);var i=new Date;if(("R"==this.ToolForm.ArgStatus||"A"==this.ToolForm.ArgStatus)&&l.setHours(0,0,0,0)<=i.setHours(0,0,0,0))this.$message({type:"warning",message:"超出修改班次时限",showClose:!0,customClass:"warning_class"});else{var n=r+"^"+this.ToolForm.ArgWardDR+"^"+t.ArgPerDR+"^"+this.ToolForm.rw+"^"+t.ArgRowId+"^"+new Date(e.substr(4).replace(/\-/g,"/")).Format("YYYY-MM-dd"),g=[[a,s]];this.loading=!0;var d=this.axiosConfig("web.INMArgComm","ArrangeByComb","Method","parr$"+n,"nurseid$"+sessionStorage.loginID);this.$ajax.request(d).then(function(e){1==e.data?(o.$message({type:"success",message:"保存成功",showClose:!0,customClass:"success_class"}),o.RefreshRowData(g,!0)):e.data.length<100?(o.loading=!1,o.$message({type:"warning",message:e.data,showClose:!0,customClass:"warning_class"})):(o.loading=!1,o.$message({type:"error",message:"保存失败",showClose:!0,customClass:"error_class"}))}).catch(function(e){o.loading=!1,o.$message({type:"error",message:"保存失败",showClose:!0,customClass:"error_class"})})}}},GetWardPostGroupData:function(){var e=this;if(e.WardPostGroup=new Array,this.ToolForm.ArgWardDR){var t=this.ToolForm.ArgWardDR,r=e.axiosConfig("web.INMDBComm","FindWardPostGroupList","RecQuery","WardID$"+t);e.$ajax.request(r).then(function(t){t.data instanceof Object?e.WardPostGroup=t.data.rows:e.$message({type:"error",message:"获取病区班次失败",showClose:!0,customClass:"error_class"})}).catch(function(t){e.$message({type:"error",message:"获取病区班次失败",showClose:!0,customClass:"error_class"})})}},PostGroupClick:function(){this.PostGroupShow=!this.PostGroupShow,this.PostGroupShow&&(this.QuickArgShow=!1,this.QuickForm.QuickStatus="N",this.QuickForm.QuickDesc="打开快排"),document.getElementById("postradios")&&("Y"==this.PostGroupForm.GroupStatus?(this.PostGroupForm.GroupStatus="N",this.PostGroupForm.GroupButDesc="打开组合"):(this.PostGroupForm.GroupStatus="Y",this.PostGroupForm.GroupDR="",this.PostGroupForm.GroupButDesc="关闭组合",this.GetWardPostGroupData()))},WardVisibleChange:function(e){e?this.$refs.ToolFormWard.focus():this.$refs.ToolFormWard.blur()},CircualtePer:function(e){var t=this;if(this.selRows.length<2)this.$message({type:"warning",message:"请选择至少两行记录",showClose:!0,customClass:"warning_class"});else{if(!this.ToolForm.rw)return this.moveType=e,this.nextMethod="CircualtePer",void this.SaveRows();e||(e=this.moveType),this.SortSelRow();for(var r=this.GetForm("ToolForm"),a=[],s=0;s<this.selRows.length;s++){var o=this.selRows[s];if(!o.ArgPerDR)return void this.$message({type:"warning",message:"获取循环行信息失败,请刷新重试!",showClose:!0,customClass:"warning_class"});a.push(o.ArgPerDR)}if(""!=r&&""!=a){var l=this.GetRows(),i=this.axiosConfig("web.INMArgComm","CirculateArgPer","Method","parr1$"+r,"persons$"+a,"type$"+e,"parr2$"+l);this.$ajax.request(i).then(function(e){1!=e.data&&t.$message({type:"error",message:"操作失败",showClose:!0,customClass:"error_class"}),t.nextMethod&&(t.nextMethod=""),t.FindTableData()}).catch(function(e){t.nextMethod&&(t.nextMethod=""),t.FindTableData()})}}},CircualtePost:function(e){var t=this;if(this.selRows.length<2)this.$message({type:"warning",message:"请选择至少两行记录",showClose:!0,customClass:"warning_class"});else{if(!this.ToolForm.rw)return this.moveType=e,this.nextMethod="CircualtePost",void this.SaveRows();e||(e=this.moveType),this.SortSelRow();for(var r=this.GetForm("ToolForm"),a=[],s=0;s<this.selRows.length;s++){var o=this.selRows[s];if(!o.ArgPerDR)return void this.$message({type:"warning",message:"获取循环行信息失败,请刷新重试!",showClose:!0,customClass:"warning_class"});a.push(o.ArgPerDR)}if(""!=r&&""!=a){var l=this.GetRows(),i=this.axiosConfig("web.INMArgComm","CirculateArgPost","Method","parr1$"+r,"persons$"+a,"type$"+e,"parr2$"+l);this.$ajax.request(i).then(function(e){1!=e.data&&t.$message({type:"error",message:"操作失败",showClose:!0,customClass:"error_class"}),t.nextMethod&&(t.nextMethod=""),t.FindTableData()}).catch(function(e){t.nextMethod&&(t.nextMethod=""),t.FindTableData()})}}}}},D={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"arrange-table-panel",attrs:{"element-loading-text":e.$t("menu.ArrangeTable.5nrnatiwdbo0")}},[r("div",{staticClass:"top-tool-inputDiv"},[r("el-form",{ref:"ToolForm",attrs:{model:e.ToolForm,"label-position":"left",inline:!0}},[r("el-form-item",{attrs:{label:e.$t("menu.ArrangeTable.5nrnatiy9js0"),prop:"ArgWardDR"}},[r("el-select",{ref:"ToolFormWard",staticStyle:{width:"140px"},attrs:{size:"mini",filterable:""},on:{"visible-change":e.WardVisibleChange,change:e.ArgWardChange},model:{value:e.ToolForm.ArgWardDR,callback:function(t){e.$set(e.ToolForm,"ArgWardDR",t)},expression:"ToolForm.ArgWardDR"}},e._l(e.WardStore,function(e){return r("el-option",{key:e.rw,attrs:{label:e.WardDesc,value:e.rw}})}),1)],1),e._v(" "),r("el-form-item",{attrs:{label:e.$t("menu.ArrangeTable.5nrnatj2rwc0"),prop:"ArgStDate"}},[r("el-date-picker",{staticStyle:{width:"120px"},attrs:{"picker-options":e.PickerOptions,type:"date",format:this.$store.state.mainframe.DateFormat,clearable:!1,editable:!1,placeholder:e.$t("menu.ArrangeTable.5nrnatj2rwc0"),size:"mini"},on:{change:e.ArgStDateChange},model:{value:e.ToolForm.ArgStDate,callback:function(t){e.$set(e.ToolForm,"ArgStDate",t)},expression:"ToolForm.ArgStDate"}})],1),e._v(" "),r("el-form-item",{attrs:{label:e.$t("menu.ArrangeTable.5nrnatj9h2o0"),prop:"ArgEndDate"}},[r("el-date-picker",{staticStyle:{width:"120px"},attrs:{type:"date",format:this.$store.state.mainframe.DateFormat,placeholder:e.$t("menu.ArrangeTable.5nrnatjbcq00"),size:"mini",disabled:""},model:{value:e.ToolForm.ArgEndDate,callback:function(t){e.$set(e.ToolForm,"ArgEndDate",t)},expression:"ToolForm.ArgEndDate"}})],1),e._v(" "),this.elementlist.argtablerefresh||0==this.$store.state.login.LoginId?r("el-form-item",{ref:"argtablerefresh"},[r("hgbutton",{attrs:{type:"default",styleCode:e.styleCode},on:{click:e.FindTableData}},[e._v(e._s(e.$t("menu.ArrangeTable.5nrnatjbhv80")))])],1):e._e(),e._v(" "),this.elementlist.argtablesave||0==this.$store.state.login.LoginId?r("el-form-item",{ref:"argtablesave"},[r("hgbutton",{attrs:{type:e.styleCode?"default":"success",styleCode:e.styleCode,disabled:!e.ToolForm.ArgWardDR||"R"==e.ToolForm.ArgStatus||"A"==e.ToolForm.ArgStatus},on:{click:e.SaveClick}},[e._v(e._s(e.$t("menu.ArrangeTable.5nrnatjbm480")))])],1):e._e(),e._v(" "),this.elementlist.argtablesubmit||0==this.$store.state.login.LoginId?r("el-form-item",{ref:"argtablesubmit"},[r("hgbutton",{attrs:{type:"default",styleCode:e.styleCode,disabled:!e.ToolForm.rw||"S"!=e.ToolForm.ArgStatus},on:{click:e.ReferClick}},[e._v(e._s(e.$t("menu.ArrangeTable.5nrnatjbpug0")))])],1):e._e(),e._v(" "),this.elementlist.argtablereject||0==this.$store.state.login.LoginId?r("el-form-item",{ref:"argtablereject"},[r("hgbutton",{attrs:{type:"default",styleCode:e.styleCode,disabled:!e.ToolForm.rw||"R"!=e.ToolForm.ArgStatus&&"A"!=e.ToolForm.ArgStatus},on:{click:e.RejectClick}},[e._v(e._s(e.$t("menu.ArrangeTable.5nrnatjct400")))])],1):e._e(),e._v(" "),this.elementlist.argtabledelete||0==this.$store.state.login.LoginId?r("el-form-item",{ref:"argtabledelete"},[r("hgbutton",{attrs:{type:"default",styleCode:e.styleCode,disabled:!e.ToolForm.rw||e.GetIsDisable()},on:{click:e.DeleteArg}},[e._v(e._s(e.$t("menu.ArrangeTable.5nrnatjcy680")))])],1):e._e(),e._v(" "),this.elementlist.argtableexport||0==this.$store.state.login.LoginId?r("el-form-item",{ref:"argtableexport"},[r("hgbutton",{attrs:{type:"default",styleCode:e.styleCode,disabled:!e.ToolForm.rw},on:{click:e.ExportClick}},[e._v(e._s(e.$t("menu.ArrangeTable.5nrnatjd26g0")))])],1):e._e(),e._v(" "),this.elementlist.argtableprint||0==this.$store.state.login.LoginId?r("el-form-item",{ref:"argtableprint"},[r("hgbutton",{attrs:{type:"default",styleCode:e.styleCode,disabled:!e.ToolForm.rw},on:{click:e.PrintClick}},[e._v(e._s(e.$t("menu.ArrangeTable.5nrnatjd5z00")))])],1):e._e(),e._v(" "),this.elementlist.argtablelog||0==this.$store.state.login.LoginId?r("el-form-item",[r("hgbutton",{attrs:{type:"default",styleCode:e.styleCode,disabled:!e.ToolForm.rw},on:{click:function(t){e.dialogVisibleLog=!0}}},[e._v(e._s(e.$t("menu.ArrangeTable.5nrnatjd9q80")))])],1):e._e(),e._v(" "),this.elementlist.argtablecheck||0==this.$store.state.login.LoginId?r("el-form-item",{ref:"argtablelogcheck"},[r("hgbutton",{attrs:{type:"default",styleCode:e.styleCode,disabled:!e.ToolForm.rw},on:{click:function(t){e.dialogVisibleCheck=!0}}},[e._v(e._s(e.$t("menu.ArrangeTable.5ncy620olls0")))])],1):e._e()],1)],1),e._v(" "),r("el-scrollbar",{staticStyle:{width:"100%"}},[r("div",{staticClass:"top-tool-button"},[this.elementlist.argtablefast||0==this.$store.state.login.LoginId?r("hgbutton",{ref:"argtablefast",attrs:{type:"text",issvg:"",styleCode:e.styleCode,disabled:e.GetIsDisable()},on:{click:e.QuickClick}},[e._v(e._s(this.QuickForm.QuickDesc))]):e._e(),e._v(" "),this.elementlist.argtablegroup||0==this.$store.state.login.LoginId?r("hgbutton",{ref:"argtablegroup",attrs:{type:"text",issvg:"",styleCode:e.styleCode,disabled:e.GetIsDisable()},on:{click:e.PostGroupClick}},[e._v(e._s(this.PostGroupForm.GroupButDesc))]):e._e(),e._v(" "),this.elementlist.argtableaddper||0==this.$store.state.login.LoginId?r("hgbutton",{ref:"argtableaddper",attrs:{type:"text",issvg:"",styleCode:e.styleCode,disabled:e.GetIsDisable()},on:{click:e.AddPerson}},[e._v(e._s(e.$t("menu.ArrangeTable.5nrnatjds240")))]):e._e(),e._v(" "),this.elementlist.argtabledelper||0==this.$store.state.login.LoginId?r("hgbutton",{ref:"argtabledelper",attrs:{type:"text",issvg:"",styleCode:e.styleCode,disabled:e.GetIsDisable()},on:{click:e.DeletePerson}},[e._v(e._s(e.$t("menu.ArrangeTable.5ncy620p27k0")))]):e._e(),e._v(" "),this.elementlist.argtabledelarg||0==this.$store.state.login.LoginId?r("hgbutton",{ref:"argtabledelarg",attrs:{type:"text",issvg:"",styleCode:e.styleCode,disabled:e.GetIsDisable()},on:{click:e.DeletePerPost}},[e._v(e._s(e.$t("menu.ArrangeTable.5ncy620p5ms0")))]):e._e(),e._v(" "),this.elementlist.argtableupper||0==this.$store.state.login.LoginId?r("hgbutton",{ref:"argtableupper",attrs:{type:"text",issvg:"",styleCode:e.styleCode,disabled:e.GetIsDisable()},on:{click:function(t){return e.MovePerson("U")}}},[e._v(e._s(e.$t("menu.ArrangeTable.5ncy620p92o0")))]):e._e(),e._v(" "),this.elementlist.argtabledownper||0==this.$store.state.login.LoginId?r("hgbutton",{ref:"argtabledownper",attrs:{type:"text",issvg:"",styleCode:e.styleCode,disabled:e.GetIsDisable()},on:{click:function(t){return e.MovePerson("D")}}},[e._v(e._s(e.$t("menu.ArrangeTable.5ncy620pc900")))]):e._e(),e._v(" "),this.elementlist.argtableupperonly||0==this.$store.state.login.LoginId?r("hgbutton",{ref:"argtableupperonly",attrs:{type:"text",issvg:"",styleCode:e.styleCode,disabled:e.GetIsDisable()},on:{click:function(t){return e.MovePersonOnly("U")}}},[e._v(e._s(e.$t("menu.ArrangeTable.5ncy620pfvc0")))]):e._e(),e._v(" "),this.elementlist.argtabledownperonly||0==this.$store.state.login.LoginId?r("hgbutton",{ref:"argtabledownperonly",attrs:{type:"text",issvg:"",styleCode:e.styleCode,disabled:e.GetIsDisable()},on:{click:function(t){return e.MovePersonOnly("D")}}},[e._v(e._s(e.$t("menu.ArrangeTable.5ncy620pjqo0")))]):e._e(),e._v(" "),this.elementlist.argtableup||0==this.$store.state.login.LoginId?r("hgbutton",{ref:"argtableup",attrs:{type:"text",issvg:"",styleCode:e.styleCode,disabled:e.GetIsDisable()},on:{click:function(t){return e.MovePostH("U")}}},[e._v(e._s(e.$t("menu.ArrangeTable.5ncy620pmss0")))]):e._e(),e._v(" "),this.elementlist.argtabledown||0==this.$store.state.login.LoginId?r("hgbutton",{ref:"argtabledown",attrs:{type:"text",issvg:"",styleCode:e.styleCode,disabled:e.GetIsDisable()},on:{click:function(t){return e.MovePostH("D")}}},[e._v(e._s(e.$t("menu.ArrangeTable.5ncy620ppw00")))]):e._e(),e._v(" "),this.elementlist.argtableleft||0==this.$store.state.login.LoginId?r("hgbutton",{ref:"argtableleft",attrs:{type:"text",issvg:"",styleCode:e.styleCode,disabled:e.GetIsDisable()},on:{click:function(t){return e.MovePost("L")}}},[e._v(e._s(e.$t("menu.ArrangeTable.5ncy620ptao0")))]):e._e(),e._v(" "),this.elementlist.argtableright||0==this.$store.state.login.LoginId?r("hgbutton",{ref:"argtableright",attrs:{type:"text",issvg:"",styleCode:e.styleCode,disabled:e.GetIsDisable()},on:{click:function(t){return e.MovePost("R")}}},[e._v(e._s(e.$t("menu.ArrangeTable.5ncy620pwf40")))]):e._e(),e._v(" "),this.elementlist.argtableupgroup||0==this.$store.state.login.LoginId?r("hgbutton",{ref:"argtableupgroup",attrs:{type:"text",issvg:"",styleCode:e.styleCode,disabled:e.GetIsDisable()},on:{click:function(t){return e.MoveGroup("U")}}},[e._v(e._s(e.$t("menu.ArrangeTable.5ncy620pzec0")))]):e._e(),e._v(" "),this.elementlist.argtabledowngroup||0==this.$store.state.login.LoginId?r("hgbutton",{ref:"argtabledowngroup",attrs:{type:"text",issvg:"",styleCode:e.styleCode,disabled:e.GetIsDisable()},on:{click:function(t){return e.MoveGroup("D")}}},[e._v(e._s(e.$t("menu.ArrangeTable.5ncy620q2j80")))]):e._e(),e._v(" "),this.elementlist.argtabledelgroup||0==this.$store.state.login.LoginId?r("hgbutton",{ref:"argtabledelgroup",attrs:{type:"text",issvg:"",styleCode:e.styleCode,disabled:e.GetIsDisable()},on:{click:e.DeleteGroup}},[e._v(e._s(e.$t("menu.ArrangeTable.5ncy620q5vc0")))]):e._e(),e._v(" "),this.elementlist.argtableupcir||0==this.$store.state.login.LoginId?r("hgbutton",{ref:"argtableupgroup",attrs:{type:"text",issvg:"",styleCode:e.styleCode,disabled:e.GetIsDisable()},on:{click:function(t){return e.CircualtePer("U")}}},[e._v(e._s(e.$t("menu.ArrangeTable.5ncy620q98w0")))]):e._e(),e._v(" "),this.elementlist.argtabledowncir||0==this.$store.state.login.LoginId?r("hgbutton",{ref:"argtabledowngroup",attrs:{type:"text",issvg:"",styleCode:e.styleCode,disabled:e.GetIsDisable()},on:{click:function(t){return e.CircualtePer("D")}}},[e._v(e._s(e.$t("menu.ArrangeTable.5ncy620qcgk0")))]):e._e(),e._v(" "),this.elementlist.argtableupcirp||0==this.$store.state.login.LoginId?r("hgbutton",{ref:"argtableupgroup",attrs:{type:"text",issvg:"",styleCode:e.styleCode,disabled:e.GetIsDisable()},on:{click:function(t){return e.CircualtePost("U")}}},[e._v(e._s(e.$t("menu.ArrangeTable.5ncy620qfsg0")))]):e._e(),e._v(" "),this.elementlist.argtabledowncirp||0==this.$store.state.login.LoginId?r("hgbutton",{ref:"argtabledowngroup",attrs:{type:"text",issvg:"",styleCode:e.styleCode,disabled:e.GetIsDisable()},on:{click:function(t){return e.CircualtePost("D")}}},[e._v(e._s(e.$t("menu.ArrangeTable.5ncy620qj0g0")))]):e._e()],1)]),e._v(" "),r("div",{staticStyle:{"padding-left":"4px","padding-bottom":"2px","margin-top":"-4px","text-align":"left"},attrs:{id:"postradios"}},[r("el-collapse-transition",[e.QuickArgShow?r("div",[r("el-radio-group",{attrs:{size:"small"},model:{value:e.QuickForm.QuickPostDR,callback:function(t){e.$set(e.QuickForm,"QuickPostDR",t)},expression:"QuickForm.QuickPostDR"}},[e._l(e.WardPostData,function(t){return[r("el-radio",{key:t.rw,staticStyle:{"margin-left":"4px",width:"70px","padding-right":"4px",overflow:"hidden","margin-right":"0px"},attrs:{label:t.rw}},[r("span",[e._v(e._s(t.PostDesc))])])]})],2)],1):e._e(),e._v(" "),e.PostGroupShow?r("div",[r("el-radio-group",{attrs:{size:"small"},model:{value:e.PostGroupForm.GroupDR,callback:function(t){e.$set(e.PostGroupForm,"GroupDR",t)},expression:"PostGroupForm.GroupDR"}},[e._l(e.WardPostGroup,function(t){return[r("el-radio",{key:t.rw,staticStyle:{"margin-left":"4px",width:"70px","padding-right":"4px",overflow:"hidden","margin-right":"0px"},attrs:{label:t.rw}},[r("span",[e._v(e._s(t.GroupDesc))])])]})],2)],1):e._e()])],1),e._v(" "),r("div",{staticClass:"top-tool-table",staticStyle:{overflow:"auto"}},[r("el-table",{directives:[{name:"cellMouseDown",rawName:"v-cellMouseDown:CellMouseDown",value:e.tableData,expression:"tableData",arg:"CellMouseDown"},{name:"cellMouseUp",rawName:"v-cellMouseUp:CellMouseUp",value:e.tableData,expression:"tableData",arg:"CellMouseUp"},{name:"cellContextmenu",rawName:"v-cellContextmenu:CellContextmenu",value:e.tableData,expression:"tableData",arg:"CellContextmenu"},{name:"mouseWheel",rawName:"v-mouseWheel:CellMouseWheel",arg:"CellMouseWheel"}],ref:"argtable",attrs:{id:"argtable",data:e.tableData,border:e.styleCode,"highlight-current-row":"","header-cell-style":e.headerCellFontWeight,"row-class-name":function(t){return(t.row.ArgPerDR?"PerRow":"GrpRow")+(e.ToolForm.rw&&t.row.ArgPerDR?" Sortable":" UnSortable")},"span-method":e.GroupRowSpan,height:e.tableHeight,"row-key":function(e){return e.ArgGroupDR+"-"+(e.ArgPerDR?e.ArgPerDR:"Grp")}},on:{"cell-mouse-enter":e.CellMouseEnter,"cell-mouse-leave":e.CellMouseLeave,"selection-change":e.RowSelect,select:e.SelectGrp,"cell-click":e.CellClick}},[r("el-table-column",{attrs:{type:"selection",width:"40",align:"center",fixed:"true"==e.FixHead.Selection}}),e._v(" "),e._l(e.ColumnsToShow,function(t,a){return[t.show?r("el-table-column",{key:t.prop,staticStyle:{margin:"0px"},attrs:{prop:t.prop,align:-1!=t.prop.indexOf("Date")?"center":"left",label:t.label,fixed:"true"==e.FixHead[t.prop],width:t.width,"show-overflow-tooltip":"0"==!t.editFlag,"header-align":-1!=t.prop.indexOf("Date")?"center":"left","class-name":-1!=t.prop.indexOf("Date")?"date_column":"other_column"},scopedSlots:e._u([{key:"default",fn:function(s){return["ArgWorkRemark"!=t.prop||"1"!=s.row.remarkedit||e.GetIsDisable()||1!=s.row.isEditPost?"ArgPerBeds"!=t.prop||"1"!=s.row.bededit||e.GetIsDisable()||1!=s.row.isEditPost?-1!=t.prop.indexOf("Date")&&s.row[t.prop]?r("el-tooltip",{attrs:{disabled:e.GetIsDisable()||!e.ToolForm.rw||!s.row.ArgPerDR||-1==t.prop.indexOf("Date")||1!=s.row.isEditPost||!s.row[t.prop]||!e.IdentifyCanArg(s.row[t.prop]),placement:"top",effect:"light"}},[r("div",{attrs:{slot:"content"},slot:"content"},e._l(e.WardCombStore,function(o){return r("div",{key:o.rw,staticStyle:{display:"inline-block",cursor:"pointer","margin-right":"5px"},on:{click:function(r){return e.CombClick(t.prop,s.row,o.rw,s.$index,a+1)}}},[e._v(e._s(o.CombDesc))])}),0),e._v(" "),r("span",[e._l(s.row[t.prop].split("%")[0].split("「"),function(a,o){return r("font",{key:o,attrs:{"v-if":!!a}},[r("font",{staticStyle:{cursor:"pointer"},attrs:{title:a.split("」")[1]?a.split("」")[1].split("『")[1]:a.split("」")[1]},on:{click:function(r){e.ArgSelect(a.split("」")[0],t.prop,s.row)}}},[e._v(e._s(a.split("」")[1]?a.split("」")[1].split("『")[0]:a.split("」")[1]))]),e._v(" "),r("font",[e._v(e._s(s.row[t.prop].split("%")[0].split("「").length-1>o?"、":""))])],1)}),e._v(" "),r("font",[e._v(e._s(s.row[t.prop].split("%")[0]&&s.row[t.prop].split("%")[1]?"、":""))]),e._v(" "),s.row[t.prop].split("%")[1]?r("font",[e._v(e._s(s.row[t.prop].split("%")[1]))]):e._e(),e._v(" "),r("font",[e._v(e._s((s.row[t.prop].split("%")[0]||s.row[t.prop].split("%")[1])&&s.row[t.prop].split("%")[2]?"、":""))]),e._v(" "),s.row[t.prop].split("%")[2]?r("font",e._l(s.row[t.prop].split("%")[2].split("「"),function(a,o){return r("font",{key:o,attrs:{"v-if":!!a}},[r("font",{staticStyle:{color:"#CCC",cursor:"pointer"},on:{click:function(r){e.WishArgClick(a.split("」")[0],t.prop,s.row)}}},[e._v(e._s(a.split("」")[1]))]),e._v(" "),r("font",[e._v(e._s(s.row[t.prop].split("%")[2].split("「").length-1>o?"、":""))])],1)}),1):e._e(),e._v(" "),s.row[t.prop]&&"%%"!=s.row[t.prop]?e._e():r("font",{staticStyle:{width:"100%",display:"inline-block"}},[e._v(e._s("    "))])],2)]):s.row[t.prop]&&s.row.ArgGroupDR&&!s.row.ArgPerDR?r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.$t("menu.ArrangeTable.5nrnatjralg0")+s.row.bedCodes,placement:"bottom-start"}},[r("span",[e._v(e._s(s.row[t.prop])+e._s(s.row.bedCodes?"("+s.row.bedCodes+")":""))])]):s.row[t.prop]?r("span",[e._v(e._s(s.row[t.prop]))]):e._e():r("el-input",{ref:"ArgPerBeds"+(s.row.ArgPerDR?"Per"+s.row.ArgPerDR:"Grp"+s.row.ArgGroupDR),refInFor:!0,attrs:{size:"small",placeholder:e.$t("menu.ArrangeTable.5nrnatjiogo0")},on:{blur:function(t){return e.SaveRows()}},model:{value:s.row[t.prop],callback:function(r){e.$set(s.row,t.prop,r)},expression:"scope.row[col.prop]"}}):r("el-input",{ref:"ArgWorkRemark"+(s.row.ArgPerDR?"Per"+s.row.ArgPerDR:"Grp"+s.row.ArgGroupDR),refInFor:!0,attrs:{size:"small",placeholder:e.$t("menu.ArrangeTable.5nrnatjiogo0")},on:{blur:function(t){return e.SaveRows()}},model:{value:s.row[t.prop],callback:function(r){e.$set(s.row,t.prop,r)},expression:"scope.row[col.prop]"}}),e._v(" "),s.row.ArgPerDR&&-1!=t.prop.indexOf("Date")&&1==s.row.isEditPost&&s.row[t.prop]&&e.IdentifyCanArg(s.row[t.prop])?r("span",{staticClass:"add-arg-btn",attrs:{id:"addbtn"+t.prop+s.$index},on:{click:function(r){return e.AddClick(t.prop,s.row)}}},[r("i",{staticClass:"nm-icon-plus"})]):e._e()]}}],null,!0)}):e._e()]})],2),e._v(" "),r("div",{staticClass:"table-remark",staticStyle:{height:"90px",overflow:"auto",color:"#000"}},[r("el-form",{ref:"form2",attrs:{model:e.ToolForm,"label-suffix":":","label-width":"50px",align:"left"}},[e.showInfoFlag?r("el-form-item",{attrs:{label:e.$t("menu.ArrangeTable.5nrnatk3vr40")}},[r("span",{staticStyle:{color:"#999"}},[e._v(e._s(e.IconRemark))])]):e._e(),e._v(" "),e.showArgRemarkFlag?r("el-form-item",{attrs:{label:""}},[r("table",e._l(e.ArgRemarkStore.length,function(t){return r("tr",{key:t},[r("td",[r("div",{staticStyle:{width:"80px"}},[e._v(e._s(e.ArgRemarkStore[t-1]))])]),e._v(" "),e._l(e.ToolForm.ArgOtherRemarkLength,function(a){return r("td",{key:"reamrk"+a},[r("el-input",{staticStyle:{width:"120px"},attrs:{size:"small",placeholder:e.$t("menu.ArrangeTable.5nrnatke6r80")+(7==a?e.$t("menu.ArrangeTable.5ncy6215fic0"):a)},model:{value:e.ToolForm.ArgOtherRemark[(t-1)*e.ToolForm.ArgOtherRemarkLength+a-1],callback:function(r){e.$set(e.ToolForm.ArgOtherRemark,(t-1)*e.ToolForm.ArgOtherRemarkLength+a-1,r)},expression:"ToolForm.ArgOtherRemark[((row-1)*ToolForm.ArgOtherRemarkLength)+index-1]"}})],1)})],2)}),0)]):e._e(),e._v(" "),r("el-form-item",{attrs:{label:e.$t("menu.ArrangeTable.5nrnatkk3es0")}},[r("el-input",{staticStyle:{width:"100%"},attrs:{value:e.ToolForm.ArgRemarks.replace(/「/g,"\n"),placeholder:e.$t("menu.ArrangeTable.5nrnatkm32s0"),type:"textarea",rows:2,disabled:e.GetIsDisable()},on:{input:function(t){e.ToolForm.ArgRemarks=t.replace(/\n/g,"「")}}})],1)],1)],1)],1),e._v(" "),r("el-dialog",{attrs:{title:e.$t("menu.ArrangeTable.5nrnatk19vw0"),visible:e.dialogVisible,width:"569px","close-on-click-modal":!1,"append-to-body":!0,"modal-append-to-body":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("div",{staticClass:"dialog-header-title",attrs:{slot:"title"},slot:"title"},[e.styleCode?r("i",{staticClass:"nm-icon-w-paper"}):e._e(),e._v(" "),r("span",[e._v(e._s(e.$t("menu.ArrangeTable.5nrnatk19vw0")))])]),e._v(" "),r("el-form",{ref:"form3",attrs:{model:e.editForm,rules:e.editRules,"label-width":"110px","label-position":"right",align:"left"}},[r("el-form-item",{attrs:{label:e.$t("menu.ArrangeTable.5nrnatkqc840"),prop:"ArgPostType"}},[r("el-radio-group",{attrs:{size:"mini"},on:{change:e.GetWardPostData},model:{value:e.editForm.ArgPostType,callback:function(t){e.$set(e.editForm,"ArgPostType",t)},expression:"editForm.ArgPostType"}},[r("el-radio",{attrs:{label:"P"}},[e._v(e._s(e.$t("menu.ArrangeTable.5nrnatkqg2g0")))]),e._v(" "),r("el-radio",{attrs:{label:"H"}},[e._v(e._s(e.$t("menu.ArrangeTable.5nrnatkqhh80")))]),e._v(" "),r("el-radio",{attrs:{label:""}},[e._v(e._s(e.$t("menu.ArrangeTable.5nrnatkqj1g0")))])],1)],1),e._v(" "),r("el-form-item",{attrs:{label:e.$t("menu.ArrangeTable.5ncy6218c0k0"),prop:"ArgPostDR"}},[r("el-radio-group",{staticStyle:{width:"409px"},attrs:{size:"mini"},model:{value:e.editForm.ArgPostDR,callback:function(t){e.$set(e.editForm,"ArgPostDR",t)},expression:"editForm.ArgPostDR"}},e._l(e.WardPostData,function(t){return r("el-radio",{key:t.rw,staticStyle:{width:"60px","padding-right":"4px","line-height":"18px"},attrs:{label:t.rw}},[e._v(e._s(t.PostDesc))])}),1)],1),e._v(" "),e.editForm.HolidayFlag?r("el-form-item",{attrs:{label:e.$t("menu.ArrangeTable.5nrnatkskds0"),prop:"ArgHolidayTime"}},[r("el-radio-group",{attrs:{size:"mini"},model:{value:e.editForm.ArgHolidayTime,callback:function(t){e.$set(e.editForm,"ArgHolidayTime",t)},expression:"editForm.ArgHolidayTime"}},[r("el-radio",{attrs:{label:"H"}},[e._v(e._s(e.$t("menu.ArrangeTable.5nrnatksnxc0")))]),e._v(" "),r("el-radio",{attrs:{label:"A"}},[e._v(e._s(e.$t("menu.ArrangeTable.5ncy6218fo00")))]),e._v(" "),r("el-radio",{attrs:{label:"P"}},[e._v(e._s(e.$t("menu.ArrangeTable.5ncy6218g4w0")))])],1)],1):e._e(),e._v(" "),e.editForm.HolidayFlag?e._e():r("el-form-item",{attrs:{label:e.$t("menu.ArrangeTable.5nrnatkv6340"),prop:"ArgTime1"}},[r("el-row",{staticStyle:{"text-align":"left","font-size":"0"}},[r("el-time-select",{staticStyle:{width:"120px","margin-left":"62px"},attrs:{disabled:0==e.ArgTimeSlot,placeholder:e.$t("menu.ArrangeTable.5nrnatkxg2s0"),size:"mini",editable:"",prop:"ArgStTime1T","picker-options":{start:"00:00",step:"00:10",end:"23:59"}},on:{change:function(t){return e.SetTime(1)},blur:e.TimeSelectBlur},model:{value:e.editForm.ArgStTime1T,callback:function(t){e.$set(e.editForm,"ArgStTime1T",t)},expression:"editForm.ArgStTime1T"}}),e._v(" "),r("span",{staticStyle:{display:"inline-block",margin:"0 4px"}},[e._v(e._s(e.$t("menu.ArrangeTable.5nrnatj9h2o0")))]),e._v(" "),r("el-time-select",{staticStyle:{width:"120px"},attrs:{disabled:0==e.ArgTimeSlot,placeholder:e.$t("menu.ArrangeTable.5nrnatl2ma80"),size:"mini",editable:"",prop:"ArgEndTime1T","picker-options":{start:"00:00",step:"00:10",end:"23:59"}},on:{change:function(t){return e.SetTime(1)},blur:e.TimeSelectBlur},model:{value:e.editForm.ArgEndTime1T,callback:function(t){e.$set(e.editForm,"ArgEndTime1T",t)},expression:"editForm.ArgEndTime1T"}}),e._v(" "),r("el-checkbox",{staticStyle:{margin:"0 10px"},attrs:{label:e.$t("menu.ArrangeTable.5nrnatl4jpk0"),disabled:0==e.ArgTimeSlot},on:{change:function(t){return e.SetArgNextDay(1,!1)}},model:{value:e.editForm.ArgNextDay1,callback:function(t){e.$set(e.editForm,"ArgNextDay1",t)},expression:"editForm.ArgNextDay1"}})],1)],1),e._v(" "),e.editForm.HolidayFlag?e._e():r("el-form-item",{attrs:{label:e.$t("menu.ArrangeTable.5nrnatl6f4g0"),prop:"ArgTime2"}},[r("el-row",{staticStyle:{"text-align":"left","font-size":"0"}},[r("el-checkbox",{staticStyle:{"margin-right":"10px"},attrs:{label:e.$t("menu.ArrangeTable.5nrnatl4jpk0"),disabled:0==e.ArgTimeSlot||e.editForm.ArgNextDay1},on:{change:function(t){return e.SetArgNextDay(2,!0)}},model:{value:e.editForm.ArgNextDay2St,callback:function(t){e.$set(e.editForm,"ArgNextDay2St",t)},expression:"editForm.ArgNextDay2St"}}),e._v(" "),r("el-time-select",{staticStyle:{width:"120px"},attrs:{disabled:0==e.ArgTimeSlot,placeholder:e.$t("menu.ArrangeTable.5nrnatkxg2s0"),size:"mini",editable:"",prop:"ArgStTime2T","picker-options":{start:"00:00",step:"00:01",end:"23:59"}},on:{change:function(t){return e.SetTime(2)},blur:e.TimeSelectBlur},model:{value:e.editForm.ArgStTime2T,callback:function(t){e.$set(e.editForm,"ArgStTime2T",t)},expression:"editForm.ArgStTime2T"}}),e._v(" "),r("span",{staticStyle:{margin:"0 2px","text-align":"center"}},[e._v(e._s(e.$t("menu.ArrangeTable.5nrnatj9h2o0")))]),e._v(" "),r("el-time-select",{staticStyle:{width:"120px"},attrs:{disabled:0==e.ArgTimeSlot,placeholder:e.$t("menu.ArrangeTable.5nrnatl2ma80"),size:"mini",editable:"",prop:"ArgEndTime2T","picker-options":{start:"00:00",step:"00:01",end:"23:59"}},on:{change:function(t){return e.SetTime(2)},blur:e.TimeSelectBlur},model:{value:e.editForm.ArgEndTime2T,callback:function(t){e.$set(e.editForm,"ArgEndTime2T",t)},expression:"editForm.ArgEndTime2T"}}),e._v(" "),r("el-checkbox",{staticStyle:{margin:"0 10px"},attrs:{label:e.$t("menu.ArrangeTable.5nrnatl4jpk0"),disabled:0==e.ArgTimeSlot||e.editForm.ArgNextDay1||e.editForm.ArgNextDay2St},on:{change:function(t){return e.SetArgNextDay(2,!1)}},model:{value:e.editForm.ArgNextDay2,callback:function(t){e.$set(e.editForm,"ArgNextDay2",t)},expression:"editForm.ArgNextDay2"}}),e._v(" "),e.addtimeflag&&e.ArgTimeSlot?r("i",{staticClass:"el-icon-plus",staticStyle:{color:"green"},on:{click:function(t){return e.AddTimeClick(!1)}}}):e._e()],1)],1),e._v(" "),e.editForm.HolidayFlag||e.addtimeflag?e._e():r("el-form-item",{attrs:{label:e.$t("menu.ArrangeTable.5nrnatlg9n80"),prop:"ArgTime3"}},[r("el-row",{staticStyle:{"text-align":"left","font-size":"0"}},[r("el-checkbox",{staticStyle:{"margin-right":"10px"},attrs:{label:e.$t("menu.ArrangeTable.5nrnatl4jpk0"),disabled:e.editForm.ArgNextDay1||e.editForm.ArgNextDay2St||e.editForm.ArgNextDay2},on:{change:function(t){return e.SetArgNextDay(3,!0)}},model:{value:e.editForm.ArgNextDay3St,callback:function(t){e.$set(e.editForm,"ArgNextDay3St",t)},expression:"editForm.ArgNextDay3St"}}),e._v(" "),r("el-time-select",{staticStyle:{width:"120px"},attrs:{disabled:0==e.ArgTimeSlot,placeholder:e.$t("menu.ArrangeTable.5nrnatkxg2s0"),size:"mini",editable:"",prop:"ArgStTime3T","picker-options":{start:"00:00",step:"00:01",end:"23:59"}},on:{change:function(t){return e.SetTime(3)},blur:e.TimeSelectBlur},model:{value:e.editForm.ArgStTime3T,callback:function(t){e.$set(e.editForm,"ArgStTime3T",t)},expression:"editForm.ArgStTime3T"}}),e._v(" "),r("span",{staticStyle:{margin:"0 2px","text-align":"center"}},[e._v(e._s(e.$t("menu.ArrangeTable.5nrnatj9h2o0")))]),e._v(" "),r("el-time-select",{staticStyle:{width:"120px"},attrs:{disabled:0==e.ArgTimeSlot,placeholder:e.$t("menu.ArrangeTable.5nrnatl2ma80"),size:"mini",editable:"",prop:"ArgEndTime3T","picker-options":{start:"00:00",step:"00:01",end:"23:59"}},on:{change:function(t){return e.SetTime(3)},blur:e.TimeSelectBlur},model:{value:e.editForm.ArgEndTime3T,callback:function(t){e.$set(e.editForm,"ArgEndTime3T",t)},expression:"editForm.ArgEndTime3T"}}),e._v(" "),r("el-checkbox",{staticStyle:{margin:"0 10px"},attrs:{label:e.$t("menu.ArrangeTable.5nrnatl4jpk0"),disabled:0==e.ArgTimeSlot||e.editForm.ArgNextDay1||e.editForm.ArgNextDay2||e.editForm.ArgNextDay2St||e.editForm.ArgNextDay3St},on:{change:function(t){return e.SetArgNextDay(3,!1)}},model:{value:e.editForm.ArgNextDay3,callback:function(t){e.$set(e.editForm,"ArgNextDay3",t)},expression:"editForm.ArgNextDay3"}}),e._v(" "),!e.addtimeflag&&e.ArgTimeSlot?r("i",{staticClass:"el-icon-minus",staticStyle:{color:"green"},on:{click:function(t){return e.AddTimeClick(!0)}}}):e._e()],1)],1),e._v(" "),(e.editForm.HolidayFlag,e._e()),e._v(" "),r("el-form-item",{attrs:{label:e.$t("menu.ArrangeTable.5nrnatm61cs0"),prop:"ArgWorkRemark"}},[r("el-input",{staticStyle:{width:"409px"},attrs:{size:"mini"},model:{value:e.editForm.ArgWorkRemark,callback:function(t){e.$set(e.editForm,"ArgWorkRemark",t)},expression:"editForm.ArgWorkRemark"}})],1)],1),e._v(" "),r("div",{staticClass:"bottom-button"},[this.elementlist.argtablesure||0==this.$store.state.login.LoginId?r("hgbutton",{ref:"argtablesure",attrs:{type:e.styleCode?"default":"success",styleCode:e.styleCode},on:{click:e.SaveArg}},[e._v(e._s(e.$t("menu.ArrangeTable.5nrnatjbm480")))]):e._e(),e._v(" "),this.elementlist.argtabledelete||0==this.$store.state.login.LoginId?r("hgbutton",{directives:[{name:"show",rawName:"v-show",value:!!e.editForm.rw,expression:"!!editForm.rw"}],ref:"argtabledelete",attrs:{type:"default",styleCode:e.styleCode},on:{click:e.DeleteArgsub}},[e._v(e._s(e.$t("menu.ArrangeTable.5nrnatjcy680")))]):e._e(),e._v(" "),r("hgbutton",{attrs:{type:"default",styleCode:e.styleCode},on:{click:function(t){e.dialogVisible=!1}}},[e._v(e._s(e.$t("menu.ArrangeTable.5nrnatm6d740")))])],1)],1),e._v(" "),r("div",{staticClass:"right-menu",staticStyle:{display:"none",width:"140px",position:"absolute"}},[r("ul",[e.GetIsDisable()?e._e():r("li",[r("a",{staticClass:"right-menu-btn",attrs:{href:"javascript:void(0)"},on:{click:e.ArgClick}},[e._v(e._s(e.$t("menu.ArrangeTable.5nrnatk19vw0")))])]),e._v(" "),r("li",[r("a",{staticClass:"right-menu-btn",attrs:{href:"javascript:void(0)"},on:{click:e.ArgClickPlus}},[e._v(e._s(e.$t("menu.ArrangeTable.5ncy621acms0")))])]),e._v(" "),e.GetIsDisable()?e._e():r("li",[r("a",{staticClass:"right-menu-btn",attrs:{href:"javascript:void(0)"},on:{click:e.CopyClick}},[e._v(e._s(e.$t("menu.ArrangeTable.5nrnatm6mu40"))),r("span",[e._v("Ctrl+C")])])]),e._v(" "),e.GetIsDisable()?e._e():r("li",[r("a",{staticClass:"right-menu-btn",attrs:{href:"javascript:void(0)"},on:{click:e.CutClick}},[e._v(e._s(e.$t("menu.ArrangeTable.5nrnatm6mu41"))),r("span",[e._v("Ctrl+X")])])]),e._v(" "),e.GetIsDisable()?e._e():r("li",[r("a",{staticClass:"right-menu-btn",attrs:{href:"javascript:void(0)"},on:{click:e.PasteClick}},[e._v(e._s(e.$t("menu.ArrangeTable.5ncy621ahp80"))),r("span",[e._v("Ctrl+V")])])]),e._v(" "),e.GetIsDisable()?e._e():r("li",[r("a",{staticClass:"right-menu-btn",attrs:{href:"javascript:void(0)"},on:{click:e.DeleteClick}},[e._v(e._s(e.$t("menu.ArrangeTable.5nrnatjcy680"))),r("span",[e._v("Delete")])])])])]),e._v(" "),r("el-dialog",{attrs:{title:e.$t("menu.ArrangeTable.5ncy621ame00"),visible:e.dialogVisible4,width:"50%","close-on-click-modal":!1,"append-to-body":!0,"modal-append-to-body":!1},on:{"update:visible":function(t){e.dialogVisible4=t}}},[r("div",{staticClass:"dialog-header-title",attrs:{slot:"title"},slot:"title"},[e.styleCode?r("i",{staticClass:"nm-icon-w-paper"}):e._e(),e._v(" "),r("span",[e._v(e._s(e.$t("menu.ArrangeTable.5ncy621ame00")))])]),e._v(" "),r("div",{staticClass:"top-tool-dialog-table",staticStyle:{"border-radius":"4px"}},[r("el-table",{ref:"locpersonlist",staticStyle:{"border-bottom":"0","border-radius":"4px"},attrs:{data:e.LocPersonData,height:"400","header-cell-style":e.headerCellFontWeight,border:e.styleCode,"highlight-current-row":""},on:{"selection-change":e.SelectPerson}},[r("el-table-column",{attrs:{type:"index",width:"50",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{type:"selection",width:"50",selectable:e.CanselPerson,align:"center"}}),e._v(" "),r("el-table-column",{attrs:{label:e.$t("menu.ArrangeTable.5nrnatm9m4k0"),width:"120",prop:"PerName"}}),e._v(" "),r("el-table-column",{attrs:{label:e.$t("menu.ArrangeTable.5ncy621avjc0"),width:"120",prop:"PerID"}}),e._v(" "),r("el-table-column",{attrs:{label:e.$t("menu.ArrangeTable.5nrnatmbsks0"),prop:"WardDesc"}}),e._v(" "),e._e()],1)],1),e._v(" "),r("div",{staticClass:"bottom-button"},[r("hgbutton",{attrs:{type:e.styleCode?"default":"success",styleCode:e.styleCode},on:{click:e.SavePerson}},[e._v(e._s(e.$t("menu.ArrangeTable.5nrnatjbm480")))]),e._v(" "),r("hgbutton",{attrs:{type:"default",styleCode:e.styleCode},on:{click:function(t){e.dialogVisible4=!1}}},[e._v(e._s(e.$t("menu.ArrangeTable.5nrnatm6d740")))])],1)]),e._v(" "),r("el-dialog",{attrs:{title:e.$t("menu.ArrangeTable.5nrnatk19vw0"),visible:e.dialogVisible3,width:"569px","close-on-click-modal":!1,"append-to-body":!0,"modal-append-to-body":!1},on:{"update:visible":function(t){e.dialogVisible3=t}}},[r("div",{staticClass:"dialog-header-title",attrs:{slot:"title"},slot:"title"},[e.styleCode?r("i",{staticClass:"nm-icon-w-paper"}):e._e(),e._v(" "),r("span",[e._v(e._s(e.$t("menu.ArrangeTable.5nrnatk19vw0")))])]),e._v(" "),r("el-form",{ref:"form5",attrs:{model:e.editForm,rules:e.editRules,"label-width":"110px",inline:"","label-position":"right",align:"left"}},[r("el-form-item",{attrs:{label:e.$t("menu.ArrangeTable.5nrnatkqc840"),prop:"ArgPostType"}},[r("el-radio-group",{attrs:{size:"mini"},on:{change:e.GetWardPostData},model:{value:e.editForm.ArgPostType,callback:function(t){e.$set(e.editForm,"ArgPostType",t)},expression:"editForm.ArgPostType"}},[r("el-radio",{attrs:{label:"P"}},[e._v(e._s(e.$t("menu.ArrangeTable.5nrnatkqg2g0")))]),e._v(" "),r("el-radio",{attrs:{label:"H"}},[e._v(e._s(e.$t("menu.ArrangeTable.5nrnatkqhh80")))]),e._v(" "),r("el-radio",{attrs:{label:""}},[e._v(e._s(e.$t("menu.ArrangeTable.5nrnatkqj1g0")))])],1)],1),e._v(" "),r("el-form-item",{attrs:{label:e.$t("menu.ArrangeTable.5ncy6218c0k0"),prop:"ArgPostDR"}},[r("el-radio-group",{staticStyle:{width:"409px"},attrs:{size:"mini"},model:{value:e.editForm.ArgPostDR,callback:function(t){e.$set(e.editForm,"ArgPostDR",t)},expression:"editForm.ArgPostDR"}},e._l(e.WardPostData,function(t){return r("el-radio",{key:t.rw,staticStyle:{width:"60px","padding-right":"4px","line-height":"18px"},attrs:{label:t.rw}},[e._v(e._s(t.PostDesc))])}),1)],1),e._v(" "),e.editForm.HolidayFlag?r("el-form-item",{attrs:{label:e.$t("menu.ArrangeTable.5nrnatkskds0"),prop:"ArgHolidayTime"}},[r("el-radio-group",{attrs:{size:"mini"},model:{value:e.editForm.ArgHolidayTime,callback:function(t){e.$set(e.editForm,"ArgHolidayTime",t)},expression:"editForm.ArgHolidayTime"}},[r("el-radio",{attrs:{label:"H"}},[e._v(e._s(e.$t("menu.ArrangeTable.5nrnatksnxc0")))]),e._v(" "),r("el-radio",{attrs:{label:"A"}},[e._v(e._s(e.$t("menu.ArrangeTable.5ncy6218fo00")))]),e._v(" "),r("el-radio",{attrs:{label:"P"}},[e._v(e._s(e.$t("menu.ArrangeTable.5ncy6218g4w0")))])],1)],1):e._e(),e._v(" "),e.editForm.HolidayFlag?e._e():r("el-form-item",{attrs:{label:e.$t("menu.ArrangeTable.5nrnatkv6340"),prop:"ArgTime1"}},[r("el-row",{staticStyle:{"text-align":"left","font-size":"0"}},[r("el-time-select",{staticStyle:{width:"120px","margin-left":"62px"},attrs:{disabled:0==e.ArgTimeSlot,placeholder:e.$t("menu.ArrangeTable.5nrnatkxg2s0"),size:"mini",editable:"",prop:"ArgStTime1T","picker-options":{start:"00:00",step:"00:10",end:"23:59"}},on:{change:function(t){return e.SetTime(1)},blur:e.TimeSelectBlur},model:{value:e.editForm.ArgStTime1T,callback:function(t){e.$set(e.editForm,"ArgStTime1T",t)},expression:"editForm.ArgStTime1T"}}),e._v(" "),r("span",{staticStyle:{display:"inline-block",margin:"0 4px"}},[e._v(e._s(e.$t("menu.ArrangeTable.5nrnatj9h2o0")))]),e._v(" "),r("el-time-select",{staticStyle:{width:"120px"},attrs:{disabled:0==e.ArgTimeSlot,placeholder:e.$t("menu.ArrangeTable.5nrnatl2ma80"),size:"mini",editable:"",prop:"ArgEndTime1T","picker-options":{start:"00:00",step:"00:10",end:"23:59"}},on:{change:function(t){return e.SetTime(1)},blur:e.TimeSelectBlur},model:{value:e.editForm.ArgEndTime1T,callback:function(t){e.$set(e.editForm,"ArgEndTime1T",t)},expression:"editForm.ArgEndTime1T"}}),e._v(" "),r("el-checkbox",{staticStyle:{margin:"0 10px"},attrs:{label:e.$t("menu.ArrangeTable.5nrnatl4jpk0"),disabled:0==e.ArgTimeSlot},on:{change:function(t){return e.SetArgNextDay(1,!1)}},model:{value:e.editForm.ArgNextDay1,callback:function(t){e.$set(e.editForm,"ArgNextDay1",t)},expression:"editForm.ArgNextDay1"}})],1)],1),e._v(" "),e.editForm.HolidayFlag?e._e():r("el-form-item",{attrs:{label:e.$t("menu.ArrangeTable.5nrnatl6f4g0"),prop:"ArgTime2"}},[r("el-row",{staticStyle:{"text-align":"left","font-size":"0"}},[r("el-checkbox",{staticStyle:{"margin-right":"10px"},attrs:{label:e.$t("menu.ArrangeTable.5nrnatl4jpk0"),disabled:0==e.ArgTimeSlot||e.editForm.ArgNextDay1},on:{change:function(t){return e.SetArgNextDay(2,!0)}},model:{value:e.editForm.ArgNextDay2St,callback:function(t){e.$set(e.editForm,"ArgNextDay2St",t)},expression:"editForm.ArgNextDay2St"}}),e._v(" "),r("el-time-select",{staticStyle:{width:"120px"},attrs:{disabled:0==e.ArgTimeSlot,placeholder:e.$t("menu.ArrangeTable.5nrnatkxg2s0"),size:"mini",editable:"",prop:"ArgStTime2T","picker-options":{start:"00:00",step:"00:01",end:"23:59"}},on:{change:function(t){return e.SetTime(2)},blur:e.TimeSelectBlur},model:{value:e.editForm.ArgStTime2T,callback:function(t){e.$set(e.editForm,"ArgStTime2T",t)},expression:"editForm.ArgStTime2T"}}),e._v(" "),r("span",{staticStyle:{display:"inline-block",margin:"0 4px"}},[e._v(e._s(e.$t("menu.ArrangeTable.5nrnatj9h2o0")))]),e._v(" "),r("el-time-select",{staticStyle:{width:"120px"},attrs:{disabled:0==e.ArgTimeSlot,placeholder:e.$t("menu.ArrangeTable.5nrnatl2ma80"),size:"mini",editable:"",prop:"ArgEndTime2T","picker-options":{start:"00:00",step:"00:01",end:"23:59"}},on:{change:function(t){return e.SetTime(2)},blur:e.TimeSelectBlur},model:{value:e.editForm.ArgEndTime2T,callback:function(t){e.$set(e.editForm,"ArgEndTime2T",t)},expression:"editForm.ArgEndTime2T"}}),e._v(" "),r("el-checkbox",{staticStyle:{margin:"0 10px"},attrs:{label:e.$t("menu.ArrangeTable.5nrnatl4jpk0"),disabled:0==e.ArgTimeSlot||e.editForm.ArgNextDay1||e.editForm.ArgNextDay2St},on:{change:function(t){return e.SetArgNextDay(2,!1)}},model:{value:e.editForm.ArgNextDay2,callback:function(t){e.$set(e.editForm,"ArgNextDay2",t)},expression:"editForm.ArgNextDay2"}}),e._v(" "),e.addtimeflag&&e.ArgTimeSlot?r("i",{staticClass:"el-icon-plus",staticStyle:{color:"green"},on:{click:function(t){return e.AddTimeClick(!1)}}}):e._e()],1)],1),e._v(" "),e.editForm.HolidayFlag||e.addtimeflag?e._e():r("el-form-item",{attrs:{label:e.$t("menu.ArrangeTable.5nrnatlg9n80"),prop:"ArgTime3"}},[r("el-row",{staticStyle:{"text-align":"left","font-size":"0"}},[r("el-checkbox",{staticStyle:{"margin-right":"10px"},attrs:{label:e.$t("menu.ArrangeTable.5nrnatl4jpk0"),disabled:e.editForm.ArgNextDay1||e.editForm.ArgNextDay2St||e.editForm.ArgNextDay2},on:{change:function(t){return e.SetArgNextDay(3,!0)}},model:{value:e.editForm.ArgNextDay3St,callback:function(t){e.$set(e.editForm,"ArgNextDay3St",t)},expression:"editForm.ArgNextDay3St"}}),e._v(" "),r("el-time-select",{staticStyle:{width:"120px"},attrs:{disabled:0==e.ArgTimeSlot,placeholder:e.$t("menu.ArrangeTable.5nrnatkxg2s0"),size:"mini",editable:"",prop:"ArgStTime3T","picker-options":{start:"00:00",step:"00:01",end:"23:59"}},on:{change:function(t){return e.SetTime(3)},blur:e.TimeSelectBlur},model:{value:e.editForm.ArgStTime3T,callback:function(t){e.$set(e.editForm,"ArgStTime3T",t)},expression:"editForm.ArgStTime3T"}}),e._v(" "),r("span",{staticStyle:{display:"inline-block",margin:"0 4px"}},[e._v(e._s(e.$t("menu.ArrangeTable.5nrnatj9h2o0")))]),e._v(" "),r("el-time-select",{staticStyle:{width:"120px"},attrs:{disabled:0==e.ArgTimeSlot,placeholder:e.$t("menu.ArrangeTable.5nrnatl2ma80"),size:"mini",editable:"",prop:"ArgEndTime3T","picker-options":{start:"00:00",step:"00:01",end:"23:59"}},on:{change:function(t){return e.SetTime(3)},blur:e.TimeSelectBlur},model:{value:e.editForm.ArgEndTime3T,callback:function(t){e.$set(e.editForm,"ArgEndTime3T",t)},expression:"editForm.ArgEndTime3T"}}),e._v(" "),r("el-checkbox",{staticStyle:{margin:"0 10px"},attrs:{label:e.$t("menu.ArrangeTable.5nrnatl4jpk0"),disabled:0==e.ArgTimeSlot||e.editForm.ArgNextDay1||e.editForm.ArgNextDay2||e.editForm.ArgNextDay2St||e.editForm.ArgNextDay3St},on:{change:function(t){return e.SetArgNextDay(3,!1)}},model:{value:e.editForm.ArgNextDay3,callback:function(t){e.$set(e.editForm,"ArgNextDay3",t)},expression:"editForm.ArgNextDay3"}}),e._v(" "),!e.addtimeflag&&e.ArgTimeSlot?r("i",{staticClass:"el-icon-minus",staticStyle:{color:"green"},on:{click:function(t){return e.AddTimeClick(!0)}}}):e._e()],1)],1),e._v(" "),r("el-form-item",{attrs:{label:e.$t("menu.ArrangeTable.5nrnatm61cs0"),prop:"ArgWorkRemark"}},[r("el-input",{staticStyle:{width:"409px"},attrs:{size:"mini"},model:{value:e.editForm.ArgWorkRemark,callback:function(t){e.$set(e.editForm,"ArgWorkRemark",t)},expression:"editForm.ArgWorkRemark"}})],1)],1),e._v(" "),r("div",{staticClass:"bottom-button"},[this.elementlist.argtablesure||0==this.$store.state.login.LoginId?r("hgbutton",{ref:"argtablesure",attrs:{type:e.styleCode?"default":"success",styleCode:e.styleCode},on:{click:e.SaveArg2}},[e._v(e._s(e.$t("menu.ArrangeTable.5nrnatjbm480")))]):e._e(),e._v(" "),r("hgbutton",{attrs:{type:"default",styleCode:e.styleCode},on:{click:function(t){e.dialogVisible3=!1}}},[e._v(e._s(e.$t("menu.ArrangeTable.5nrnatm6d740")))])],1)],1),e._v(" "),r("el-dialog",{attrs:{title:e.$t("menu.ArrangeTable.5nrnatjd5z00"),visible:e.dialogVisible6,top:"2%",width:"80%","close-on-click-modal":!1,"custom-class":"arg-print-dialog","append-to-body":!0,"modal-append-to-body":!1},on:{"update:visible":function(t){e.dialogVisible6=t}}},[r("div",{staticClass:"dialog-header-title",attrs:{slot:"title"},slot:"title"},[e.styleCode?r("i",{staticClass:"nm-icon-w-paper"}):e._e(),e._v(" "),r("span",[e._v(e._s(e.$t("menu.ArrangeTable.5nrnatjd5z00")))])]),e._v(" "),e.dialogVisible6?r("ArgPrint",{attrs:{argid:e.ToolForm.rw,showArgRemarkFlag:e.showArgRemarkFlag,tableColumns:e.ColumnsParsed}}):e._e()],1),e._v(" "),r("el-dialog",{attrs:{title:e.$t("menu.ArrangeTable.5nrnatnj26s0"),visible:e.dialogVisibleLog,width:"50%","close-on-click-modal":!1,"append-to-body":!0,"modal-append-to-body":!1},on:{"update:visible":function(t){e.dialogVisibleLog=t}}},[r("div",{staticClass:"dialog-header-title",attrs:{slot:"title"},slot:"title"},[e.styleCode?r("i",{staticClass:"nm-icon-w-paper"}):e._e(),e._v(" "),r("span",[e._v(e._s(e.$t("menu.ArrangeTable.5nrnatnj26s0")))])]),e._v(" "),e.dialogVisibleLog?r("ArgLog",{attrs:{argid:e.ToolForm.rw,ward:e.ToolForm.ArgWardDR}}):e._e()],1),e._v(" "),r("el-dialog",{attrs:{title:e.$t("menu.ArrangeTable.5ncy620olls0"),visible:e.dialogVisibleCheck,width:"720px","close-on-click-modal":!1,"append-to-body":!0,"modal-append-to-body":!1},on:{"update:visible":function(t){e.dialogVisibleCheck=t}}},[r("div",{staticClass:"dialog-header-title",attrs:{slot:"title"},slot:"title"},[e.styleCode?r("i",{staticClass:"nm-icon-w-paper"}):e._e(),e._v(" "),r("span",[e._v(e._s(e.$t("menu.ArrangeTable.5ncy620olls0")))])]),e._v(" "),e.dialogVisibleCheck?r("ArgCheck",{attrs:{argid:e.ToolForm.rw}}):e._e()],1),e._v(" "),r("el-dialog",{attrs:{title:e.$t("menu.ArrangeTable.5ncy621acms0"),visible:e.dialogVisibleArgPlus,width:"400px","close-on-click-modal":!1,"append-to-body":!0,"modal-append-to-body":!1},on:{"update:visible":function(t){e.dialogVisibleArgPlus=t}}},[r("div",{staticClass:"dialog-header-title",attrs:{slot:"title"},slot:"title"},[e.styleCode?r("i",{staticClass:"nm-icon-w-paper"}):e._e(),e._v(" "),r("span",[e._v(e._s(e.$t("menu.ArrangeTable.5ncy621acms0")))])]),e._v(" "),r("el-form",{ref:"editFormArgPlus",attrs:{model:e.editFormArgPlus,rules:e.rulesArgPlus,"label-width":"90px","label-position":"right",align:"left"}},[r("el-form-item",{attrs:{label:e.$t("menu.ArrangeTable.5nrnatnki3w0"),prop:"ArgType"}},[r("hgswitch",{attrs:{"active-value":"Y","inactive-value":"N","inactive-text":e.$t("menu.ArrangeTable.5ncy621m5gc0"),"active-text":e.$t("menu.ArrangeTable.5ncy621m5o00"),size:"mini"},model:{value:e.editFormArgPlus.ArgType,callback:function(t){e.$set(e.editFormArgPlus,"ArgType",t)},expression:"editFormArgPlus.ArgType"}})],1),e._v(" "),r("el-form-item",{attrs:{label:e.$t("menu.ArrangeTable.5nrnatnlod00"),prop:"ArgTime"}},[r("el-row",[r("el-col",{attrs:{span:9}},[r("el-time-select",{staticStyle:{width:"100%",display:"inline-block"},attrs:{placeholder:e.$t("menu.ArrangeTable.5nrnatkxg2s0"),size:"mini",editable:"",prop:"ArgStTime1","picker-options":{start:"00:00",step:"00:10",end:"23:59"}},on:{blur:function(t){return e.ArgTimeBlur("editFormArgPlus.ArgStTime1",t)}},model:{value:e.editFormArgPlus.ArgStTime1,callback:function(t){e.$set(e.editFormArgPlus,"ArgStTime1",t)},expression:"editFormArgPlus.ArgStTime1"}})],1),e._v(" "),r("el-col",{staticStyle:{"text-align":"center",display:"inline-block"},attrs:{span:2}},[e._v(e._s(e.$t("menu.ArrangeTable.5nrnatj9h2o0")))]),e._v(" "),r("el-col",{attrs:{span:9}},[r("el-time-select",{staticStyle:{width:"100%",display:"inline-block"},attrs:{placeholder:e.$t("menu.ArrangeTable.5nrnatl2ma80"),size:"mini",editable:"",prop:"ArgEndTime1","picker-options":{start:"00:00",step:"00:10",end:"23:59"}},on:{blur:function(t){return e.ArgTimeBlur("editFormArgPlus.ArgEndTime1",t)}},model:{value:e.editFormArgPlus.ArgEndTime1,callback:function(t){e.$set(e.editFormArgPlus,"ArgEndTime1",t)},expression:"editFormArgPlus.ArgEndTime1"}})],1)],1)],1),e._v(" "),r("el-form-item",{staticStyle:{"margin-top":"10px"},attrs:{label:e.$t("menu.ArrangeTable.5nrnatkk3es0"),prop:"ArgWorkRemark"}},[r("el-row",[r("el-col",{attrs:{span:20}},[r("el-input",{staticStyle:{width:"100%"},attrs:{type:"textarea",row:2},model:{value:e.editFormArgPlus.ArgWorkRemark,callback:function(t){e.$set(e.editFormArgPlus,"ArgWorkRemark",t)},expression:"editFormArgPlus.ArgWorkRemark"}})],1)],1)],1)],1),e._v(" "),r("div",{staticClass:"bottom-button"},[this.elementlist.argplussave||0==this.$store.state.login.LoginId?r("hgbutton",{ref:"argplussave",attrs:{type:e.styleCode?"default":"success",styleCode:e.styleCode},on:{click:e.SaveArgPlus}},[e._v(e._s(e.$t("menu.ArrangeTable.5nrnatjbm480")))]):e._e(),e._v(" "),r("hgbutton",{attrs:{type:"default",styleCode:e.styleCode},on:{click:e.DelteArgPlus}},[e._v(e._s(e.$t("menu.ArrangeTable.5nrnatjcy680")))]),e._v(" "),r("hgbutton",{attrs:{type:"default",styleCode:e.styleCode},on:{click:function(t){e.dialogVisibleArgPlus=!1}}},[e._v(e._s(e.$t("menu.ArrangeTable.5nrnatm6d740")))])],1)],1),e._v(" "),r("el-dialog",{attrs:{title:e.$t("menu.ArrangeTable.5ncy621moac0"),visible:e.dialogVisibleWish,"close-on-click-modal":!1,width:"300px","append-to-body":!0,"modal-append-to-body":!1},on:{"update:visible":function(t){e.dialogVisibleWish=t}}},[r("div",{staticClass:"dialog-header-title",attrs:{slot:"title"},slot:"title"},[e.styleCode?r("i",{staticClass:"nm-icon-w-paper"}):e._e(),e._v(" "),r("span",[e._v(e._s(e.$t("menu.ArrangeTable.5ncy621moac0")))])]),e._v(" "),r("el-form",{ref:"wishEditForm",attrs:{model:e.wishEditForm,"label-width":"120px","label-position":"right",align:"left"}},[r("el-form-item",{attrs:{label:e.$t("menu.ArrangeTable.5ncy621mvig0"),prop:"PostDesc"}},[r("span",{staticStyle:{"font-size":"14px",color:"#000"}},[e._v(e._s(e.wishEditForm.PostDesc))])]),e._v(" "),r("el-form-item",{attrs:{label:e.$t("menu.ArrangeTable.5ncy621mx5c0"),prop:"ArgTime"}},[r("span",{staticStyle:{"font-size":"14px",color:"#000"}},[e._v(e._s(e.wishEditForm.ArgTime))])]),e._v(" "),r("el-form-item",{attrs:{label:e.$t("menu.ArrangeTable.5ncy621mygo0"),prop:"Remark"}},[r("span",{staticStyle:{"font-size":"14px",color:"#000"}},[e._v(e._s(e.wishEditForm.Remark))])]),e._v(" "),r("el-form-item",{attrs:{label:e.$t("menu.ArrangeTable.5ncy621mzt00"),prop:"Type"}},[r("hgswitch",{attrs:{"inactive-text":e.$t("menu.ArrangeTable.5ncy621n19s0"),"active-text":e.$t("menu.ArrangeTable.5ncy621n5240")},model:{value:e.wishEditForm.Type,callback:function(t){e.$set(e.wishEditForm,"Type",t)},expression:"wishEditForm.Type"}})],1)],1),e._v(" "),r("div",{staticClass:"bottom-button"},[this.elementlist.wishargsure||0==this.$store.state.login.LoginId?r("hgbutton",{attrs:{type:"default",styleCode:e.styleCode},on:{click:function(t){return e.SaveWishArg("A")}}},[e._v(e._s(e.$t("menu.ArrangeTable.5nrnatnpid40")))]):e._e(),e._v(" "),this.elementlist.wishargback||0==this.$store.state.login.LoginId?r("hgbutton",{attrs:{type:"default",styleCode:e.styleCode},on:{click:function(t){return e.SaveWishArg("B")}}},[e._v(e._s(e.$t("menu.ArrangeTable.5nrnatjct400")))]):e._e(),e._v(" "),r("hgbutton",{attrs:{type:"default",styleCode:e.styleCode},on:{click:function(t){e.dialogVisibleWish=!1}}},[e._v(e._s(e.$t("menu.ArrangeTable.5nrnatm6d740")))])],1)],1),e._v(" "),r("div",{staticStyle:{position:"absolute",right:"10px",top:"80px","z-index":"999999"}},[e.showBeforArgFlag?e._e():r("div",{staticStyle:{height:"100px",width:"20px","text-align":"center",color:"#FFFFFF"},style:{"background-color":e.styleCode?"#40A2DE":"#339eff"}},[r("li",{staticClass:"el-icon-d-arrow-left listmenu",on:{click:function(t){return e.showBeforArgClick(!0)}}}),e._v(" "),r("span",[e._v(e._s(e.$t("menu.ArrangeTable.5ncy621nhfc0")))])]),e._v(" "),e.showBeforArgFlag?r("div",{staticStyle:{"background-color":"#fff"}},[r("div",{staticStyle:{height:"30px","line-height":"30px",width:"522px","padding-left":"0px"},style:{"background-color":e.styleCode?"#40A2DE":"#339eff"}},[r("div",{staticStyle:{float:"right","margin-right":"10px"}},[r("li",{staticClass:"el-icon-d-arrow-right listmenu",on:{click:function(t){return e.showBeforArgClick(!1)}}})])]),e._v(" "),r("div",{staticStyle:{width:"522px"}},[r("div",{staticClass:"top-tool-dialog-table"},[r("el-table",{ref:"beforArgTableData",staticClass:"beforArgTable",staticStyle:{width:"100%"},attrs:{"header-cell-style":e.headerCellFontWeight,border:e.styleCode,data:e.beforArgTableData,height:e.tableHeight+20,"row-class-name":e.beforArgTableRowClassName}},[e._l(e.beforTableColumn,function(t){return[t.show?r("el-table-column",{key:t.prop,attrs:{prop:t.prop,align:-1!=t.prop.indexOf("Date")?"center":"left",label:t.label,width:t.width,"header-align":"left","show-overflow-tooltip":-1==t.prop.indexOf("Date")},scopedSlots:e._u([{key:"default",fn:function(a){return[-1!=t.prop.indexOf("Date")&&a.row[t.prop]?r("span",e._l(a.row[t.prop].split("「"),function(s,o){return r("font",{key:o,attrs:{"v-if":!!s}},[r("font",{style:{color:s.split("」")[1],backgroundColor:s.split("」")[2]}},[e._v(e._s(s.split("」")[0]))]),e._v(" "),r("font",[e._v(e._s(a.row[t.prop].split("「").length-1>o?"、":""))])],1)}),1):r("span",[e._v(e._s(a.row[t.prop]))])]}}],null,!0)}):e._e()]})],2)],1)])]):e._e()])],1)},staticRenderFns:[]};var C=r("VU/8")(w,D,!1,function(e){r("G+XJ")},null,null);t.default=C.exports},Sw6Q:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("Dd8w"),s=r.n(a),o=r("NYxO"),l=r("XlQt"),i=r("W5Fe"),n={name:"ArrangeLog",props:["argid","ward"],computed:s()({},Object(o.b)(["styleCode"])),components:{Hgbutton:l.default,hgpagination:i.default},data:function(){return{Finds:{Ward:"",StDate:"",EndDate:""},WardStore:"",TableData:[],CurrentPage:1,PageSize:20,TotalCount:0}},methods:{LoadRoleWard:function(){var e=this,t=this,r=t.axiosConfig("web.INMDataLimit","FindRoleWardList","RecQuery","nurseid$"+sessionStorage.loginID);t.$ajax.request(r).then(function(r){r.data instanceof Object?(t.WardStore=r.data.rows,t.WardStore.length>0&&(t.Finds.Ward=t.WardStore[0].rw)):t.$message({type:"error",message:"获取权限病区失败",showClose:!0,customClass:"error_class"}),e.handleCurrentChange(1)}).catch(function(e){t.$message({type:"error",message:"获取权限病区失败",showClose:!0,customClass:"error_class"})})},LoadTableData:function(){var e=this,t=e.argid,r=e.ward;""==t&&(r=e.Finds.Ward);var a="";e.Finds.StDate instanceof Date&&(a=e.Finds.StDate.Format("YYYY-MM-dd"));var s="";e.Finds.EndDate instanceof Date&&(s=e.Finds.EndDate.Format("YYYY-MM-dd"));var o=t+"^"+a+"^"+s+"^"+r,l=(e.CurrentPage-1)*e.PageSize,i=e.PageSize;e.TableData=[],e.TotalCount=0;var n=e.axiosConfig("web.INMArgComm","FindArgLogList","RecQuery","parr$"+o,"start$"+l,"limit$"+i,"nurseid$"+sessionStorage.getItem("loginID"));e.$ajax.request(n).then(function(t){t.data instanceof Object?(e.TableData=t.data.rows,e.TotalCount=parseInt(t.data.results)):e.$message({type:"error",message:"获取修改记录失败",showClose:!0,customClass:"error_class"})}).catch(function(t){e.$message({type:"error",message:"获取修改记录失败",showClose:!0,customClass:"error_class"})})},handleCurrentChange:function(e){this.CurrentPage=e.currentPage,this.LoadTableData()},handleSizeChange:function(e){this.PageSize=e,this.LoadTableData()}},created:function(){this.LoadRoleWard()}},g={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"arglog-panel"},[r("div",{staticClass:"top-tool-table-dialog-top dialog-div-top-radius"},[r("el-form",{attrs:{model:e.Finds,inline:!0,"label-position":"left"}},[e.argid?e._e():r("el-form-item",{attrs:{label:e.$t("menu.ArrangeLog.5nrnat403hg0")}},[r("el-select",{staticStyle:{width:"100px"},attrs:{size:"mini",filterable:"",clearable:"",disabled:!!e.Finds.rw},model:{value:e.Finds.Ward,callback:function(t){e.$set(e.Finds,"Ward",t)},expression:"Finds.Ward"}},e._l(e.WardStore,function(e){return r("el-option",{key:e.rw,attrs:{label:e.WardDesc,value:e.rw}})}),1)],1),e._v(" "),r("el-form-item",{attrs:{label:e.$t("menu.ArrangeLog.5nrnat44ps80")}},[r("el-date-picker",{staticStyle:{width:"120px"},attrs:{clearable:!1,editable:!1,placeholder:"",size:"mini",type:"date",format:this.$store.state.mainframe.DateFormat},model:{value:e.Finds.StDate,callback:function(t){e.$set(e.Finds,"StDate",t)},expression:"Finds.StDate"}})],1),e._v(" "),r("el-form-item",{attrs:{label:e.$t("menu.ArrangeLog.5nrnat47bcs0")}},[r("el-date-picker",{staticStyle:{width:"120px"},attrs:{clearable:!1,editable:!1,placeholder:"",size:"mini",type:"date",format:this.$store.state.mainframe.DateFormat},model:{value:e.Finds.EndDate,callback:function(t){e.$set(e.Finds,"EndDate",t)},expression:"Finds.EndDate"}})],1),e._v(" "),r("hgbutton",{attrs:{type:"default",styleCode:e.styleCode,icon:"nm-icon-w-find"},on:{click:function(t){return e.handleCurrentChange(1)}}},[e._v(e._s(e.$t("menu.ArrangeLog.5nrnat47j7s0")))])],1)],1),e._v(" "),r("div",{staticClass:"top-tool-dialog-table dialog-table-bottom-radius"},[r("el-table",{attrs:{data:e.TableData,height:"300",border:e.styleCode,"header-cell-style":e.headerCellFontWeight,"highlight-current-row":"",align:"left"}},[r("el-table-column",{attrs:{type:"index",align:"center",width:"40"}}),e._v(" "),r("el-table-column",{attrs:{label:e.$t("menu.ArrangeLog.5nrnat49rr40"),width:"70","show-overflow-tooltip":"",prop:"perID"}}),e._v(" "),r("el-table-column",{attrs:{label:e.$t("menu.ArrangeLog.5nrnat4cx0g0"),width:"80","show-overflow-tooltip":"",prop:"perName"}}),e._v(" "),r("el-table-column",{attrs:{label:e.$t("menu.ArrangeLog.5ncy61r4m8w0"),"show-overflow-tooltip":"",prop:"logWard",width:"150"}}),e._v(" "),r("el-table-column",{attrs:{label:e.$t("menu.ArrangeLog.5ncy61r4plo0"),width:"120","show-overflow-tooltip":"",prop:"logArgStDate",formatter:e.PTableDateHisShow}}),e._v(" "),r("el-table-column",{attrs:{label:e.$t("menu.ArrangeLog.5ncy61r4rhk0"),width:"100","show-overflow-tooltip":"",prop:"logBefor"}}),e._v(" "),r("el-table-column",{attrs:{label:e.$t("menu.ArrangeLog.5ncy61r4tec0"),width:"100","show-overflow-tooltip":"",prop:"logAfter"}}),e._v(" "),r("el-table-column",{attrs:{label:e.$t("menu.ArrangeLog.5nrnat4ez6o0"),width:"100","show-overflow-tooltip":"",prop:"argDate",formatter:e.PTableDateHisShow}}),e._v(" "),r("el-table-column",{attrs:{label:e.$t("menu.ArrangeLog.5nrnat4h3so0"),width:"150","show-overflow-tooltip":"",prop:"logMark"}}),e._v(" "),r("el-table-column",{attrs:{label:e.$t("menu.ArrangeLog.5nrnat4jfjo0"),width:"150","show-overflow-tooltip":"",prop:"logReason"}}),e._v(" "),r("el-table-column",{attrs:{label:e.$t("menu.ArrangeLog.5nrnat4lg140"),width:"100","show-overflow-tooltip":"",prop:"logCrtName"}}),e._v(" "),r("el-table-column",{attrs:{label:e.$t("menu.ArrangeLog.5nrnat4ncjs0"),width:"100","show-overflow-tooltip":"",prop:"logCrtDate",formatter:e.PTableDateHisShow}}),e._v(" "),r("el-table-column",{attrs:{label:e.$t("menu.ArrangeLog.5nrnat4pl4s0"),width:"100","show-overflow-tooltip":"",prop:"logCrtTime"}})],1),e._v(" "),r("hgpagination",{attrs:{styleCode:e.styleCode,sizes:[20,40,50,100],totalCount:e.TotalCount,pageNumber:e.CurrentPage,pageSize:e.PageSize},on:{changePage:e.handleCurrentChange,getPageSize:e.handleSizeChange}})],1)])},staticRenderFns:[]};var d=r("VU/8")(n,g,!1,function(e){r("KAYL")},null,null);t.default=d.exports},qJe4:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("Dd8w"),s=r.n(a),o=r("W5Fe"),l=r("NYxO"),i={components:{hgpagination:o.default},computed:s()({},Object(l.b)(["styleCode"])),name:"ArrangeLog",props:["argid"],data:function(){return{tableHeight:"",WardStore:"",TableData:[],CurrentPage:1,PageSize:20,TotalCount:0}},methods:{LoadTableData:function(){var e=this,t=e.argid,r=(e.CurrentPage-1)*e.PageSize,a=e.PageSize;e.TableData=[],e.TotalCount=0;var s=e.axiosConfig("web.INMArgComm","FindArgCheckList","RecQuery","parr$"+t,"start$"+r,"limit$"+a,"nurseid$"+sessionStorage.getItem("loginID"));e.$ajax.request(s).then(function(t){t.data instanceof Object?(e.TableData=t.data.rows,e.TotalCount=parseInt(t.data.results)):e.$message({type:"error",message:"获取班次失败",showClose:!0,customClass:"error_class"})}).catch(function(t){e.$message({type:"error",message:"获取班次失败",showClose:!0,customClass:"error_class"})})},handleCurrentChange:function(e){this.CurrentPage=e.currentPage,this.LoadTableData()},handleSizeChange:function(e){this.PageSize=e,this.LoadTableData()},summaryrows:function(e){var t=e.columns,r=e.data,a=[];return t.forEach(function(e,t){if(0!==t){var s=r.map(function(t){return Number(t[e.property])});s.every(function(e){return isNaN(e)})?a[t]="":(a[t]=s.reduce(function(e,t){var r=Number(t);return isNaN(r)?e:e+t},0),"Subtotal"==e.property?a[t]+=" 元":a[t]+="")}else a[t]="合计"}),a}},created:function(){this.LoadTableData()}},n={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"arrangecheck-panel"},[r("div",{staticClass:"top-tool-dialog-table",staticStyle:{"border-radius":"4px"}},[r("el-table",{ref:"TableData",staticClass:"dialog-div-top-radius",attrs:{data:e.TableData,border:e.styleCode,"header-cell-style":e.headerCellFontWeight,"highlight-current-row":"",align:"left"}},[r("el-table-column",{attrs:{type:"index",align:"center",width:"40"}}),e._v(" "),r("el-table-column",{attrs:{label:e.$t("menu.ArrangeCheck.5nrnasnwqo80"),width:"","show-overflow-tooltip":"",prop:"PostDesc"}}),e._v(" "),r("el-table-column",{attrs:{label:e.$t("menu.ArrangeCheck.5nrnasny9k80"),width:"80","show-overflow-tooltip":"",prop:"2"}}),e._v(" "),r("el-table-column",{attrs:{label:e.$t("menu.ArrangeCheck.5ncy61k30240"),width:"80","show-overflow-tooltip":"",prop:"3"}}),e._v(" "),r("el-table-column",{attrs:{label:e.$t("menu.ArrangeCheck.5ncy61k34ws0"),width:"80","show-overflow-tooltip":"",prop:"4"}}),e._v(" "),r("el-table-column",{attrs:{label:e.$t("menu.ArrangeCheck.5ncy61k3fog0"),width:"80","show-overflow-tooltip":"",prop:"5"}}),e._v(" "),r("el-table-column",{attrs:{label:e.$t("menu.ArrangeCheck.5ncy61k3ikk0"),width:"80","show-overflow-tooltip":"",prop:"6"}}),e._v(" "),r("el-table-column",{attrs:{label:e.$t("menu.ArrangeCheck.5nrnaso0atc0"),width:"80","show-overflow-tooltip":"",prop:"7"}}),e._v(" "),r("el-table-column",{attrs:{label:e.$t("menu.ArrangeCheck.5nrnaso2okw0"),width:"80","show-overflow-tooltip":"",prop:"1"}})],1),e._v(" "),r("hgpagination",{attrs:{styleCode:e.styleCode,sizes:[20,40,50,100],totalCount:e.TotalCount,pageNumber:e.CurrentPage,pageSize:e.PageSize},on:{changePage:e.handleCurrentChange,getPageSize:e.handleSizeChange}})],1)])},staticRenderFns:[]};var g=r("VU/8")(i,n,!1,function(e){r("Ngjc")},null,null);t.default=g.exports}});