webpackJsonp([259],{QCb2:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=o("Dd8w"),a=o.n(l),s=o("NYxO"),r=o("XlQt"),n=o("W5Fe"),i={name:"QualControlResult",components:{hgbutton:r.default,hgpagination:n.default},computed:a()({},Object(s.b)(["Height","styleCode"])),data:function(){return{ToolForm:{Ward:"",Level:"",Type:"",Qual:"",StDate:"",EndDate:""},WardStore:[],LevelStore:[],CheckTypeStore:[],QualItemStore:[],TaskTable:[],PageSize:20,CurrentPage:1,TotalCount:0,DrawerVisible:!1,SelectRow:{},QuesTable:[],exportTableData:[]}},methods:{LoadRoleWard:function(){var e=this;this.WardStore=[];var t=this.axiosConfig("web.INMDataLimit","FindRoleWardList","RecQuery","nurseid$"+sessionStorage.loginID);this.$ajax.request(t).then(function(t){t.data instanceof Object?e.WardStore=t.data.rows:e.$message({type:"error",message:"获取权限病区失败",showClose:!0,customClass:"error_class"})}).catch(function(t){e.$message({type:"error",message:"获取权限病区失败",showClose:!0,customClass:"error_class"})})},LoadCheckLevel:function(){var e=this;this.LevelStore=[];var t=this.axiosConfig("web.INMQualControlComm","GetCheckLevel","Method","nurseid$"+sessionStorage.loginID);this.$ajax.request(t).then(function(t){t.data instanceof Array?e.LevelStore=t.data:e.$message({type:"error",message:"获取检查级别失败",showClose:!0,customClass:"error_class"})}).catch(function(t){e.$message({type:"error",message:"获取检查级别失败",showClose:!0,customClass:"error_class"})})},LoadCheckType:function(){var e=this;this.CheckTypeStore=[];var t=this.axiosConfig("web.INMQualControlComm","FindQualTypeList","RecQuery");this.$ajax.request(t).then(function(t){t.data instanceof Object?e.CheckTypeStore=t.data.rows:e.$message({type:"error",message:"获取质控类型失败",showClose:!0,customClass:"error_class"})}).catch(function(t){e.$message({type:"error",message:"获取质控类型失败",showClose:!0,customClass:"error_class"})})},LoadQualItem:function(){var e=this;this.QualItemStore=[];var t=this.axiosConfig("web.INMQualControlComm","FindQualForType","RecQuery","flag$1");this.$ajax.request(t).then(function(t){t.data instanceof Object?e.QualItemStore=t.data.rows:e.$message({type:"error",message:"获取质控项目失败",showClose:!0,customClass:"error_class"})}).catch(function(t){e.$message({type:"error",message:"获取质控项目失败",showClose:!0,customClass:"error_class"})})},ToolFormSearch:function(){var e=this,t=(this.CurrentPage-1)*this.PageSize,o=this.CurrentPage*this.PageSize,l=this.ToolForm.Ward,a=this.ToolForm.Level,s=this.ToolForm.Type,r=this.ToolForm.Qual,n="";this.ToolForm.StDate instanceof Date&&(n=this.ToolForm.StDate.Format("YYYY-MM-dd"));var i="";this.ToolForm.EndDate instanceof Date&&(i=this.ToolForm.EndDate.Format("YYYY-MM-dd"));var u=l+"^"+a+"^"+s+"^"+r+"^"+n+"^"+i;this.TaskTable=[],this.SelectRow={};var c=this.axiosConfig("web.INMQualControlComm","FindRandomQuesList","RecQuery","parr$"+u,"nurseid$"+sessionStorage.loginID);this.$ajax.request(c).then(function(l){l.data instanceof Object?(e.exportTableData=l.data.rows,e.TaskTable=e.exportTableData.slice(t,o),e.TotalCount=parseInt(l.data.results)):e.$message({type:"error",message:"获取质控结果列表失败",showClose:!0,customClass:"error_class"})}).catch(function(t){e.$message({type:"error",message:"获取质控结果列表失败",showClose:!0,customClass:"error_class"})})},LoadRowDetail:function(e){var t=this;this.DrawerVisible=!0,this.QuesTable=[];var o=this.axiosConfig("web.INMQualControlComm","FindQuesByIdList","RecQuery","id$"+e);this.$ajax.request(o).then(function(e){e.data instanceof Object?t.QuesTable=e.data.rows:t.$message({type:"error",message:"获取质控详情列表失败",showClose:!0,customClass:"error_class"})}).catch(function(e){t.$message({type:"error",message:"获取质控详情列表失败",showClose:!0,customClass:"error_class"})})},RowClick:function(e,t,o){this.SelectRow=e},RowDblClick:function(e,t,o){this.SelectRow=e},HandleSizeChange:function(e){this.PageSize=e,this.ToolFormSearch()},HandleCurrentChange:function(e){this.CurrentPage=e.currentPage,this.ToolFormSearch()}},created:function(){this.LoadRoleWard(),this.LoadCheckLevel(),this.LoadCheckType(),this.LoadQualItem(),this.ToolFormSearch()}},u={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"qual-control-result-panel"},[o("div",{staticClass:"top-tool-inputDiv"},[o("el-form",{attrs:{inline:!0,model:e.ToolForm}},[o("el-form-item",{attrs:{label:e.$t("menu.QualControlResult.5nrnb7cdrlg0")}},[o("el-select",{staticStyle:{width:"140px"},attrs:{clearable:"",filterable:"",placeholder:e.$t("menu.QualControlResult.5nrnb7cf6ps0"),size:"mini"},model:{value:e.ToolForm.Ward,callback:function(t){e.$set(e.ToolForm,"Ward",t)},expression:"ToolForm.Ward"}},e._l(e.WardStore,function(e){return o("el-option",{key:e.rw,attrs:{label:e.WardDesc,value:e.rw}})}),1)],1),e._v(" "),o("el-form-item",{attrs:{label:e.$t("menu.QualControlResult.5nrnb7ch5sg0")}},[o("el-select",{staticStyle:{width:"80px"},attrs:{clearable:"",placeholder:e.$t("menu.QualControlResult.5nrnb7cf6ps0"),size:"mini"},model:{value:e.ToolForm.Level,callback:function(t){e.$set(e.ToolForm,"Level",t)},expression:"ToolForm.Level"}},e._l(e.LevelStore,function(e){return o("el-option",{key:e.Code,attrs:{label:e.Desc,value:e.Code}})}),1)],1),e._v(" "),o("el-form-item",{attrs:{label:e.$t("menu.QualControlResult.5nrnb7cjoq40")}},[o("el-select",{staticStyle:{width:"90px"},attrs:{clearable:"",placeholder:e.$t("menu.QualControlResult.5nrnb7cf6ps0"),size:"mini"},model:{value:e.ToolForm.Type,callback:function(t){e.$set(e.ToolForm,"Type",t)},expression:"ToolForm.Type"}},e._l(e.CheckTypeStore,function(e){return o("el-option",{key:e.rw,attrs:{label:e.SubDesc,value:e.rw}})}),1)],1),e._v(" "),o("el-form-item",{attrs:{label:e.$t("menu.QualControlResult.5nrnb7clvl00")}},[o("el-select",{staticStyle:{width:"100px"},attrs:{clearable:"",placeholder:e.$t("menu.QualControlResult.5nrnb7cf6ps0"),size:"mini"},model:{value:e.ToolForm.Qual,callback:function(t){e.$set(e.ToolForm,"Qual",t)},expression:"ToolForm.Qual"}},e._l(e.QualItemStore,function(e){return o("el-option",{key:e.Qual,attrs:{label:e.QualDesc,value:e.Qual}})}),1)],1),e._v(" "),o("el-form-item",{attrs:{label:e.$t("menu.QualControlResult.5nrnb7cpfs80")}},[o("el-date-picker",{staticStyle:{width:"120px"},attrs:{type:"date",format:this.$store.state.mainframe.DateFormat,placeholder:e.$t("menu.QualControlResult.5nrnb7cpfs80"),size:"mini"},model:{value:e.ToolForm.StDate,callback:function(t){e.$set(e.ToolForm,"StDate",t)},expression:"ToolForm.StDate"}})],1),e._v(" "),o("el-form-item",{attrs:{label:e.$t("menu.QualControlResult.5nrnb7cslno0")}},[o("el-date-picker",{staticStyle:{width:"120px"},attrs:{type:"date",format:this.$store.state.mainframe.DateFormat,placeholder:e.$t("menu.QualControlResult.5nrnb7cslno0"),size:"mini"},model:{value:e.ToolForm.EndDate,callback:function(t){e.$set(e.ToolForm,"EndDate",t)},expression:"ToolForm.EndDate"}})],1),e._v(" "),o("el-form-item",[o("hgbutton",{attrs:{type:"default",styleCode:e.styleCode,icon:"nm-icon-w-find"},on:{click:e.ToolFormSearch}},[e._v(e._s(e.$t("menu.QualControlResult.5nrnb7cubr80")))])],1)],1)],1),e._v(" "),o("div",{staticClass:"top-tool-button"},[o("hgbutton",{attrs:{type:"text",issvg:e.styleCode,icon:e.styleCode?"#nm-icon-export":"nm-icon-lite-export"},on:{click:function(t){e.exportData("TaskTable",e.exportTableData,e.$t("menu.QualControlResult.5ncy68wtn0w0"))}}},[e._v(e._s(e.$t("menu.QualControlResult.5nrnb7cudb00")))])],1),e._v(" "),o("div",{staticClass:"top-tool-table"},[o("el-table",{ref:"TaskTable",attrs:{data:e.TaskTable,"highlight-current-row":"",border:e.styleCode,"header-cell-style":e.headerCellFontWeight,height:e.styleCode?e.Height-130:e.Height-124},on:{"row-click":e.RowClick,"row-dblclick":e.RowDblClick}},[o("el-table-column",{attrs:{type:"index",align:"center",width:"40"}}),e._v(" "),o("el-table-column",{attrs:{prop:"QualItemDesc",label:e.$t("menu.QualControlResult.5nrnb7cxwj40"),"show-overflow-tooltip":"",width:"150"}}),e._v(" "),o("el-table-column",{attrs:{prop:"CheckCount",label:e.$t("menu.QualControlResult.5nrnb7czlhs0"),"show-overflow-tooltip":"",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",{staticClass:"table-number",on:{click:function(o){return e.LoadRowDetail(t.row.CheckTask)}}},[e._v(e._s(t.row.CheckCount))])]}}])}),e._v(" "),o("el-table-column",{attrs:{prop:"MisCount",label:e.$t("menu.QualControlResult.5ncy68wvtpg0"),"show-overflow-tooltip":"",width:"100"}}),e._v(" "),o("el-table-column",{attrs:{label:e.$t("menu.QualControlResult.5ncy68wvueo0"),"header-align":"center"}},[o("el-table-column",{attrs:{label:e.$t("menu.QualControlResult.5nrnb7d2c3s0"),prop:"QuesDesc","class-name":"task-column-ques","header-align":"left"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.QuesDesc.split("「"),function(t,l){return o("div",{key:l,staticStyle:{"border-bottom":"1px solid #EBEEF5"}},[t?o("el-tooltip",{attrs:{content:t,effect:"dark",placement:"top"}},[o("span",{staticStyle:{"margin-left":"10px","margin-right":"10px"}},[e._v(e._s(t))])]):e._e()],1)})}}])}),e._v(" "),o("el-table-column",{attrs:{label:e.$t("menu.QualControlResult.5nrnb7d3x2o0"),prop:"QuesCount","class-name":"task-column-ques",align:"left",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.QuesCount.split("「"),function(t,l){return o("div",{key:l,staticStyle:{"border-bottom":"1px solid #EBEEF5"}},[o("span",{staticStyle:{"margin-left":"10px","margin-right":"10px"}},[e._v(e._s(t))])])})}}])})],1)],1),e._v(" "),o("hgpagination",{attrs:{styleCode:e.styleCode,sizes:[20,40,50,100],totalCount:e.TotalCount,pageNumber:e.CurrentPage,pageSize:e.PageSize},on:{changePage:e.HandleCurrentChange,getPageSize:e.HandleSizeChange}})],1),e._v(" "),o("el-dialog",{attrs:{visible:e.DrawerVisible,width:"70%",title:e.$t("menu.QualControlResult.5ncy68wx0z00")+this.SelectRow.QualItemDesc},on:{"update:visible":function(t){e.DrawerVisible=t}}},[o("div",{staticClass:"dialog-header-title",attrs:{slot:"title"},slot:"title"},[e.styleCode?o("i",{staticClass:"nm-icon-w-paper"}):e._e(),e._v(" "),o("span",[e._v(e._s(e.$t("menu.QualControlResult.5ncy68wx0z00")+this.SelectRow.QualItemDesc))])]),e._v(" "),o("div",{staticClass:"top-tool-dialog-table dialog-table-bottom-radius dialog-div-top-radius",style:{"border-top":e.styleCode?"":"1px solid #e2e2e2"}},[o("el-table",{ref:"QuesTable",staticClass:"dialog-div-top-radius dialog-table-bottom-radius",staticStyle:{"border-bottom":"0"},attrs:{data:e.QuesTable,height:e.Height-100,"highlight-current-row":"","header-cell-style":e.headerCellFontWeight,border:e.styleCode}},[o("el-table-column",{attrs:{type:"index",align:"center",width:"50"}}),e._v(" "),o("el-table-column",{attrs:{prop:"ResultCheckDate",label:e.$t("menu.QualControlResult.5nrnb7d69q40"),"show-overflow-tooltip":"",width:"150"}}),e._v(" "),o("el-table-column",{attrs:{prop:"TaskLevelDesc",label:e.$t("menu.QualControlResult.5nrnb7d7kjw0"),"show-overflow-tooltip":"",width:"80"}}),e._v(" "),o("el-table-column",{attrs:{prop:"ResultScore",label:e.$t("menu.QualControlResult.5nrnb7d8o1g0"),"show-overflow-tooltip":"",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",{style:0==t.row.ResultPass?"color:red;":""},[e._v(e._s(t.row.ResultScore))])]}}])}),e._v(" "),o("el-table-column",{attrs:{label:e.$t("menu.QualControlResult.5ncy68wvueo0"),"header-align":"center"}},[o("el-table-column",{attrs:{label:e.$t("menu.QualControlResult.5nrnb7d2c3s0"),"class-name":"task-column-ques","header-align":"left"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.QuesDesc.split("「"),function(t,l){return o("div",{key:l,staticStyle:{"border-bottom":"1px solid #ddd","min-height":"34px"}},[o("el-tooltip",{attrs:{content:t,effect:"dark",placement:"top"}},[o("span",{staticStyle:{"margin-left":"10px","margin-right":"10px"}},[e._v(e._s(t))])])],1)})}}])}),e._v(" "),o("el-table-column",{attrs:{label:e.$t("menu.QualControlResult.5nrnb7dcq5s0"),"class-name":"task-column-ques","header-align":"left",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.QuesRemark.split("「"),function(t,l){return o("div",{key:l,staticStyle:{"border-bottom":"1px solid #ddd","min-height":"34px"}},[o("el-tooltip",{attrs:{content:t,effect:"dark",placement:"top"}},[o("span",{staticStyle:{"margin-left":"10px","margin-right":"10px"}},[e._v(e._s(t))])])],1)})}}])})],1)],1)],1)])],1)},staticRenderFns:[]};var c=o("VU/8")(i,u,!1,function(e){o("qKCS")},null,null);t.default=c.exports},qKCS:function(e,t){}});