webpackJsonp([149,295],{d6c6:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("5eDb"),a=i.n(n),l=i("iB2v"),s=(i("axCQ"),i("3Oml"),i("NBEC"),i("HaK5"),i("Q/P+"),i("f85y"),i("yXOt"),i("Abny"),i("S0tB"),i("njYm"),i("SlIL"),i("gBhd"),{components:{Editor:l.a},name:"tinymce",props:{value:{type:String,default:""},disabled:{type:Boolean,default:!1},plugins:{type:[String,Array],default:"lists advlist table wordcount preview print link image paste code"},toolbar:{type:[String,Array],default:"styleselect | fontselect fontsizeselect bold italic underline strikethrough superscript subscript removeformat lineheight forecolor backcolor | alignleft aligncenter alignright alignjustify | bullist numlist indent2em outdent indent | table link image media | preview print code"},height:{type:Number,default:300},wordLimit:{type:[Number,Boolean],default:!1},uploadAddress:{type:[String],default:""}},data:function(){var e=this,t="./nurmg/";return{init:{language_url:t+"static/tinymce/langs/zh_CN.js",language:"zh_CN",skin_url:t+"static/tinymce/skins/ui/oxide",content_css:t+"static/tinymce/skins/ui/oxide/content.min.css",external_plugins:{indent2em:"../tinymce/plugins/indent2em/plugin.min.js",lineheight:"../tinymce/plugins/lineheight/plugin.min.js",ax_wordlimit:"../tinymce/plugins/ax_wordlimit/plugin.min.js",media:"../tinymce/plugins/media/plugin.min.js"},height:this.height,plugins:this.plugins,toolbar:this.toolbar,branding:!1,menubar:!1,elementpath:!1,toolbar_mode:"sliding",default_link_target:"_blank",fontsize_formats:"初号=42pt 小初=36pt 一号=26pt 小一=24pt 二号=22pt 小二=18pt 三号=16pt 小三=15pt 四号=14pt 小四=12pt 五号=10.5pt 小五=9pt 六号=7.5pt 小六=6.5pt 七号=5.5pt 八号=5pt 8=8pt 10=10pt 11=11pt 20=20pt",paste_retain_style_properties:"color font-size text-indent text-align margin margin-left margin-top margin-bottom margin-right border border-style border-collapse border-top border-left border-bottom border-right mso-border-top-alt mso-border-left-alt mso-border-alt padding mso-padding-alt",paste_preprocess:function(e,t){t.content=t.content.replace(/font-family:(\S)*?;/gi,"font-family:宋体;"),t.content=t.content.replace(/text-indent: -(\S)*?pt;/gi,"").replace(/windowtext 1.0pt/gi,"1px").replace(/<table/gi,'<table cellspacing="0" cellpadding="0"')},file_picker_callback:function(t,i,n){var a=".jpg, .jpeg, .png, .gif, .pdf, .txt, .zip, .rar, .7z, .doc, .docx, .xls, .xlsx, .ppt, .pptx, .mp3, .mp4";switch(n.filetype){case"image":a=".png, .jpg, .jpeg, .gif";break;case"media":a=".mp3, .mp4";break;case"file":a=".pdf, .txt, .zip, .rar, .7z, .doc, .docx, .xls, .xlsx, .ppt, .pptx"}var l=e.uploadAddress,s=document.createElement("input");s.setAttribute("type","file"),s.setAttribute("accept",a),s.onchange=function(){var e=this.files[0],i=void 0,a=void 0;(i=new XMLHttpRequest).withCredentials=!1,i.open("POST",l),i.onload=function(){if(200==i.status){var a=i.responseText.split(":")[0],s=i.responseText.split(":")[1];if("success"==a)switch(n.filetype){case"image":t(l.split("Fileupdate")[0]+s,{title:e.name,alt:e.name});break;case"media":var o=URL.createObjectURL(e),r=document.createElement("video");r.onloadedmetadata=function(e){URL.revokeObjectURL(o),t(l.split("Fileupdate")[0]+s,{width:r.videoWidth,height:r.videoHeight})},r.src=o,r.load();break;case"file":t(l.split("Fileupdate")[0]+s,{title:e.name,text:e.name})}}},(a=new FormData).append("file",e,e.name),i.send(a)},s.click()},contextmenu:"link linkchecker image imagetools table spellchecker configurepermanentpen media cut copy paste",font_formats:"黑体=黑体;宋体=宋体;新宋体=新宋体;仿宋=仿宋;楷体=楷体;隶书=隶书;微软雅黑=微软雅黑,Microsoft YaHei;等线=等线;方正姚体=方正姚体;方正舒体=方正舒体;华文中宋=华文中宋;华文仿宋=华文仿宋;华文宋体=华文宋体;华文彩云=华文彩云;华文新魏=华文新魏;华文楷体=华文楷体;华文琥珀=华文琥珀;华文细黑=华文细黑;华文行楷=华文行楷;华文隶书=华文隶书;幼圆=幼圆; Andale Mono=andale mono,times; Arial=arial,helvetica,sans-serif; Arial Black=arial black,avant garde; Book Antiqua=book antiqua,palatino; Comic Sans MS=comic sans ms,sans-serif; Courier New=courier new,courier; Georgia=georgia,palatino; Helvetica=helvetica; Impact=impact,chicago; Symbol=symbol; Tahoma=tahoma,arial,helvetica,sans-serif;Times New Roman=times new roman,times; Trebuchet MS=trebuchet ms,geneva;",content_style:"body { font-family:宋体;}",ax_wordlimit_num:this.wordLimit,ax_wordlimit_callback:function(e,t,i){e.notificationManager.open({type:"warning ",text:"当前字数："+t.length+"，限制字数："+i,timeout:2e3,closeButton:!0,icon:"warning"})}},myValue:this.value}},mounted:function(){a.a.init({})},methods:{onClick:function(e){this.$emit("onClick",e,a.a)},clear:function(){this.myValue=""},onBlur:function(e){this.$emit("onBlur",e,a.a)}},watch:{value:function(e){this.myValue=e},myValue:function(e){this.$emit("input",e)}}}),o={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tinymce-box"},[i("Editor",{attrs:{init:e.init,disabled:e.disabled},on:{onBlur:e.onBlur,onClick:e.onClick},model:{value:e.myValue,callback:function(t){e.myValue=t},expression:"myValue"}})],1)},staticRenderFns:[]};var r=i("VU/8")(s,o,!1,function(e){i("jeM7")},null,null);t.default=r.exports},jeM7:function(e,t){},rS3C:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("Dd8w"),a=i.n(n),l=(i("zL8q"),i("NYxO")),s=i("d6c6"),o=i("XlQt"),r=i("z8xk"),c=i("W5Fe"),d={components:{tinymce:s.default,Hgbutton:o.default,Hgpanel:r.default,hgpagination:c.default},computed:a()({},Object(l.b)(["Height","styleCode","LoginId"])),name:"WorkPlan",data:function(){return{contextToolbar:"bold italic underline strikethrough superscript subscript lineheight forecolor backcolor alignleft aligncenter alignright alignjustify | bullist numlist indent2em outdent indent | table | removeformat | preview print",finds:{year:new Date,type:"年度",finddesc:""},title:"年度",editForm:{WorkYear:new Date,WorkType:"",WorkPlan:""},ContentEditAble:!0,selRow:"",tableData:[],myValue:this.value,searchtype:[{code:"Y",desc:"年度"},{code:"HY",desc:"半年"},{code:"Q",desc:"季度"},{code:"M",desc:"月度"}],rules:{WorkYear:[{required:!0,message:"年份不能为空",trigger:"change"}],WorkType:[{required:!0,message:"类型不能为空",trigger:"change"}],WorkPlan:[{required:!0,message:"计划名称不能为空",trigger:"change"}]},dialogPlanVisible:!1,currentPage:1,currentPageSize:20,totalCount:0,winFlag:0,elementlist:{}}},created:function(){this.FindClick();var e=this.$router.currentRoute.path.slice(1,this.$router.currentRoute.path.length);this.loadElementsForRouter("elementlist",e)},methods:{jumpPage:function(e){this.currentPage=e.currentPage,this.FindClick()},handleCurrentChange:function(e){this.currentPage=e,this.FindClick()},handleSizeChange:function(e){this.currentPageSize=e,this.FindClick()},ChangeType:function(e){this.title=e},RowClick:function(e,t,i){var n=this,a=this;this.selRow=e,this.ContentEditAble=!0,this.selRow.rw&&"已保存"==this.selRow.WorkStatus&&(this.ContentEditAble=!1),a.$ajax.request(a.axiosConfig("web.INMOrgComm","GetWorkPlanContent","Method","id$"+a.selRow.rw)).then(function(e){""!=e.data&&0!=e.data?a.myValue=e.data.replace(/☼/g,'"'):a.myValue=""}).catch(function(e){n.$message({type:"error",message:"获取内容失败",showClose:!0,customClass:"error_class"})})},RowDblClick:function(e,t,i){this.selRow.rw?this.EditClick():this.message({message:"请选择要编辑的内容",type:"warning",showClose:!0,customClass:"warning_class"})},AddClick:function(){var e=this;this.editForm.rw="",this.winFlag=0,this.$nextTick(function(){void 0!==e.$refs.editForm&&e.$refs.editForm.resetFields()}),this.dialogPlanVisible=!0},EditClick:function(){var e=this;this.selRow.rw?"已发布"!=this.selRow.WorkStatus?(this.dialogPlanVisible=!0,this.winFlag=1,this.$ajax.request(this.axiosConfig("web.INMOrgComm","GetWorkPlan","RecMethod","id$"+this.selRow.rw)).then(function(t){t.data instanceof Object?(e.editForm.WorkYear=t.data.WorkYear?new Date(t.data.WorkYear):"",e.editForm.WorkType=t.data.WorkType,e.editForm.WorkPlan=t.data.WorkPlan,e.editForm.rw=t.data.rw):(e.dialogPlanVisible=!1,e.$message({type:"error",message:"获取数据失败",showClose:!0,customClass:"error_class"}))}).catch(function(t){e.dialogPlanVisible=!1,e.$message({type:"error",message:"获取数据失败",showClose:!0,customClass:"error_class"})})):this.$message({message:"已发布不能编辑",type:"warning",showClose:!0,customClass:"warning_class"}):this.$message({message:"请选择要修改的内容",type:"warning",showClose:!0,customClass:"warning_class"})},SaveClick:function(){var e=this,t=this;this.$refs.editForm.validate(function(i){if(i){var n=sessionStorage.getItem("loginID"),a=t.editForm.WorkPlan+"^"+n+"^"+t.editForm.rw+"^"+t.editForm.WorkYear.Format("YYYY")+"-01-01^"+t.editForm.WorkType;t.$ajax.request(t.axiosConfig("web.INMOrgComm","SaveWorkPlan","Method","parr$"+a)).then(function(e){if(1!=e.data)return t.$message({type:"warning",message:"保存失败",showClose:!0,customClass:"warning_class"}),void(t.dialogPlanVisible=!1);t.$message({type:"success",message:"保存成功",showClose:!0,customClass:"success_class"}),t.FindClick(),t.editForm.WorkPlan="",t.dialogPlanVisible=!1}).catch(function(t){e.$message({type:"error",message:"保存失败",showClose:!0,customClass:"error_class"})})}}),t.selRow=""},FindClick:function(){var e=this;e.selRow="";var t=e.finds.finddesc,i=e.finds.year.Format("yyyy")+"-01-01",n=e.finds.type;e.$ajax.request(e.axiosConfig("web.INMOrgComm","FindWorkPlanList","RecQuery","year$"+i,"type$"+n,"input$"+t,"start$"+(e.currentPage-1)*e.currentPageSize,"limit$"+e.currentPageSize)).then(function(t){""!=t.data&&(e.tableData=t.data.rows,e.editForm.WorkPlan="",e.editForm.WorkType="",e.myValue="",e.totalCount=parseInt(t.data.results))})},DeleteClick:function(){var e=this,t=this;t.selRow.rw?"已发布"!=t.selRow.WorkStatus?this.$confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$ajax.request(t.axiosConfig("web.INMOrgComm","DeleteWorkPlan","Method","id$"+t.selRow.rw)).then(function(i){1==i.data?e.$message({type:"success",message:"删除成功!"}):t.$message({message:"删除失败",type:"warning",showClose:!0,customClass:"warning_class"}),e.FindClick()})}).catch(function(){e.$message({type:"info",message:"已取消删除"})}):t.$message({message:"已发布不能删除",type:"warning",showClose:!0,customClass:"warning_class"}):t.$message({message:"请选择要删除的内容",type:"warning",showClose:!0,customClass:"warning_class"})},SaveText:function(e){var t=this;if(t.selRow.rw){var i=t.selRow.rw+"^"+e,n=t.myValue.replace(/\"/g,"☼");t.$ajax.request(t.axiosConfig("web.INMOrgComm","SaveWorkPlanContent","LongMethod","parr$"+i,"contextExt$"+n)).then(function(e){1==e.data?(t.$message({type:"success",message:"操作成功!"}),t.FindClick()):e.data.length<100?t.$message({message:e.data,type:"warning",showClose:!0,customClass:"warning_class"}):t.$message({message:"后台方法出错了,请联系开发^_^",type:"error",showClose:!0,customClass:"error_class"})})}else t.$message({message:"请选择要编辑的条目",type:"warning",showClose:!0,customClass:"warning_class"})}}},u={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"workplan-panel"},[i("div",{staticClass:"top-tool-inputDiv"},[i("el-form",{ref:"finds",attrs:{model:e.finds,inline:!0},nativeOn:{submit:function(e){e.preventDefault()}}},[i("el-form-item",{attrs:{label:e.$t("menu.WorkPlan.5nrnbpjlgmk0"),prop:"year"}},[i("el-date-picker",{staticStyle:{width:"100px"},attrs:{type:"year",size:"mini"},model:{value:e.finds.year,callback:function(t){e.$set(e.finds,"year",t)},expression:"finds.year"}})],1),e._v(" "),i("el-form-item",{attrs:{label:""}},[i("el-select",{staticStyle:{width:"120px"},attrs:{"default-first-option":"",filterable:"",clearable:"",placeholder:e.$t("menu.WorkPlan.5nrnbpjn1ys0"),size:"mini"},on:{change:e.ChangeType},model:{value:e.finds.type,callback:function(t){e.$set(e.finds,"type",t)},expression:"finds.type"}},e._l(e.searchtype,function(e){return i("el-option",{key:e.code,attrs:{label:e.desc,value:e.desc}})}),1)],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("menu.WorkPlan.5nrnbpjokcs0")}},[i("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:e.$t("menu.WorkPlan.5nrnbpjq0xk0"),clearable:"",size:"mini"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.FindClick(t)}},model:{value:e.finds.finddesc,callback:function(t){e.$set(e.finds,"finddesc",t)},expression:"finds.finddesc"}})],1),e._v(" "),i("el-form-item",[i("hgbutton",{attrs:{type:"default",styleCode:e.styleCode,icon:"nm-icon-w-find"},on:{click:e.FindClick}},[e._v(e._s(e.$t("menu.WorkPlan.5nrnbpjq2n00")))])],1)],1)],1),e._v(" "),i("div",[i("el-row",{staticStyle:{padding:"10px"},attrs:{gutter:12}},[i("el-col",{attrs:{span:10}},[i("hgpanel",{staticStyle:{width:"100%"},attrs:{title:e.title+e.$t("menu.WorkPlan.5ncy6j649400"),styleCode:e.styleCode,icon:"#nm-icon-paper",panelHeight:e.Height-82}},[i("div",{staticClass:"top-tool-button",attrs:{slot:"tool"},slot:"tool"},[this.elementlist.Add||0==e.LoginId?i("hgbutton",{attrs:{type:"text",issvg:e.styleCode,icon:e.styleCode?"#nm-icon-add":"nm-icon-lite-add"},on:{click:e.AddClick}},[e._v(e._s(e.$t("menu.WorkPlan.5nrnbpjqd4o0")))]):e._e(),e._v(" "),this.elementlist.Delete||0==e.LoginId?i("hgbutton",{attrs:{type:"text",issvg:e.styleCode,icon:e.styleCode?"#nm-icon-cancel":"nm-icon-lite-cancel"},on:{click:e.DeleteClick}},[e._v(e._s(e.$t("menu.WorkPlan.5nrnbpjqe3o0")))]):e._e()],1),e._v(" "),i("div",{staticClass:"top-tool-table",staticStyle:{"border-bottom-right-radius":"4px","border-bottom-left-radius":"4px"}},[i("el-table",{attrs:{data:e.tableData,height:e.styleCode?e.Height-188:e.Height-181,"header-cell-style":e.headerCellFontWeight,border:e.styleCode,"highlight-current-row":""},on:{"row-click":e.RowClick,"row-dblclick":e.RowDblClick}},[i("el-table-column",{attrs:{type:"index",align:"center",width:"40"}}),e._v(" "),i("el-table-column",{attrs:{prop:"WorkStatus",width:"70",label:e.$t("menu.WorkPlan.5nrnbpjs2xo0")}}),e._v(" "),i("el-table-column",{attrs:{prop:"WorkPlan",label:e.$t("menu.WorkPlan.5nrnbpjtcyo0")}}),e._v(" "),i("el-table-column",{attrs:{prop:"WorkDate",width:"100",label:e.$t("menu.WorkPlan.5nrnbpjuyg00"),formatter:e.PTableDateHisShow}}),e._v(" "),e._e()],1),e._v(" "),i("hgpagination",{attrs:{styleCode:e.styleCode,sizes:[20,40,50,100],totalCount:e.totalCount,pageNumber:e.currentPage,pageSize:e.currentPageSize},on:{changePage:e.jumpPage,getPageSize:e.handleSizeChange}})],1)])],1),e._v(" "),i("el-col",{attrs:{span:14}},[i("hgpanel",{staticStyle:{width:"100%"},attrs:{title:e.$t("menu.WorkPlan.5ncy6j667r80"),styleCode:e.styleCode,icon:"#nm-icon-paper",panelHeight:e.Height-82}},[i("div",{staticClass:"panel-button-bottom",attrs:{slot:"tool"},slot:"tool"},[this.elementlist.Save||0==e.LoginId?i("hgbutton",{directives:[{name:"intervalclick",rawName:"v-intervalclick",value:{func:e.SaveText,time:1e3,value:"Y"},expression:"{func:SaveText,time:1000,value:'Y'}"}],attrs:{type:e.styleCode?"default":"success",styleCode:e.styleCode,icon:"nm-icon-w-save",disabled:e.ContentEditAble}},[e._v(e._s(e.$t("menu.WorkPlan.5nrnbpjv25w0")))]):e._e(),e._v(" "),this.elementlist.Release||0==e.LoginId?i("hgbutton",{directives:[{name:"intervalclick",rawName:"v-intervalclick",value:{func:e.SaveText,time:1e3,value:"N"},expression:"{func:SaveText,time:1000,value:'N'}"}],attrs:{type:"default",styleCode:e.styleCode,icon:"nm-icon-publish",disabled:e.ContentEditAble}},[e._v(e._s(e.$t("menu.WorkPlan.5nrnbpjv31c0")))]):e._e(),e._v(" "),this.elementlist.CancelRelease||0==e.LoginId?i("hgbutton",{directives:[{name:"intervalclick",rawName:"v-intervalclick",value:{func:e.SaveText,time:1e3,value:"Y"},expression:"{func:SaveText,time:1000,value:'Y'}"}],attrs:{type:"default",styleCode:e.styleCode,icon:"nm-icon-w-back",disabled:!e.ContentEditAble}},[e._v(e._s(e.$t("menu.WorkPlan.5nrnbpjv3q00")))]):e._e()],1),e._v(" "),i("div",{staticStyle:{padding:"10px"}},[i("tinymce",{staticStyle:{width:"100%"},attrs:{toolbar:e.contextToolbar,disabled:e.ContentEditAble,height:e.styleCode?e.Height-189:e.Height-188},model:{value:e.myValue,callback:function(t){e.myValue=t},expression:"myValue"}})],1)])],1)],1),e._v(" "),i("div",[i("el-dialog",{attrs:{title:0==e.winFlag?e.$t("menu.WorkPlan.5nrnbpjqd4o0"):e.$t("menu.WorkPlan.5ncy61gayos2"),visible:e.dialogPlanVisible,"close-on-click-modal":!1,width:"402px",align:"center"},on:{"update:visible":function(t){e.dialogPlanVisible=t}}},[i("div",{staticClass:"dialog-header-title",attrs:{slot:"title"},slot:"title"},[e.styleCode?i("i",{class:[0==e.winFlag?"nm-icon-w-plus":"nm-icon-w-edit"]}):e._e(),e._v(" "),0==e.winFlag?i("span",[e._v(e._s(e.$t("menu.WorkPlan.5nrnbpjqd4o0")))]):1==e.winFlag?i("span",[e._v(e._s(e.$t("menu.WorkPlan.5ncy61gayos2")))]):e._e()]),e._v(" "),i("el-form",{ref:"editForm",attrs:{model:e.editForm,rules:e.rules,"label-width":"104px",inline:!0,"label-position":"right",align:"left"}},[i("el-form-item",{attrs:{label:e.$t("menu.WorkPlan.5nrnbpjlgmk0"),prop:"WorkYear"}},[i("el-date-picker",{staticStyle:{width:"90px"},attrs:{type:"year",size:"mini"},model:{value:e.editForm.WorkYear,callback:function(t){e.$set(e.editForm,"WorkYear",t)},expression:"editForm.WorkYear"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"",prop:"WorkType"}},[i("el-select",{staticStyle:{width:"150px"},attrs:{"default-first-option":"",filterable:"",clearable:"",placeholder:e.$t("menu.WorkPlan.5nrnbpjn1ys0"),size:"mini"},model:{value:e.editForm.WorkType,callback:function(t){e.$set(e.editForm,"WorkType",t)},expression:"editForm.WorkType"}},e._l(e.searchtype,function(e){return i("el-option",{key:e.code,attrs:{label:e.desc,value:e.desc}})}),1)],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("menu.WorkPlan.5nrnbpjtcyo0"),prop:"WorkPlan"}},[i("el-input",{staticStyle:{width:"250px"},attrs:{clearable:"",size:"mini"},model:{value:e.editForm.WorkPlan,callback:function(t){e.$set(e.editForm,"WorkPlan",t)},expression:"editForm.WorkPlan"}})],1)],1),e._v(" "),i("div",{staticClass:"bottom-button"},[i("hgbutton",{directives:[{name:"intervalclick",rawName:"v-intervalclick",value:{func:e.SaveClick,time:1e3},expression:"{func:SaveClick,time:1000}"}],attrs:{type:e.styleCode?"default":"success",styleCode:e.styleCode}},[e._v(e._s(e.$t("menu.WorkPlan.5nrnbpjv25w0")))]),e._v(" "),i("hgbutton",{attrs:{type:"default",styleCode:e.styleCode},on:{click:function(t){e.dialogPlanVisible=!1}}},[e._v(e._s(e.$t("menu.WorkPlan.5nrnbpk2fww0")))])],1)],1)],1)],1)])},staticRenderFns:[]};var m=i("VU/8")(d,u,!1,function(e){i("vkqW")},null,null);t.default=m.exports},vkqW:function(e,t){}});