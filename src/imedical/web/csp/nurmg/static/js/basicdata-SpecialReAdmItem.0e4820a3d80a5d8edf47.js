webpackJsonp([177],{"5Bp4":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("Gu7T"),i=a.n(o),s=a("Dd8w"),l=a.n(s),n=a("NYxO"),r=a("XlQt"),m=a("z8xk"),c=a("W5Fe"),d={name:"",computed:l()({},Object(n.b)(["Height","styleCode"])),props:{},components:{hgpanel:m.default,hgbutton:r.default,hgpagination:c.default},data:function(){return{elementlist:[],ToolForm:{Ward:""},WardStore:[],TableData:[],CurrentPage:1,PageSize:20,TotalCount:0,SelectRow:{},DialogVisible:!1,ItemLoading:!1,ItemForm:{Item:"",Option:[{value:""}],Result:"",Desc:"",Standard:"",StDate:new Date,EndDate:"",rw:""},Rules:{Item:[{required:!0,message:"请填写认证项目",trigger:"blur"}],Result:[{required:!0,message:"请填写结果方法",trigger:"blur"}],StDate:[{required:!0,message:"请选择开始日期",trigger:"change",type:"date"}]},BelowItem:{OptionString:[],Option:[],Value:[],rw:""},BelowLoading:!1,Time:"",winFlag:0}},methods:{ToolFormSearch:function(){var e=this,t=(this.CurrentPage-1)*this.PageSize,a=this.PageSize;this.TableData=[],this.TotalCount=0,this.SelectRow={};var o=this.axiosConfig("web.INMDBComm","FindReAdmItemList","RecQuery","start$"+t,"limit$"+a);this.$ajax.request(o).then(function(t){t.data instanceof Object?(e.TableData=t.data.rows,e.TotalCount=parseInt(t.data.results)):e.$message({type:"error",message:"获取数据列表失败",showClose:!0,customClass:"error_class"})}).catch(function(t){e.$message({type:"error",message:"获取数据列表失败",showClose:!0,customClass:"error_class"})})},AddClick:function(){var e=this;this.winFlag=0,this.ItemForm.rw="",this.ItemForm.Option=[{value:""}],this.DialogVisible=!0,this.$nextTick(function(){e.$refs.ItemForm.resetFields()})},AddOption:function(){this.ItemForm.Option.push({value:""})},DeleteOption:function(e){this.ItemForm.Option.splice(e,1)},SaveItem:function(){var e=this;this.$refs.ItemForm.validate(function(t){if(t){var a=e.ItemForm.Item,o=e.ItemForm.Option.map(function(e){return e.value}).join("」"),i=e.ItemForm.Result,s=e.ItemForm.Desc,l=e.ItemForm.Standard,n="";e.ItemForm.StDate instanceof Date&&(n=e.ItemForm.StDate.Format("YYYY-MM-dd"));var r="";e.ItemForm.EndDate instanceof Date&&(r=e.ItemForm.EndDate.Format("YYYY-MM-dd"));var m=a+"^"+o+"^"+i+"^"+s+"^"+l+"^"+n+"^"+r+"^"+e.ItemForm.rw;e.ItemLoading=!0;var c=e.axiosConfig("web.INMDBComm","SaveReAdmItem","Method","parr$"+m);e.$ajax.request(c).then(function(t){e.ItemLoading=!1,1==t.data?(e.DialogVisible=!1,e.$message({type:"success",message:"保存成功",showClose:!0,customClass:"success_class"}),e.ToolFormSearch()):e.$message({type:"error",message:"保存失败",showClose:!0,customClass:"error_class"})}).catch(function(t){e.ItemLoading=!1,e.$message({type:"error",message:"保存失败",showClose:!0,customClass:"error_class"})})}})},LoadItemForm:function(){var e=this;this.ItemLoading=!0;var t=this.axiosConfig("web.INMDBComm","GetReAdmItem","RecMethod","id$"+this.SelectRow.rw);this.$ajax.request(t).then(function(t){e.ItemLoading=!1,t.data instanceof Object?(e.ItemForm.Item=t.data.ItemCode,e.ItemForm.Option=t.data.ItemOption?t.data.ItemOption.split("」").map(function(e){return{value:e}}):[{value:""}],e.ItemForm.Result=t.data.ItemResult,e.ItemForm.Desc=t.data.ItemDesc,e.ItemForm.Standard=t.data.ItemStandard,e.ItemForm.StDate=t.data.ItemStDate?new Date(t.data.ItemStDate):"",e.ItemForm.EndDate=t.data.ItemEndDate?new Date(t.data.ItemEndDate):"",e.ItemForm.rw=t.data.rw):(e.DialogVisible=!1,e.$message({type:"error",message:"获取记录内容失败",showClose:!0,customClass:"error_class"}))}).catch(function(t){e.ItemLoading=!1,e.DialogVisible=!1,e.$message({type:"error",message:"获取记录内容失败",showClose:!0,customClass:"error_class"})})},LoadItemBelow:function(){var e=this;this.BelowLoading=!0;var t=this.axiosConfig("web.INMDBComm","GetReAdmItem","RecMethod","id$"+this.SelectRow.rw);this.$ajax.request(t).then(function(t){t.data instanceof Object?(e.BelowItem.Option=[],e.BelowItem.OptionString=t.data.ItemOption?t.data.ItemOption.split("」"):[],e.BelowItem.Value=t.data.ItemOptionValue?t.data.ItemOptionValue.split("」").map(function(e){return e?e.split(","):[]}):t.data.ItemOption?new Array(t.data.ItemOption.split("」").length).fill([]):[],e.BelowItem.rw=t.data.rw,e.ProcessData()):(e.BelowLoading=!1,e.$message({type:"error",message:"获取记录内容失败",showClose:!0,customClass:"error_class"}))}).catch(function(t){e.BelowLoading=!1,e.$message({type:"error",message:"获取记录内容失败",showClose:!0,customClass:"error_class"})})},ProcessData:function(){var e=this,t=new Array(this.BelowItem.OptionString.length).fill([]),a=[],o=[],s=[],l=[];this.BelowItem.OptionString,this.BelowItem.OptionString.forEach(function(n,r){var m=n.split("|"),c=m[0],d=m[1];if("Local"==c)t[r]=d.split("*").map(function(e){return{value:e.split("#")[0],label:e.split("#")[1]}});else{var u=d.split("ˇ"),p=u[2].replace(/#/g,"$").split("*"),h=e.axiosConfig.apply(e,[u[0],u[1],c].concat(i()(p))),g=e.$ajax.request(h);a.push(g),o.push(c),s.push(r),l.push(u[3].split(","))}}),0==a.length?(this.BelowItem.Option=t,this.BelowLoading=!1):this.$ajax.all(a).then(this.$ajax.spread(function(){for(var a=arguments.length,i=Array(a),n=0;n<a;n++)i[n]=arguments[n];i.forEach(function(a,i){var n=s[i],r=!0;"Method"!=o[i]&&"RecMethod"!=o[i]||(r=!1),r&&a.data instanceof Object?t[n]=a.data.rows.map(function(e){return{value:e[l[i][0]],label:e[l[i][1]]}}):!r&&a.data instanceof Array?t[n]=a.data.map(function(e){return{value:e[l[i][0]],label:e[l[i][1]]}}):e.$message({type:"error",message:"获取数据失败",showClose:!0,customClass:"error_class"})}),e.BelowItem.Option=t,e.BelowLoading=!1})).catch(function(t){e.BelowLoading=!1,e.$message({type:"error",message:"获取记录内容失败",showClose:!0,customClass:"error_class"})})},SaveCheckOption:function(){var e=this,t=this.BelowItem.Value.map(function(e){return e.join(",")}).join("」")+"^"+this.BelowItem.rw;this.BelowLoading=!0;var a=this.axiosConfig("web.INMDBComm","SaveReAdmItemValue","Method","parr$"+t);this.$ajax.request(a).then(function(t){e.BelowLoading=!1,1==t.data?e.$message({type:"success",message:"保存成功",showClose:!0,customClass:"success_class"}):e.$message({type:"error",message:"保存失败",showClose:!0,customClass:"error_class"})}).catch(function(t){e.BelowLoading=!1,e.$message({type:"error",message:"保存失败",showClose:!0,customClass:"error_class"})})},RowClick:function(e,t,a){var o=this;this.SelectRow=e,this.Time&&clearTimeout(this.Time),this.Time=setTimeout(function(){o.BelowItem={OptionString:[],Option:[],Value:[],rw:""},o.LoadItemBelow()},300)},RowDblClick:function(e,t,a){var o=this;this.winFlag=1,this.SelectRow=e,this.Time&&clearTimeout(this.Time),this.ItemForm.rw="",this.DialogVisible=!0,this.$nextTick(function(){o.$refs.ItemForm.resetFields(),o.LoadItemForm()})},HandleSizeChange:function(e){this.PageSize=e,this.ToolFormSearch()},HandleCurrentChange:function(e){this.CurrentPage=e.currentPage,this.ToolFormSearch()}},created:function(){this.ToolFormSearch();var e=this.$router.currentRoute.path.slice(1,this.$router.currentRoute.path.length);this.loadElementsForRouter("elementlist",e)}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"special-readm-item-panel",staticStyle:{height:"calc(100% - 20px)",display:"flex","flex-direction":"column"}},[a("el-row",{staticStyle:{padding:"10px 12px 10px 10px"}},[a("el-col",{attrs:{span:24}},[a("hgpanel",{staticStyle:{width:"100%"},attrs:{title:e.$t("menu.SpecialReAdmItem.5ncy64llz800"),styleCode:e.styleCode,icon:"#nm-icon-paper",panelHeight:362}},[a("div",{staticClass:"top-tool-button",attrs:{slot:"tool"},slot:"tool"},[0==this.$store.state.login.LoginId||e.elementlist.itemadd?a("hgbutton",{attrs:{type:"text",issvg:e.styleCode,icon:e.styleCode?"#nm-icon-add":"nm-icon-lite-add"},on:{click:e.AddClick}},[e._v(e._s(e.$t("menu.SpecialReAdmItem.5nrnayi0z880")))]):e._e()],1),e._v(" "),a("div",{staticClass:"top-tool-table",staticStyle:{"border-bottom-right-radius":"4px","border-bottom-left-radius":"4px"}},[a("el-table",{staticClass:"re-adm-item-table",attrs:{data:e.TableData,"header-cell-style":e.headerCellFontWeight,"highlight-current-row":"",border:e.styleCode,height:e.styleCode?256:263},on:{"row-click":e.RowClick,"row-dblclick":e.RowDblClick}},[a("el-table-column",{attrs:{type:"index",align:"center",width:"40"}}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("menu.SpecialReAdmItem.5ncy64lm30c0"),prop:"ItemCode","show-overflow-tooltip":"",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("menu.SpecialReAdmItem.5ncy64lm3f80"),prop:"ItemDesc","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("menu.SpecialReAdmItem.5ncy64lm3w00"),prop:"ItemStandard","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("menu.SpecialReAdmItem.5nrnayi3ajs0"),width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{style:{color:"Y"==t.row.ItemStatus?"green":"red"}},[e._v(e._s(t.row.ItemStatusDesc))])]}}])})],1),e._v(" "),a("hgpagination",{attrs:{styleCode:e.styleCode,sizes:[20,40,50,100],totalCount:e.TotalCount,pageNumber:e.CurrentPage,pageSize:e.PageSize},on:{changePage:e.HandleCurrentChange,getPageSize:e.HandleSizeChange}})],1)])],1)],1),e._v(" "),a("el-row",{staticStyle:{padding:"0 12px 10px 10px"}},[a("el-col",{attrs:{span:24}},[a("hgpanel",{staticStyle:{width:"100%"},attrs:{title:e.$t("menu.SpecialReAdmItem.5ncy64lm73o0"),styleCode:e.styleCode,icon:"#nm-icon-paper",panelHeight:e.Height-405}},[a("div",{staticClass:"top-tool-single-bottom",attrs:{slot:"tool"},slot:"tool"},[a("hgbutton",{attrs:{type:"text",issvg:e.styleCode,icon:e.styleCode?"#nm-icon-save":"nm-icon-lite-save",disabled:!this.SelectRow.rw},on:{click:e.SaveCheckOption}},[e._v(e._s(e.$t("menu.SpecialReAdmItem.5nrnayi3dzc0")))])],1),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.BelowLoading,expression:"BelowLoading"}],staticClass:"special-readmitem-edit",attrs:{"element-loading-text":e.$t("menu.SpecialReAdmItem.5nrnayi4r7s0")}},[a("el-scrollbar",{staticStyle:{width:"99%","overflow-x":"hidden"},style:{height:e.styleCode?e.Height-477+"px":e.Height-473+"px"}},[a("div",{staticStyle:{width:"100%",display:"flex","flex-wrap":"wrap"}},e._l(e.BelowItem.Option,function(t,o){return a("hgpanel",{key:"Out"+o,staticClass:"special-hgpanel",attrs:{styleCode:e.styleCode,icon:"#nm-icon-paper",title:e.$t("menu.SpecialReAdmItem.5ncy64lpcd40")+(o+1),panelHeight:e.styleCode?216:221}},[a("div",{staticClass:"special-readmitem-edit-items"},[a("el-scrollbar",{staticStyle:{height:"180px"}},[a("el-checkbox-group",{model:{value:e.BelowItem.Value[o],callback:function(t){e.$set(e.BelowItem.Value,o,t)},expression:"BelowItem.Value[oIndex]"}},e._l(t,function(t,o){return a("el-checkbox",{key:"In"+o,staticStyle:{height:"30px","padding-left":"5px","margin-right":"0","line-height":"30px","font-size":"14px",display:"block","border-bottom":"1px solid #e0e0e0"},attrs:{label:t.value}},[e._v(e._s(t.label))])}),1)],1)],1)])}),1)])],1)])],1)],1),e._v(" "),a("el-dialog",{staticClass:"adm-item-dialog",attrs:{title:0==e.winFlag?e.$t("menu.SpecialReAdmItem.5nrnayi0z880"):e.$t("menu.SpecialReAdmItem.5nrnayi0z881"),visible:e.DialogVisible,"close-on-click-modal":!1,width:"400px"},on:{"update:visible":function(t){e.DialogVisible=t}}},[a("div",{staticClass:"dialog-header-title",attrs:{slot:"title"},slot:"title"},[e.styleCode?a("i",{class:[0==e.winFlag?"nm-icon-w-plus":"nm-icon-w-edit"]}):e._e(),e._v(" "),0==e.winFlag?a("span",[e._v(e._s(e.$t("menu.SpecialReAdmItem.5nrnayi0z880")))]):1==e.winFlag?a("span",[e._v(e._s(e.$t("menu.SpecialReAdmItem.5nrnayi0z881")))]):e._e()]),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.ItemLoading,expression:"ItemLoading"}],attrs:{"element-loading-text":e.$t("menu.SpecialReAdmItem.5nrnayi4r7s0")}},[a("el-form",{ref:"ItemForm",attrs:{model:e.ItemForm,rules:e.Rules,inline:"","label-position":"right","label-width":"110px",align:"left"}},[a("el-row",[a("el-form-item",{attrs:{label:e.$t("menu.SpecialReAdmItem.5ncy64lm30c0"),prop:"Item"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"",size:"mini"},model:{value:e.ItemForm.Item,callback:function(t){e.$set(e.ItemForm,"Item",t)},expression:"ItemForm.Item"}})],1)],1),e._v(" "),e._l(e.ItemForm.Option,function(t,o){return a("el-row",{key:o,staticStyle:{"font-size":"0"}},[a("el-form-item",{attrs:{label:e.$t("menu.SpecialReAdmItem.5ncy64lqv4k0"),prop:"Option."+o+".value"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"",size:"mini"},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"item.value"}})],1),e._v(" "),0==o?a("el-form-item",{staticStyle:{"margin-right":"0"},attrs:{"label-width":"0"}},[a("hgbutton",{attrs:{type:"text",issvg:e.styleCode,icon:e.styleCode?"#nm-icon-add":"nm-icon-lite-add"},on:{click:e.AddOption}})],1):e._e(),e._v(" "),0!=o?a("el-form-item",{attrs:{"label-width":"0"}},[a("hgbutton",{attrs:{type:"text",issvg:e.styleCode,icon:e.styleCode?"#nm-icon-cancel":"nm-icon-lite-cancel"},on:{click:function(t){return e.DeleteOption(o)}}})],1):e._e()],1)}),e._v(" "),a("el-row",[a("el-form-item",{attrs:{label:e.$t("menu.SpecialReAdmItem.5ncy64lqxi80"),prop:"Result"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"",size:"mini"},model:{value:e.ItemForm.Result,callback:function(t){e.$set(e.ItemForm,"Result",t)},expression:"ItemForm.Result"}})],1)],1),e._v(" "),a("el-row",[a("el-form-item",{attrs:{label:e.$t("menu.SpecialReAdmItem.5ncy64lm3f80"),prop:"Desc"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"",size:"mini"},model:{value:e.ItemForm.Desc,callback:function(t){e.$set(e.ItemForm,"Desc",t)},expression:"ItemForm.Desc"}})],1)],1),e._v(" "),a("el-row",[a("el-form-item",{attrs:{label:e.$t("menu.SpecialReAdmItem.5ncy64lm3w00"),prop:"Standard"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"",size:"mini"},model:{value:e.ItemForm.Standard,callback:function(t){e.$set(e.ItemForm,"Standard",t)},expression:"ItemForm.Standard"}})],1)],1),e._v(" "),a("el-row",[a("el-form-item",{attrs:{label:e.$t("menu.SpecialReAdmItem.5nrnayi948k0"),prop:"StDate"}},[a("el-date-picker",{staticStyle:{width:"200px"},attrs:{size:"mini"},model:{value:e.ItemForm.StDate,callback:function(t){e.$set(e.ItemForm,"StDate",t)},expression:"ItemForm.StDate"}})],1)],1),e._v(" "),a("el-row",[a("el-form-item",{attrs:{label:e.$t("menu.SpecialReAdmItem.5nrnayib2js0"),prop:"EndDate"}},[a("el-date-picker",{staticStyle:{width:"200px"},attrs:{size:"mini"},model:{value:e.ItemForm.EndDate,callback:function(t){e.$set(e.ItemForm,"EndDate",t)},expression:"ItemForm.EndDate"}})],1)],1)],2),e._v(" "),a("div",{staticClass:"bottom-button"},[0==this.$store.state.login.LoginId||e.elementlist.itemadd?a("hgbutton",{attrs:{type:e.styleCode?"default":"success",styleCode:e.styleCode},on:{click:e.SaveItem}},[e._v(e._s(e.$t("menu.SpecialReAdmItem.5nrnayi3dzc0")))]):e._e(),e._v(" "),a("hgbutton",{attrs:{type:"default",styleCode:e.styleCode},on:{click:function(t){e.DialogVisible=!1}}},[e._v(e._s(e.$t("menu.SpecialReAdmItem.5nrnayib4no0")))])],1)],1)])],1)},staticRenderFns:[]};var p=a("VU/8")(d,u,!1,function(e){a("dKdn")},null,null);t.default=p.exports},dKdn:function(e,t){}});