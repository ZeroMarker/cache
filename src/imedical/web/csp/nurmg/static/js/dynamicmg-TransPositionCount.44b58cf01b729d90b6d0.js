webpackJsonp([217],{P4ga:function(e,t){},WzmT:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("Dd8w"),o=a.n(r),s=a("NYxO"),n=a("zL8q"),c=a("XlQt"),i=a("W5Fe"),d=a("qfDe").create_excel,l={components:{hgbutton:c.default,hgpagination:i.default},computed:o()({},Object(s.b)(["Height","SysTomcat","LoginId","DateFormat","styleCode"])),name:"RotationProcess",data:function(){return{searchform:{StYear:new Date,EndYear:new Date,Year:new Date,Ward:"",Model:"month"},dateshow:!1,yearshow:!0,drawer:!1,statusstore:[{code:"month",desc:"月度"},{code:"quarter",desc:"季度"},{code:"year",desc:"年度"},{code:"halfyear",desc:"半年"}],RotProcessData:[],wardstore:[],elementlist:[],DetailData:[],RotProcesslist:[],row:"",column:"",datestore:[{code:"01",desc:"01月"},{code:"02",desc:"02月"},{code:"03",desc:"03月"},{code:"04",desc:"04月"},{code:"05",desc:"05月"},{code:"06",desc:"06月"},{code:"07",desc:"07月"},{code:"08",desc:"08月"},{code:"09",desc:"09月"},{code:"10",desc:"10月"},{code:"11",desc:"11月"},{code:"12",desc:"12月"}],currentPage:1,currentPageSize:20,totalCount:0}},created:function(){this.loadWardData(),this.LoadTransPositionData();var e=this.$router.currentRoute.path.slice(1,this.$router.currentRoute.path.length);this.loadElementsForRouter("elementlist",e)},methods:{loadWardData:function(){var e=this,t=e.axiosConfig("web.INMDataLimit","FindRoleWardList","RecQuery","nurseid$"+sessionStorage.getItem("loginID"));e.$ajax.request(t).then(function(t){e.wardstore=t.data.rows})},LoadTransPositionData:function(){var e=this,t="";"year"==e.searchform.Model?void 0==e.searchform.StYear&&void 0==e.searchform.EndYear||e.searchform.StYear instanceof Date&&e.searchform.EndYear instanceof Date&&(t=e.searchform.StYear.Format("YYYY")+"-01-01^"+e.searchform.EndYear.Format("YYYY")+"-12-31^"+e.searchform.Model):e.searchform.Year&&e.searchform.Year instanceof Date&&(t=e.searchform.Year.Format("YYYY")+"-01-01^"+e.searchform.Year.Format("YYYY")+"-12-31^"+e.searchform.Model),e.$ajax.request(e.axiosConfig("web.INMPersonCountComm","FindTransPositionData","RecQuery","start$"+(e.currentPage-1)*e.currentPageSize,"limit$"+e.currentPageSize,"parr$"+t,"nurseid$"+sessionStorage.loginID)).then(function(t){e.RotProcessData=new Array,e.RotProcessData=t.data.rows,e.totalCount=parseInt(t.data.results)})},TableCellStyle:function(e,t){if(this.row==e.row&&this.column==e.column)return"background-color:#ccc;"},CellClick:function(e,t){var a=this;if(void 0!=t.property){a.row=e,a.column=t;var r="",o="";"Ward"!=t.property&&("Summary"!=t.property?"year"==a.searchform.Model?(r=a.searchform.StYear.Format("YYYY")+"-01-01",o=a.searchform.EndYear.Format("YYYY")+"-12-31"):"month"==a.searchform.Model?(r=a.searchform.Year.Format("YYYY")+"-"+t.property+"-01",o=a.searchform.Year.Format("YYYY")+"-"+(parseInt(t.property)+1)+"-01"):"quarter"==a.searchform.Model?"1"==t.property?(r=a.searchform.Year.Format("YYYY")+"-01-01",o=a.searchform.Year.Format("YYYY")+"-03-31"):"2"==t.property?(r=a.searchform.Year.Format("YYYY")+"-04-01",o=a.searchform.Year.Format("YYYY")+"-06-30"):"3"==t.property?(r=a.searchform.Year.Format("YYYY")+"-07-01",o=a.searchform.Year.Format("YYYY")+"-09-30"):(r=a.searchform.Year.Format("YYYY")+"-10-01",o=a.searchform.Year.Format("YYYY")+"-12-31"):("1"==t.property&&(r=a.searchform.Year.Format("YYYY")+"-01-01",o=a.searchform.Year.Format("YYYY")+"-06-30"),"2"==t.property&&(r=a.searchform.Year.Format("YYYY")+"-07-01",o=a.searchform.Year.Format("YYYY")+"-12-31")):(r=a.searchform.Year.Format("YYYY")+"-01-01",o=a.searchform.Year.Format("YYYY")+"-12-31"));var s=e.WardId+"^"+r+"^"+o;a.$ajax.request(a.axiosConfig("web.INMPersonCountComm","FindTransPosDetailData","RecQuery","parr$"+s,"nurseid$"+sessionStorage.loginID)).then(function(e){a.DetailData=new Array,a.DetailData=e.data.rows,a.drawer=!0})}},changedate:function(){this.datestore=new Array,"year"==this.searchform.Model?(this.dateshow=!0,this.yearshow=!1,this.changedatestore()):(this.yearshow=!0,this.dateshow=!1,"month"==this.searchform.Model?this.datestore=[{code:"01",desc:"01月"},{code:"02",desc:"02月"},{code:"03",desc:"03月"},{code:"04",desc:"04月"},{code:"05",desc:"05月"},{code:"06",desc:"06月"},{code:"07",desc:"07月"},{code:"08",desc:"08月"},{code:"09",desc:"09月"},{code:"10",desc:"10月"},{code:"11",desc:"11月"},{code:"12",desc:"12月"}]:"quarter"==this.searchform.Model?this.datestore=[{code:"1",desc:"第一季度"},{code:"2",desc:"第二季度"},{code:"3",desc:"第三季度"},{code:"4",desc:"第四季度"}]:this.datestore=[{code:"1",desc:"上半年"},{code:"2",desc:"下半年"}]),this.LoadTransPositionData()},changedatestore:function(){if(void 0!=this.searchform.StYear&&void 0!=this.searchform.EndYear){if(this.searchform.StYear instanceof Date&&this.searchform.EndYear instanceof Date){this.datestore=new Array;for(var e=this.searchform.StYear.Format("YYYY"),t=this.searchform.EndYear.Format("YYYY"),a=e;a<=t;a++)this.datestore.push({code:a+"",desc:a+"年"})}this.LoadTransPositionData()}},Export:function(){var e=this,t="";"year"==e.searchform.Model?void 0==e.searchform.StYear&&void 0==e.searchform.EndYear||e.searchform.StYear instanceof Date&&e.searchform.EndYear instanceof Date&&(t=e.searchform.StYear.Format("YYYY")+"-01-01^"+e.searchform.EndYear.Format("YYYY")+"-12-31^"+e.searchform.Model):e.searchform.Year&&e.searchform.Year instanceof Date&&(t=e.searchform.Year.Format("YYYY")+"-01-01^"+e.searchform.Year.Format("YYYY")+"-12-31^"+e.searchform.Model),e.$ajax.request(e.axiosConfig("web.INMPersonCountComm","FindTransPositionData","RecQuery","parr$"+t,"nurseid$"+sessionStorage.loginID)).then(function(t){if(e.RotProcesslist=new Array,e.RotProcesslist=t.data.rows,0!=e.RotProcessData.length){for(var a=[{label:"病区",prop:"Ward",width:150}],r=0;r<e.datestore.length;r++)a.push({label:e.datestore[r].desc,prop:e.datestore[r].code,width:100});var o=n.Loading.service({fullscreen:!0,text:"拼命加载中..."}),s=new Array,c=new Array;d(a,e.RotProcesslist,s,"","export","院内调岗统计","院内调岗统计",c,o),o.close()}else e.$message({type:"warning",message:"无数据导出",showClose:!0,customClass:"warning_class"})})},handleCurrentChange:function(e){this.currentPage=e.currentPage,this.LoadTransPositionData()},handleSizeChange:function(e){this.currentPageSize=e,this.LoadTransPositionData()}}},h={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tran-pos-count-panel"},[a("div",{staticClass:"top-tool-input"},[a("el-form",{attrs:{model:e.searchform,inline:!0}},[a("el-form-item",{attrs:{label:e.$t("menu.TransPositionCount.5nrnb2j2grc0")}},[a("el-select",{staticStyle:{width:"120px"},attrs:{placeholder:e.$t("menu.TransPositionCount.5nrnb2j42ws0"),size:"mini"},on:{change:e.changedate},model:{value:e.searchform.Model,callback:function(t){e.$set(e.searchform,"Model",t)},expression:"searchform.Model"}},e._l(e.statusstore,function(e){return a("el-option",{key:e.code,attrs:{label:e.desc,value:e.code}})}),1)],1),e._v(" "),e.dateshow?a("el-form-item",{attrs:{label:e.$t("menu.TransPositionCount.5nrnb2j5u540")}},[a("el-date-picker",{staticStyle:{width:"120px"},attrs:{type:"year",size:"mini"},on:{change:e.changedatestore},model:{value:e.searchform.StYear,callback:function(t){e.$set(e.searchform,"StYear",t)},expression:"searchform.StYear"}})],1):e._e(),e._v(" "),e.dateshow?a("el-form-item",{attrs:{label:e.$t("menu.TransPositionCount.5nrnb2j790o0")}},[a("el-date-picker",{staticStyle:{width:"120px"},attrs:{type:"year",size:"mini"},on:{change:e.changedatestore},model:{value:e.searchform.EndYear,callback:function(t){e.$set(e.searchform,"EndYear",t)},expression:"searchform.EndYear"}})],1):e._e(),e._v(" "),e.yearshow?a("el-form-item",{attrs:{label:e.$t("menu.TransPositionCount.5nrnb2j5u540")}},[a("el-date-picker",{staticStyle:{width:"120px"},attrs:{type:"year",size:"mini"},on:{change:e.changedatestore},model:{value:e.searchform.Year,callback:function(t){e.$set(e.searchform,"Year",t)},expression:"searchform.Year"}})],1):e._e(),e._v(" "),a("el-form-item",[a("hgbutton",{attrs:{type:"default",styleCode:e.styleCode,icon:"nm-icon-w-find"},on:{click:e.LoadTransPositionData}},[e._v(e._s(e.$t("menu.TransPositionCount.5nrnb2j8ebc0")))]),e._v(" "),this.elementlist.Export||0==e.LoginId?a("hgbutton",{ref:"Export",attrs:{type:"default",styleCode:e.styleCode,icon:"el-icon-download"},on:{click:e.Export}},[e._v(e._s(e.$t("menu.TransPositionCount.5nrnb2j8f380")))]):e._e()],1)],1)],1),e._v(" "),a("div",{staticClass:"top-tool-table"},[a("el-table",{ref:"RotProcessData",attrs:{data:e.RotProcessData,height:e.styleCode?e.Height-93:e.Height-91,"header-cell-style":e.headerCellFontWeight,"show-summary":!0,"cell-style":e.TableCellStyle,border:e.styleCode,"highlight-current-row":""},on:{"cell-click":e.CellClick}},[a("el-table-column",{attrs:{type:"index",width:"60",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"Ward",width:"200",label:e.$t("menu.TransPositionCount.5nrnb2j9jbc0"),"show-overflow-tooltip":""}}),e._v(" "),e._l(e.datestore,function(e){return a("el-table-column",{key:e.code,attrs:{prop:e.code,label:e.desc}})}),e._v(" "),a("el-table-column",{attrs:{prop:"Summary",width:"60",label:e.$t("menu.TransPositionCount.5nrnb2janl40"),align:"center"}})],2),e._v(" "),a("hgpagination",{attrs:{styleCode:e.styleCode,sizes:[20,40,50,100],totalCount:e.totalCount,pageNumber:e.currentPage,pageSize:e.currentPageSize},on:{changePage:e.handleCurrentChange,getPageSize:e.handleSizeChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.$t("menu.TransPositionCount.5ncy66w9ej00"),visible:e.drawer,size:"40%","with-header":!1},on:{"update:visible":function(t){e.drawer=t}}},[a("div",{staticClass:"dialog-header-title",attrs:{slot:"title"},slot:"title"},[e.styleCode?a("i",{staticClass:"nm-icon-w-paper"}):e._e(),e._v(" "),a("span",[e._v(e._s(e.$t("menu.TransPositionCount.5ncy66w9ej00")))])]),e._v(" "),a("div",{staticClass:"top-tool-dialog-table dialog-div-top-radius dialog-table-bottom-radius"},[a("el-table",{staticClass:"dialog-div-top-radius dialog-table-bottom-radius",staticStyle:{"border-bottom":"0"},attrs:{title:e.$t("menu.TransPositionCount.5ncy66w9ej00"),data:e.DetailData,height:e.Height-128,"header-cell-style":e.headerCellFontWeight,border:e.styleCode,"highlight-current-row":""}},[a("el-table-column",{attrs:{type:"index",width:"40"}}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("menu.TransPositionCount.5nrnb2jfsn80"),prop:"Person"}}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("menu.TransPositionCount.5nrnb2jhgt40"),prop:"Ward"}}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("menu.TransPositionCount.5nrnb3029sc0"),prop:"AppDate"}})],1)],1)])],1)},staticRenderFns:[]};var m=a("VU/8")(l,h,!1,function(e){a("P4ga")},null,null);t.default=m.exports}});