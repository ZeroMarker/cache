webpackJsonp([205],{aQas:function(e,t){},hk9t:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("pFYg"),i=a.n(s),n=a("Dd8w"),o=a.n(n),r=a("NYxO"),l=a("XlQt"),c=a("W5Fe"),d=a("z8xk"),u={components:{hgbutton:l.default,hgpagination:c.default,Hgpanel:d.default},computed:o()({},Object(r.b)(["Height","styleCode"])),data:function(){return{inputDesc:"",currentPage:1,currentPageSize:20,totalCount:0,currentPageOder:1,currentPageSizeOder:10,totalCountOder:0,currentPageSelectOder:1,currentPageSizeSelectOder:10,totalCountSelectOder:0,dialogVisible:!1,dialogVisible1:!1,selRow:"",hisOrdItm:"",subOrdItm:"",ordItmData:[],setSelection:[],elrowstyle:{height:"30px"},tableData:[],checkOrderItmStore:[],workRelInstruct:[],checkSelection:[],instructSelection:[],selectOption:[],ordItmValue:"",list:[],loading:!1,selOrdItmData:[],isVisiable:!1,editForm:{WorkItm:"",WorkCode:"",WorkColor:"#000000",rowid:""},rules:{WorkItm:[{required:!0,message:"请输入名称！",trigger:"blur"}],WorkCode:[{required:!0,message:"请输入代码！",trigger:"blur"}],WorkColor:[{required:!0,message:"请选择颜色！",trigger:"blur"}]},winFlag:0}},created:function(){this.FindClick()},mounted:function(){this.list=this.selOrdItmData.map(function(e){return{value:e.key,label:e.label}})},methods:{HandleCurrentChange:function(e){this.currentPage=e.currentPage,this.FindClick()},HandleSizeChange:function(e){this.currentPageSize=e,this.FindClick()},HandleCurrentChangeOder:function(e){this.currentPageOder=e.currentPage,this.GetOrdItmData()},HandleSizeChangeOder:function(e){this.currentPageSizeOder=e,this.GetOrdItmData()},HandleCurrentSelectOder:function(e){this.currentPageSelectOder=e.currentPage,this.LoadWorkLoadItmSub()},HandleSizeSelectOder:function(e){this.currentPageSizeSelectOder=e,this.LoadWorkLoadItmSub()},CheckSelectionChange:function(e){this.checkSelection=e},SetSelectionChange:function(e){this.setSelection=e},InstructSelectionChange:function(e){this.instructSelection=e},GetOrdItmData:function(){var e=this,t=e.hisOrdItm;t||(t=""),e.ordItmData=new Array;var a=(e.currentPageOder-1)*e.currentPageSizeOder,s=e.currentPageSizeOder;e.$ajax.request(e.axiosConfig("web.INMStatComm","FindOrdItm","RecQuery","ids$","input$"+t,"start$"+a,"limit$"+s)).then(function(t){e.$nextTick(function(){e.ordItmData=t.data.rows,e.totalCountOder=parseInt(t.data.results)})})},LoadWorkLoadItmSub:function(){var e=this;if(e.selRow&&e.selRow.rowid){var t=e.subOrdItm,a=(e.currentPageSelectOder-1)*e.currentPageSizeSelectOder,s=e.currentPageSizeSelectOder;e.$ajax.request(e.axiosConfig("web.INMDBComm","FindWorkLoadItmSub","RecQuery","id$"+e.selRow.rowid,"input$"+t,"start$"+a,"limit$"+s)).then(function(t){void 0!=t.data.rows&&(e.checkOrderItmStore=t.data.rows,e.totalCountSelectOder=parseInt(t.data.results))})}else e.$message({type:"warning",message:"请选择要设置的工作量项目！",showClose:!0,customClass:"warning_class"})},SecletOrdItmData:function(e){var t=this,a=e;t.selOrdItmData=[],a||(a=""),t.$ajax.request(t.axiosConfig("web.INMStatComm","FindOrdItm","RecQuery","ids$","input$"+a,"start$","limit$")).then(function(e){t.$nextTick(function(){e.data.rows.forEach(function(e){void 0!=t.selOrdItmData&&t.selOrdItmData.push({key:e.OrdId,label:e.OrdItm})}),t.list=t.selOrdItmData.map(function(e){return{value:e.key,label:e.label}}),setTimeout(function(){t.loading=!1,t.selectOption=t.list},800)})}).catch(function(e){})},IsSelectOrdItm:function(e){var t=1,a=e.OrdId;if(this.checkOrderItmStore)for(var s=0;s<this.checkOrderItmStore.length;s++){if(this.checkOrderItmStore[s].OrdId)this.checkOrderItmStore[s].OrdId==a&&(t=0)}return t},SetArcimData:function(){this.ordItmValue="",this.hisOrdItm="",this.subOrdItm="",this.ordItmData=new Array,this.selRow&&this.selRow.rowid?(this.dialogVisible1=!0,this.LoadWorkLoadItmSub(),this.GetOrdItmData()):this.$message({type:"warning",message:"请选择要设置的医嘱项目！",showClose:!0,customClass:"warning_class"})},InputChange:function(e){this.FindClick("",e)},FindClick:function(){var e=this,t=(e.currentPage-1)*e.currentPageSize,a=e.currentPageSize,s=e.axiosConfig("web.INMDBComm","FindWorkLoadItmList","RecQuery","parr$","input$"+e.inputDesc,"start$"+t,"limit$"+a);e.$ajax.request(s).then(function(t){e.tableData=t.data.rows,e.totalCount=parseInt(t.data.results),e.selRow=""}).catch(function(e){})},AddClick:function(){this.winFlag=0,this.dialogVisible=!0,this.ResetClick(),this.editForm.rowid="",this.isVisiable=!1},RowDblClick:function(e){this.winFlag=1,this.selRow=e;var t=this;if(this.isVisiable=!0,""!=e.rowid){var a=t.axiosConfig("web.INMDBComm","GetWorkLoadItm","RecMethod","id$"+e.rowid);t.$ajax.request(a).then(function(e){t.dialogVisible=!0,t.$nextTick(function(){t.$refs.form2.resetFields(),t.setForm(t.$refs.form2,t.editForm,e.data)})}).catch(function(e){})}},RowClick:function(e){this.selRow=e},DeleteClick:function(){var e=this.selRow.rowid,t=this;t.selRow&&t.selRow.rowid?t.$confirm("此操作将删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a=t.axiosConfig("web.INMDBComm","DeleteWorkLoadItm","Method","id$"+e);t.$ajax.request(a).then(function(e){"1"==e.data?(t.$message({type:"success",message:"删除成功！",showClose:!0,customClass:"success_class"}),t.FindClick()):""!=e.data&&0!=e.data?t.$message({type:"warning",message:e.data,showClose:!0,customClass:"warning_class"}):t.$message({type:"warning",message:"删除失败！",showClose:!0,customClass:"warning_class"})}).catch(function(e){t.$message({type:"warning",message:"删除失败！",showClose:!0,customClass:"warning_class"})})}).catch(function(){t.$message({type:"info",message:"已取消删除",showClose:!0,customClass:"info_class"})}):t.$message({type:"warning",message:"请选择要删除的项目！",showClose:!0,customClass:"warning_class"})},SaveClick:function(){var e=this;e.$refs.form2.validate(function(t){if(!t)return!1;var a="";for(var s in e.editForm)void 0==e.editForm[s]?e.editForm[s]="":a=a+s+"|"+e.editForm[s].toString()+"^";if(""!=a){var i=e.axiosConfig("web.INMDBComm","SaveWorkLoadItm","Method","parr$"+a);e.$ajax.request(i).then(function(t){1==t.data?(e.$message({type:"success",message:"保存成功！",showClose:!0,customClass:"success_class"}),e.dialogVisible=!1,e.FindClick()):t.data.length<100?e.$message({type:"warning",message:t.data,showClose:!0,customClass:"warning_class"}):e.$message({type:"warning",message:"保存失败！",showClose:!0,customClass:"warning_class"})}).catch(function(t){e.$message({type:"warning",message:"保存失败！",showClose:!0,customClass:"warning_class"})})}})},ResetClick:function(){var e=this;e.$nextTick(function(){e.$refs.form2.resetFields()})},CloseClic:function(){this.dialogVisible=!1},MoveLeft:function(){var e=this,t="";if(0!=e.checkSelection.length){for(var a=0;a<e.checkSelection.length;a++)t=t?t+","+e.checkSelection[a].SubRowId:e.checkSelection[a].SubRowId;e.$confirm("此操作将删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a=e.axiosConfig("web.INMDBComm","DeleteWorkLoadItmSub","Method","ids$"+t);e.$ajax.request(a).then(function(t){"1"==t.data?(e.$message({type:"success",message:"删除成功！",showClose:!0,customClass:"success_class"}),e.LoadWorkLoadItmSub()):""!=t.data&&0!=t.data?e.$message({type:"warning",message:t.data,showClose:!0,customClass:"warning_class"}):e.$message({type:"warning",message:"删除失败！",showClose:!0,customClass:"warning_class"})}).catch(function(t){e.$message({type:"warning",message:"删除失败！",showClose:!0,customClass:"warning_class"})})}).catch(function(){e.$message({type:"info",message:"已取消删除",showClose:!0,customClass:"info_class"})})}else e.$message({type:"warning",message:"请选择关联医嘱！",showClose:!0,customClass:"warning_class"})},moveRight:function(){for(var e=this,t="",a=0;a<e.setSelection.length;a++)i()("object"==e.setSelection[a])&&(t=t?t+","+e.setSelection[a].OrdId:e.setSelection[a].OrdId);if(t){var s;s="itmId|"+e.selRow.rowid+"^workRelArcim|"+t+"^";var n=e.axiosConfig("web.INMDBComm","SaveWorkRelArcim","Method","parr$"+s);e.$ajax.request(n).then(function(t){1==t.data?(e.$message({type:"success",message:"保存成功！",showClose:!0,customClass:"success_class"}),e.LoadWorkLoadItmSub()):e.$message({type:"warning",message:"保存失败，医嘱已关联！",showClose:!0,customClass:"warning_class"})}).catch(function(e){})}else e.$message({type:"warning",message:"请选择医嘱！",showClose:!0,customClass:"warning_class"})},SaveOrdItmClick:function(){var e,t=this;if(t.checkOrderItmStore!=[])for(var a=0;a<t.checkOrderItmStore.length;a++)if(t.checkOrderItmStore[a].OrdId==t.ordItmValue)return void t.$message({type:"warning",message:"关联医嘱已保存！",showClose:!0,customClass:"warning_class"});if(e=t.ordItmValue){var s;s="itmId|"+t.selRow.rowid+"^workRelInstruct|^workRelArcim|"+e+"^";var i=t.axiosConfig("web.INMDBComm","SaveWorkLoadItmSub","Method","parr$"+s);t.$ajax.request(i).then(function(e){1==e.data?(t.$message({type:"success",message:"保存成功！",showClose:!0,customClass:"success_class"}),t.LoadWorkLoadItmSub()):t.$message({type:"warning",message:"保存失败！",showClose:!0,customClass:"warning_class"})}).catch(function(e){})}else t.$message({type:"warning",message:"请选择医嘱！",showClose:!0,customClass:"warning_class"})}}},m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"medical-order-panel"},[a("div",{staticClass:"top-tool-inputDiv"},[a("el-form",{ref:"form1",attrs:{inline:!0},nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-form-item",[a("el-input",{staticStyle:{width:"140px"},attrs:{placeholder:e.$t("menu.MedicalOrder.5nrnaxe4ms40"),size:"mini"},on:{change:e.InputChange},model:{value:e.inputDesc,callback:function(t){e.inputDesc=t},expression:"inputDesc"}})],1),e._v(" "),a("el-form-item",[a("hgbutton",{attrs:{type:"default",styleCode:e.styleCode,icon:"nm-icon-w-find"},on:{click:function(t){return e.FindClick()}}},[e._v(e._s(e.$t("menu.MedicalOrder.5nrnaxe4o3o0")))])],1)],1)],1),e._v(" "),a("div",{staticClass:"top-tool-button"},[a("hgbutton",{ref:"workloaditmadd",attrs:{type:"text",issvg:e.styleCode,icon:e.styleCode?"#nm-icon-add":"nm-icon-lite-add"},on:{click:function(t){return e.AddClick()}}},[e._v(e._s(e.$t("menu.MedicalOrder.5nrnaxe4p0g0")))]),e._v(" "),a("hgbutton",{attrs:{type:"text",issvg:e.styleCode,icon:e.styleCode?"#nm-icon-cancel":"nm-icon-lite-cancel"},on:{click:e.DeleteClick}},[e._v(e._s(e.$t("menu.MedicalOrder.5nrnaxe4pf40")))]),e._v(" "),a("hgbutton",{attrs:{type:"text",issvg:e.styleCode,icon:e.styleCode?"#nm-icon-paper-cfg":"nm-icon-lite-paper-cfg"},on:{click:e.SetArcimData}},[e._v(e._s(e.$t("menu.MedicalOrder.5ncy647jutg0")))])],1),e._v(" "),a("div",{staticClass:"top-tool-table"},[a("el-table",{attrs:{data:e.tableData,height:e.styleCode?e.Height-130:e.Height-124,border:e.styleCode,"header-cell-style":e.headerCellFontWeight,"highlight-current-row":"",align:"left",label:e.$t("menu.MedicalOrder.5nrnaxe63800")},on:{"row-dblclick":e.RowDblClick,"row-click":e.RowClick}},[a("el-table-column",{attrs:{type:"index",align:"center",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("menu.MedicalOrder.5nrnaxe78gc0"),prop:"WorkItm",align:"left"}}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("menu.MedicalOrder.5nrnaxe94ew0"),prop:"WorkCode",align:"left"}}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("menu.MedicalOrder.5nrnaxeaq9g0"),width:"200px",prop:"WorkColor",align:"left"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("el-tag",{directives:[{name:"show",rawName:"v-show",value:e.row.WorkColor,expression:"scope.row.WorkColor"}],staticStyle:{width:"50px","vertical-align":"middle"},attrs:{color:e.row.WorkColor,size:"mini"}})]}}])})],1),e._v(" "),a("hgpagination",{attrs:{styleCode:e.styleCode,sizes:[20,40,50,100],totalCount:e.totalCount,pageNumber:e.currentPage,pageSize:e.currentPageSize},on:{changePage:e.HandleCurrentChange,getPageSize:e.HandleSizeChange}})],1),e._v(" "),a("div",[a("el-dialog",{attrs:{title:0==e.winFlag?e.$t("menu.MedicalOrder.5nrnaxe4p0g0"):e.$t("menu.MedicalOrder.5nrnaxe4p0g1"),visible:e.dialogVisible,"close-on-click-modal":!1,align:"center",size:"mini",width:"350px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticClass:"dialog-header-title",attrs:{slot:"title"},slot:"title"},[e.styleCode?a("i",{class:[0==e.winFlag?"nm-icon-w-plus":"nm-icon-w-edit"]}):e._e(),e._v(" "),0==e.winFlag?a("span",[e._v(e._s(e.$t("menu.MedicalOrder.5nrnaxe4p0g0")))]):1==e.winFlag?a("span",[e._v(e._s(e.$t("menu.MedicalOrder.5nrnaxe4p0g1")))]):e._e()]),e._v(" "),a("el-form",{ref:"form2",attrs:{model:e.editForm,rules:e.rules,"label-position":"right","label-width":"103px",inline:!0,align:"left"}},[a("el-form-item",{attrs:{label:e.$t("menu.MedicalOrder.5nrnaxe78gc0"),prop:"WorkItm"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:e.$t("menu.MedicalOrder.5nrnaxefpuc0"),size:"mini"},model:{value:e.editForm.WorkItm,callback:function(t){e.$set(e.editForm,"WorkItm",t)},expression:"editForm.WorkItm"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("menu.MedicalOrder.5nrnaxe94ew0"),prop:"WorkCode"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{disabled:e.isVisiable,size:"mini"},model:{value:e.editForm.WorkCode,callback:function(t){e.$set(e.editForm,"WorkCode",t)},expression:"editForm.WorkCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("menu.MedicalOrder.5nrnaxeaq9g0"),prop:"WorkColor"}},[a("el-color-picker",{attrs:{size:"mini"},model:{value:e.editForm.WorkColor,callback:function(t){e.$set(e.editForm,"WorkColor",t)},expression:"editForm.WorkColor"}})],1)],1),e._v(" "),a("div",{staticClass:"bottom-button"},[a("hgbutton",{directives:[{name:"intervalclick",rawName:"v-intervalclick",value:{func:e.SaveClick,time:500},expression:"{func:SaveClick,time:500}"}],attrs:{type:e.styleCode?"default":"success",styleCode:e.styleCode}},[e._v(e._s(e.$t("menu.MedicalOrder.5nrnaxej9280")))]),e._v(" "),a("hgbutton",{attrs:{type:"default",styleCode:e.styleCode},on:{click:function(t){e.dialogVisible=!1}}},[e._v(e._s(e.$t("menu.MedicalOrder.5nrnaxej9qo0")))])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.$t("menu.MedicalOrder.5ncy647k6o00"),visible:e.dialogVisible1,"close-on-click-modal":!1,width:"1300px",top:"3%"},on:{"update:visible":function(t){e.dialogVisible1=t}}},[a("div",{staticClass:"dialog-header-title",attrs:{slot:"title"},slot:"title"},[e.styleCode?a("i",{staticClass:"nm-icon-w-paper"}):e._e(),e._v(" "),a("span",[e._v(e._s(e.$t("menu.MedicalOrder.5ncy647k6o00")))])]),e._v(" "),a("el-row",{staticStyle:{"padding-right":"2px"}},[a("el-col",{attrs:{span:12}},[a("hgpanel",{staticStyle:{width:"100%"},attrs:{title:e.$t("menu.MedicalOrder.5ncy647k8rk0"),styleCode:e.styleCode,icon:"#nm-icon-paper",panelHeight:561}},[a("div",{staticClass:"top-tool-input",attrs:{slot:"tool"},slot:"tool"},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",[a("el-input",{staticStyle:{width:"140px"},attrs:{size:"mini",placeholder:e.$t("menu.MedicalOrder.5nrnaxekei40")},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.GetOrdItmData(t)}},model:{value:e.hisOrdItm,callback:function(t){e.hisOrdItm=t},expression:"hisOrdItm"}})],1),e._v(" "),a("el-form-item",[a("hgbutton",{attrs:{type:"default",styleCode:e.styleCode,icon:"nm-icon-w-find"},on:{click:e.GetOrdItmData}},[e._v(e._s(e.$t("menu.MedicalOrder.5nrnaxe4o3o0")))])],1)],1)],1),e._v(" "),a("div",{staticClass:"top-tool-table",staticStyle:{"border-bottom-left-radius":"4px","border-bottom-right-radius":"4px"}},[a("el-table",{ref:"ordItmData",staticStyle:{width:"100%"},style:{height:e.styleCode?"441px":"444px"},attrs:{data:e.ordItmData,"header-cell-style":e.headerCellFontWeight,"row-style":e.elrowstyle,"highlight-current-row":!0,border:e.styleCode},on:{"selection-change":e.SetSelectionChange}},[a("el-table-column",{attrs:{type:"index",width:"40",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{type:"selection",width:"50",align:"center",selectable:e.IsSelectOrdItm}}),e._v(" "),e._e(),e._v(" "),a("el-table-column",{attrs:{label:e.$t("menu.MedicalOrder.5nrnaxemld40"),prop:"OrdItm"}})],1),e._v(" "),a("hgpagination",{attrs:{styleCode:e.styleCode,sizes:[10,20,40,50,100],totalCount:e.totalCountOder,pageNumber:e.currentPageOder,pageSize:e.currentPageSizeOder},on:{changePage:e.HandleCurrentChangeOder,getPageSize:e.HandleSizeChangeOder}})],1)])],1),e._v(" "),a("el-col",{attrs:{span:2}},[a("div",{staticClass:"bottom-button",staticStyle:{width:"100%",height:"550px",margin:"0 auto","text-align":"center"}},[a("div",{staticStyle:{"text-align":"center"},style:{"padding-top":parseInt(275)-30+"px"}},[a("hgbutton",{attrs:{disabled:!e.setSelection||0==e.setSelection.length},on:{click:e.moveRight}},[a("i",{staticClass:"el-icon-arrow-right"})])],1),e._v(" "),a("div",{staticStyle:{"margin-top":"20px"}},[a("hgbutton",{attrs:{type:"default",styleCode:e.styleCode,disabled:!e.checkSelection||0==e.checkSelection.length},on:{click:e.MoveLeft}},[a("i",{staticClass:"el-icon-arrow-left"})])],1)])]),e._v(" "),a("el-col",{attrs:{span:10}},[a("hgpanel",{staticStyle:{width:"100%"},attrs:{title:e.$t("menu.MedicalOrder.5nrnaxeoje80"),styleCode:e.styleCode,icon:"#nm-icon-paper",panelHeight:561}},[a("div",{staticClass:"top-tool-input",attrs:{slot:"tool"},slot:"tool"},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",[a("el-input",{staticStyle:{width:"140px"},attrs:{placeholder:e.$t("menu.MedicalOrder.5nrnaxeq7300"),size:"mini"},model:{value:e.subOrdItm,callback:function(t){e.subOrdItm=t},expression:"subOrdItm"}})],1),e._v(" "),a("el-form-item",[a("hgbutton",{attrs:{type:"default",styleCode:e.styleCode,icon:"nm-icon-w-find"},on:{click:function(t){return e.LoadWorkLoadItmSub()}}},[e._v(e._s(e.$t("menu.MedicalOrder.5nrnaxe4o3o0")))])],1)],1)],1),e._v(" "),a("div",{staticClass:"top-tool-table dialog-table-bottom-radius"},[a("el-table",{ref:"checkOrderItmStore",staticStyle:{width:"100%",overflow:"hidden"},style:{height:e.styleCode?"441px":"444px"},attrs:{data:e.checkOrderItmStore,"header-cell-style":e.headerCellFontWeight,"row-style":e.elrowstyle,"highlight-current-row":!0,border:e.styleCode},on:{"selection-change":e.CheckSelectionChange}},[a("el-table-column",{attrs:{type:"index",width:"40",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{type:"selection",width:"40",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("menu.MedicalOrder.5ncy647ld800"),prop:"OrdItm"}}),e._v(" "),e._e(),e._v(" "),e._e()],1),e._v(" "),a("hgpagination",{attrs:{styleCode:e.styleCode,sizes:[10,20,40],totalCount:e.totalCountSelectOder,pageNumber:e.currentPageSelectOder,pageSize:e.currentPageSizeSelectOder},on:{changePage:e.HandleCurrentSelectOder,getPageSize:e.HandleSizeSelectOder}})],1)])],1)],1)],1)],1)])},staticRenderFns:[]};var g=a("VU/8")(u,m,!1,function(e){a("aQas")},null,null);t.default=g.exports}});