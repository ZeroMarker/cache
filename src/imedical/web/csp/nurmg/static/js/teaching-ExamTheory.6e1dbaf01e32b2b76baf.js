webpackJsonp([238],{"9hGa":function(e,t){},TPBN:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s("Dd8w"),i=s.n(n),o=s("NYxO"),l=s("XlQt"),r=s("W5Fe"),a={name:"ExamTheory",props:["releaseId","userId","examDesc","WardDR"],components:{hgbutton:l.default,hgpagination:r.default},computed:i()({},Object(o.b)(["Height","SysTomcat","styleCode"])),data:function(){return{isAnalysisFlag:!1,answerTime:"00:00:00",answerTimer:"",timerTop:50,timerRight:50,index:0,answerNum:1,problems:[],imgWidth:"400",dialogSheetVisible:!1,dialogAnalylisVisible:!1,showAnalylistFlag:!1,rightAnswerNum:"",nullAnswerNum:"",saveFlag:!1,optionTitleStore:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"]}},watch:{index:function(e,t){this.index+1>this.answerNum&&(this.answerNum=this.index+1)}},methods:{OpenAnswerSheet:function(){this.dialogSheetVisible=!0,this.StopTime()},CloseAnswerSheet:function(){this.dialogSheetVisible=!1,this.StartTime()},ToProblemClick:function(e){this.index=e,this.CloseAnswerSheet()},ToAnalysClick:function(e){var t=this,s=new Array;t.problems.forEach(function(n,i){i+1>t.answerNum||(e?1!=n.CorrectFlag&&s.push(n):s.push(n))}),0!=s.length?(t.answerNum=s.length,t.problems=s,t.dialogAnalylisVisible=!1,t.index=0):t.$message({type:"warning",message:"无相关解析",showClose:!0,customClass:"warning_class"})},OpenAnalysis:function(){var e=this,t=this.answerTime,s=e.problems[0].rw.split("||")[0],n=e.axiosConfig("web.INMTeaComm","UpdateExamTheoryTimeScore","Method","rw$"+s,"ExamTime$"+t);e.$ajax.request(n).then(function(t){e.dialogSheetVisible=!1,e.dialogAnalylisVisible=!0,e.showAnalylistFlag=!0;var s=0,n=0;e.problems.forEach(function(t,i){i+1>e.answerNum||(1==t.CorrectFlag&&(s+=1),t.rw||(n+=1))}),e.rightAnswerNum=s,e.nullAnswerNum=n}).catch(function(e){})},CloseAnalysisSheet:function(){this.dialogAnalylisVisible=!1,this.showAnalylistFlag=!1,this.BackClick()},SetAnswerClick:function(e){var t=this.problems[this.index];"S"==t.SubMode?(0==t.Result.length?t.Result.push(e):t.Result.splice(0,1,e),this.problems[this.index]=t,this.SaveProblem(!0)):(t.Result.indexOf(e)>-1?t.Result.splice(t.Result.indexOf(e),1):t.Result.push(e),this.problems[this.index]=t),this.problems[this.index].Result.sort(),this.problems[this.index].SubAnswer.sort()},SaveProblem:function(e){var t=this;if(!t.saveFlag&&!t.showAnalylistFlag){t.saveFlag=!0;var s=t.index,n=t.problems[s].rw,i=t.problems[s].SubRw,o=t.problems[s].Result.join("」"),l=t.problems[s].UsedTime,r=t.releaseId,a=t.WardDR,m="rw|"+n+"^subRw|"+i+"^Result|"+o+"^ExamTime|"+l+"^UserDR|"+t.userId+"^ReleaseDR|"+r+"^WardDR|"+a+"^ExamScore|"+t.problems[s].ExamScore+"^ProblemType|"+t.problems[s].ProblemType;m=m+"^AnswerTimes|"+t.problems[s].AnswerTimes;var c=t.axiosConfig("web.INMTeaComm","SaveExamTheory","Method","parr$"+m);t.$ajax.request(c).then(function(n){if(t.saveFlag=!1,n.data.length>100)t.$message({type:"warning",message:"后台方法错了^_^",showClose:!0,customClass:"warning_class"});else if(0==n.data.split("^")[0])t.$message({type:"warning",message:n.data.split("^")[1],showClose:!0,customClass:"warning_class"});else{if(t.problems[s].rw=n.data.split("^")[1],t.problems[s].CorrectFlag=n.data.split("^")[2],s>=t.problems.length-1)return void t.OpenAnswerSheet();e?t.index=t.index+1:t.OpenAnswerSheet()}}).catch(function(e){t.saveFlag=!1})}},GetAllProblems:function(){var e=this,t=e.releaseId,s=e.axiosConfig("web.INMTeaComm","FindExamProblemList","RecQuery","parr$"+t,"UserId$"+e.userId);e.$ajax.request(s).then(function(t){var s=t.data.rows;s&&0!=s.length?(s.map(function(e){for(var t in e)"SubUrl"!=t&&"SubOption"!=t&&"Result"!=t&&"SubAnswer"!=t||(""!=e[t]?(e[t]="SubOption"==t||"Result"==t||"SubAnswer"==t?e[t].split("」"):e[t].split(","),"Result"!=t&&"SubAnswer"!=t||"M"!=e.SubMode&&"S"!=e.SubMode||(e[t]=e[t].map(Number))):"B"==e.SubMode&&"Result"==t?e[t]=new Array(1).fill(""):e[t]=new Array),"AnswerTimes"!=t&&"UsedTime"!=t||(e[t]=parseInt(e[t]))}),e.problems=s,e.index=0,e.answerNum=1,e.StartTime()):e.$message({type:"warning",message:"未获取需要练习题目",showClose:!0,customClass:"warning_class"})}).catch(function(e){})},BeforClick:function(){0!=this.index?this.index=this.index-1:this.$message({type:"warning",message:"已跳转到本此解答第一题",showClose:!0,customClass:"warning_class"})},NextClick:function(){var e=this.index;this.problems[e].Result;if(this.showAnalylistFlag){if(this.index>=this.problems.length-1)return void this.$message({type:"warning",message:"已置最后一题",showClose:!0,customClass:"warning_class"});this.index=this.index+1}else this.SaveProblem(!0)},EndClick:function(){var e=this.index;this.problems[e].Result,this.problems[e].rw;this.SaveProblem(!1),this.OpenAnswerSheet()},BackClick:function(){this.$emit("CloseClick")},StopTime:function(){this.answerTimer&&(clearInterval(this.answerTimer),this.answerTimer="")},StartTime:function(){var e=this;this.answerTimer||(this.answerTimer=setInterval(function(){var t=e.answerTime,s=60*parseInt(t.split(":")[0])*60+60*parseInt(t.split(":")[1])+parseInt(t.split(":")[2]);s+=1;var n=parseInt(s/60/60),i=parseInt(s/60)%60,o=s%60;t=(n=n<10?"0"+n:n)+":"+(i=i<10?"0"+i:i)+":"+(o=o<10?"0"+o:o),e.answerTime=t,e.problems[e.index].UsedTime=e.problems[e.index].UsedTime+1},1e3))},TimerMouseDown:function(e){var t=this;t.$refs.timer.style.cursor="pointer";var s=t.$refs.answerContext.offsetWidth,n=t.$refs.timer.offsetWidth,i=t.$refs.timer.offsetHeight,o=t.$refs.answerContext.offsetHeight-i-3,l=s-n-3,r=e.pageY-t.timerTop,a=t.timerRight+e.pageX;t.isMoveFlag=!0,t.$refs.timer.onmousemove=function(e){if(t.isMoveFlag){var s=e.pageY-r;s=(s=s<0?0:s)>o?o:s;var n=a-e.pageX;n=(n=n<0?0:n)>l?l:n,t.timerTop=s,t.timerRight=n}}}},created:function(){var e=this;e.GetAllProblems(),e.answerTime="00:00:00",document.onmouseup=function(){e.isMoveFlag=!1}},beforeDestroy:function(){clearInterval(this.answerTimer)}},m={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"exame-theory-panel"},[s("div",{staticClass:"test_tool_div"},[s("div",{staticStyle:{"font-weight":"600",float:"left",color:"#000"}},[e._v(e._s(e.$t("menu.ExamTheory.5ncy6vkicfo0"))+e._s(e.examDesc))]),e._v(" "),s("div",{staticStyle:{float:"right"}},[s("font",{staticStyle:{color:"#6FA6FF"}},[e._v(e._s(e.index+1))]),e._v("\n            /"),s("font",[e._v(e._s(e.problems.length))]),e._v(" "),s("hgbutton",{attrs:{type:"text",issvg:e.styleCode,icon:e.styleCode?"#nm-icon-forward":"nm-icon-lite-forward"},on:{click:e.BeforClick}},[e._v(e._s(e.$t("menu.ExamTheory.5nrnc9nqqfw0")))]),e._v(" "),s("hgbutton",{attrs:{type:"text",issvg:e.styleCode,icon:e.styleCode?"#nm-icon-backward":"nm-icon-lite-backward"},on:{click:e.NextClick}},[e._v(e._s(e.$t("menu.ExamTheory.5nrnc9nqrdg0")))]),e._v(" "),e.showAnalylistFlag||e.index!=e.problems.length-1?e._e():s("hgbutton",{attrs:{type:"text",issvg:e.styleCode,icon:e.styleCode?"#nm-icon-ok":"nm-icon-lite-ok"},on:{click:e.EndClick}},[e._v(e._s(e.$t("menu.ExamTheory.5nrnc9nqs4s0")))]),e._v(" "),e.showAnalylistFlag||0==e.problems.length?s("hgbutton",{attrs:{type:"text",issvg:e.styleCode,icon:e.styleCode?"#nm-icon-back":"nm-icon-lite-back"},on:{click:e.BackClick}},[e._v(e._s(e.$t("menu.ExamTheory.5nrnc9nqshg0")))]):e._e()],1)]),e._v(" "),s("div",{ref:"answerContext",staticClass:"answer_context",style:{height:e.Height-56+"px"}},[s("div",{ref:"timer",staticClass:"timer",style:{top:e.timerTop+"px",right:e.timerRight+"px"},on:{mousedown:function(t){return e.TimerMouseDown(t)}}},[s("div",{staticClass:"title"},[e._v(e._s(e.$t("menu.ExamTheory.5nrnc9nqtrk0")))]),e._v(" "),s("div",{staticClass:"content"},[e._v(e._s(e.answerTime))])]),e._v(" "),e.problems&&e.problems.length>0?s("div",{staticStyle:{margin:"10px 10px","text-align":"left"}},[s("div",[s("span",{staticClass:"theory-title-type"},[e._v("【"+e._s("S"==e.problems[e.index].SubMode?e.$t("menu.ExamTheory.5nrnc9nrn4s0"):"M"==e.problems[e.index].SubMode?e.$t("menu.ExamTheory.5nrnc9nsbc00"):"B"==e.problems[e.index].SubMode?e.$t("menu.ExamTheory.5nrnc9nsto40"):e.$t("menu.ExamTheory.5nrnc9nt6700"))+"】")]),e._v(" "),"B"==e.problems[e.index].SubMode?e._l(e.problems[e.index].SubDesc.split("﹏﹏"),function(t,n){return s("font",{key:n},[0!=n?s("font",{staticStyle:{"text-decoration":"underline","padding-bottom":"2px",color:"#000"}},[e._v("（"+e._s(n)+"）")]):e._e(),e._v("\n                        "+e._s(t)+"\n                    ")],1)}):s("font",{staticClass:"theory-title-desc"},[e._v(e._s(e.problems[e.index].SubDesc))]),e._v(" "),e.problems[e.index].ExamScore?s("font",{staticClass:"theory-title-score"},[e._v("("+e._s(e.problems[e.index].ExamScore)+")")]):e._e(),e._v(" "),e.problems[e.index].SubSource?s("font",{staticClass:"theory-title-source"},[e._v("("+e._s(e.problems[e.index].SubSource)+")")]):e._e()],2),e._v(" "),s("div",{staticStyle:{margin:"20px 0 20px 50px"}},e._l(e.problems[e.index].SubUrl,function(t){return s("img",{key:t,attrs:{width:e.imgWidth,src:e.SysTomcat+t}})}),0),e._v(" "),e.problems[e.index].SubOption?s("div",{staticClass:"exam_theory_sub_option"},[s("ul",e._l(e.problems[e.index].SubOption,function(t,n){return s("li",{key:n},[s("span",{staticClass:"option_default",class:e.problems[e.index].Result.indexOf(n)>-1?"option_active":"",on:{click:function(t){return e.SetAnswerClick(n)}}},[e._v(e._s(e.optionTitleStore[n]))]),e._v(" "),s("font",{staticStyle:{color:"#000"}},[e._v(e._s(t))])],1)}),0)]):e._e(),e._v(" "),e.problems[e.index].Result&&"B"==e.problems[e.index].SubMode?s("div",{staticClass:"exam_theory_sub_option"},[s("ul",e._l(e.problems[e.index].Result,function(t,n){return s("li",{key:n},[e._v("\n                        （"+e._s(n+1)+"）\n                        "),s("el-input",{staticStyle:{width:"200px"},attrs:{size:"mini"},model:{value:e.problems[e.index].Result[n],callback:function(t){e.$set(e.problems[e.index].Result,n,t)},expression:"problems[index].Result[ResultIndex]"}})],1)}),0)]):e._e(),e._v(" "),"A"==e.problems[e.index].SubMode?s("div",{staticClass:"exam_theory_sub_option"},[s("el-input",{staticStyle:{width:"400px"},attrs:{type:"textarea",rows:"3",placeholder:e.$t("menu.ExamTheory.5nrnc9nva200"),size:"mini"},model:{value:e.problems[e.index].Result[0],callback:function(t){e.$set(e.problems[e.index].Result,0,t)},expression:"problems[index].Result[0]"}})],1):e._e(),e._v(" "),e.showAnalylistFlag?s("div",{staticClass:"exam_theory_sub_option"},[s("div",[s("div",{staticClass:"analysis_title"},[e._v(e._s(e.$t("menu.ExamTheory.5nrnc9nvba40")))]),e._v(" "),"A"==e.problems[e.index].SubMode?[e._v("\n                        "+e._s(e.problems[e.index].SubRefAnswer)+"\n                    ")]:"B"==e.problems[e.index].SubMode?[e._l(e.problems[e.index].SubAnswer,function(t,n){return s("font",{key:t},[e._v("\n                            （"+e._s(n+1)+"）"+e._s(t)),s("br")])}),e._v(" "),1==e.problems[e.index].CorrectFlag?s("font",[e._v(e._s(e.$t("menu.ExamTheory.5nrnc9nvd540")))]):e.problems[e.index].CorrectFlag>0?s("font",[e._v(e._s(e.$t("menu.ExamTheory.5nrnc9nvdew0")))]):s("font",[e._v(e._s(e.$t("menu.ExamTheory.5nrnc9nvdms0")))])]:[e._v(e._s(e.$t("menu.ExamTheory.5nrnc9nvdvo0"))),e._l(e.problems[e.index].SubAnswer,function(t){return s("font",{key:t,staticStyle:{color:"#64C6EA"}},[e._v("\n                            "+e._s(e.optionTitleStore[t])+"\n                        ")])}),e._v("\n                        ;\n                        "),1==e.problems[e.index].CorrectFlag?s("font",[e._v(e._s(e.$t("menu.ExamTheory.5nrnc9nvevs0")))]):s("font",[e._v(e._s(e.$t("menu.ExamTheory.5nrnc9nvf680"))),e.problems[e.index].Result&&e.problems[e.index].Result.length>0?e._l(e.problems[e.index].Result,function(t){return s("font",{key:t,staticStyle:{color:"#FF0000"}},[e._v("\n                                    "+e._s(e.optionTitleStore[t])+"\n                                ")])}):e._e(),e._v(e._s(e.$t("menu.ExamTheory.5nrnc9nvg3w0")))],2)]],2),e._v(" "),e.problems[e.index].SubAnalysis?s("div",[s("div",{staticClass:"analysis_title"},[e._v(e._s(e.$t("menu.ExamTheory.5nrnc9nvgh40")))]),e._v(" "),s("div",[e._v(e._s(e.problems[e.index].SubAnalysis))])]):e._e()]):e._e()]):e._e()]),e._v(" "),s("div",[s("el-dialog",{attrs:{title:e.$t("menu.ExamTheory.5nrnc9nwmxo0"),visible:e.dialogSheetVisible,"append-to-body":"","show-close":!1,"close-on-click-modal":!1,"custom-class":"el-dialog_tiny"},on:{"update:visible":function(t){e.dialogSheetVisible=t}}},[e.problems&&e.problems.length>0?s("div",{staticStyle:{"margin-left":"15px"}},e._l(e.problems,function(t,n){return s("span",{key:n,staticClass:"option_default",class:t.Result&&0!=t.Result.length?"option_active":"",staticStyle:{margin:"10px 10px 0 0"},on:{click:function(t){return e.ToProblemClick(n)}}},[e._v(e._s(n+1))])}),0):e._e(),e._v(" "),s("div",{staticClass:"bottom-button"},[s("hgbutton",{staticStyle:{width:"120px"},attrs:{type:"default",styleCode:e.styleCode},on:{click:e.OpenAnalysis}},[e._v(e._s(e.$t("menu.ExamTheory.5nrnc9nwpkw0")))]),e._v(" "),s("hgbutton",{attrs:{type:"default",styleCode:e.styleCode},on:{click:e.CloseAnswerSheet}},[e._v(e._s(e.$t("menu.ExamTheory.5nrnc9nwpz00")))])],1)]),e._v(" "),s("el-dialog",{attrs:{title:e.$t("menu.ExamTheory.5nrnc9nxp6c0"),visible:e.dialogAnalylisVisible,"append-to-body":"","show-close":!1,"close-on-click-modal":!1,width:"550px"},on:{"update:visible":function(t){e.dialogAnalylisVisible=t}}},[s("div",{staticStyle:{"border-bottom":"1px dashed #CFCFCF"}},[s("div",{staticStyle:{color:"#20A0FF"}},[s("i",{staticClass:"el-icon-notebook-1"}),e._v(e._s(e.$t("menu.ExamTheory.5nrnc9nxqe40")))]),e._v(" "),s("div",{staticStyle:{margin:"10px"}},[e._v(e._s(e.$t("menu.ExamTheory.5nrnc9nxr340"))+e._s(e.answerNum)+e._s(e.$t("menu.ExamTheory.5nrnc9nxr7c0"))+e._s(e.rightAnswerNum)+e._s(e.$t("menu.ExamTheory.5nrnc9nxr9s0"))+e._s(e.nullAnswerNum)+e._s(e.$t("menu.ExamTheory.5nrnc9nxrcg0"))+e._s(e.answerTime))])]),e._v(" "),e.problems&&e.problems.length>0?s("div",{staticStyle:{margin:"10px 0 0 10px"}},[s("span",{staticStyle:{color:"#20A0FF"}},[s("i",{staticClass:"el-icon-s-grid"}),e._v(e._s(e.$t("menu.ExamTheory.5nrnc9nwmxo0")))]),s("br"),e._v(" "),e._l(e.answerNum,function(t){return s("span",{key:t,staticClass:"option_default",class:1==e.problems[t-1].CorrectFlag?"option_active":e.problems[t-1].rw?"option_error":"",staticStyle:{margin:"10px 10px 0 0"}},[e._v(e._s(t))])})],2):e._e(),e._v(" "),s("div",{staticClass:"bottom-button"},[s("hgbutton",{staticStyle:{width:"120px"},attrs:{type:"default",styleCode:e.styleCode},on:{click:function(t){return e.ToAnalysClick(!1)}}},[e._v(e._s(e.$t("menu.ExamTheory.5nrnc9nxti40")))]),e._v(" "),s("hgbutton",{staticStyle:{width:"120px"},attrs:{type:"default",styleCode:e.styleCode},on:{click:function(t){return e.ToAnalysClick(!0)}}},[e._v(e._s(e.$t("menu.ExamTheory.5nrnc9nxtwk0")))]),e._v(" "),s("hgbutton",{attrs:{type:"default",styleCode:e.styleCode},on:{click:e.CloseAnalysisSheet}},[e._v(e._s(e.$t("menu.ExamTheory.5nrnc9nxu7s0")))])],1)])],1)])},staticRenderFns:[]};var c=s("VU/8")(a,m,!1,function(e){s("9hGa")},null,null);t.default=c.exports}});