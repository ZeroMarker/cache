webpackJsonp([107,19,112],{"2N8g":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r("woOf"),n=r.n(i),o=r("mvHQ"),a=r.n(o),l=r("9eQB"),c=r("6WKJ"),u={name:"DhcDictSelector",data:function(){return{dictList:[],sourceList:[],initFlag:!0,defaultAction:{ClassName:"web.INMDBComm",MethodName:"FindPubCode",MethodType:"Query"}}},props:{value:[String,Array],queryParam:Object,filterField:{type:Array,default:function(){return["SubDesc"]}},triggerChange:{type:Boolean},dictCode:{type:String},dictKey:String,dictLabel:{type:String,default:"SubDesc"},dictValue:{type:Array,default:function(){return["SubValue"]}},dictData:Array,disabled:Boolean,placeholder:{type:String,default:"请选择列表值"},size:{type:String,default:"mini"},multiple:{type:Boolean},defaultFirstOption:{type:Boolean},filterable:{type:Boolean,default:!0},clearable:{type:Boolean,default:!0}},watch:{dictData:{immediate:!0,handler:function(e){e&&e.length&&(this.dictList=e,this.sourceList=e)}},dictCode:{immediate:!0,handler:function(e){e&&this.loadDict()}},queryParam:{immediate:!0,handler:function(e,t){e&&a()(e)!==a()(t)&&this.loadDict()}},multiple:{immediate:!0,handler:function(e){e&&(this.val=[])}}},computed:{val:{get:function(){return this.value},set:function(e){this.$emit("input",e)}},currentDictKey:function(){return this.dictKey||this.dictValue[0]},isCustomApi:function(){return Object(c.isNotEmptyObject)(this.queryParam)&&!this.dictCode}},created:function(){},mounted:function(){},methods:{loadDict:function(){var e=this,t={};this.isCustomApi?n()(t,this.queryParam):n()(t,this.defaultAction,{type:this.dictCode}),this.asyncRequest(t).then(function(t){e.dictList=t.data.rows,e.sourceList=t.data.rows}).catch(function(t){e.$message.error("字典请求网络异常")})},handleChange:function(e){this.val=e,this.triggerChange?this.$emit("change",e):this.$emit("input",e)},handleValue:function(e){var t="",r=[];return this.dictValue&&this.dictValue.length>0&&(this.dictValue.forEach(function(t){return r.push(e[t])}),t=r.join(l.DELIMITER.Caret)),t},filterMethod:function(e){var t=this;this.dictList=e?this.sourceList.filter(function(r){return"[object string]"===Object.prototype.toString.call(r).toLowerCase()?r.includes(e):Object(c.isNotEmptyArray)(t.filterField)?t.checkInObjectWithFields(e,r,t.filterField):void 0}):this.sourceList},handleClear:function(e){this.filterMethod(e)},checkInObjectWithFields:function(e,t,r){var i=!1;for(var n in t)t.hasOwnProperty(n)&&r.includes(n)&&(i=i||t[n].includes(e.toUpperCase()));return i}}},s={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-select",e._b({attrs:{value:e.val,"default-first-option":e.defaultFirstOption,filterable:e.filterable,disabled:e.disabled,clearable:e.clearable,size:e.size,placeholder:e.placeholder,multiple:e.multiple},on:{change:e.handleChange}},"el-select",e.$attrs,!1),e._l(e.dictList,function(t){return r("el-option",{key:t[e.currentDictKey],attrs:{label:t[e.dictLabel],value:e.handleValue(t)}})}),1)},staticRenderFns:[]},d=r("VU/8")(u,s,!1,null,null,null);t.default=d.exports},"5Mhd":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r("woOf"),n=r.n(i),o=r("BO1k"),a=r.n(o),l=r("Dd8w"),c=r.n(l),u=r("2N8g"),s=r("XlQt"),d=r("NYxO"),p={name:"NurQueryForm",components:{NurDictSelect:u.default,hgbutton:s.default},computed:c()({},Object(d.b)(["styleCode"])),data:function(){return{model:{}}},created:function(){},props:{rules:{type:Object,default:function(){}},formItems:{type:Array,default:function(){return[]}}},watch:{formItems:{immediate:!0,handler:function(e){e.length&&this.initModel()}}},methods:{initModel:function(){var e=!0,t=!1,r=void 0;try{for(var i,n=a()(this.formItems);!(e=(i=n.next()).done);e=!0){var o=i.value;"normalInput"===o.comp?this.$set(this.model,o.prop,""):this.isDatePicker(o.comp)?this.$set(this.model,o.prop,""):"normalSelect"===o.comp?this.$set(this.model,o.prop,""):"normalCheckbox"===o.comp&&this.$set(this.model,o.prop,[])}}catch(e){t=!0,r=e}finally{try{!e&&n.return&&n.return()}finally{if(t)throw r}}},handleQuery:function(){var e=this;this.$refs.queryForm.validate(function(t){if(t){var r=e.packQueryParam();e.$emit("query",r)}})},isDatePicker:function(e){return["yearPicker","monthPicker","datePicker","dateRange"].includes(e)},getDateType:function(e){var t="date";switch(e){case"yearPicker":t="year";break;case"monthPicker":t="month";break;case"dateRange":t="daterange";break;default:t="date"}return t},getProps:function(e){var t=n()({},e);return delete t.width,t.placeholder="请填写"+t.label,t.clearable=!0,"normalSelect"===t.comp&&(delete t.options,t.placeholder="请选择"+t.label),this.isDatePicker(t.comp)&&(t.type=this.getDateType(t.comp),t.popperClass="nur-date-picker",t.placeholder="请选择"+t.label),t.size="mini",delete t.comp,delete t.label,delete t.prop,t},packQueryParam:function(){var e=this,t=[],r=void 0,i=[{comp:"yearPicker",format:"YYYY"},{comp:"monthPicker",format:"YYYY-MM"},{comp:"datePicker",format:"YYYY-MM-dd"}],n=function(n){var o=i.find(function(e){return e.comp===n.comp});r=e.model[n.prop],o&&(r=r instanceof Date?r.Format(o.format):r,e.model[n.prop]=r instanceof Date?r.Format(o.format):r),"dateRange"===n.comp&&(r=r.map(function(e){return e.format("YYYY-MM-DD")}).join(),e.model[n.prop]=r.map(function(e){return e.format("YYYY-MM-DD")}).join()),t.push(r)},o=!0,l=!1,c=void 0;try{for(var u,s=a()(this.formItems);!(o=(u=s.next()).done);o=!0){n(u.value)}}catch(e){l=!0,c=e}finally{try{!o&&s.return&&s.return()}finally{if(l)throw c}}return this.model}}},f={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-form",{ref:"queryForm",attrs:{model:e.model,rules:e.rules,inline:!0,"label-position":"left"},nativeOn:{submit:function(e){e.preventDefault()}}},[e._l(e.formItems,function(t){return r("el-form-item",{key:t.prop,attrs:{label:t.label,prop:t.prop}},["normalInput"===t.comp?r("el-input",e._b({model:{value:e.model[t.prop],callback:function(r){e.$set(e.model,t.prop,r)},expression:"model[item.prop]"}},"el-input",e.getProps(t),!1)):"normalSelect"===t.comp?r("el-select",e._b({style:{width:t.width+"px"},model:{value:e.model[t.prop],callback:function(r){e.$set(e.model,t.prop,r)},expression:"model[item.prop]"}},"el-select",e.getProps(t),!1),e._l(t.options,function(e){return r("el-option",{key:e.value,attrs:{value:e.value,label:e.label}})}),1):"nurDictSelect"===t.comp?r("nur-dict-select",e._b({model:{value:e.model[t.prop],callback:function(r){e.$set(e.model,t.prop,r)},expression:"model[item.prop]"}},"nur-dict-select",e.getProps(t),!1)):e.isDatePicker(t.comp)?r("el-date-picker",e._b({style:{width:t.width+"px"},model:{value:e.model[t.prop],callback:function(r){e.$set(e.model,t.prop,r)},expression:"model[item.prop]"}},"el-date-picker",e.getProps(t),!1)):"normalCheckbox"===t.comp?r("el-checkbox-group",e._l(e.options,function(t){return r("el-checkbox",{key:t.value,attrs:{label:t.label}},[e._v(e._s(t.label))])}),1):e._e()],1)}),e._v(" "),r("el-form-item",[r("hgbutton",{attrs:{type:"default",styleCode:e.styleCode,icon:"nm-icon-w-find",size:"mini"},on:{click:e.handleQuery}},[e._v("查询")])],1)],2)},staticRenderFns:[]};var m=r("VU/8")(p,f,!1,function(e){r("w9Ca")},"data-v-801bac3e",null);t.default=m.exports},"5PlU":function(e,t,r){var i=r("RY/4"),n=r("dSzd")("iterator"),o=r("/bQp");e.exports=r("FeBl").isIterable=function(e){var t=Object(e);return void 0!==t[n]||"@@iterator"in t||o.hasOwnProperty(i(t))}},BO1k:function(e,t,r){e.exports={default:r("fxRn"),__esModule:!0}},Xd32:function(e,t,r){r("+tPU"),r("zQR9"),e.exports=r("5PlU")},d7EF:function(e,t,r){"use strict";t.__esModule=!0;var i=o(r("us/S")),n=o(r("BO1k"));function o(e){return e&&e.__esModule?e:{default:e}}t.default=function(){return function(e,t){if(Array.isArray(e))return e;if((0,i.default)(Object(e)))return function(e,t){var r=[],i=!0,o=!1,a=void 0;try{for(var l,c=(0,n.default)(e);!(i=(l=c.next()).done)&&(r.push(l.value),!t||r.length!==t);i=!0);}catch(e){o=!0,a=e}finally{try{!i&&c.return&&c.return()}finally{if(o)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},fxRn:function(e,t,r){r("+tPU"),r("zQR9"),e.exports=r("g8Ux")},g8Ux:function(e,t,r){var i=r("77Pl"),n=r("3fs2");e.exports=r("FeBl").getIterator=function(e){var t=n(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return i(t.call(e))}},"us/S":function(e,t,r){e.exports={default:r("Xd32"),__esModule:!0}},w9Ca:function(e,t){}});