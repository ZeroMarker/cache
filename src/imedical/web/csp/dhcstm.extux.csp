<csp:content charset="UTF-8">
<SERVER>
s Action=$Get(%request.Data("actiontype",1))
s Start=$Get(%request.Data("start",1))
s Limit=$Get(%request.Data("limit",1))

i Action = "StkCatGroup" d
	.s type=$Get(%request.Data("type",1))
	.s scgSet=$Get(%request.Data("scgSet",1))
	.w ##class(web.DHCSTM.Util.DrugUtil).GetStkCatGroup(0,999,type,scgSet)
	.
i Action="GetLocStkCatGroup"  d
	.s type=$g(%request.Data("type",1))
	.s locid=$g(%request.Data("locId",1))
	.s userid=$g(%request.Data("userId",1))
	.s xLocId=$g(%request.Data("xLocId",1))
	.s drugInfo=$g(%request.Data("drugInfo",1))
	.s scgSet=$Get(%request.Data("scgSet",1))
	.w ##class(web.DHCSTM.Util.DrugUtil).GetLocStkCatGroup(type,locid,userid,xLocId,drugInfo,scgSet)
	.
///根据新版多级类组配置取值(DHC_StkLocStkCat,DHC_StkLocUserStkCat)
i Action="GetScgChildNode" d
	.s NodeId=$Get(%request.Data("NodeId",1))
	.s StrParam=$Get(%request.Data("StrParam",1))
	.s ScgType=$Get(%request.Data("type",1))
	.d ##class(web.DHCSTM.Util.DrugUtil).GetScgChildNode(NodeId,StrParam,ScgType)
	.
i Action="RowDataDelim"  d
	.w ##class(web.DHCSTM.Common.UtilCommon).RowDataDelim()
	.
i Action = "StkCat" d
	.s StkType = $Get(%request.Data("type",1))
	.s Desc = $Get(%request.Data("Desc",1))
	.w ##class(web.DHCSTM.Util.DrugUtil).GetINCSCStkGrp(StkType,0,999,Desc)
	.
i Action="GetLocStkCat"  d
	.s type=$g(%request.Data("type",1))
	.s locid=$g(%request.Data("locId",1))
	.s userid=$g(%request.Data("userId",1))
	.w ##class(web.DHCSTM.Util.DrugUtil).GetLocStkByLoc(type,locid,userid)
	.
i Action="DecimalPresion" d
	.s formatType=$g(%request.Data("formatType",1))
	.s hospId=$g(%session.Data("LOGON.HOSPID"))
	.w ##class(web.DHCSTM.Util.DrugUtil).DecLenByFmtType(formatType,hospId)
i Action = "GetBatSpFlag" d
	.s GroupId=$g(%request.Data("GroupId",1))
	.s LocId=$g(%request.Data("LocId",1))
	.s UserId=$g(%request.Data("UserId",1))
	.s ret=##class(web.DHCSTM.Common.AppCommon).GetParamCommon(GroupId,LocId,UserId)
	.w "{success:'true',info:'"_ret_"'}"

</SERVER>
