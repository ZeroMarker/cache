<html>
<head>
    <!-- Put your page Title here -->
    <title> Cache Server Page </title>

</head>
<body>
    <form action="firstcspdemo.csp">
        学号：<input name="StCode" id="StCode" type="text" >
        <input type="submit" value="搜索" id="search" >
    </form>
    <server>
    	// http://localhost:57772/imedical/web/csp/firstcspdemo.csp?StCode=1
    	// 获取请求参数中参数值,第一个参数是参数名，第二个参数是如果这个参数（比如hobby）出现多次，要取第几个hobby
    	s StCode=$g(%request.Data("StCode",1))	
    	w "<table width='500px' heigth='500px' >"
    	w "<tr><td>StRowId</td><td>学号</td><td>姓名</td><td>出生日期</td><td>性别</td></tr>"
        s rs=##class(%ResultSet).%New("User.DHCStudentGXACRUD:GetStudentList")
        if (rs)
        {
	        // 根据学号查询学生信息，如果输入的学号为空，则查询所有学生信息
	        d rs.%Execute(StCode)
	        while (rs.Next())
	        {
		        s StRowId=rs.GetDataByName("StRowId")
		        s StCode=rs.GetDataByName("StCode")
		        s StName=rs.GetDataByName("StName")
		        s StDob=rs.GetDataByName("StDob")
		        s StSex=rs.GetDataByName("StSex")
		        w "<tr><td>"_StRowId_"</td><td>"_StCode_"</td><td>"_StName_"</td><td>"_StDob_"</td><td>"_StSex_"</td></tr>"
	        }
        }
    </server>
</body>
</html>