<csp:content charset="UTF-8">
<SERVER>
 s Action=$Get(%request.Data("actiontype",1))
 s Start=$Get(%request.Data("start",1))
 s Limit=$Get(%request.Data("limit",1))
 s Sort=$Get(%request.Data("sort",1))
 s Dir=$Get(%request.Data("dir",1))
 s User=$G(%session.Data("LOGON.USERID"))

 i Action = "SumReqItm" d
 .S reqs=$Get(%request.Data("reqs",1))
 .d ##class(web.DHCSTM.DHCINIsTrfVendorManage).SumReqItm(reqs)
 .
 
 i Action="ReqList" d
 .s sd=$Get(%request.Data("StartDate",1))
 .s ed=$Get(%request.Data("EndDate",1))
 .s loc=$Get(%request.Data("LocId",1))
 .s stkgrp=$Get(%request.Data("StkGrp",1))
 .s reqtype=$Get(%request.Data("ReqType",1))
 .s partTrans=$Get(%request.Data("PartTrans",1))
 .d ##class(web.DHCSTM.DHCINIsTrfVendorManage).ReqList(Start,Limit,Sort,Dir,loc,sd,ed,stkgrp,reqtype,partTrans)
 .
 .
 
 i Action="INReqD" d
 . s Parref=$Get(%request.Data("parref",1))
 . s LocId=$Get(%request.Data("locId",1))
 .d ##class(web.DHCSTM.DHCINIsTrfVendorManage).INReqD(Start,Limit,Sort,Dir,Parref,LocId)
 .
 
 
 i Action="GetStoreId" d
 .s storeId=##class(web.DHCSTM.DHCINIsTrfVendorManage).GetStoreId()
 .w "{success:'true',info:'"_storeId_"'}"


 i Action="StoreData" d
 .s storeId=$Get(%request.Data("storeId",1))
 .s rowNO=$Get(%request.Data("rowNO",1))
 .s inci=$Get(%request.Data("inci",1))
 .s stkgrp=$Get(%request.Data("stkgrp",1))
 .s batNo=$Get(%request.Data("batNo",1))
 .s expDate=$Get(%request.Data("expDate",1))
 .s qty=$Get(%request.Data("qty",1))
 .s uom=$Get(%request.Data("uom",1))
 .s vendor=$Get(%request.Data("vendor",1))
 .s rp=$Get(%request.Data("rp",1))
 .s sp=$Get(%request.Data("sp",1))
 .s manf=$Get(%request.Data("manf",1))
 .s rqi=$Get(%request.Data("rqi",1))
 .s loc=$Get(%request.Data("loc",1))
 .s ret=##class(web.DHCSTM.DHCINIsTrfVendorManage).Store(storeId,rowNO,inci,stkgrp,batNo,expDate,qty,uom,vendor,rp,sp,manf,rqi,loc)
 .i ret=0 d
 ..w "{success:'true',info:'"_ret_"'}"
 .e  d
 ..w "{success:'false',info:'"_ret_"'}"

 i Action="Handle" d
 .s storeId=$Get(%request.Data("storeId",1))
 .s ret=##class(web.DHCSTM.DHCINIsTrfVendorManage).Handle(storeId,User)
 .i ret<0 d
 ..w "{success:'false',info:'"_ret_"'}"
 .e  d
 ..w "{success:'true',info:'"_ret_"'}"

 i Action="GetInitOfDstr" d
 .s dstr=$Get(%request.Data("dstr",1))
 .w ##class(web.DHCSTM.DHCINIsTrfVendorManage).jsInitByDstr(dstr)
 
</SERVER>
