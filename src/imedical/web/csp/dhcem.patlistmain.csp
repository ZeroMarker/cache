<csp:method name=OnPreHTTP arguments="" returntype=%Boolean>
 i ##Class(websys.SessionEvents).SessionExpired() q 1
 quit 1
</csp:method>
<!--dhcem.patlistmain.csp //-->
<!DOCTYPE html>
<html lang="en">
<head>
	<TITLE><EXTHEALTH:TRANSLATE id=title>##(%session.Get("TITLE"))##</EXTHEALTH:TRANSLATE></TITLE>
	<EXTHEALTH:HEAD></EXTHEALTH:HEAD>
	<ADDINS require="RWCard"/> 
	<HISUI/>	
	<script type="text/javascript" src="../scripts/framework/easyui-1.3.6/jquery.tabs.js" charset="utf-8"></script>
	<link href="../scripts/dhcnewpro/dhcem/css/base.css" rel="stylesheet">
	<link href="../scripts/dhcnewpro/dhcem/css/patlist.css" rel="stylesheet">
	<script type="text/javascript" src="../scripts/DHCWeb.OPCommonManageCard.js"></script>
    <script type="text/javascript" src="../scripts/DHCWeb.COMMHardManager.js"></script>
	<script type="text/javascript" src="../scripts/dhcnewpro/js/common.js"></script>
	<script type="text/javascript" src="../scripts/dhcnewpro/js/commonfun.js"></script>		
	<script type="text/javascript" src="../scripts/dhcnewpro/js/hiscomponent.js"></script>
	<script type="text/javascript" src="../scripts/dhcnewpro/dhcem/patlistmain.js"></script>
	<server>
	d ##class(web.UDHCCardCommLinkRegister).GetCardHardJSFunction()
   </server>
</head>
<body>
    <div class="container">
        <div id="pf-hd">
			<div class="pf-toolbar">
				<a href="#" class="hisui-linkbutton btn-danger" onclick="TransPatToArea('红区');">红区（*）</a>
				<a href="#" class="hisui-linkbutton btn-orange" onclick="TransPatToArea('橙区');">橙区（*）</a><!--hxy 2020-02-21-->
				<a href="#" class="hisui-linkbutton btn-warning" onclick="TransPatToArea('黄区');">黄区（*）</a>
				<a href="#" class="hisui-linkbutton btn-olive" onclick="TransPatToArea('绿区');">绿区（*）</a>
			</div>
        </div>
        <div id="pf-hc">
			<div class="pf-toolhc">
				<div class="pf-toolhc-itm">
					<label>开始日期</label>
					<input id="StartDate" class="hisui-datebox textbox">	
					<label id="emtype">病人类型</label>
					<input id="QytType" class="textbox" style="width:125px;height:30px;line-height:30px;"/>
					<label id="KeptLocLable">当前分级</label>
					<input id="CheckLev" class="textbox" style="width:110px;height:30px;line-height:30px;"/>
					<label>登记号/姓名</label><input id="TmpCondition" class="hisui-validatebox" style="width:100px;">

					<label>卡号</label><input id="EmCardNo" style="width:110px" class="hisui-validatebox">
					<input id="EmCardType" class="textbox" style="width:120px;height:30px;line-height:30px;"/>
					<a href="#" class="hisui-linkbutton" data-options="iconCls:'icon-read-white'" onclick="ReadCard()">读卡</a>
					<a href="#" class="hisui-linkbutton" data-options="iconCls:'icon-search-white'" onclick="QryEmPatList()">查询</a>
					
					<span style="display:none" id="more" class="more">更多<i class="more-bk-down"></i></span>
				</div>
				<div class="pf-toolhc-itm">
					<label>结束日期</label>
					<input id="EndDate" class="hisui-datebox textbox">
					<label id="KeptLocLable">留观病区</label>
					<input id="KeptLoc" class="textbox" style="width:125px;height:30px;line-height:30px;"/>
					<input id="PatEpiNo" name="EM" class='hisui-checkbox' type="checkbox" data-options="label:'未就诊',checked:true,onCheckChange:function(event,value){ LoadPatArrNo(event,value)}">
					<input id="PatEpiYes" name="EM" class='hisui-checkbox' type="checkbox" data-options="label:'已就诊',checked:false,onCheckChange:function(event,value){ LoadPatArrYes(event,value)}">
					<input id="PatDisEpi" class='hisui-checkbox' type="checkbox" data-options="label:'只看已离院',checked:false,onCheckChange:function(event,value){ }">
				</div>
			</div>
			
        </div>
        <div class="more-panel">
        	
        </div>
        <div id="pf-bd">
			<table id="PatList"></table>
        </div>
        <div id="PatLabWin" style="padding:3px 2px;background-color:#FFF;"></div>
    </div>
</body>
<Server>
w "<input id='ReadAccExpEncrypt' name='InsuPatTypeCheck' type='hidden' value='"_##Class(%CSP.Page).Encrypt($lb("web.UDHCAccManageCLSIF.getaccinfofromcardno"))_"'>",$C(13,10)
w "<input id='GetCardTypeEncrypt' name='GetCardTypeEncrypt' type='hidden' value='"_##Class(%CSP.Page).Encrypt($lb("DHCDoc.OPDoc.PatientList.GessCardType"))_"'>",$C(13,10)
d ##class(web.UDHCCardCommLinkRegister).GetCardHardJSFunction()
w "<input id='ReadCardTypeEncrypt' name='GetCardTypeEncrypt' type='hidden' value='"_##Class(%CSP.Page).Encrypt($lb("web.UDHCOPOtherLB.ReadCardTypeDefineListBroker"))_"'>",$C(13,10)
</Server> 
</html>
