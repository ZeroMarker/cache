<csp:method name=OnPreHTTP arguments="" returntype=%Boolean>
	i ##Class(websys.SessionEvents).SessionExpired() q 1
	q 1
</csp:method>
<csp:content charset="UTF-8">
<script language="cache" runat="server">
s Action=$Get(%request.Data("actiontype",1))
//²éÑ¯
if Action="Query" d
 .d ##class(web.DHCSTM.InciParamRecord).Query()
 //±£´æ
 if Action="Save" d
 .s listdata=$Get(%request.Data("datas",1))
 .s result=##class(web.DHCSTM.InciParamRecord).Save(listdata)
 .if result="" d
 ..w "{success:'true',info:''}"
 .e  d
 ..w "{success:'false',info:'"_result_"'}"
 
 //É¾³ý
 if Action="delete" d
 .s rowid=$Get(%request.Data("rowid",1))
 .s result=##class(web.DHCSTM.InciParamRecord).delete(rowid)
 .if result=0 d
 ..w "{success:'true',info:''}"
 .e  d
 ..w "{success:'false',info:'"_result_"'}"
</script>