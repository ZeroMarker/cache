<csp:content charset="UTF-8">
<csp:method name=OnPreHTTP arguments="" returntype=%Boolean>
	i ##Class(websys.SessionEvents).SessionExpired() q 1
	q 1
</csp:method>
<csp:content charset="UTF-8">

<script language="cache" runat="server">

	s Action=$Get(%request.Data("actiontype",1))
	s Start=$Get(%request.Data("start",1))
	s Limit=$Get(%request.Data("limit",1))
	s Sort=$Get(%request.Data("sort",1))
	s Dir=$Get(%request.Data("dir",1))

	
	i Action = "Save" d
	.s DGGroupDR=$Get(%request.Data("DGGroupDR",1))
	.s DicGroup=##class(User.DHCDicGroup).%New()
	.s DicGroup.DGBrand=$Get(%request.Data("DGBrand",1))
	.s DicGroup.DGCertNo=$Get(%request.Data("DGCertNo",1))
	.s DicGroup.DGChargeType=$Get(%request.Data("DGChargeType",1))
	.s DicGroup.DGCode=$Get(%request.Data("DGCode",1))
	.s DicGroup.DGDesc=$Get(%request.Data("DGDesc",1))
	.s DicGroup.DGHVFlag=$Get(%request.Data("DGHVFlag",1))
	.s DicGroup.DGItmSA=$Get(%request.Data("DGItmSA",1))
	.s DicGroup.DGMBusinessReg=$Get(%request.Data("DGMBusinessReg",1))
	.s DicGroup.DGMCert=$Get(%request.Data("DGMCert",1))
	.s DicGroup.DGMComLic=$Get(%request.Data("DGMComLic",1))
	.s DicGroup.DGMMatManLic=$Get(%request.Data("DGMMatManLic",1))
	.s DicGroup.DGMMatProduct=$Get(%request.Data("DGMMatProduct",1))
	.s DicGroup.DGMOrgCode=$Get(%request.Data("DGMOrgCode",1))
	.s DicGroup.DGPbManf=$Get(%request.Data("DGPbManf",1))
	.s DicGroup.DGPbRp=$Get(%request.Data("DGPbRp",1))
	.s DicGroup.DGPbVendor=$Get(%request.Data("DGPbVendor",1))
	.s DicGroup.DGProvLoc=$Get(%request.Data("DGProvLoc",1))
	.s DicGroup.DGPruPic=$Get(%request.Data("DGPruPic",1))
	.s DicGroup.DGScg=$Get(%request.Data("DGScg",1))
	.s DicGroup.DGSp=$Get(%request.Data("DGSp",1))
	.s DicGroup.DGSpec=$Get(%request.Data("DGSpec",1))
	.s DicGroup.DGStkcat=$Get(%request.Data("DGStkcat",1))
	.s DicGroup.DGUom=$Get(%request.Data("DGUom",1))
	.s DicGroup.DGVAgentlic=$Get(%request.Data("DGVAgentlic",1))
	.s DicGroup.DGVComlic=$Get(%request.Data("DGVComlic",1))
	.s DicGroup.DGVGsp=$Get(%request.Data("DGVGsp",1))
	.s DicGroup.DGVImpenrol=$Get(%request.Data("DGVImpenrol",1))
	.s DicGroup.DGVImplic=$Get(%request.Data("DGVImplic",1))
	.s DicGroup.DGVLic=$Get(%request.Data("DGVLic",1))
	.s DicGroup.DGVMatenrol=$Get(%request.Data("DGVMatenrol",1))
	.s DicGroup.DGVMatmanlic=$Get(%request.Data("DGVMatmanlic",1))
	.s DicGroup.DGVMatpro=$Get(%request.Data("DGVMatpro",1))
	.s DicGroup.DGVOrgcode=$Get(%request.Data("DGVOrgcode",1))
	.s DicGroup.DGVPropermit=$Get(%request.Data("DGVPropermit",1))
	.s DicGroup.DGVQuality=$Get(%request.Data("DGVQuality",1))
	.s DicGroup.DGVRevreg=$Get(%request.Data("DGVRevreg",1))
	.s DicGroup.DGVSales=$Get(%request.Data("DGVSales",1))
	.s DicGroup.DGVSanitation=$Get(%request.Data("DGVSanitation",1))
	.s DicGroup.DGHospAllowed=$Get(%request.Data("DGHospAllowed",1))
	.s DicGroup.DGPruCommonPic=$Get(%request.Data("DGPruCommonPic",1))
	.s DicGroup.DGPruDocumentPic=$Get(%request.Data("DGPruDocumentPic",1))
	.s ret=##class(web.DHCSTM.DicGroup).Save(DicGroup,DGGroupDR)
	.i ret=0 d
	..w "{""success"":""true"",""info"":"""_ret_"""}"
	.e  d
	..w "{""success"":""false"",""info"":"""_ret_"""}"
	
	i Action = "LoadData" d
	.s DGGroupDR=$Get(%request.Data("DGGroupDR",1))
	.w ##class(web.DHCSTM.DicGroup).LoadData(DGGroupDR)

///获取供应链信息
i Action="GetItmChainInfo" d
	.s inci=$Get(%request.Data("inci",1))
	.s StrParam=$Get(%request.Data("StrParam",1))
	.d ##class(web.DHCSTM.DicGroup).GetItmChainInfo(inci,StrParam)
	.
</script>